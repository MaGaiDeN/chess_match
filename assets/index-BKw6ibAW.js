var fk=Object.defineProperty;var pk=(t,e,n)=>e in t?fk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ar=(t,e,n)=>pk(t,typeof e!="symbol"?e+"":e,n);function gk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kT={exports:{}},rp={},RT={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=Symbol.for("react.element"),yk=Symbol.for("react.portal"),_k=Symbol.for("react.fragment"),wk=Symbol.for("react.strict_mode"),Ek=Symbol.for("react.profiler"),Tk=Symbol.for("react.provider"),Ik=Symbol.for("react.context"),Sk=Symbol.for("react.forward_ref"),bk=Symbol.for("react.suspense"),Ck=Symbol.for("react.memo"),Ak=Symbol.for("react.lazy"),W0=Symbol.iterator;function xk(t){return t===null||typeof t!="object"?null:(t=W0&&t[W0]||t["@@iterator"],typeof t=="function"?t:null)}var DT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OT=Object.assign,NT={};function cc(t,e,n){this.props=t,this.context=e,this.refs=NT,this.updater=n||DT}cc.prototype.isReactComponent={};cc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function LT(){}LT.prototype=cc.prototype;function Kv(t,e,n){this.props=t,this.context=e,this.refs=NT,this.updater=n||DT}var Gv=Kv.prototype=new LT;Gv.constructor=Kv;OT(Gv,cc.prototype);Gv.isPureReactComponent=!0;var K0=Array.isArray,MT=Object.prototype.hasOwnProperty,Qv={current:null},VT={key:!0,ref:!0,__self:!0,__source:!0};function jT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)MT.call(e,r)&&!VT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ch,type:t,key:s,ref:o,props:i,_owner:Qv.current}}function Pk(t,e){return{$$typeof:ch,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ch}function kk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var G0=/\/+/g;function hg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kk(""+t.key):e.toString(36)}function Rd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ch:case yk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hg(o,0):r,K0(i)?(n="",t!=null&&(n=t.replace(G0,"$&/")+"/"),Rd(i,e,n,"",function(u){return u})):i!=null&&(Yv(i)&&(i=Pk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(G0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",K0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+hg(s,a);o+=Rd(s,e,n,l,i)}else if(l=xk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+hg(s,a++),o+=Rd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nd(t,e,n){if(t==null)return t;var r=[],i=0;return Rd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Rk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $n={current:null},Dd={transition:null},Dk={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:Dd,ReactCurrentOwner:Qv};function FT(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:nd,forEach:function(t,e,n){nd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nd(t,function(){e++}),e},toArray:function(t){return nd(t,function(e){return e})||[]},only:function(t){if(!Yv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=cc;De.Fragment=_k;De.Profiler=Ek;De.PureComponent=Kv;De.StrictMode=wk;De.Suspense=bk;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dk;De.act=FT;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=OT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Qv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)MT.call(e,l)&&!VT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ch,type:t.type,key:i,ref:s,props:r,_owner:o}};De.createContext=function(t){return t={$$typeof:Ik,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tk,_context:t},t.Consumer=t};De.createElement=jT;De.createFactory=function(t){var e=jT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:Sk,render:t}};De.isValidElement=Yv;De.lazy=function(t){return{$$typeof:Ak,_payload:{_status:-1,_result:t},_init:Rk}};De.memo=function(t,e){return{$$typeof:Ck,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=Dd.transition;Dd.transition={};try{t()}finally{Dd.transition=e}};De.unstable_act=FT;De.useCallback=function(t,e){return $n.current.useCallback(t,e)};De.useContext=function(t){return $n.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return $n.current.useDeferredValue(t)};De.useEffect=function(t,e){return $n.current.useEffect(t,e)};De.useId=function(){return $n.current.useId()};De.useImperativeHandle=function(t,e,n){return $n.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return $n.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return $n.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return $n.current.useMemo(t,e)};De.useReducer=function(t,e,n){return $n.current.useReducer(t,e,n)};De.useRef=function(t){return $n.current.useRef(t)};De.useState=function(t){return $n.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return $n.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return $n.current.useTransition()};De.version="18.3.1";RT.exports=De;var N=RT.exports;const cm=vk(N),Ok=gk({__proto__:null,default:cm},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=N,Lk=Symbol.for("react.element"),Mk=Symbol.for("react.fragment"),Vk=Object.prototype.hasOwnProperty,jk=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fk={key:!0,ref:!0,__self:!0,__source:!0};function UT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Vk.call(e,r)&&!Fk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Lk,type:t,key:s,ref:o,props:i,_owner:jk.current}}rp.Fragment=Mk;rp.jsx=UT;rp.jsxs=UT;kT.exports=rp;var v=kT.exports,$T={exports:{}},gr={},BT={exports:{}},zT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,he){var B=X.length;X.push(he);e:for(;0<B;){var Me=B-1>>>1,Re=X[Me];if(0<i(Re,he))X[Me]=he,X[B]=Re,B=Me;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var he=X[0],B=X.pop();if(B!==he){X[0]=B;e:for(var Me=0,Re=X.length,Be=Re>>>1;Me<Be;){var st=2*(Me+1)-1,kt=X[st],Ge=st+1,fe=X[Ge];if(0>i(kt,B))Ge<Re&&0>i(fe,kt)?(X[Me]=fe,X[Ge]=B,Me=Ge):(X[Me]=kt,X[st]=B,Me=st);else if(Ge<Re&&0>i(fe,B))X[Me]=fe,X[Ge]=B,Me=Ge;else break e}}return he}function i(X,he){var B=X.sortIndex-he.sortIndex;return B!==0?B:X.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,p=null,m=3,w=!1,E=!1,x=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(X){for(var he=n(u);he!==null;){if(he.callback===null)r(u);else if(he.startTime<=X)r(u),he.sortIndex=he.expirationTime,e(l,he);else break;he=n(u)}}function M(X){if(x=!1,I(X),!E)if(n(l)!==null)E=!0,Ut(z);else{var he=n(u);he!==null&&Ye(M,he.startTime-X)}}function z(X,he){E=!1,x&&(x=!1,A(C),C=-1),w=!0;var B=m;try{for(I(he),p=n(l);p!==null&&(!(p.expirationTime>he)||X&&!L());){var Me=p.callback;if(typeof Me=="function"){p.callback=null,m=p.priorityLevel;var Re=Me(p.expirationTime<=he);he=t.unstable_now(),typeof Re=="function"?p.callback=Re:p===n(l)&&r(l),I(he)}else r(l);p=n(l)}if(p!==null)var Be=!0;else{var st=n(u);st!==null&&Ye(M,st.startTime-he),Be=!1}return Be}finally{p=null,m=B,w=!1}}var W=!1,P=null,C=-1,k=5,O=-1;function L(){return!(t.unstable_now()-O<k)}function j(){if(P!==null){var X=t.unstable_now();O=X;var he=!0;try{he=P(!0,X)}finally{he?D():(W=!1,P=null)}}else W=!1}var D;if(typeof T=="function")D=function(){T(j)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,St=mt.port2;mt.port1.onmessage=j,D=function(){St.postMessage(null)}}else D=function(){R(j,0)};function Ut(X){P=X,W||(W=!0,D())}function Ye(X,he){C=R(function(){X(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){E||w||(E=!0,Ut(z))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var he=3;break;default:he=m}var B=m;m=he;try{return X()}finally{m=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var B=m;m=X;try{return he()}finally{m=B}},t.unstable_scheduleCallback=function(X,he,B){var Me=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Me+B:Me):B=Me,X){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=B+Re,X={id:d++,callback:he,priorityLevel:X,startTime:B,expirationTime:Re,sortIndex:-1},B>Me?(X.sortIndex=B,e(u,X),n(l)===null&&X===n(u)&&(x?(A(C),C=-1):x=!0,Ye(M,B-Me))):(X.sortIndex=Re,e(l,X),E||w||(E=!0,Ut(z))),X},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(X){var he=m;return function(){var B=m;m=he;try{return X.apply(this,arguments)}finally{m=B}}}})(zT);BT.exports=zT;var Uk=BT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k=N,fr=Uk;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qT=new Set,Ou={};function Oa(t,e){Bl(t,e),Bl(t+"Capture",e)}function Bl(t,e){for(Ou[t]=e,t=0;t<e.length;t++)qT.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,Bk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q0={},Y0={};function zk(t){return um.call(Y0,t)?!0:um.call(Q0,t)?!1:Bk.test(t)?Y0[t]=!0:(Q0[t]=!0,!1)}function qk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hk(t,e,n,r){if(e===null||typeof e>"u"||qk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new Bn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new Bn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new Bn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new Bn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new Bn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new Bn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new Bn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new Bn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new Bn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xv=/[\-:]([a-z])/g;function Jv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xv,Jv);fn[e]=new Bn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xv,Jv);fn[e]=new Bn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xv,Jv);fn[e]=new Bn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new Bn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zv(t,e,n,r){var i=fn.hasOwnProperty(e)?fn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hk(e,n,i,r)&&(n=null),r||i===null?zk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fs=$k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rd=Symbol.for("react.element"),vl=Symbol.for("react.portal"),yl=Symbol.for("react.fragment"),ey=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),HT=Symbol.for("react.provider"),WT=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),ny=Symbol.for("react.memo"),zs=Symbol.for("react.lazy"),KT=Symbol.for("react.offscreen"),X0=Symbol.iterator;function Uc(t){return t===null||typeof t!="object"?null:(t=X0&&t[X0]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,dg;function nu(t){if(dg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dg=e&&e[1]||""}return`
`+dg+t}var fg=!1;function pg(t,e){if(!t||fg)return"";fg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nu(t):""}function Wk(t){switch(t.tag){case 5:return nu(t.type);case 16:return nu("Lazy");case 13:return nu("Suspense");case 19:return nu("SuspenseList");case 0:case 2:case 15:return t=pg(t.type,!1),t;case 11:return t=pg(t.type.render,!1),t;case 1:return t=pg(t.type,!0),t;default:return""}}function pm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case yl:return"Fragment";case vl:return"Portal";case hm:return"Profiler";case ey:return"StrictMode";case dm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WT:return(t.displayName||"Context")+".Consumer";case HT:return(t._context.displayName||"Context")+".Provider";case ty:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ny:return e=t.displayName||null,e!==null?e:pm(t.type)||"Memo";case zs:e=t._payload,t=t._init;try{return pm(t(e))}catch{}}return null}function Kk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pm(e);case 8:return e===ey?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function GT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Gk(t){var e=GT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function id(t){t._valueTracker||(t._valueTracker=Gk(t))}function QT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=GT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gm(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function J0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YT(t,e){e=e.checked,e!=null&&Zv(t,"checked",e,!1)}function mm(t,e){YT(t,e);var n=yo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vm(t,e.type,n):e.hasOwnProperty("defaultValue")&&vm(t,e.type,yo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vm(t,e,n){(e!=="number"||lf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ru=Array.isArray;function Rl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ym(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ew(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(ru(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yo(n)}}function XT(t,e){var n=yo(e.value),r=yo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sd,ZT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sd=sd||document.createElement("div"),sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qk=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(t){Qk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gu[e]=gu[t]})});function eI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gu.hasOwnProperty(t)&&gu[t]?(""+e).trim():e+"px"}function tI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Yk=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wm(t,e){if(e){if(Yk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Em(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tm=null;function ry(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Im=null,Dl=null,Ol=null;function nw(t){if(t=dh(t)){if(typeof Im!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=lp(e),Im(t.stateNode,t.type,e))}}function nI(t){Dl?Ol?Ol.push(t):Ol=[t]:Dl=t}function rI(){if(Dl){var t=Dl,e=Ol;if(Ol=Dl=null,nw(t),e)for(t=0;t<e.length;t++)nw(e[t])}}function iI(t,e){return t(e)}function sI(){}var gg=!1;function oI(t,e,n){if(gg)return t(e,n);gg=!0;try{return iI(t,e,n)}finally{gg=!1,(Dl!==null||Ol!==null)&&(sI(),rI())}}function Lu(t,e){var n=t.stateNode;if(n===null)return null;var r=lp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Sm=!1;if(is)try{var $c={};Object.defineProperty($c,"passive",{get:function(){Sm=!0}}),window.addEventListener("test",$c,$c),window.removeEventListener("test",$c,$c)}catch{Sm=!1}function Xk(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var mu=!1,cf=null,uf=!1,bm=null,Jk={onError:function(t){mu=!0,cf=t}};function Zk(t,e,n,r,i,s,o,a,l){mu=!1,cf=null,Xk.apply(Jk,arguments)}function eR(t,e,n,r,i,s,o,a,l){if(Zk.apply(this,arguments),mu){if(mu){var u=cf;mu=!1,cf=null}else throw Error(Y(198));uf||(uf=!0,bm=u)}}function Na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rw(t){if(Na(t)!==t)throw Error(Y(188))}function tR(t){var e=t.alternate;if(!e){if(e=Na(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rw(i),t;if(s===r)return rw(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function lI(t){return t=tR(t),t!==null?cI(t):null}function cI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cI(t);if(e!==null)return e;t=t.sibling}return null}var uI=fr.unstable_scheduleCallback,iw=fr.unstable_cancelCallback,nR=fr.unstable_shouldYield,rR=fr.unstable_requestPaint,jt=fr.unstable_now,iR=fr.unstable_getCurrentPriorityLevel,iy=fr.unstable_ImmediatePriority,hI=fr.unstable_UserBlockingPriority,hf=fr.unstable_NormalPriority,sR=fr.unstable_LowPriority,dI=fr.unstable_IdlePriority,ip=null,Pi=null;function oR(t){if(Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(ip,t,void 0,(t.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:cR,aR=Math.log,lR=Math.LN2;function cR(t){return t>>>=0,t===0?32:31-(aR(t)/lR|0)|0}var od=64,ad=4194304;function iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function df(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=iu(a):(s&=o,s!==0&&(r=iu(s)))}else o=n&~i,o!==0?r=iu(o):s!==0&&(r=iu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ri(e),i=1<<n,r|=t[n],e&=~i;return r}function uR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ri(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=uR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fI(){var t=od;return od<<=1,!(od&4194240)&&(od=64),t}function mg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ri(e),t[e]=n}function dR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ri(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function sy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ri(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var rt=0;function pI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gI,oy,mI,vI,yI,Am=!1,ld=[],ro=null,io=null,so=null,Mu=new Map,Vu=new Map,Ws=[],fR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sw(t,e){switch(t){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":io=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":Mu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(e.pointerId)}}function Bc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dh(e),e!==null&&oy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function pR(t,e,n,r,i){switch(e){case"focusin":return ro=Bc(ro,t,e,n,r,i),!0;case"dragenter":return io=Bc(io,t,e,n,r,i),!0;case"mouseover":return so=Bc(so,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Mu.set(s,Bc(Mu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Vu.set(s,Bc(Vu.get(s)||null,t,e,n,r,i)),!0}return!1}function _I(t){var e=aa(t.target);if(e!==null){var n=Na(e);if(n!==null){if(e=n.tag,e===13){if(e=aI(n),e!==null){t.blockedOn=e,yI(t.priority,function(){mI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Od(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Tm=r,n.target.dispatchEvent(r),Tm=null}else return e=dh(n),e!==null&&oy(e),t.blockedOn=n,!1;e.shift()}return!0}function ow(t,e,n){Od(t)&&n.delete(e)}function gR(){Am=!1,ro!==null&&Od(ro)&&(ro=null),io!==null&&Od(io)&&(io=null),so!==null&&Od(so)&&(so=null),Mu.forEach(ow),Vu.forEach(ow)}function zc(t,e){t.blockedOn===e&&(t.blockedOn=null,Am||(Am=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,gR)))}function ju(t){function e(i){return zc(i,t)}if(0<ld.length){zc(ld[0],t);for(var n=1;n<ld.length;n++){var r=ld[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ro!==null&&zc(ro,t),io!==null&&zc(io,t),so!==null&&zc(so,t),Mu.forEach(e),Vu.forEach(e),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)_I(n),n.blockedOn===null&&Ws.shift()}var Nl=fs.ReactCurrentBatchConfig,ff=!0;function mR(t,e,n,r){var i=rt,s=Nl.transition;Nl.transition=null;try{rt=1,ay(t,e,n,r)}finally{rt=i,Nl.transition=s}}function vR(t,e,n,r){var i=rt,s=Nl.transition;Nl.transition=null;try{rt=4,ay(t,e,n,r)}finally{rt=i,Nl.transition=s}}function ay(t,e,n,r){if(ff){var i=xm(t,e,n,r);if(i===null)Cg(t,e,r,pf,n),sw(t,r);else if(pR(i,t,e,n,r))r.stopPropagation();else if(sw(t,r),e&4&&-1<fR.indexOf(t)){for(;i!==null;){var s=dh(i);if(s!==null&&gI(s),s=xm(t,e,n,r),s===null&&Cg(t,e,r,pf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cg(t,e,r,null,n)}}var pf=null;function xm(t,e,n,r){if(pf=null,t=ry(r),t=aa(t),t!==null)if(e=Na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pf=t,null}function wI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iR()){case iy:return 1;case hI:return 4;case hf:case sR:return 16;case dI:return 536870912;default:return 16}default:return 16}}var Zs=null,ly=null,Nd=null;function EI(){if(Nd)return Nd;var t,e=ly,n=e.length,r,i="value"in Zs?Zs.value:Zs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Nd=i.slice(t,1<r?1-r:void 0)}function Ld(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cd(){return!0}function aw(){return!1}function mr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cd:aw,this.isPropagationStopped=aw,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cd)},persist:function(){},isPersistent:cd}),e}var uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cy=mr(uc),hh=Pt({},uc,{view:0,detail:0}),yR=mr(hh),vg,yg,qc,sp=Pt({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qc&&(qc&&t.type==="mousemove"?(vg=t.screenX-qc.screenX,yg=t.screenY-qc.screenY):yg=vg=0,qc=t),vg)},movementY:function(t){return"movementY"in t?t.movementY:yg}}),lw=mr(sp),_R=Pt({},sp,{dataTransfer:0}),wR=mr(_R),ER=Pt({},hh,{relatedTarget:0}),_g=mr(ER),TR=Pt({},uc,{animationName:0,elapsedTime:0,pseudoElement:0}),IR=mr(TR),SR=Pt({},uc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bR=mr(SR),CR=Pt({},uc,{data:0}),cw=mr(CR),AR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PR[t])?!!e[t]:!1}function uy(){return kR}var RR=Pt({},hh,{key:function(t){if(t.key){var e=AR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ld(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uy,charCode:function(t){return t.type==="keypress"?Ld(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ld(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DR=mr(RR),OR=Pt({},sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uw=mr(OR),NR=Pt({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uy}),LR=mr(NR),MR=Pt({},uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),VR=mr(MR),jR=Pt({},sp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FR=mr(jR),UR=[9,13,27,32],hy=is&&"CompositionEvent"in window,vu=null;is&&"documentMode"in document&&(vu=document.documentMode);var $R=is&&"TextEvent"in window&&!vu,TI=is&&(!hy||vu&&8<vu&&11>=vu),hw=" ",dw=!1;function II(t,e){switch(t){case"keyup":return UR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _l=!1;function BR(t,e){switch(t){case"compositionend":return SI(e);case"keypress":return e.which!==32?null:(dw=!0,hw);case"textInput":return t=e.data,t===hw&&dw?null:t;default:return null}}function zR(t,e){if(_l)return t==="compositionend"||!hy&&II(t,e)?(t=EI(),Nd=ly=Zs=null,_l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TI&&e.locale!=="ko"?null:e.data;default:return null}}var qR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qR[t.type]:e==="textarea"}function bI(t,e,n,r){nI(r),e=gf(e,"onChange"),0<e.length&&(n=new cy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yu=null,Fu=null;function HR(t){MI(t,0)}function op(t){var e=Tl(t);if(QT(e))return t}function WR(t,e){if(t==="change")return e}var CI=!1;if(is){var wg;if(is){var Eg="oninput"in document;if(!Eg){var pw=document.createElement("div");pw.setAttribute("oninput","return;"),Eg=typeof pw.oninput=="function"}wg=Eg}else wg=!1;CI=wg&&(!document.documentMode||9<document.documentMode)}function gw(){yu&&(yu.detachEvent("onpropertychange",AI),Fu=yu=null)}function AI(t){if(t.propertyName==="value"&&op(Fu)){var e=[];bI(e,Fu,t,ry(t)),oI(HR,e)}}function KR(t,e,n){t==="focusin"?(gw(),yu=e,Fu=n,yu.attachEvent("onpropertychange",AI)):t==="focusout"&&gw()}function GR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return op(Fu)}function QR(t,e){if(t==="click")return op(e)}function YR(t,e){if(t==="input"||t==="change")return op(e)}function XR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ai=typeof Object.is=="function"?Object.is:XR;function Uu(t,e){if(ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!um.call(e,i)||!ai(t[i],e[i]))return!1}return!0}function mw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vw(t,e){var n=mw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mw(n)}}function xI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PI(){for(var t=window,e=lf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lf(t.document)}return e}function dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JR(t){var e=PI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xI(n.ownerDocument.documentElement,n)){if(r!==null&&dy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vw(n,s);var o=vw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZR=is&&"documentMode"in document&&11>=document.documentMode,wl=null,Pm=null,_u=null,km=!1;function yw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;km||wl==null||wl!==lf(r)||(r=wl,"selectionStart"in r&&dy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&Uu(_u,r)||(_u=r,r=gf(Pm,"onSelect"),0<r.length&&(e=new cy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wl)))}function ud(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var El={animationend:ud("Animation","AnimationEnd"),animationiteration:ud("Animation","AnimationIteration"),animationstart:ud("Animation","AnimationStart"),transitionend:ud("Transition","TransitionEnd")},Tg={},kI={};is&&(kI=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function ap(t){if(Tg[t])return Tg[t];if(!El[t])return t;var e=El[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in kI)return Tg[t]=e[n];return t}var RI=ap("animationend"),DI=ap("animationiteration"),OI=ap("animationstart"),NI=ap("transitionend"),LI=new Map,_w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(t,e){LI.set(t,e),Oa(e,[t])}for(var Ig=0;Ig<_w.length;Ig++){var Sg=_w[Ig],eD=Sg.toLowerCase(),tD=Sg[0].toUpperCase()+Sg.slice(1);So(eD,"on"+tD)}So(RI,"onAnimationEnd");So(DI,"onAnimationIteration");So(OI,"onAnimationStart");So("dblclick","onDoubleClick");So("focusin","onFocus");So("focusout","onBlur");So(NI,"onTransitionEnd");Bl("onMouseEnter",["mouseout","mouseover"]);Bl("onMouseLeave",["mouseout","mouseover"]);Bl("onPointerEnter",["pointerout","pointerover"]);Bl("onPointerLeave",["pointerout","pointerover"]);Oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nD=new Set("cancel close invalid load scroll toggle".split(" ").concat(su));function ww(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eR(r,e,void 0,t),t.currentTarget=null}function MI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ww(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ww(i,a,u),s=l}}}if(uf)throw t=bm,uf=!1,bm=null,t}function yt(t,e){var n=e[Lm];n===void 0&&(n=e[Lm]=new Set);var r=t+"__bubble";n.has(r)||(VI(e,t,2,!1),n.add(r))}function bg(t,e,n){var r=0;e&&(r|=4),VI(n,t,r,e)}var hd="_reactListening"+Math.random().toString(36).slice(2);function $u(t){if(!t[hd]){t[hd]=!0,qT.forEach(function(n){n!=="selectionchange"&&(nD.has(n)||bg(n,!1,t),bg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[hd]||(e[hd]=!0,bg("selectionchange",!1,e))}}function VI(t,e,n,r){switch(wI(e)){case 1:var i=mR;break;case 4:i=vR;break;default:i=ay}n=i.bind(null,e,n,t),i=void 0,!Sm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=aa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}oI(function(){var u=s,d=ry(n),p=[];e:{var m=LI.get(t);if(m!==void 0){var w=cy,E=t;switch(t){case"keypress":if(Ld(n)===0)break e;case"keydown":case"keyup":w=DR;break;case"focusin":E="focus",w=_g;break;case"focusout":E="blur",w=_g;break;case"beforeblur":case"afterblur":w=_g;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=wR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=LR;break;case RI:case DI:case OI:w=IR;break;case NI:w=VR;break;case"scroll":w=yR;break;case"wheel":w=FR;break;case"copy":case"cut":case"paste":w=bR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=uw}var x=(e&4)!==0,R=!x&&t==="scroll",A=x?m!==null?m+"Capture":null:m;x=[];for(var T=u,I;T!==null;){I=T;var M=I.stateNode;if(I.tag===5&&M!==null&&(I=M,A!==null&&(M=Lu(T,A),M!=null&&x.push(Bu(T,M,I)))),R)break;T=T.return}0<x.length&&(m=new w(m,E,null,n,d),p.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==Tm&&(E=n.relatedTarget||n.fromElement)&&(aa(E)||E[ss]))break e;if((w||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,w?(E=n.relatedTarget||n.toElement,w=u,E=E?aa(E):null,E!==null&&(R=Na(E),E!==R||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=u),w!==E)){if(x=lw,M="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(x=uw,M="onPointerLeave",A="onPointerEnter",T="pointer"),R=w==null?m:Tl(w),I=E==null?m:Tl(E),m=new x(M,T+"leave",w,n,d),m.target=R,m.relatedTarget=I,M=null,aa(d)===u&&(x=new x(A,T+"enter",E,n,d),x.target=I,x.relatedTarget=R,M=x),R=M,w&&E)t:{for(x=w,A=E,T=0,I=x;I;I=ol(I))T++;for(I=0,M=A;M;M=ol(M))I++;for(;0<T-I;)x=ol(x),T--;for(;0<I-T;)A=ol(A),I--;for(;T--;){if(x===A||A!==null&&x===A.alternate)break t;x=ol(x),A=ol(A)}x=null}else x=null;w!==null&&Ew(p,m,w,x,!1),E!==null&&R!==null&&Ew(p,R,E,x,!0)}}e:{if(m=u?Tl(u):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var z=WR;else if(fw(m))if(CI)z=YR;else{z=GR;var W=KR}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(z=QR);if(z&&(z=z(t,u))){bI(p,z,n,d);break e}W&&W(t,m,u),t==="focusout"&&(W=m._wrapperState)&&W.controlled&&m.type==="number"&&vm(m,"number",m.value)}switch(W=u?Tl(u):window,t){case"focusin":(fw(W)||W.contentEditable==="true")&&(wl=W,Pm=u,_u=null);break;case"focusout":_u=Pm=wl=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,yw(p,n,d);break;case"selectionchange":if(ZR)break;case"keydown":case"keyup":yw(p,n,d)}var P;if(hy)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _l?II(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(TI&&n.locale!=="ko"&&(_l||C!=="onCompositionStart"?C==="onCompositionEnd"&&_l&&(P=EI()):(Zs=d,ly="value"in Zs?Zs.value:Zs.textContent,_l=!0)),W=gf(u,C),0<W.length&&(C=new cw(C,t,null,n,d),p.push({event:C,listeners:W}),P?C.data=P:(P=SI(n),P!==null&&(C.data=P)))),(P=$R?BR(t,n):zR(t,n))&&(u=gf(u,"onBeforeInput"),0<u.length&&(d=new cw("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=P))}MI(p,e)})}function Bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lu(t,n),s!=null&&r.unshift(Bu(t,s,i)),s=Lu(t,e),s!=null&&r.push(Bu(t,s,i))),t=t.return}return r}function ol(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ew(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Lu(n,s),l!=null&&o.unshift(Bu(n,l,a))):i||(l=Lu(n,s),l!=null&&o.push(Bu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rD=/\r\n?/g,iD=/\u0000|\uFFFD/g;function Tw(t){return(typeof t=="string"?t:""+t).replace(rD,`
`).replace(iD,"")}function dd(t,e,n){if(e=Tw(e),Tw(t)!==e&&n)throw Error(Y(425))}function mf(){}var Rm=null,Dm=null;function Om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,sD=typeof clearTimeout=="function"?clearTimeout:void 0,Iw=typeof Promise=="function"?Promise:void 0,oD=typeof queueMicrotask=="function"?queueMicrotask:typeof Iw<"u"?function(t){return Iw.resolve(null).then(t).catch(aD)}:Nm;function aD(t){setTimeout(function(){throw t})}function Ag(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ju(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ju(e)}function oo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var hc=Math.random().toString(36).slice(2),Si="__reactFiber$"+hc,zu="__reactProps$"+hc,ss="__reactContainer$"+hc,Lm="__reactEvents$"+hc,lD="__reactListeners$"+hc,cD="__reactHandles$"+hc;function aa(t){var e=t[Si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ss]||n[Si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sw(t);t!==null;){if(n=t[Si])return n;t=Sw(t)}return e}t=n,n=t.parentNode}return null}function dh(t){return t=t[Si]||t[ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function lp(t){return t[zu]||null}var Mm=[],Il=-1;function bo(t){return{current:t}}function _t(t){0>Il||(t.current=Mm[Il],Mm[Il]=null,Il--)}function gt(t,e){Il++,Mm[Il]=t.current,t.current=e}var _o={},An=bo(_o),Xn=bo(!1),va=_o;function zl(t,e){var n=t.type.contextTypes;if(!n)return _o;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function vf(){_t(Xn),_t(An)}function bw(t,e,n){if(An.current!==_o)throw Error(Y(168));gt(An,e),gt(Xn,n)}function jI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,Kk(t)||"Unknown",i));return Pt({},n,r)}function yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_o,va=An.current,gt(An,t),gt(Xn,Xn.current),!0}function Cw(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=jI(t,e,va),r.__reactInternalMemoizedMergedChildContext=t,_t(Xn),_t(An),gt(An,t)):_t(Xn),gt(Xn,n)}var Ki=null,cp=!1,xg=!1;function FI(t){Ki===null?Ki=[t]:Ki.push(t)}function uD(t){cp=!0,FI(t)}function Co(){if(!xg&&Ki!==null){xg=!0;var t=0,e=rt;try{var n=Ki;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ki=null,cp=!1}catch(i){throw Ki!==null&&(Ki=Ki.slice(t+1)),uI(iy,Co),i}finally{rt=e,xg=!1}}return null}var Sl=[],bl=0,_f=null,wf=0,Rr=[],Dr=0,ya=null,Qi=1,Yi="";function Zo(t,e){Sl[bl++]=wf,Sl[bl++]=_f,_f=t,wf=e}function UI(t,e,n){Rr[Dr++]=Qi,Rr[Dr++]=Yi,Rr[Dr++]=ya,ya=t;var r=Qi;t=Yi;var i=32-ri(r)-1;r&=~(1<<i),n+=1;var s=32-ri(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qi=1<<32-ri(e)+i|n<<i|r,Yi=s+t}else Qi=1<<s|n<<i|r,Yi=t}function fy(t){t.return!==null&&(Zo(t,1),UI(t,1,0))}function py(t){for(;t===_f;)_f=Sl[--bl],Sl[bl]=null,wf=Sl[--bl],Sl[bl]=null;for(;t===ya;)ya=Rr[--Dr],Rr[Dr]=null,Yi=Rr[--Dr],Rr[Dr]=null,Qi=Rr[--Dr],Rr[Dr]=null}var ur=null,ar=null,Tt=!1,ti=null;function $I(t,e){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Aw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,ar=oo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,ar=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ya!==null?{id:Qi,overflow:Yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,ar=null,!0):!1;default:return!1}}function Vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jm(t){if(Tt){var e=ar;if(e){var n=e;if(!Aw(t,e)){if(Vm(t))throw Error(Y(418));e=oo(n.nextSibling);var r=ur;e&&Aw(t,e)?$I(r,n):(t.flags=t.flags&-4097|2,Tt=!1,ur=t)}}else{if(Vm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Tt=!1,ur=t}}}function xw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function fd(t){if(t!==ur)return!1;if(!Tt)return xw(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Om(t.type,t.memoizedProps)),e&&(e=ar)){if(Vm(t))throw BI(),Error(Y(418));for(;e;)$I(t,e),e=oo(e.nextSibling)}if(xw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ar=oo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ar=null}}else ar=ur?oo(t.stateNode.nextSibling):null;return!0}function BI(){for(var t=ar;t;)t=oo(t.nextSibling)}function ql(){ar=ur=null,Tt=!1}function gy(t){ti===null?ti=[t]:ti.push(t)}var hD=fs.ReactCurrentBatchConfig;function Hc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function pd(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pw(t){var e=t._init;return e(t._payload)}function zI(t){function e(A,T){if(t){var I=A.deletions;I===null?(A.deletions=[T],A.flags|=16):I.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function r(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function i(A,T){return A=uo(A,T),A.index=0,A.sibling=null,A}function s(A,T,I){return A.index=I,t?(I=A.alternate,I!==null?(I=I.index,I<T?(A.flags|=2,T):I):(A.flags|=2,T)):(A.flags|=1048576,T)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,T,I,M){return T===null||T.tag!==6?(T=Lg(I,A.mode,M),T.return=A,T):(T=i(T,I),T.return=A,T)}function l(A,T,I,M){var z=I.type;return z===yl?d(A,T,I.props.children,M,I.key):T!==null&&(T.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===zs&&Pw(z)===T.type)?(M=i(T,I.props),M.ref=Hc(A,T,I),M.return=A,M):(M=Bd(I.type,I.key,I.props,null,A.mode,M),M.ref=Hc(A,T,I),M.return=A,M)}function u(A,T,I,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=Mg(I,A.mode,M),T.return=A,T):(T=i(T,I.children||[]),T.return=A,T)}function d(A,T,I,M,z){return T===null||T.tag!==7?(T=fa(I,A.mode,M,z),T.return=A,T):(T=i(T,I),T.return=A,T)}function p(A,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Lg(""+T,A.mode,I),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case rd:return I=Bd(T.type,T.key,T.props,null,A.mode,I),I.ref=Hc(A,null,T),I.return=A,I;case vl:return T=Mg(T,A.mode,I),T.return=A,T;case zs:var M=T._init;return p(A,M(T._payload),I)}if(ru(T)||Uc(T))return T=fa(T,A.mode,I,null),T.return=A,T;pd(A,T)}return null}function m(A,T,I,M){var z=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return z!==null?null:a(A,T,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case rd:return I.key===z?l(A,T,I,M):null;case vl:return I.key===z?u(A,T,I,M):null;case zs:return z=I._init,m(A,T,z(I._payload),M)}if(ru(I)||Uc(I))return z!==null?null:d(A,T,I,M,null);pd(A,I)}return null}function w(A,T,I,M,z){if(typeof M=="string"&&M!==""||typeof M=="number")return A=A.get(I)||null,a(T,A,""+M,z);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case rd:return A=A.get(M.key===null?I:M.key)||null,l(T,A,M,z);case vl:return A=A.get(M.key===null?I:M.key)||null,u(T,A,M,z);case zs:var W=M._init;return w(A,T,I,W(M._payload),z)}if(ru(M)||Uc(M))return A=A.get(I)||null,d(T,A,M,z,null);pd(T,M)}return null}function E(A,T,I,M){for(var z=null,W=null,P=T,C=T=0,k=null;P!==null&&C<I.length;C++){P.index>C?(k=P,P=null):k=P.sibling;var O=m(A,P,I[C],M);if(O===null){P===null&&(P=k);break}t&&P&&O.alternate===null&&e(A,P),T=s(O,T,C),W===null?z=O:W.sibling=O,W=O,P=k}if(C===I.length)return n(A,P),Tt&&Zo(A,C),z;if(P===null){for(;C<I.length;C++)P=p(A,I[C],M),P!==null&&(T=s(P,T,C),W===null?z=P:W.sibling=P,W=P);return Tt&&Zo(A,C),z}for(P=r(A,P);C<I.length;C++)k=w(P,A,C,I[C],M),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?C:k.key),T=s(k,T,C),W===null?z=k:W.sibling=k,W=k);return t&&P.forEach(function(L){return e(A,L)}),Tt&&Zo(A,C),z}function x(A,T,I,M){var z=Uc(I);if(typeof z!="function")throw Error(Y(150));if(I=z.call(I),I==null)throw Error(Y(151));for(var W=z=null,P=T,C=T=0,k=null,O=I.next();P!==null&&!O.done;C++,O=I.next()){P.index>C?(k=P,P=null):k=P.sibling;var L=m(A,P,O.value,M);if(L===null){P===null&&(P=k);break}t&&P&&L.alternate===null&&e(A,P),T=s(L,T,C),W===null?z=L:W.sibling=L,W=L,P=k}if(O.done)return n(A,P),Tt&&Zo(A,C),z;if(P===null){for(;!O.done;C++,O=I.next())O=p(A,O.value,M),O!==null&&(T=s(O,T,C),W===null?z=O:W.sibling=O,W=O);return Tt&&Zo(A,C),z}for(P=r(A,P);!O.done;C++,O=I.next())O=w(P,A,C,O.value,M),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?C:O.key),T=s(O,T,C),W===null?z=O:W.sibling=O,W=O);return t&&P.forEach(function(j){return e(A,j)}),Tt&&Zo(A,C),z}function R(A,T,I,M){if(typeof I=="object"&&I!==null&&I.type===yl&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case rd:e:{for(var z=I.key,W=T;W!==null;){if(W.key===z){if(z=I.type,z===yl){if(W.tag===7){n(A,W.sibling),T=i(W,I.props.children),T.return=A,A=T;break e}}else if(W.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===zs&&Pw(z)===W.type){n(A,W.sibling),T=i(W,I.props),T.ref=Hc(A,W,I),T.return=A,A=T;break e}n(A,W);break}else e(A,W);W=W.sibling}I.type===yl?(T=fa(I.props.children,A.mode,M,I.key),T.return=A,A=T):(M=Bd(I.type,I.key,I.props,null,A.mode,M),M.ref=Hc(A,T,I),M.return=A,A=M)}return o(A);case vl:e:{for(W=I.key;T!==null;){if(T.key===W)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(A,T.sibling),T=i(T,I.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=Mg(I,A.mode,M),T.return=A,A=T}return o(A);case zs:return W=I._init,R(A,T,W(I._payload),M)}if(ru(I))return E(A,T,I,M);if(Uc(I))return x(A,T,I,M);pd(A,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(A,T.sibling),T=i(T,I),T.return=A,A=T):(n(A,T),T=Lg(I,A.mode,M),T.return=A,A=T),o(A)):n(A,T)}return R}var Hl=zI(!0),qI=zI(!1),Ef=bo(null),Tf=null,Cl=null,my=null;function vy(){my=Cl=Tf=null}function yy(t){var e=Ef.current;_t(Ef),t._currentValue=e}function Fm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ll(t,e){Tf=t,my=Cl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Fr(t){var e=t._currentValue;if(my!==t)if(t={context:t,memoizedValue:e,next:null},Cl===null){if(Tf===null)throw Error(Y(308));Cl=t,Tf.dependencies={lanes:0,firstContext:t}}else Cl=Cl.next=t;return e}var la=null;function _y(t){la===null?la=[t]:la.push(t)}function HI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_y(e)):(n.next=i.next,i.next=n),e.interleaved=n,os(t,r)}function os(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qs=!1;function wy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,os(t,n)}return i=r.interleaved,i===null?(e.next=e,_y(r)):(e.next=i.next,i.next=e),r.interleaved=e,os(t,n)}function Md(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sy(t,n)}}function kw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function If(t,e,n,r){var i=t.updateQueue;qs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=u=l=null,a=s;do{var m=a.lane,w=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,x=a;switch(m=e,w=n,x.tag){case 1:if(E=x.payload,typeof E=="function"){p=E.call(w,p,m);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,m=typeof E=="function"?E.call(w,p,m):E,m==null)break e;p=Pt({},p,m);break e;case 2:qs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else w={eventTime:w,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=w,l=p):d=d.next=w,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);wa|=o,t.lanes=o,t.memoizedState=p}}function Rw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var fh={},ki=bo(fh),qu=bo(fh),Hu=bo(fh);function ca(t){if(t===fh)throw Error(Y(174));return t}function Ey(t,e){switch(gt(Hu,e),gt(qu,t),gt(ki,fh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_m(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_m(e,t)}_t(ki),gt(ki,e)}function Wl(){_t(ki),_t(qu),_t(Hu)}function KI(t){ca(Hu.current);var e=ca(ki.current),n=_m(e,t.type);e!==n&&(gt(qu,t),gt(ki,n))}function Ty(t){qu.current===t&&(_t(ki),_t(qu))}var bt=bo(0);function Sf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pg=[];function Iy(){for(var t=0;t<Pg.length;t++)Pg[t]._workInProgressVersionPrimary=null;Pg.length=0}var Vd=fs.ReactCurrentDispatcher,kg=fs.ReactCurrentBatchConfig,_a=0,At=null,Xt=null,on=null,bf=!1,wu=!1,Wu=0,dD=0;function wn(){throw Error(Y(321))}function Sy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ai(t[n],e[n]))return!1;return!0}function by(t,e,n,r,i,s){if(_a=s,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vd.current=t===null||t.memoizedState===null?mD:vD,t=n(r,i),wu){s=0;do{if(wu=!1,Wu=0,25<=s)throw Error(Y(301));s+=1,on=Xt=null,e.updateQueue=null,Vd.current=yD,t=n(r,i)}while(wu)}if(Vd.current=Cf,e=Xt!==null&&Xt.next!==null,_a=0,on=Xt=At=null,bf=!1,e)throw Error(Y(300));return t}function Cy(){var t=Wu!==0;return Wu=0,t}function Ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?At.memoizedState=on=t:on=on.next=t,on}function Ur(){if(Xt===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=Xt.next;var e=on===null?At.memoizedState:on.next;if(e!==null)on=e,Xt=t;else{if(t===null)throw Error(Y(310));Xt=t,t={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},on===null?At.memoizedState=on=t:on=on.next=t}return on}function Ku(t,e){return typeof e=="function"?e(t):e}function Rg(t){var e=Ur(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Xt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((_a&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,At.lanes|=d,wa|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ai(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,At.lanes|=s,wa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dg(t){var e=Ur(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ai(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function GI(){}function QI(t,e){var n=At,r=Ur(),i=e(),s=!ai(r.memoizedState,i);if(s&&(r.memoizedState=i,Yn=!0),r=r.queue,Ay(JI.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||on!==null&&on.memoizedState.tag&1){if(n.flags|=2048,Gu(9,XI.bind(null,n,r,i,e),void 0,null),an===null)throw Error(Y(349));_a&30||YI(n,e,i)}return i}function YI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function XI(t,e,n,r){e.value=n,e.getSnapshot=r,ZI(e)&&eS(t)}function JI(t,e,n){return n(function(){ZI(e)&&eS(t)})}function ZI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ai(t,n)}catch{return!0}}function eS(t){var e=os(t,1);e!==null&&ii(e,t,1,-1)}function Dw(t){var e=Ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ku,lastRenderedState:t},e.queue=t,t=t.dispatch=gD.bind(null,At,t),[e.memoizedState,t]}function Gu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tS(){return Ur().memoizedState}function jd(t,e,n,r){var i=Ii();At.flags|=t,i.memoizedState=Gu(1|e,n,void 0,r===void 0?null:r)}function up(t,e,n,r){var i=Ur();r=r===void 0?null:r;var s=void 0;if(Xt!==null){var o=Xt.memoizedState;if(s=o.destroy,r!==null&&Sy(r,o.deps)){i.memoizedState=Gu(e,n,s,r);return}}At.flags|=t,i.memoizedState=Gu(1|e,n,s,r)}function Ow(t,e){return jd(8390656,8,t,e)}function Ay(t,e){return up(2048,8,t,e)}function nS(t,e){return up(4,2,t,e)}function rS(t,e){return up(4,4,t,e)}function iS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sS(t,e,n){return n=n!=null?n.concat([t]):null,up(4,4,iS.bind(null,e,t),n)}function xy(){}function oS(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aS(t,e){var n=Ur();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Sy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lS(t,e,n){return _a&21?(ai(n,e)||(n=fI(),At.lanes|=n,wa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function fD(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=kg.transition;kg.transition={};try{t(!1),e()}finally{rt=n,kg.transition=r}}function cS(){return Ur().memoizedState}function pD(t,e,n){var r=co(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uS(t))hS(e,n);else if(n=HI(t,e,n,r),n!==null){var i=jn();ii(n,t,r,i),dS(n,e,r)}}function gD(t,e,n){var r=co(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uS(t))hS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ai(a,o)){var l=e.interleaved;l===null?(i.next=i,_y(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=HI(t,e,i,r),n!==null&&(i=jn(),ii(n,t,r,i),dS(n,e,r))}}function uS(t){var e=t.alternate;return t===At||e!==null&&e===At}function hS(t,e){wu=bf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function dS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sy(t,n)}}var Cf={readContext:Fr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},mD={readContext:Fr,useCallback:function(t,e){return Ii().memoizedState=[t,e===void 0?null:e],t},useContext:Fr,useEffect:Ow,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jd(4194308,4,iS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jd(4194308,4,t,e)},useInsertionEffect:function(t,e){return jd(4,2,t,e)},useMemo:function(t,e){var n=Ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ii();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pD.bind(null,At,t),[r.memoizedState,t]},useRef:function(t){var e=Ii();return t={current:t},e.memoizedState=t},useState:Dw,useDebugValue:xy,useDeferredValue:function(t){return Ii().memoizedState=t},useTransition:function(){var t=Dw(!1),e=t[0];return t=fD.bind(null,t[1]),Ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=At,i=Ii();if(Tt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),an===null)throw Error(Y(349));_a&30||YI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ow(JI.bind(null,r,s,t),[t]),r.flags|=2048,Gu(9,XI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ii(),e=an.identifierPrefix;if(Tt){var n=Yi,r=Qi;n=(r&~(1<<32-ri(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vD={readContext:Fr,useCallback:oS,useContext:Fr,useEffect:Ay,useImperativeHandle:sS,useInsertionEffect:nS,useLayoutEffect:rS,useMemo:aS,useReducer:Rg,useRef:tS,useState:function(){return Rg(Ku)},useDebugValue:xy,useDeferredValue:function(t){var e=Ur();return lS(e,Xt.memoizedState,t)},useTransition:function(){var t=Rg(Ku)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:GI,useSyncExternalStore:QI,useId:cS,unstable_isNewReconciler:!1},yD={readContext:Fr,useCallback:oS,useContext:Fr,useEffect:Ay,useImperativeHandle:sS,useInsertionEffect:nS,useLayoutEffect:rS,useMemo:aS,useReducer:Dg,useRef:tS,useState:function(){return Dg(Ku)},useDebugValue:xy,useDeferredValue:function(t){var e=Ur();return Xt===null?e.memoizedState=t:lS(e,Xt.memoizedState,t)},useTransition:function(){var t=Dg(Ku)[0],e=Ur().memoizedState;return[t,e]},useMutableSource:GI,useSyncExternalStore:QI,useId:cS,unstable_isNewReconciler:!1};function Zr(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Um(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hp={isMounted:function(t){return(t=t._reactInternals)?Na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jn(),i=co(t),s=ts(r,i);s.payload=e,n!=null&&(s.callback=n),e=ao(t,s,i),e!==null&&(ii(e,t,i,r),Md(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jn(),i=co(t),s=ts(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ao(t,s,i),e!==null&&(ii(e,t,i,r),Md(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),r=co(t),i=ts(n,r);i.tag=2,e!=null&&(i.callback=e),e=ao(t,i,r),e!==null&&(ii(e,t,r,n),Md(e,t,r))}};function Nw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Uu(n,r)||!Uu(i,s):!0}function fS(t,e,n){var r=!1,i=_o,s=e.contextType;return typeof s=="object"&&s!==null?s=Fr(s):(i=Jn(e)?va:An.current,r=e.contextTypes,s=(r=r!=null)?zl(t,i):_o),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hp.enqueueReplaceState(e,e.state,null)}function $m(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Fr(s):(s=Jn(e)?va:An.current,i.context=zl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Um(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hp.enqueueReplaceState(i,i.state,null),If(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Kl(t,e){try{var n="",r=e;do n+=Wk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Og(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _D=typeof WeakMap=="function"?WeakMap:Map;function pS(t,e,n){n=ts(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xf||(xf=!0,Jm=r),Bm(t,e)},n}function gS(t,e,n){n=ts(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bm(t,e),typeof r!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _D;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=OD.bind(null,t,e,n),e.then(t,t))}function Vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ts(-1,1),e.tag=2,ao(n,e,1))),n.lanes|=1),t)}var wD=fs.ReactCurrentOwner,Yn=!1;function On(t,e,n,r){e.child=t===null?qI(e,null,n,r):Hl(e,t.child,n,r)}function Fw(t,e,n,r,i){n=n.render;var s=e.ref;return Ll(e,i),r=by(t,e,n,r,s,i),n=Cy(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,as(t,e,i)):(Tt&&n&&fy(e),e.flags|=1,On(t,e,r,i),e.child)}function Uw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!My(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,mS(t,e,s,r,i)):(t=Bd(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Uu,n(o,r)&&t.ref===e.ref)return as(t,e,i)}return e.flags|=1,t=uo(s,r),t.ref=e.ref,t.return=e,e.child=t}function mS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Uu(s,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,as(t,e,i)}return zm(t,e,n,r,i)}function vS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(xl,or),or|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gt(xl,or),or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,gt(xl,or),or|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,gt(xl,or),or|=r;return On(t,e,i,n),e.child}function yS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,n,r,i){var s=Jn(n)?va:An.current;return s=zl(e,s),Ll(e,i),n=by(t,e,n,r,s,i),r=Cy(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,as(t,e,i)):(Tt&&r&&fy(e),e.flags|=1,On(t,e,n,i),e.child)}function $w(t,e,n,r,i){if(Jn(n)){var s=!0;yf(e)}else s=!1;if(Ll(e,i),e.stateNode===null)Fd(t,e),fS(e,n,r),$m(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Fr(u):(u=Jn(n)?va:An.current,u=zl(e,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Lw(e,o,r,u),qs=!1;var m=e.memoizedState;o.state=m,If(e,r,o,i),l=e.memoizedState,a!==r||m!==l||Xn.current||qs?(typeof d=="function"&&(Um(e,n,d,r),l=e.memoizedState),(a=qs||Nw(e,n,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,WI(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Zr(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fr(l):(l=Jn(n)?va:An.current,l=zl(e,l));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Lw(e,o,r,l),qs=!1,m=e.memoizedState,o.state=m,If(e,r,o,i);var E=e.memoizedState;a!==p||m!==E||Xn.current||qs?(typeof w=="function"&&(Um(e,n,w,r),E=e.memoizedState),(u=qs||Nw(e,n,u,r,m,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return qm(t,e,n,r,s,i)}function qm(t,e,n,r,i,s){yS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cw(e,n,!1),as(t,e,s);r=e.stateNode,wD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Hl(e,t.child,null,s),e.child=Hl(e,null,a,s)):On(t,e,a,s),e.memoizedState=r.state,i&&Cw(e,n,!0),e.child}function _S(t){var e=t.stateNode;e.pendingContext?bw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bw(t,e.context,!1),Ey(t,e.containerInfo)}function Bw(t,e,n,r,i){return ql(),gy(i),e.flags|=256,On(t,e,n,r),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function wS(t,e,n){var r=e.pendingProps,i=bt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),gt(bt,i&1),t===null)return jm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pp(o,r,0,null),t=fa(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wm(n),e.memoizedState=Hm,t):Py(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ED(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=uo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=uo(a,s):(s=fa(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Wm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hm,r}return s=t.child,t=s.sibling,r=uo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Py(t,e){return e=pp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gd(t,e,n,r){return r!==null&&gy(r),Hl(e,t.child,null,n),t=Py(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ED(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Og(Error(Y(422))),gd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pp({mode:"visible",children:r.children},i,0,null),s=fa(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Hl(e,t.child,null,o),e.child.memoizedState=Wm(o),e.memoizedState=Hm,s);if(!(e.mode&1))return gd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Og(s,r,void 0),gd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yn||a){if(r=an,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,os(t,i),ii(r,t,i,-1))}return Ly(),r=Og(Error(Y(421))),gd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ND.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ar=oo(i.nextSibling),ur=e,Tt=!0,ti=null,t!==null&&(Rr[Dr++]=Qi,Rr[Dr++]=Yi,Rr[Dr++]=ya,Qi=t.id,Yi=t.overflow,ya=e),e=Py(e,r.children),e.flags|=4096,e)}function zw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fm(t.return,e,n)}function Ng(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ES(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(On(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zw(t,n,e);else if(t.tag===19)zw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gt(bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Sf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ng(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Sf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ng(e,!0,n,null,s);break;case"together":Ng(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function as(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=uo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=uo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TD(t,e,n){switch(e.tag){case 3:_S(e),ql();break;case 5:KI(e);break;case 1:Jn(e.type)&&yf(e);break;case 4:Ey(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;gt(Ef,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?wS(t,e,n):(gt(bt,bt.current&1),t=as(t,e,n),t!==null?t.sibling:null);gt(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ES(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gt(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,vS(t,e,n)}return as(t,e,n)}var TS,Km,IS,SS;TS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Km=function(){};IS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ca(ki.current);var s=null;switch(n){case"input":i=gm(t,i),r=gm(t,r),s=[];break;case"select":i=Pt({},i,{value:void 0}),r=Pt({},r,{value:void 0}),s=[];break;case"textarea":i=ym(t,i),r=ym(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mf)}wm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ou.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&yt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};SS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wc(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function En(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ID(t,e,n){var r=e.pendingProps;switch(py(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(e),null;case 1:return Jn(e.type)&&vf(),En(e),null;case 3:return r=e.stateNode,Wl(),_t(Xn),_t(An),Iy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ti!==null&&(tv(ti),ti=null))),Km(t,e),En(e),null;case 5:Ty(e);var i=ca(Hu.current);if(n=e.type,t!==null&&e.stateNode!=null)IS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return En(e),null}if(t=ca(ki.current),fd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Si]=e,r[zu]=s,t=(e.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(i=0;i<su.length;i++)yt(su[i],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":J0(r,s),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},yt("invalid",r);break;case"textarea":ew(r,s),yt("invalid",r)}wm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&dd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&dd(r.textContent,a,t),i=["children",""+a]):Ou.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&yt("scroll",r)}switch(n){case"input":id(r),Z0(r,s,!0);break;case"textarea":id(r),tw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=mf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Si]=e,t[zu]=r,TS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Em(n,r),n){case"dialog":yt("cancel",t),yt("close",t),i=r;break;case"iframe":case"object":case"embed":yt("load",t),i=r;break;case"video":case"audio":for(i=0;i<su.length;i++)yt(su[i],t);i=r;break;case"source":yt("error",t),i=r;break;case"img":case"image":case"link":yt("error",t),yt("load",t),i=r;break;case"details":yt("toggle",t),i=r;break;case"input":J0(t,r),i=gm(t,r),yt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pt({},r,{value:void 0}),yt("invalid",t);break;case"textarea":ew(t,r),i=ym(t,r),yt("invalid",t);break;default:i=r}wm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?tI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ZT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Nu(t,l):typeof l=="number"&&Nu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ou.hasOwnProperty(s)?l!=null&&s==="onScroll"&&yt("scroll",t):l!=null&&Zv(t,s,l,o))}switch(n){case"input":id(t),Z0(t,r,!1);break;case"textarea":id(t),tw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Rl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Rl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return En(e),null;case 6:if(t&&e.stateNode!=null)SS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=ca(Hu.current),ca(ki.current),fd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Si]=e,(s=r.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:dd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Si]=e,e.stateNode=r}return En(e),null;case 13:if(_t(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&ar!==null&&e.mode&1&&!(e.flags&128))BI(),ql(),e.flags|=98560,s=!1;else if(s=fd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[Si]=e}else ql(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;En(e),s=!1}else ti!==null&&(tv(ti),ti=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Jt===0&&(Jt=3):Ly())),e.updateQueue!==null&&(e.flags|=4),En(e),null);case 4:return Wl(),Km(t,e),t===null&&$u(e.stateNode.containerInfo),En(e),null;case 10:return yy(e.type._context),En(e),null;case 17:return Jn(e.type)&&vf(),En(e),null;case 19:if(_t(bt),s=e.memoizedState,s===null)return En(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Wc(s,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sf(t),o!==null){for(e.flags|=128,Wc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gt(bt,bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&jt()>Gl&&(e.flags|=128,r=!0,Wc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Sf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Tt)return En(e),null}else 2*jt()-s.renderingStartTime>Gl&&n!==1073741824&&(e.flags|=128,r=!0,Wc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jt(),e.sibling=null,n=bt.current,gt(bt,r?n&1|2:n&1),e):(En(e),null);case 22:case 23:return Ny(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?or&1073741824&&(En(e),e.subtreeFlags&6&&(e.flags|=8192)):En(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function SD(t,e){switch(py(e),e.tag){case 1:return Jn(e.type)&&vf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),_t(Xn),_t(An),Iy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ty(e),null;case 13:if(_t(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ql()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(bt),null;case 4:return Wl(),null;case 10:return yy(e.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var md=!1,bn=!1,bD=typeof WeakSet=="function"?WeakSet:Set,se=null;function Al(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(t,e,r)}else n.current=null}function Gm(t,e,n){try{n()}catch(r){Ot(t,e,r)}}var qw=!1;function CD(t,e){if(Rm=ff,t=PI(),dy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,p=t,m=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)m=p,p=w;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++d===r&&(l=o),(w=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dm={focusedElem:t,selectionRange:n},ff=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var x=E.memoizedProps,R=E.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?x:Zr(e.type,x),R);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){Ot(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return E=qw,qw=!1,E}function Eu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gm(e,n,s)}i=i.next}while(i!==r)}}function dp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bS(t){var e=t.alternate;e!==null&&(t.alternate=null,bS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Si],delete e[zu],delete e[Lm],delete e[lD],delete e[cD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CS(t){return t.tag===5||t.tag===3||t.tag===4}function Hw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mf));else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}var un=null,ei=!1;function Vs(t,e,n){for(n=n.child;n!==null;)AS(t,e,n),n=n.sibling}function AS(t,e,n){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(ip,n)}catch{}switch(n.tag){case 5:bn||Al(n,e);case 6:var r=un,i=ei;un=null,Vs(t,e,n),un=r,ei=i,un!==null&&(ei?(t=un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):un.removeChild(n.stateNode));break;case 18:un!==null&&(ei?(t=un,n=n.stateNode,t.nodeType===8?Ag(t.parentNode,n):t.nodeType===1&&Ag(t,n),ju(t)):Ag(un,n.stateNode));break;case 4:r=un,i=ei,un=n.stateNode.containerInfo,ei=!0,Vs(t,e,n),un=r,ei=i;break;case 0:case 11:case 14:case 15:if(!bn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gm(n,e,o),i=i.next}while(i!==r)}Vs(t,e,n);break;case 1:if(!bn&&(Al(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ot(n,e,a)}Vs(t,e,n);break;case 21:Vs(t,e,n);break;case 22:n.mode&1?(bn=(r=bn)||n.memoizedState!==null,Vs(t,e,n),bn=r):Vs(t,e,n);break;default:Vs(t,e,n)}}function Ww(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bD),e.forEach(function(r){var i=LD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:un=a.stateNode,ei=!1;break e;case 3:un=a.stateNode.containerInfo,ei=!0;break e;case 4:un=a.stateNode.containerInfo,ei=!0;break e}a=a.return}if(un===null)throw Error(Y(160));AS(s,o,i),un=null,ei=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ot(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xS(e,t),e=e.sibling}function xS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jr(e,t),Ti(t),r&4){try{Eu(3,t,t.return),dp(3,t)}catch(x){Ot(t,t.return,x)}try{Eu(5,t,t.return)}catch(x){Ot(t,t.return,x)}}break;case 1:Jr(e,t),Ti(t),r&512&&n!==null&&Al(n,n.return);break;case 5:if(Jr(e,t),Ti(t),r&512&&n!==null&&Al(n,n.return),t.flags&32){var i=t.stateNode;try{Nu(i,"")}catch(x){Ot(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&YT(i,s),Em(a,o);var u=Em(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?tI(i,p):d==="dangerouslySetInnerHTML"?ZT(i,p):d==="children"?Nu(i,p):Zv(i,d,p,u)}switch(a){case"input":mm(i,s);break;case"textarea":XT(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Rl(i,!!s.multiple,w,!1):m!==!!s.multiple&&(s.defaultValue!=null?Rl(i,!!s.multiple,s.defaultValue,!0):Rl(i,!!s.multiple,s.multiple?[]:"",!1))}i[zu]=s}catch(x){Ot(t,t.return,x)}}break;case 6:if(Jr(e,t),Ti(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Ot(t,t.return,x)}}break;case 3:if(Jr(e,t),Ti(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ju(e.containerInfo)}catch(x){Ot(t,t.return,x)}break;case 4:Jr(e,t),Ti(t);break;case 13:Jr(e,t),Ti(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dy=jt())),r&4&&Ww(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(bn=(u=bn)||d,Jr(e,t),bn=u):Jr(e,t),Ti(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(p=se=d;se!==null;){switch(m=se,w=m.child,m.tag){case 0:case 11:case 14:case 15:Eu(4,m,m.return);break;case 1:Al(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(x){Ot(r,n,x)}}break;case 5:Al(m,m.return);break;case 22:if(m.memoizedState!==null){Gw(p);continue}}w!==null?(w.return=m,se=w):Gw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=eI("display",o))}catch(x){Ot(t,t.return,x)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(x){Ot(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jr(e,t),Ti(t),r&4&&Ww(t);break;case 21:break;default:Jr(e,t),Ti(t)}}function Ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(CS(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nu(i,""),r.flags&=-33);var s=Hw(t);Xm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Hw(t);Ym(t,a,o);break;default:throw Error(Y(161))}}catch(l){Ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AD(t,e,n){se=t,PS(t)}function PS(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||md;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||bn;a=md;var u=bn;if(md=o,(bn=l)&&!u)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?Qw(i):l!==null?(l.return=o,se=l):Qw(i);for(;s!==null;)se=s,PS(s),s=s.sibling;se=i,md=a,bn=u}Kw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):Kw(t)}}function Kw(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bn||dp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Rw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&ju(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}bn||e.flags&512&&Qm(e)}catch(m){Ot(e,e.return,m)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Gw(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Qw(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dp(4,e)}catch(l){Ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ot(e,i,l)}}var s=e.return;try{Qm(e)}catch(l){Ot(e,s,l)}break;case 5:var o=e.return;try{Qm(e)}catch(l){Ot(e,o,l)}}}catch(l){Ot(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var xD=Math.ceil,Af=fs.ReactCurrentDispatcher,ky=fs.ReactCurrentOwner,Mr=fs.ReactCurrentBatchConfig,$e=0,an=null,zt=null,dn=0,or=0,xl=bo(0),Jt=0,Qu=null,wa=0,fp=0,Ry=0,Tu=null,Qn=null,Dy=0,Gl=1/0,Wi=null,xf=!1,Jm=null,lo=null,vd=!1,eo=null,Pf=0,Iu=0,Zm=null,Ud=-1,$d=0;function jn(){return $e&6?jt():Ud!==-1?Ud:Ud=jt()}function co(t){return t.mode&1?$e&2&&dn!==0?dn&-dn:hD.transition!==null?($d===0&&($d=fI()),$d):(t=rt,t!==0||(t=window.event,t=t===void 0?16:wI(t.type)),t):1}function ii(t,e,n,r){if(50<Iu)throw Iu=0,Zm=null,Error(Y(185));uh(t,n,r),(!($e&2)||t!==an)&&(t===an&&(!($e&2)&&(fp|=n),Jt===4&&Ks(t,dn)),Zn(t,r),n===1&&$e===0&&!(e.mode&1)&&(Gl=jt()+500,cp&&Co()))}function Zn(t,e){var n=t.callbackNode;hR(t,e);var r=df(t,t===an?dn:0);if(r===0)n!==null&&iw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iw(n),e===1)t.tag===0?uD(Yw.bind(null,t)):FI(Yw.bind(null,t)),oD(function(){!($e&6)&&Co()}),n=null;else{switch(pI(r)){case 1:n=iy;break;case 4:n=hI;break;case 16:n=hf;break;case 536870912:n=dI;break;default:n=hf}n=VS(n,kS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kS(t,e){if(Ud=-1,$d=0,$e&6)throw Error(Y(327));var n=t.callbackNode;if(Ml()&&t.callbackNode!==n)return null;var r=df(t,t===an?dn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kf(t,r);else{e=r;var i=$e;$e|=2;var s=DS();(an!==t||dn!==e)&&(Wi=null,Gl=jt()+500,da(t,e));do try{RD();break}catch(a){RS(t,a)}while(!0);vy(),Af.current=s,$e=i,zt!==null?e=0:(an=null,dn=0,e=Jt)}if(e!==0){if(e===2&&(i=Cm(t),i!==0&&(r=i,e=ev(t,i))),e===1)throw n=Qu,da(t,0),Ks(t,r),Zn(t,jt()),n;if(e===6)Ks(t,r);else{if(i=t.current.alternate,!(r&30)&&!PD(i)&&(e=kf(t,r),e===2&&(s=Cm(t),s!==0&&(r=s,e=ev(t,s))),e===1))throw n=Qu,da(t,0),Ks(t,r),Zn(t,jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:ea(t,Qn,Wi);break;case 3:if(Ks(t,r),(r&130023424)===r&&(e=Dy+500-jt(),10<e)){if(df(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nm(ea.bind(null,t,Qn,Wi),e);break}ea(t,Qn,Wi);break;case 4:if(Ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ri(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xD(r/1960))-r,10<r){t.timeoutHandle=Nm(ea.bind(null,t,Qn,Wi),r);break}ea(t,Qn,Wi);break;case 5:ea(t,Qn,Wi);break;default:throw Error(Y(329))}}}return Zn(t,jt()),t.callbackNode===n?kS.bind(null,t):null}function ev(t,e){var n=Tu;return t.current.memoizedState.isDehydrated&&(da(t,e).flags|=256),t=kf(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&tv(e)),t}function tv(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function PD(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ai(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ks(t,e){for(e&=~Ry,e&=~fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ri(e),r=1<<n;t[n]=-1,e&=~r}}function Yw(t){if($e&6)throw Error(Y(327));Ml();var e=df(t,0);if(!(e&1))return Zn(t,jt()),null;var n=kf(t,e);if(t.tag!==0&&n===2){var r=Cm(t);r!==0&&(e=r,n=ev(t,r))}if(n===1)throw n=Qu,da(t,0),Ks(t,e),Zn(t,jt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ea(t,Qn,Wi),Zn(t,jt()),null}function Oy(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Gl=jt()+500,cp&&Co())}}function Ea(t){eo!==null&&eo.tag===0&&!($e&6)&&Ml();var e=$e;$e|=1;var n=Mr.transition,r=rt;try{if(Mr.transition=null,rt=1,t)return t()}finally{rt=r,Mr.transition=n,$e=e,!($e&6)&&Co()}}function Ny(){or=xl.current,_t(xl)}function da(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sD(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(py(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vf();break;case 3:Wl(),_t(Xn),_t(An),Iy();break;case 5:Ty(r);break;case 4:Wl();break;case 13:_t(bt);break;case 19:_t(bt);break;case 10:yy(r.type._context);break;case 22:case 23:Ny()}n=n.return}if(an=t,zt=t=uo(t.current,null),dn=or=e,Jt=0,Qu=null,Ry=fp=wa=0,Qn=Tu=null,la!==null){for(e=0;e<la.length;e++)if(n=la[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}la=null}return t}function RS(t,e){do{var n=zt;try{if(vy(),Vd.current=Cf,bf){for(var r=At.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bf=!1}if(_a=0,on=Xt=At=null,wu=!1,Wu=0,ky.current=null,n===null||n.return===null){Jt=1,Qu=e,zt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=dn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=Vw(o);if(w!==null){w.flags&=-257,jw(w,o,a,s,e),w.mode&1&&Mw(s,u,e),e=w,l=u;var E=e.updateQueue;if(E===null){var x=new Set;x.add(l),e.updateQueue=x}else E.add(l);break e}else{if(!(e&1)){Mw(s,u,e),Ly();break e}l=Error(Y(426))}}else if(Tt&&a.mode&1){var R=Vw(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),jw(R,o,a,s,e),gy(Kl(l,a));break e}}s=l=Kl(l,a),Jt!==4&&(Jt=2),Tu===null?Tu=[s]:Tu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=pS(s,l,e);kw(s,A);break e;case 1:a=l;var T=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(lo===null||!lo.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=gS(s,a,e);kw(s,M);break e}}s=s.return}while(s!==null)}NS(n)}catch(z){e=z,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function DS(){var t=Af.current;return Af.current=Cf,t===null?Cf:t}function Ly(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),an===null||!(wa&268435455)&&!(fp&268435455)||Ks(an,dn)}function kf(t,e){var n=$e;$e|=2;var r=DS();(an!==t||dn!==e)&&(Wi=null,da(t,e));do try{kD();break}catch(i){RS(t,i)}while(!0);if(vy(),$e=n,Af.current=r,zt!==null)throw Error(Y(261));return an=null,dn=0,Jt}function kD(){for(;zt!==null;)OS(zt)}function RD(){for(;zt!==null&&!nR();)OS(zt)}function OS(t){var e=MS(t.alternate,t,or);t.memoizedProps=t.pendingProps,e===null?NS(t):zt=e,ky.current=null}function NS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SD(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,zt=null;return}}else if(n=ID(n,e,or),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Jt===0&&(Jt=5)}function ea(t,e,n){var r=rt,i=Mr.transition;try{Mr.transition=null,rt=1,DD(t,e,n,r)}finally{Mr.transition=i,rt=r}return null}function DD(t,e,n,r){do Ml();while(eo!==null);if($e&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(dR(t,s),t===an&&(zt=an=null,dn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vd||(vd=!0,VS(hf,function(){return Ml(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Mr.transition,Mr.transition=null;var o=rt;rt=1;var a=$e;$e|=4,ky.current=null,CD(t,n),xS(n,t),JR(Dm),ff=!!Rm,Dm=Rm=null,t.current=n,AD(n),rR(),$e=a,rt=o,Mr.transition=s}else t.current=n;if(vd&&(vd=!1,eo=t,Pf=i),s=t.pendingLanes,s===0&&(lo=null),oR(n.stateNode),Zn(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xf)throw xf=!1,t=Jm,Jm=null,t;return Pf&1&&t.tag!==0&&Ml(),s=t.pendingLanes,s&1?t===Zm?Iu++:(Iu=0,Zm=t):Iu=0,Co(),null}function Ml(){if(eo!==null){var t=pI(Pf),e=Mr.transition,n=rt;try{if(Mr.transition=null,rt=16>t?16:t,eo===null)var r=!1;else{if(t=eo,eo=null,Pf=0,$e&6)throw Error(Y(331));var i=$e;for($e|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(se=u;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:Eu(8,d,s)}var p=d.child;if(p!==null)p.return=d,se=p;else for(;se!==null;){d=se;var m=d.sibling,w=d.return;if(bS(d),d===u){se=null;break}if(m!==null){m.return=w,se=m;break}se=w}}}var E=s.alternate;if(E!==null){var x=E.child;if(x!==null){E.child=null;do{var R=x.sibling;x.sibling=null,x=R}while(x!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eu(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,se=A;break e}se=s.return}}var T=t.current;for(se=T;se!==null;){o=se;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,se=I;else e:for(o=T;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:dp(9,a)}}catch(z){Ot(a,a.return,z)}if(a===o){se=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,se=M;break e}se=a.return}}if($e=i,Co(),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(ip,t)}catch{}r=!0}return r}finally{rt=n,Mr.transition=e}}return!1}function Xw(t,e,n){e=Kl(n,e),e=pS(t,e,1),t=ao(t,e,1),e=jn(),t!==null&&(uh(t,1,e),Zn(t,e))}function Ot(t,e,n){if(t.tag===3)Xw(t,t,n);else for(;e!==null;){if(e.tag===3){Xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(lo===null||!lo.has(r))){t=Kl(n,t),t=gS(e,t,1),e=ao(e,t,1),t=jn(),e!==null&&(uh(e,1,t),Zn(e,t));break}}e=e.return}}function OD(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,an===t&&(dn&n)===n&&(Jt===4||Jt===3&&(dn&130023424)===dn&&500>jt()-Dy?da(t,0):Ry|=n),Zn(t,e)}function LS(t,e){e===0&&(t.mode&1?(e=ad,ad<<=1,!(ad&130023424)&&(ad=4194304)):e=1);var n=jn();t=os(t,e),t!==null&&(uh(t,e,n),Zn(t,n))}function ND(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),LS(t,n)}function LD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),LS(t,n)}var MS;MS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,TD(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,Tt&&e.flags&1048576&&UI(e,wf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fd(t,e),t=e.pendingProps;var i=zl(e,An.current);Ll(e,n),i=by(null,e,r,t,i,n);var s=Cy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(r)?(s=!0,yf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wy(e),i.updater=hp,e.stateNode=i,i._reactInternals=e,$m(e,r,t,n),e=qm(null,e,r,!0,s,n)):(e.tag=0,Tt&&s&&fy(e),On(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=VD(r),t=Zr(r,t),i){case 0:e=zm(null,e,r,t,n);break e;case 1:e=$w(null,e,r,t,n);break e;case 11:e=Fw(null,e,r,t,n);break e;case 14:e=Uw(null,e,r,Zr(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),zm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),$w(t,e,r,i,n);case 3:e:{if(_S(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,WI(t,e),If(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Kl(Error(Y(423)),e),e=Bw(t,e,r,n,i);break e}else if(r!==i){i=Kl(Error(Y(424)),e),e=Bw(t,e,r,n,i);break e}else for(ar=oo(e.stateNode.containerInfo.firstChild),ur=e,Tt=!0,ti=null,n=qI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ql(),r===i){e=as(t,e,n);break e}On(t,e,r,n)}e=e.child}return e;case 5:return KI(e),t===null&&jm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Om(r,i)?o=null:s!==null&&Om(r,s)&&(e.flags|=32),yS(t,e),On(t,e,o,n),e.child;case 6:return t===null&&jm(e),null;case 13:return wS(t,e,n);case 4:return Ey(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hl(e,null,r,n):On(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),Fw(t,e,r,i,n);case 7:return On(t,e,e.pendingProps,n),e.child;case 8:return On(t,e,e.pendingProps.children,n),e.child;case 12:return On(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,gt(Ef,r._currentValue),r._currentValue=o,s!==null)if(ai(s.value,o)){if(s.children===i.children&&!Xn.current){e=as(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ts(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Fm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Fm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}On(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ll(e,n),i=Fr(i),r=r(i),e.flags|=1,On(t,e,r,n),e.child;case 14:return r=e.type,i=Zr(r,e.pendingProps),i=Zr(r.type,i),Uw(t,e,r,i,n);case 15:return mS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zr(r,i),Fd(t,e),e.tag=1,Jn(r)?(t=!0,yf(e)):t=!1,Ll(e,n),fS(e,r,i),$m(e,r,i,n),qm(null,e,r,!0,t,n);case 19:return ES(t,e,n);case 22:return vS(t,e,n)}throw Error(Y(156,e.tag))};function VS(t,e){return uI(t,e)}function MD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,n,r){return new MD(t,e,n,r)}function My(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VD(t){if(typeof t=="function")return My(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ty)return 11;if(t===ny)return 14}return 2}function uo(t,e){var n=t.alternate;return n===null?(n=Nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bd(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")My(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case yl:return fa(n.children,i,s,e);case ey:o=8,i|=8;break;case hm:return t=Nr(12,n,e,i|2),t.elementType=hm,t.lanes=s,t;case dm:return t=Nr(13,n,e,i),t.elementType=dm,t.lanes=s,t;case fm:return t=Nr(19,n,e,i),t.elementType=fm,t.lanes=s,t;case KT:return pp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HT:o=10;break e;case WT:o=9;break e;case ty:o=11;break e;case ny:o=14;break e;case zs:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Nr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function fa(t,e,n,r){return t=Nr(7,t,r,e),t.lanes=n,t}function pp(t,e,n,r){return t=Nr(22,t,r,e),t.elementType=KT,t.lanes=n,t.stateNode={isHidden:!1},t}function Lg(t,e,n){return t=Nr(6,t,null,e),t.lanes=n,t}function Mg(t,e,n){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vy(t,e,n,r,i,s,o,a,l){return t=new jD(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wy(s),t}function FD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jS(t){if(!t)return _o;t=t._reactInternals;e:{if(Na(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Jn(n))return jI(t,n,e)}return e}function FS(t,e,n,r,i,s,o,a,l){return t=Vy(n,r,!0,t,i,s,o,a,l),t.context=jS(null),n=t.current,r=jn(),i=co(n),s=ts(r,i),s.callback=e??null,ao(n,s,i),t.current.lanes=i,uh(t,i,r),Zn(t,r),t}function gp(t,e,n,r){var i=e.current,s=jn(),o=co(i);return n=jS(n),e.context===null?e.context=n:e.pendingContext=n,e=ts(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ao(i,e,o),t!==null&&(ii(t,i,o,s),Md(t,i,o)),o}function Rf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jy(t,e){Jw(t,e),(t=t.alternate)&&Jw(t,e)}function UD(){return null}var US=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fy(t){this._internalRoot=t}mp.prototype.render=Fy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));gp(t,e,null,null)};mp.prototype.unmount=Fy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ea(function(){gp(null,t,null,null)}),e[ss]=null}};function mp(t){this._internalRoot=t}mp.prototype.unstable_scheduleHydration=function(t){if(t){var e=vI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ws.length&&e!==0&&e<Ws[n].priority;n++);Ws.splice(n,0,t),n===0&&_I(t)}};function Uy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zw(){}function $D(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Rf(o);s.call(u)}}var o=FS(e,r,t,0,null,!1,!1,"",Zw);return t._reactRootContainer=o,t[ss]=o.current,$u(t.nodeType===8?t.parentNode:t),Ea(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Rf(l);a.call(u)}}var l=Vy(t,0,!1,null,null,!1,!1,"",Zw);return t._reactRootContainer=l,t[ss]=l.current,$u(t.nodeType===8?t.parentNode:t),Ea(function(){gp(e,l,n,r)}),l}function yp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Rf(o);a.call(l)}}gp(e,o,t,i)}else o=$D(n,e,t,i,r);return Rf(o)}gI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=iu(e.pendingLanes);n!==0&&(sy(e,n|1),Zn(e,jt()),!($e&6)&&(Gl=jt()+500,Co()))}break;case 13:Ea(function(){var r=os(t,1);if(r!==null){var i=jn();ii(r,t,1,i)}}),jy(t,1)}};oy=function(t){if(t.tag===13){var e=os(t,134217728);if(e!==null){var n=jn();ii(e,t,134217728,n)}jy(t,134217728)}};mI=function(t){if(t.tag===13){var e=co(t),n=os(t,e);if(n!==null){var r=jn();ii(n,t,e,r)}jy(t,e)}};vI=function(){return rt};yI=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};Im=function(t,e,n){switch(e){case"input":if(mm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lp(r);if(!i)throw Error(Y(90));QT(r),mm(r,i)}}}break;case"textarea":XT(t,n);break;case"select":e=n.value,e!=null&&Rl(t,!!n.multiple,e,!1)}};iI=Oy;sI=Ea;var BD={usingClientEntryPoint:!1,Events:[dh,Tl,lp,nI,rI,Oy]},Kc={findFiberByHostInstance:aa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zD={bundleType:Kc.bundleType,version:Kc.version,rendererPackageName:Kc.rendererPackageName,rendererConfig:Kc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lI(t),t===null?null:t.stateNode},findFiberByHostInstance:Kc.findFiberByHostInstance||UD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yd.isDisabled&&yd.supportsFiber)try{ip=yd.inject(zD),Pi=yd}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BD;gr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uy(e))throw Error(Y(200));return FD(t,e,null,n)};gr.createRoot=function(t,e){if(!Uy(t))throw Error(Y(299));var n=!1,r="",i=US;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vy(t,1,!1,null,null,n,!1,r,i),t[ss]=e.current,$u(t.nodeType===8?t.parentNode:t),new Fy(e)};gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=lI(e),t=t===null?null:t.stateNode,t};gr.flushSync=function(t){return Ea(t)};gr.hydrate=function(t,e,n){if(!vp(e))throw Error(Y(200));return yp(null,t,e,!0,n)};gr.hydrateRoot=function(t,e,n){if(!Uy(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=US;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=FS(e,null,t,1,n??null,i,!1,s,o),t[ss]=e.current,$u(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mp(e)};gr.render=function(t,e,n){if(!vp(e))throw Error(Y(200));return yp(null,t,e,!1,n)};gr.unmountComponentAtNode=function(t){if(!vp(t))throw Error(Y(40));return t._reactRootContainer?(Ea(function(){yp(null,null,t,!1,function(){t._reactRootContainer=null,t[ss]=null})}),!0):!1};gr.unstable_batchedUpdates=Oy;gr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vp(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return yp(t,e,n,!1,r)};gr.version="18.3.1-next-f1338f8080-20240426";function $S(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($S)}catch(t){console.error(t)}}$S(),$T.exports=gr;var qD=$T.exports,BS,eE=qD;BS=eE.createRoot,eE.hydrateRoot;var HD={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(mk,function(){const n=new Map,r={set(_,h,g){n.has(_)||n.set(_,new Map);const S=n.get(_);S.has(h)||S.size===0?S.set(h,g):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(S.keys())[0]}.`)},get:(_,h)=>n.has(_)&&n.get(_).get(h)||null,remove(_,h){if(!n.has(_))return;const g=n.get(_);g.delete(h),g.size===0&&n.delete(_)}},i="transitionend",s=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(h,g)=>`#${CSS.escape(g)}`)),_),o=_=>{_.dispatchEvent(new Event(i))},a=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),l=_=>a(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(s(_)):null,u=_=>{if(!a(_)||_.getClientRects().length===0)return!1;const h=getComputedStyle(_).getPropertyValue("visibility")==="visible",g=_.closest("details:not([open])");if(!g)return h;if(g!==_){const S=_.closest("summary");if(S&&S.parentNode!==g||S===null)return!1}return h},d=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),p=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const h=_.getRootNode();return h instanceof ShadowRoot?h:null}return _ instanceof ShadowRoot?_:_.parentNode?p(_.parentNode):null},m=()=>{},w=_=>{_.offsetHeight},E=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,x=[],R=()=>document.documentElement.dir==="rtl",A=_=>{var h;h=()=>{const g=E();if(g){const S=_.NAME,V=g.fn[S];g.fn[S]=_.jQueryInterface,g.fn[S].Constructor=_,g.fn[S].noConflict=()=>(g.fn[S]=V,_.jQueryInterface)}},document.readyState==="loading"?(x.length||document.addEventListener("DOMContentLoaded",()=>{for(const g of x)g()}),x.push(h)):h()},T=(_,h=[],g=_)=>typeof _=="function"?_(...h):g,I=(_,h,g=!0)=>{if(!g)return void T(_);const S=(H=>{if(!H)return 0;let{transitionDuration:G,transitionDelay:Z}=window.getComputedStyle(H);const ie=Number.parseFloat(G),oe=Number.parseFloat(Z);return ie||oe?(G=G.split(",")[0],Z=Z.split(",")[0],1e3*(Number.parseFloat(G)+Number.parseFloat(Z))):0})(h)+5;let V=!1;const F=({target:H})=>{H===h&&(V=!0,h.removeEventListener(i,F),T(_))};h.addEventListener(i,F),setTimeout(()=>{V||o(h)},S)},M=(_,h,g,S)=>{const V=_.length;let F=_.indexOf(h);return F===-1?!g&&S?_[V-1]:_[0]:(F+=g?1:-1,S&&(F=(F+V)%V),_[Math.max(0,Math.min(F,V-1))])},z=/[^.]*(?=\..*)\.|.*/,W=/\..*/,P=/::\d+$/,C={};let k=1;const O={mouseenter:"mouseover",mouseleave:"mouseout"},L=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function j(_,h){return h&&`${h}::${k++}`||_.uidEvent||k++}function D(_){const h=j(_);return _.uidEvent=h,C[h]=C[h]||{},C[h]}function mt(_,h,g=null){return Object.values(_).find(S=>S.callable===h&&S.delegationSelector===g)}function St(_,h,g){const S=typeof h=="string",V=S?g:h||g;let F=he(_);return L.has(F)||(F=_),[S,V,F]}function Ut(_,h,g,S,V){if(typeof h!="string"||!_)return;let[F,H,G]=St(h,g,S);h in O&&(H=(we=>function(ve){if(!ve.relatedTarget||ve.relatedTarget!==ve.delegateTarget&&!ve.delegateTarget.contains(ve.relatedTarget))return we.call(this,ve)})(H));const Z=D(_),ie=Z[G]||(Z[G]={}),oe=mt(ie,H,F?g:null);if(oe)return void(oe.oneOff=oe.oneOff&&V);const ee=j(H,h.replace(z,"")),Ae=F?function(pe,we,ve){return function Ee(ct){const pt=pe.querySelectorAll(we);for(let{target:ke}=ct;ke&&ke!==this;ke=ke.parentNode)for(const We of pt)if(We===ke)return Me(ct,{delegateTarget:ke}),Ee.oneOff&&B.off(pe,ct.type,we,ve),ve.apply(ke,[ct])}}(_,g,H):function(pe,we){return function ve(Ee){return Me(Ee,{delegateTarget:pe}),ve.oneOff&&B.off(pe,Ee.type,we),we.apply(pe,[Ee])}}(_,H);Ae.delegationSelector=F?g:null,Ae.callable=H,Ae.oneOff=V,Ae.uidEvent=ee,ie[ee]=Ae,_.addEventListener(G,Ae,F)}function Ye(_,h,g,S,V){const F=mt(h[g],S,V);F&&(_.removeEventListener(g,F,!!V),delete h[g][F.uidEvent])}function X(_,h,g,S){const V=h[g]||{};for(const[F,H]of Object.entries(V))F.includes(S)&&Ye(_,h,g,H.callable,H.delegationSelector)}function he(_){return _=_.replace(W,""),O[_]||_}const B={on(_,h,g,S){Ut(_,h,g,S,!1)},one(_,h,g,S){Ut(_,h,g,S,!0)},off(_,h,g,S){if(typeof h!="string"||!_)return;const[V,F,H]=St(h,g,S),G=H!==h,Z=D(_),ie=Z[H]||{},oe=h.startsWith(".");if(F===void 0){if(oe)for(const ee of Object.keys(Z))X(_,Z,ee,h.slice(1));for(const[ee,Ae]of Object.entries(ie)){const pe=ee.replace(P,"");G&&!h.includes(pe)||Ye(_,Z,H,Ae.callable,Ae.delegationSelector)}}else{if(!Object.keys(ie).length)return;Ye(_,Z,H,F,V?g:null)}},trigger(_,h,g){if(typeof h!="string"||!_)return null;const S=E();let V=null,F=!0,H=!0,G=!1;h!==he(h)&&S&&(V=S.Event(h,g),S(_).trigger(V),F=!V.isPropagationStopped(),H=!V.isImmediatePropagationStopped(),G=V.isDefaultPrevented());const Z=Me(new Event(h,{bubbles:F,cancelable:!0}),g);return G&&Z.preventDefault(),H&&_.dispatchEvent(Z),Z.defaultPrevented&&V&&V.preventDefault(),Z}};function Me(_,h={}){for(const[g,S]of Object.entries(h))try{_[g]=S}catch{Object.defineProperty(_,g,{configurable:!0,get:()=>S})}return _}function Re(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function Be(_){return _.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const st={setDataAttribute(_,h,g){_.setAttribute(`data-bs-${Be(h)}`,g)},removeDataAttribute(_,h){_.removeAttribute(`data-bs-${Be(h)}`)},getDataAttributes(_){if(!_)return{};const h={},g=Object.keys(_.dataset).filter(S=>S.startsWith("bs")&&!S.startsWith("bsConfig"));for(const S of g){let V=S.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),h[V]=Re(_.dataset[S])}return h},getDataAttribute:(_,h)=>Re(_.getAttribute(`data-bs-${Be(h)}`))};class kt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,g){const S=a(g)?st.getDataAttribute(g,"config"):{};return{...this.constructor.Default,...typeof S=="object"?S:{},...a(g)?st.getDataAttributes(g):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,g=this.constructor.DefaultType){for(const[V,F]of Object.entries(g)){const H=h[V],G=a(H)?"element":(S=H)==null?`${S}`:Object.prototype.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(F).test(G))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${V}" provided type "${G}" but expected type "${F}".`)}var S}}class Ge extends kt{constructor(h,g){super(),(h=l(h))&&(this._element=h,this._config=this._getConfig(g),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),B.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,g,S=!0){I(h,g,S)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return r.get(l(h),this.DATA_KEY)}static getOrCreateInstance(h,g={}){return this.getInstance(h)||new this(h,typeof g=="object"?g:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const fe=_=>{let h=_.getAttribute("data-bs-target");if(!h||h==="#"){let g=_.getAttribute("href");if(!g||!g.includes("#")&&!g.startsWith("."))return null;g.includes("#")&&!g.startsWith("#")&&(g=`#${g.split("#")[1]}`),h=g&&g!=="#"?g.trim():null}return h?h.split(",").map(g=>s(g)).join(","):null},re={find:(_,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,_)),findOne:(_,h=document.documentElement)=>Element.prototype.querySelector.call(h,_),children:(_,h)=>[].concat(..._.children).filter(g=>g.matches(h)),parents(_,h){const g=[];let S=_.parentNode.closest(h);for(;S;)g.push(S),S=S.parentNode.closest(h);return g},prev(_,h){let g=_.previousElementSibling;for(;g;){if(g.matches(h))return[g];g=g.previousElementSibling}return[]},next(_,h){let g=_.nextElementSibling;for(;g;){if(g.matches(h))return[g];g=g.nextElementSibling}return[]},focusableChildren(_){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(g=>`${g}:not([tabindex^="-"])`).join(",");return this.find(h,_).filter(g=>!d(g)&&u(g))},getSelectorFromElement(_){const h=fe(_);return h&&re.findOne(h)?h:null},getElementFromSelector(_){const h=fe(_);return h?re.findOne(h):null},getMultipleElementsFromSelector(_){const h=fe(_);return h?re.find(h):[]}},pn=(_,h="hide")=>{const g=`click.dismiss${_.EVENT_KEY}`,S=_.NAME;B.on(document,g,`[data-bs-dismiss="${S}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),d(this))return;const F=re.getElementFromSelector(this)||this.closest(`.${S}`);_.getOrCreateInstance(F)[h]()})},gn=".bs.alert",wt=`close${gn}`,Lt=`closed${gn}`;class ln extends Ge{static get NAME(){return"alert"}close(){if(B.trigger(this._element,wt).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),B.trigger(this._element,Lt),this.dispose()}static jQueryInterface(h){return this.each(function(){const g=ln.getOrCreateInstance(this);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h](this)}})}}pn(ln,"close"),A(ln);const Br='[data-bs-toggle="button"]';class mn extends Ge{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const g=mn.getOrCreateInstance(this);h==="toggle"&&g[h]()})}}B.on(document,"click.bs.button.data-api",Br,_=>{_.preventDefault();const h=_.target.closest(Br);mn.getOrCreateInstance(h).toggle()}),A(mn);const Wt=".bs.swipe",_s=`touchstart${Wt}`,ui=`touchmove${Wt}`,ce=`touchend${Wt}`,me=`pointerdown${Wt}`,ue=`pointerup${Wt}`,be={endCallback:null,leftCallback:null,rightCallback:null},Ve={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class vt extends kt{constructor(h,g){super(),this._element=h,h&&vt.isSupported()&&(this._config=this._getConfig(g),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return be}static get DefaultType(){return Ve}static get NAME(){return"swipe"}dispose(){B.off(this._element,Wt)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),T(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const g=h/this._deltaX;this._deltaX=0,g&&T(g>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(B.on(this._element,me,h=>this._start(h)),B.on(this._element,ue,h=>this._end(h)),this._element.classList.add("pointer-event")):(B.on(this._element,_s,h=>this._start(h)),B.on(this._element,ui,h=>this._move(h)),B.on(this._element,ce,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ue=".bs.carousel",He=".data-api",ot="next",tr="prev",zr="left",Ni="right",ws=`slide${Ue}`,nr=`slid${Ue}`,$a=`keydown${Ue}`,Li=`mouseenter${Ue}`,hi=`mouseleave${Ue}`,_c=`dragstart${Ue}`,wc=`load${Ue}${He}`,No=`click${Ue}${He}`,Lo="carousel",qr="active",di=".active",Es=".carousel-item",Mo=di+Es,Hr={ArrowLeft:Ni,ArrowRight:zr},Ts={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Is={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class zn extends Ge{constructor(h,g){super(h,g),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Lo&&this.cycle()}static get Default(){return Ts}static get DefaultType(){return Is}static get NAME(){return"carousel"}next(){this._slide(ot)}nextWhenVisible(){!document.hidden&&u(this._element)&&this.next()}prev(){this._slide(tr)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?B.one(this._element,nr,()=>this.cycle()):this.cycle())}to(h){const g=this._getItems();if(h>g.length-1||h<0)return;if(this._isSliding)return void B.one(this._element,nr,()=>this.to(h));const S=this._getItemIndex(this._getActive());if(S===h)return;const V=h>S?ot:tr;this._slide(V,g[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&B.on(this._element,$a,h=>this._keydown(h)),this._config.pause==="hover"&&(B.on(this._element,Li,()=>this.pause()),B.on(this._element,hi,()=>this._maybeEnableCycle())),this._config.touch&&vt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const g of re.find(".carousel-item img",this._element))B.on(g,_c,S=>S.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(zr)),rightCallback:()=>this._slide(this._directionToOrder(Ni)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new vt(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const g=Hr[h.key];g&&(h.preventDefault(),this._slide(this._directionToOrder(g)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const g=re.findOne(di,this._indicatorsElement);g.classList.remove(qr),g.removeAttribute("aria-current");const S=re.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);S&&(S.classList.add(qr),S.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const g=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=g||this._config.defaultInterval}_slide(h,g=null){if(this._isSliding)return;const S=this._getActive(),V=h===ot,F=g||M(this._getItems(),S,V,this._config.wrap);if(F===S)return;const H=this._getItemIndex(F),G=ee=>B.trigger(this._element,ee,{relatedTarget:F,direction:this._orderToDirection(h),from:this._getItemIndex(S),to:H});if(G(ws).defaultPrevented||!S||!F)return;const Z=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(H),this._activeElement=F;const ie=V?"carousel-item-start":"carousel-item-end",oe=V?"carousel-item-next":"carousel-item-prev";F.classList.add(oe),w(F),S.classList.add(ie),F.classList.add(ie),this._queueCallback(()=>{F.classList.remove(ie,oe),F.classList.add(qr),S.classList.remove(qr,oe,ie),this._isSliding=!1,G(nr)},S,this._isAnimated()),Z&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return re.findOne(Mo,this._element)}_getItems(){return re.find(Es,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return R()?h===zr?tr:ot:h===zr?ot:tr}_orderToDirection(h){return R()?h===tr?zr:Ni:h===tr?Ni:zr}static jQueryInterface(h){return this.each(function(){const g=zn.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h]()}}else g.to(h)})}}B.on(document,No,"[data-bs-slide], [data-bs-slide-to]",function(_){const h=re.getElementFromSelector(this);if(!h||!h.classList.contains(Lo))return;_.preventDefault();const g=zn.getOrCreateInstance(h),S=this.getAttribute("data-bs-slide-to");return S?(g.to(S),void g._maybeEnableCycle()):st.getDataAttribute(this,"slide")==="next"?(g.next(),void g._maybeEnableCycle()):(g.prev(),void g._maybeEnableCycle())}),B.on(window,wc,()=>{const _=re.find('[data-bs-ride="carousel"]');for(const h of _)zn.getOrCreateInstance(h)}),A(zn);const xn=".bs.collapse",Ba=`show${xn}`,Kt=`shown${xn}`,za=`hide${xn}`,Mi=`hidden${xn}`,ze=`click${xn}.data-api`,at="show",Mt="collapse",Xe="collapsing",vr=`:scope .${Mt} .${Mt}`,cn='[data-bs-toggle="collapse"]',Ss={parent:null,toggle:!0},Ph={parent:"(null|element)",toggle:"boolean"};class fi extends Ge{constructor(h,g){super(h,g),this._isTransitioning=!1,this._triggerArray=[];const S=re.find(cn);for(const V of S){const F=re.getSelectorFromElement(V),H=re.find(F).filter(G=>G===this._element);F!==null&&H.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ss}static get DefaultType(){return Ph}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(V=>V!==this._element).map(V=>fi.getOrCreateInstance(V,{toggle:!1}))),h.length&&h[0]._isTransitioning||B.trigger(this._element,Ba).defaultPrevented)return;for(const V of h)V.hide();const g=this._getDimension();this._element.classList.remove(Mt),this._element.classList.add(Xe),this._element.style[g]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const S=`scroll${g[0].toUpperCase()+g.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Xe),this._element.classList.add(Mt,at),this._element.style[g]="",B.trigger(this._element,Kt)},this._element,!0),this._element.style[g]=`${this._element[S]}px`}hide(){if(this._isTransitioning||!this._isShown()||B.trigger(this._element,za).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,w(this._element),this._element.classList.add(Xe),this._element.classList.remove(Mt,at);for(const g of this._triggerArray){const S=re.getElementFromSelector(g);S&&!this._isShown(S)&&this._addAriaAndCollapsedClass([g],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Xe),this._element.classList.add(Mt),B.trigger(this._element,Mi)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(at)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=l(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(cn);for(const g of h){const S=re.getElementFromSelector(g);S&&this._addAriaAndCollapsedClass([g],this._isShown(S))}}_getFirstLevelChildren(h){const g=re.find(vr,this._config.parent);return re.find(h,this._config.parent).filter(S=>!g.includes(S))}_addAriaAndCollapsedClass(h,g){if(h.length)for(const S of h)S.classList.toggle("collapsed",!g),S.setAttribute("aria-expanded",g)}static jQueryInterface(h){const g={};return typeof h=="string"&&/show|hide/.test(h)&&(g.toggle=!1),this.each(function(){const S=fi.getOrCreateInstance(this,g);if(typeof h=="string"){if(S[h]===void 0)throw new TypeError(`No method named "${h}"`);S[h]()}})}}B.on(document,ze,cn,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();for(const h of re.getMultipleElementsFromSelector(this))fi.getOrCreateInstance(h,{toggle:!1}).toggle()}),A(fi);var $t="top",Rt="bottom",vn="right",tn="left",bs="auto",pi=[$t,Rt,vn,tn],gi="start",Vi="end",kh="clippingParents",Cs="viewport",ji="popper",qa="reference",Fi=pi.reduce(function(_,h){return _.concat([h+"-"+gi,h+"-"+Vi])},[]),Wr=[].concat(pi,[bs]).reduce(function(_,h){return _.concat([h,h+"-"+gi,h+"-"+Vi])},[]),Ha="beforeRead",Rh="read",Ec="afterRead",Tc="beforeMain",Ic="main",Wa="afterMain",Ka="beforeWrite",Sc="write",bc="afterWrite",Dh=[Ha,Rh,Ec,Tc,Ic,Wa,Ka,Sc,bc];function yr(_){return _?(_.nodeName||"").toLowerCase():null}function yn(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var h=_.ownerDocument;return h&&h.defaultView||window}return _}function mi(_){return _ instanceof yn(_).Element||_ instanceof Element}function qn(_){return _ instanceof yn(_).HTMLElement||_ instanceof HTMLElement}function Kr(_){return typeof ShadowRoot<"u"&&(_ instanceof yn(_).ShadowRoot||_ instanceof ShadowRoot)}const rr={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var h=_.state;Object.keys(h.elements).forEach(function(g){var S=h.styles[g]||{},V=h.attributes[g]||{},F=h.elements[g];qn(F)&&yr(F)&&(Object.assign(F.style,S),Object.keys(V).forEach(function(H){var G=V[H];G===!1?F.removeAttribute(H):F.setAttribute(H,G===!0?"":G)}))})},effect:function(_){var h=_.state,g={popper:{position:h.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(h.elements.popper.style,g.popper),h.styles=g,h.elements.arrow&&Object.assign(h.elements.arrow.style,g.arrow),function(){Object.keys(h.elements).forEach(function(S){var V=h.elements[S],F=h.attributes[S]||{},H=Object.keys(h.styles.hasOwnProperty(S)?h.styles[S]:g[S]).reduce(function(G,Z){return G[Z]="",G},{});qn(V)&&yr(V)&&(Object.assign(V.style,H),Object.keys(F).forEach(function(G){V.removeAttribute(G)}))})}},requires:["computeStyles"]};function Pn(_){return _.split("-")[0]}var _r=Math.max,Vo=Math.min,qe=Math.round;function As(){var _=navigator.userAgentData;return _!=null&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function xs(){return!/^((?!chrome|android).)*safari/i.test(As())}function wr(_,h,g){h===void 0&&(h=!1),g===void 0&&(g=!1);var S=_.getBoundingClientRect(),V=1,F=1;h&&qn(_)&&(V=_.offsetWidth>0&&qe(S.width)/_.offsetWidth||1,F=_.offsetHeight>0&&qe(S.height)/_.offsetHeight||1);var H=(mi(_)?yn(_):window).visualViewport,G=!xs()&&g,Z=(S.left+(G&&H?H.offsetLeft:0))/V,ie=(S.top+(G&&H?H.offsetTop:0))/F,oe=S.width/V,ee=S.height/F;return{width:oe,height:ee,top:ie,right:Z+oe,bottom:ie+ee,left:Z,x:Z,y:ie}}function Cc(_){var h=wr(_),g=_.offsetWidth,S=_.offsetHeight;return Math.abs(h.width-g)<=1&&(g=h.width),Math.abs(h.height-S)<=1&&(S=h.height),{x:_.offsetLeft,y:_.offsetTop,width:g,height:S}}function Ac(_,h){var g=h.getRootNode&&h.getRootNode();if(_.contains(h))return!0;if(g&&Kr(g)){var S=h;do{if(S&&_.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function Gr(_){return yn(_).getComputedStyle(_)}function Yp(_){return["table","td","th"].indexOf(yr(_))>=0}function vi(_){return((mi(_)?_.ownerDocument:_.document)||window.document).documentElement}function Ga(_){return yr(_)==="html"?_:_.assignedSlot||_.parentNode||(Kr(_)?_.host:null)||vi(_)}function Ps(_){return qn(_)&&Gr(_).position!=="fixed"?_.offsetParent:null}function Hn(_){for(var h=yn(_),g=Ps(_);g&&Yp(g)&&Gr(g).position==="static";)g=Ps(g);return g&&(yr(g)==="html"||yr(g)==="body"&&Gr(g).position==="static")?h:g||function(S){var V=/firefox/i.test(As());if(/Trident/i.test(As())&&qn(S)&&Gr(S).position==="fixed")return null;var F=Ga(S);for(Kr(F)&&(F=F.host);qn(F)&&["html","body"].indexOf(yr(F))<0;){var H=Gr(F);if(H.transform!=="none"||H.perspective!=="none"||H.contain==="paint"||["transform","perspective"].indexOf(H.willChange)!==-1||V&&H.willChange==="filter"||V&&H.filter&&H.filter!=="none")return F;F=F.parentNode}return null}(_)||h}function Qa(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function ks(_,h,g){return _r(_,Vo(h,g))}function xc(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function Ui(_,h){return h.reduce(function(g,S){return g[S]=_,g},{})}const Oh={name:"arrow",enabled:!0,phase:"main",fn:function(_){var h,g=_.state,S=_.name,V=_.options,F=g.elements.arrow,H=g.modifiersData.popperOffsets,G=Pn(g.placement),Z=Qa(G),ie=[tn,vn].indexOf(G)>=0?"height":"width";if(F&&H){var oe=function(ut,et){return xc(typeof(ut=typeof ut=="function"?ut(Object.assign({},et.rects,{placement:et.placement})):ut)!="number"?ut:Ui(ut,pi))}(V.padding,g),ee=Cc(F),Ae=Z==="y"?$t:tn,pe=Z==="y"?Rt:vn,we=g.rects.reference[ie]+g.rects.reference[Z]-H[Z]-g.rects.popper[ie],ve=H[Z]-g.rects.reference[Z],Ee=Hn(F),ct=Ee?Z==="y"?Ee.clientHeight||0:Ee.clientWidth||0:0,pt=we/2-ve/2,ke=oe[Ae],We=ct-ee[ie]-oe[pe],xe=ct/2-ee[ie]/2+pt,Ne=ks(ke,xe,We),Ze=Z;g.modifiersData[S]=((h={})[Ze]=Ne,h.centerOffset=Ne-xe,h)}},effect:function(_){var h=_.state,g=_.options.element,S=g===void 0?"[data-popper-arrow]":g;S!=null&&(typeof S!="string"||(S=h.elements.popper.querySelector(S)))&&Ac(h.elements.popper,S)&&(h.elements.arrow=S)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rs(_){return _.split("-")[1]}var Xp={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qr(_){var h,g=_.popper,S=_.popperRect,V=_.placement,F=_.variation,H=_.offsets,G=_.position,Z=_.gpuAcceleration,ie=_.adaptive,oe=_.roundOffsets,ee=_.isFixed,Ae=H.x,pe=Ae===void 0?0:Ae,we=H.y,ve=we===void 0?0:we,Ee=typeof oe=="function"?oe({x:pe,y:ve}):{x:pe,y:ve};pe=Ee.x,ve=Ee.y;var ct=H.hasOwnProperty("x"),pt=H.hasOwnProperty("y"),ke=tn,We=$t,xe=window;if(ie){var Ne=Hn(g),Ze="clientHeight",ut="clientWidth";Ne===yn(g)&&Gr(Ne=vi(g)).position!=="static"&&G==="absolute"&&(Ze="scrollHeight",ut="scrollWidth"),(V===$t||(V===tn||V===vn)&&F===Vi)&&(We=Rt,ve-=(ee&&Ne===xe&&xe.visualViewport?xe.visualViewport.height:Ne[Ze])-S.height,ve*=Z?1:-1),V!==tn&&(V!==$t&&V!==Rt||F!==Vi)||(ke=vn,pe-=(ee&&Ne===xe&&xe.visualViewport?xe.visualViewport.width:Ne[ut])-S.width,pe*=Z?1:-1)}var et,Vt=Object.assign({position:G},ie&&Xp),ir=oe===!0?function(Xr,kn){var Sr=Xr.x,br=Xr.y,Dt=kn.devicePixelRatio||1;return{x:qe(Sr*Dt)/Dt||0,y:qe(br*Dt)/Dt||0}}({x:pe,y:ve},yn(g)):{x:pe,y:ve};return pe=ir.x,ve=ir.y,Z?Object.assign({},Vt,((et={})[We]=pt?"0":"",et[ke]=ct?"0":"",et.transform=(xe.devicePixelRatio||1)<=1?"translate("+pe+"px, "+ve+"px)":"translate3d("+pe+"px, "+ve+"px, 0)",et)):Object.assign({},Vt,((h={})[We]=pt?ve+"px":"",h[ke]=ct?pe+"px":"",h.transform="",h))}const Pc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var h=_.state,g=_.options,S=g.gpuAcceleration,V=S===void 0||S,F=g.adaptive,H=F===void 0||F,G=g.roundOffsets,Z=G===void 0||G,ie={placement:Pn(h.placement),variation:Rs(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:V,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,Qr(Object.assign({},ie,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:H,roundOffsets:Z})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,Qr(Object.assign({},ie,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Z})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})},data:{}};var Ya={passive:!0};const Ds={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var h=_.state,g=_.instance,S=_.options,V=S.scroll,F=V===void 0||V,H=S.resize,G=H===void 0||H,Z=yn(h.elements.popper),ie=[].concat(h.scrollParents.reference,h.scrollParents.popper);return F&&ie.forEach(function(oe){oe.addEventListener("scroll",g.update,Ya)}),G&&Z.addEventListener("resize",g.update,Ya),function(){F&&ie.forEach(function(oe){oe.removeEventListener("scroll",g.update,Ya)}),G&&Z.removeEventListener("resize",g.update,Ya)}},data:{}};var Xa={left:"right",right:"left",bottom:"top",top:"bottom"};function jo(_){return _.replace(/left|right|bottom|top/g,function(h){return Xa[h]})}var Fo={start:"end",end:"start"};function Os(_){return _.replace(/start|end/g,function(h){return Fo[h]})}function Ja(_){var h=yn(_);return{scrollLeft:h.pageXOffset,scrollTop:h.pageYOffset}}function Uo(_){return wr(vi(_)).left+Ja(_).scrollLeft}function ft(_){var h=Gr(_),g=h.overflow,S=h.overflowX,V=h.overflowY;return/auto|scroll|overlay|hidden/.test(g+V+S)}function Nh(_){return["html","body","#document"].indexOf(yr(_))>=0?_.ownerDocument.body:qn(_)&&ft(_)?_:Nh(Ga(_))}function $o(_,h){var g;h===void 0&&(h=[]);var S=Nh(_),V=S===((g=_.ownerDocument)==null?void 0:g.body),F=yn(S),H=V?[F].concat(F.visualViewport||[],ft(S)?S:[]):S,G=h.concat(H);return V?G:G.concat($o(Ga(H)))}function Za(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function kc(_,h,g){return h===Cs?Za(function(S,V){var F=yn(S),H=vi(S),G=F.visualViewport,Z=H.clientWidth,ie=H.clientHeight,oe=0,ee=0;if(G){Z=G.width,ie=G.height;var Ae=xs();(Ae||!Ae&&V==="fixed")&&(oe=G.offsetLeft,ee=G.offsetTop)}return{width:Z,height:ie,x:oe+Uo(S),y:ee}}(_,g)):mi(h)?function(S,V){var F=wr(S,!1,V==="fixed");return F.top=F.top+S.clientTop,F.left=F.left+S.clientLeft,F.bottom=F.top+S.clientHeight,F.right=F.left+S.clientWidth,F.width=S.clientWidth,F.height=S.clientHeight,F.x=F.left,F.y=F.top,F}(h,g):Za(function(S){var V,F=vi(S),H=Ja(S),G=(V=S.ownerDocument)==null?void 0:V.body,Z=_r(F.scrollWidth,F.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),ie=_r(F.scrollHeight,F.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),oe=-H.scrollLeft+Uo(S),ee=-H.scrollTop;return Gr(G||F).direction==="rtl"&&(oe+=_r(F.clientWidth,G?G.clientWidth:0)-Z),{width:Z,height:ie,x:oe,y:ee}}(vi(_)))}function Rc(_){var h,g=_.reference,S=_.element,V=_.placement,F=V?Pn(V):null,H=V?Rs(V):null,G=g.x+g.width/2-S.width/2,Z=g.y+g.height/2-S.height/2;switch(F){case $t:h={x:G,y:g.y-S.height};break;case Rt:h={x:G,y:g.y+g.height};break;case vn:h={x:g.x+g.width,y:Z};break;case tn:h={x:g.x-S.width,y:Z};break;default:h={x:g.x,y:g.y}}var ie=F?Qa(F):null;if(ie!=null){var oe=ie==="y"?"height":"width";switch(H){case gi:h[ie]=h[ie]-(g[oe]/2-S[oe]/2);break;case Vi:h[ie]=h[ie]+(g[oe]/2-S[oe]/2)}}return h}function Yr(_,h){h===void 0&&(h={});var g=h,S=g.placement,V=S===void 0?_.placement:S,F=g.strategy,H=F===void 0?_.strategy:F,G=g.boundary,Z=G===void 0?kh:G,ie=g.rootBoundary,oe=ie===void 0?Cs:ie,ee=g.elementContext,Ae=ee===void 0?ji:ee,pe=g.altBoundary,we=pe!==void 0&&pe,ve=g.padding,Ee=ve===void 0?0:ve,ct=xc(typeof Ee!="number"?Ee:Ui(Ee,pi)),pt=Ae===ji?qa:ji,ke=_.rects.popper,We=_.elements[we?pt:Ae],xe=function(kn,Sr,br,Dt){var wi=Sr==="clippingParents"?function(dt){var Rn=$o(Ga(dt)),Cr=["absolute","fixed"].indexOf(Gr(dt).position)>=0&&qn(dt)?Hn(dt):dt;return mi(Cr)?Rn.filter(function(Ms){return mi(Ms)&&Ac(Ms,Cr)&&yr(Ms)!=="body"}):[]}(kn):[].concat(Sr),Ei=[].concat(wi,[br]),sl=Ei[0],nn=Ei.reduce(function(dt,Rn){var Cr=kc(kn,Rn,Dt);return dt.top=_r(Cr.top,dt.top),dt.right=Vo(Cr.right,dt.right),dt.bottom=Vo(Cr.bottom,dt.bottom),dt.left=_r(Cr.left,dt.left),dt},kc(kn,sl,Dt));return nn.width=nn.right-nn.left,nn.height=nn.bottom-nn.top,nn.x=nn.left,nn.y=nn.top,nn}(mi(We)?We:We.contextElement||vi(_.elements.popper),Z,oe,H),Ne=wr(_.elements.reference),Ze=Rc({reference:Ne,element:ke,placement:V}),ut=Za(Object.assign({},ke,Ze)),et=Ae===ji?ut:Ne,Vt={top:xe.top-et.top+ct.top,bottom:et.bottom-xe.bottom+ct.bottom,left:xe.left-et.left+ct.left,right:et.right-xe.right+ct.right},ir=_.modifiersData.offset;if(Ae===ji&&ir){var Xr=ir[V];Object.keys(Vt).forEach(function(kn){var Sr=[vn,Rt].indexOf(kn)>=0?1:-1,br=[$t,Rt].indexOf(kn)>=0?"y":"x";Vt[kn]+=Xr[br]*Sr})}return Vt}function Lh(_,h){h===void 0&&(h={});var g=h,S=g.placement,V=g.boundary,F=g.rootBoundary,H=g.padding,G=g.flipVariations,Z=g.allowedAutoPlacements,ie=Z===void 0?Wr:Z,oe=Rs(S),ee=oe?G?Fi:Fi.filter(function(we){return Rs(we)===oe}):pi,Ae=ee.filter(function(we){return ie.indexOf(we)>=0});Ae.length===0&&(Ae=ee);var pe=Ae.reduce(function(we,ve){return we[ve]=Yr(_,{placement:ve,boundary:V,rootBoundary:F,padding:H})[Pn(ve)],we},{});return Object.keys(pe).sort(function(we,ve){return pe[we]-pe[ve]})}const Er={name:"flip",enabled:!0,phase:"main",fn:function(_){var h=_.state,g=_.options,S=_.name;if(!h.modifiersData[S]._skip){for(var V=g.mainAxis,F=V===void 0||V,H=g.altAxis,G=H===void 0||H,Z=g.fallbackPlacements,ie=g.padding,oe=g.boundary,ee=g.rootBoundary,Ae=g.altBoundary,pe=g.flipVariations,we=pe===void 0||pe,ve=g.allowedAutoPlacements,Ee=h.options.placement,ct=Pn(Ee),pt=Z||(ct!==Ee&&we?function(dt){if(Pn(dt)===bs)return[];var Rn=jo(dt);return[Os(dt),Rn,Os(Rn)]}(Ee):[jo(Ee)]),ke=[Ee].concat(pt).reduce(function(dt,Rn){return dt.concat(Pn(Rn)===bs?Lh(h,{placement:Rn,boundary:oe,rootBoundary:ee,padding:ie,flipVariations:we,allowedAutoPlacements:ve}):Rn)},[]),We=h.rects.reference,xe=h.rects.popper,Ne=new Map,Ze=!0,ut=ke[0],et=0;et<ke.length;et++){var Vt=ke[et],ir=Pn(Vt),Xr=Rs(Vt)===gi,kn=[$t,Rt].indexOf(ir)>=0,Sr=kn?"width":"height",br=Yr(h,{placement:Vt,boundary:oe,rootBoundary:ee,altBoundary:Ae,padding:ie}),Dt=kn?Xr?vn:tn:Xr?Rt:$t;We[Sr]>xe[Sr]&&(Dt=jo(Dt));var wi=jo(Dt),Ei=[];if(F&&Ei.push(br[ir]<=0),G&&Ei.push(br[Dt]<=0,br[wi]<=0),Ei.every(function(dt){return dt})){ut=Vt,Ze=!1;break}Ne.set(Vt,Ei)}if(Ze)for(var sl=function(dt){var Rn=ke.find(function(Cr){var Ms=Ne.get(Cr);if(Ms)return Ms.slice(0,dt).every(function(Zh){return Zh})});if(Rn)return ut=Rn,"break"},nn=we?3:1;nn>0&&sl(nn)!=="break";nn--);h.placement!==ut&&(h.modifiersData[S]._skip=!0,h.placement=ut,h.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Dc(_,h,g){return g===void 0&&(g={x:0,y:0}),{top:_.top-h.height-g.y,right:_.right-h.width+g.x,bottom:_.bottom-h.height+g.y,left:_.left-h.width-g.x}}function Mh(_){return[$t,vn,Rt,tn].some(function(h){return _[h]>=0})}const Ns={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var h=_.state,g=_.name,S=h.rects.reference,V=h.rects.popper,F=h.modifiersData.preventOverflow,H=Yr(h,{elementContext:"reference"}),G=Yr(h,{altBoundary:!0}),Z=Dc(H,S),ie=Dc(G,V,F),oe=Mh(Z),ee=Mh(ie);h.modifiersData[g]={referenceClippingOffsets:Z,popperEscapeOffsets:ie,isReferenceHidden:oe,hasPopperEscaped:ee},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":oe,"data-popper-escaped":ee})}},Oc={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var h=_.state,g=_.options,S=_.name,V=g.offset,F=V===void 0?[0,0]:V,H=Wr.reduce(function(oe,ee){return oe[ee]=function(Ae,pe,we){var ve=Pn(Ae),Ee=[tn,$t].indexOf(ve)>=0?-1:1,ct=typeof we=="function"?we(Object.assign({},pe,{placement:Ae})):we,pt=ct[0],ke=ct[1];return pt=pt||0,ke=(ke||0)*Ee,[tn,vn].indexOf(ve)>=0?{x:ke,y:pt}:{x:pt,y:ke}}(ee,h.rects,F),oe},{}),G=H[h.placement],Z=G.x,ie=G.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=Z,h.modifiersData.popperOffsets.y+=ie),h.modifiersData[S]=H}},Bo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var h=_.state,g=_.name;h.modifiersData[g]=Rc({reference:h.rects.reference,element:h.rects.popper,placement:h.placement})},data:{}},zo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var h=_.state,g=_.options,S=_.name,V=g.mainAxis,F=V===void 0||V,H=g.altAxis,G=H!==void 0&&H,Z=g.boundary,ie=g.rootBoundary,oe=g.altBoundary,ee=g.padding,Ae=g.tether,pe=Ae===void 0||Ae,we=g.tetherOffset,ve=we===void 0?0:we,Ee=Yr(h,{boundary:Z,rootBoundary:ie,padding:ee,altBoundary:oe}),ct=Pn(h.placement),pt=Rs(h.placement),ke=!pt,We=Qa(ct),xe=We==="x"?"y":"x",Ne=h.modifiersData.popperOffsets,Ze=h.rects.reference,ut=h.rects.popper,et=typeof ve=="function"?ve(Object.assign({},h.rects,{placement:h.placement})):ve,Vt=typeof et=="number"?{mainAxis:et,altAxis:et}:Object.assign({mainAxis:0,altAxis:0},et),ir=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,Xr={x:0,y:0};if(Ne){if(F){var kn,Sr=We==="y"?$t:tn,br=We==="y"?Rt:vn,Dt=We==="y"?"height":"width",wi=Ne[We],Ei=wi+Ee[Sr],sl=wi-Ee[br],nn=pe?-ut[Dt]/2:0,dt=pt===gi?Ze[Dt]:ut[Dt],Rn=pt===gi?-ut[Dt]:-Ze[Dt],Cr=h.elements.arrow,Ms=pe&&Cr?Cc(Cr):{width:0,height:0},Zh=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},N0=Zh[Sr],L0=Zh[br],ed=ks(0,Ze[Dt],Ms[Dt]),sk=ke?Ze[Dt]/2-nn-ed-N0-Vt.mainAxis:dt-ed-N0-Vt.mainAxis,ok=ke?-Ze[Dt]/2+nn+ed+L0+Vt.mainAxis:Rn+ed+L0+Vt.mainAxis,lg=h.elements.arrow&&Hn(h.elements.arrow),ak=lg?We==="y"?lg.clientTop||0:lg.clientLeft||0:0,M0=(kn=ir==null?void 0:ir[We])!=null?kn:0,lk=wi+ok-M0,V0=ks(pe?Vo(Ei,wi+sk-M0-ak):Ei,wi,pe?_r(sl,lk):sl);Ne[We]=V0,Xr[We]=V0-wi}if(G){var j0,ck=We==="x"?$t:tn,uk=We==="x"?Rt:vn,Xo=Ne[xe],td=xe==="y"?"height":"width",F0=Xo+Ee[ck],U0=Xo-Ee[uk],cg=[$t,tn].indexOf(ct)!==-1,$0=(j0=ir==null?void 0:ir[xe])!=null?j0:0,B0=cg?F0:Xo-Ze[td]-ut[td]-$0+Vt.altAxis,z0=cg?Xo+Ze[td]+ut[td]-$0-Vt.altAxis:U0,q0=pe&&cg?function(hk,dk,ug){var H0=ks(hk,dk,ug);return H0>ug?ug:H0}(B0,Xo,z0):ks(pe?B0:F0,Xo,pe?z0:U0);Ne[xe]=q0,Xr[xe]=q0-Xo}h.modifiersData[S]=Xr}},requiresIfExists:["offset"]};function Vh(_,h,g){g===void 0&&(g=!1);var S,V,F=qn(h),H=qn(h)&&function(ee){var Ae=ee.getBoundingClientRect(),pe=qe(Ae.width)/ee.offsetWidth||1,we=qe(Ae.height)/ee.offsetHeight||1;return pe!==1||we!==1}(h),G=vi(h),Z=wr(_,H,g),ie={scrollLeft:0,scrollTop:0},oe={x:0,y:0};return(F||!F&&!g)&&((yr(h)!=="body"||ft(G))&&(ie=(S=h)!==yn(S)&&qn(S)?{scrollLeft:(V=S).scrollLeft,scrollTop:V.scrollTop}:Ja(S)),qn(h)?((oe=wr(h,!0)).x+=h.clientLeft,oe.y+=h.clientTop):G&&(oe.x=Uo(G))),{x:Z.left+ie.scrollLeft-oe.x,y:Z.top+ie.scrollTop-oe.y,width:Z.width,height:Z.height}}function el(_){var h=new Map,g=new Set,S=[];function V(F){g.add(F.name),[].concat(F.requires||[],F.requiresIfExists||[]).forEach(function(H){if(!g.has(H)){var G=h.get(H);G&&V(G)}}),S.push(F)}return _.forEach(function(F){h.set(F.name,F)}),_.forEach(function(F){g.has(F.name)||V(F)}),S}var jh={placement:"bottom",modifiers:[],strategy:"absolute"};function Nc(){for(var _=arguments.length,h=new Array(_),g=0;g<_;g++)h[g]=arguments[g];return!h.some(function(S){return!(S&&typeof S.getBoundingClientRect=="function")})}function yi(_){_===void 0&&(_={});var h=_,g=h.defaultModifiers,S=g===void 0?[]:g,V=h.defaultOptions,F=V===void 0?jh:V;return function(H,G,Z){Z===void 0&&(Z=F);var ie,oe,ee={placement:"bottom",orderedModifiers:[],options:Object.assign({},jh,F),modifiersData:{},elements:{reference:H,popper:G},attributes:{},styles:{}},Ae=[],pe=!1,we={state:ee,setOptions:function(Ee){var ct=typeof Ee=="function"?Ee(ee.options):Ee;ve(),ee.options=Object.assign({},F,ee.options,ct),ee.scrollParents={reference:mi(H)?$o(H):H.contextElement?$o(H.contextElement):[],popper:$o(G)};var pt,ke,We=function(xe){var Ne=el(xe);return Dh.reduce(function(Ze,ut){return Ze.concat(Ne.filter(function(et){return et.phase===ut}))},[])}((pt=[].concat(S,ee.options.modifiers),ke=pt.reduce(function(xe,Ne){var Ze=xe[Ne.name];return xe[Ne.name]=Ze?Object.assign({},Ze,Ne,{options:Object.assign({},Ze.options,Ne.options),data:Object.assign({},Ze.data,Ne.data)}):Ne,xe},{}),Object.keys(ke).map(function(xe){return ke[xe]})));return ee.orderedModifiers=We.filter(function(xe){return xe.enabled}),ee.orderedModifiers.forEach(function(xe){var Ne=xe.name,Ze=xe.options,ut=Ze===void 0?{}:Ze,et=xe.effect;if(typeof et=="function"){var Vt=et({state:ee,name:Ne,instance:we,options:ut});Ae.push(Vt||function(){})}}),we.update()},forceUpdate:function(){if(!pe){var Ee=ee.elements,ct=Ee.reference,pt=Ee.popper;if(Nc(ct,pt)){ee.rects={reference:Vh(ct,Hn(pt),ee.options.strategy==="fixed"),popper:Cc(pt)},ee.reset=!1,ee.placement=ee.options.placement,ee.orderedModifiers.forEach(function(et){return ee.modifiersData[et.name]=Object.assign({},et.data)});for(var ke=0;ke<ee.orderedModifiers.length;ke++)if(ee.reset!==!0){var We=ee.orderedModifiers[ke],xe=We.fn,Ne=We.options,Ze=Ne===void 0?{}:Ne,ut=We.name;typeof xe=="function"&&(ee=xe({state:ee,options:Ze,name:ut,instance:we})||ee)}else ee.reset=!1,ke=-1}}},update:(ie=function(){return new Promise(function(Ee){we.forceUpdate(),Ee(ee)})},function(){return oe||(oe=new Promise(function(Ee){Promise.resolve().then(function(){oe=void 0,Ee(ie())})})),oe}),destroy:function(){ve(),pe=!0}};if(!Nc(H,G))return we;function ve(){Ae.forEach(function(Ee){return Ee()}),Ae=[]}return we.setOptions(Z).then(function(Ee){!pe&&Z.onFirstUpdate&&Z.onFirstUpdate(Ee)}),we}}var Fh=yi(),Uh=yi({defaultModifiers:[Ds,Bo,Pc,rr]}),qo=yi({defaultModifiers:[Ds,Bo,Pc,rr,Oc,Er,zo,Oh,Ns]});const tl=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Wa,afterRead:Ec,afterWrite:bc,applyStyles:rr,arrow:Oh,auto:bs,basePlacements:pi,beforeMain:Tc,beforeRead:Ha,beforeWrite:Ka,bottom:Rt,clippingParents:kh,computeStyles:Pc,createPopper:qo,createPopperBase:Fh,createPopperLite:Uh,detectOverflow:Yr,end:Vi,eventListeners:Ds,flip:Er,hide:Ns,left:tn,main:Ic,modifierPhases:Dh,offset:Oc,placements:Wr,popper:ji,popperGenerator:yi,popperOffsets:Bo,preventOverflow:zo,read:Rh,reference:qa,right:vn,start:gi,top:$t,variationPlacements:Fi,viewport:Cs,write:Sc},Symbol.toStringTag,{value:"Module"})),Lc="dropdown",Tr=".bs.dropdown",nl=".data-api",$h="ArrowUp",_i="ArrowDown",Bh=`hide${Tr}`,zh=`hidden${Tr}`,qh=`show${Tr}`,Hh=`shown${Tr}`,Ho=`click${Tr}${nl}`,_n=`keydown${Tr}${nl}`,Wh=`keyup${Tr}${nl}`,$i="show",Wn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',c=`${Wn}.${$i}`,f=".dropdown-menu",y=R()?"top-end":"top-start",b=R()?"top-start":"top-end",U=R()?"bottom-end":"bottom-start",q=R()?"bottom-start":"bottom-end",J=R()?"left-start":"right-start",Je=R()?"right-start":"left-start",Gt={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},je={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class lt extends Ge{constructor(h,g){super(h,g),this._popper=null,this._parent=this._element.parentNode,this._menu=re.next(this._element,f)[0]||re.prev(this._element,f)[0]||re.findOne(f,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Gt}static get DefaultType(){return je}static get NAME(){return Lc}toggle(){return this._isShown()?this.hide():this.show()}show(){if(d(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!B.trigger(this._element,qh,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const g of[].concat(...document.body.children))B.on(g,"mouseover",m);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add($i),this._element.classList.add($i),B.trigger(this._element,Hh,h)}}hide(){if(d(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!B.trigger(this._element,Bh,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const g of[].concat(...document.body.children))B.off(g,"mouseover",m);this._popper&&this._popper.destroy(),this._menu.classList.remove($i),this._element.classList.remove($i),this._element.setAttribute("aria-expanded","false"),st.removeDataAttribute(this._menu,"popper"),B.trigger(this._element,zh,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!a(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${Lc.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(tl===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:a(this._config.reference)?h=l(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const g=this._getPopperConfig();this._popper=qo(h,this._menu,g)}_isShown(){return this._menu.classList.contains($i)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return J;if(h.classList.contains("dropstart"))return Je;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const g=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?g?b:y:g?q:U}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(g=>Number.parseInt(g,10)):typeof h=="function"?g=>h(g,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(st.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...T(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:g}){const S=re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(V=>u(V));S.length&&M(S,g,h===_i,!S.includes(g)).focus()}static jQueryInterface(h){return this.each(function(){const g=lt.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const g=re.find(c);for(const S of g){const V=lt.getInstance(S);if(!V||V._config.autoClose===!1)continue;const F=h.composedPath(),H=F.includes(V._menu);if(F.includes(V._element)||V._config.autoClose==="inside"&&!H||V._config.autoClose==="outside"&&H||V._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const G={relatedTarget:V._element};h.type==="click"&&(G.clickEvent=h),V._completeHide(G)}}static dataApiKeydownHandler(h){const g=/input|textarea/i.test(h.target.tagName),S=h.key==="Escape",V=[$h,_i].includes(h.key);if(!V&&!S||g&&!S)return;h.preventDefault();const F=this.matches(Wn)?this:re.prev(this,Wn)[0]||re.next(this,Wn)[0]||re.findOne(Wn,h.delegateTarget.parentNode),H=lt.getOrCreateInstance(F);if(V)return h.stopPropagation(),H.show(),void H._selectMenuItem(h);H._isShown()&&(h.stopPropagation(),H.hide(),F.focus())}}B.on(document,_n,Wn,lt.dataApiKeydownHandler),B.on(document,_n,f,lt.dataApiKeydownHandler),B.on(document,Ho,lt.clearMenus),B.on(document,Wh,lt.clearMenus),B.on(document,Ho,Wn,function(_){_.preventDefault(),lt.getOrCreateInstance(this).toggle()}),A(lt);const Qt="backdrop",Bi="show",Kn=`mousedown.bs.${Qt}`,rl={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Mc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class s0 extends kt{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return rl}static get DefaultType(){return Mc}static get NAME(){return Qt}show(h){if(!this._config.isVisible)return void T(h);this._append();const g=this._getElement();this._config.isAnimated&&w(g),g.classList.add(Bi),this._emulateAnimation(()=>{T(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(Bi),this._emulateAnimation(()=>{this.dispose(),T(h)})):T(h)}dispose(){this._isAppended&&(B.off(this._element,Kn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=l(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),B.on(h,Kn,()=>{T(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){I(h,this._getElement(),this._config.isAnimated)}}const Kh=".bs.focustrap",Jx=`focusin${Kh}`,Zx=`keydown.tab${Kh}`,o0="backward",eP={autofocus:!0,trapElement:null},tP={autofocus:"boolean",trapElement:"element"};class a0 extends kt{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return eP}static get DefaultType(){return tP}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),B.off(document,Kh),B.on(document,Jx,h=>this._handleFocusin(h)),B.on(document,Zx,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,B.off(document,Kh))}_handleFocusin(h){const{trapElement:g}=this._config;if(h.target===document||h.target===g||g.contains(h.target))return;const S=re.focusableChildren(g);S.length===0?g.focus():this._lastTabNavDirection===o0?S[S.length-1].focus():S[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?o0:"forward")}}const l0=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",c0=".sticky-top",Gh="padding-right",u0="margin-right";class Jp{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Gh,g=>g+h),this._setElementAttributes(l0,Gh,g=>g+h),this._setElementAttributes(c0,u0,g=>g-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Gh),this._resetElementAttributes(l0,Gh),this._resetElementAttributes(c0,u0)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,g,S){const V=this.getWidth();this._applyManipulationCallback(h,F=>{if(F!==this._element&&window.innerWidth>F.clientWidth+V)return;this._saveInitialAttribute(F,g);const H=window.getComputedStyle(F).getPropertyValue(g);F.style.setProperty(g,`${S(Number.parseFloat(H))}px`)})}_saveInitialAttribute(h,g){const S=h.style.getPropertyValue(g);S&&st.setDataAttribute(h,g,S)}_resetElementAttributes(h,g){this._applyManipulationCallback(h,S=>{const V=st.getDataAttribute(S,g);V!==null?(st.removeDataAttribute(S,g),S.style.setProperty(g,V)):S.style.removeProperty(g)})}_applyManipulationCallback(h,g){if(a(h))g(h);else for(const S of re.find(h,this._element))g(S)}}const Ir=".bs.modal",nP=`hide${Ir}`,rP=`hidePrevented${Ir}`,h0=`hidden${Ir}`,d0=`show${Ir}`,iP=`shown${Ir}`,sP=`resize${Ir}`,oP=`click.dismiss${Ir}`,aP=`mousedown.dismiss${Ir}`,lP=`keydown.dismiss${Ir}`,cP=`click${Ir}.data-api`,f0="modal-open",p0="show",Zp="modal-static",uP={backdrop:!0,focus:!0,keyboard:!0},hP={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Wo extends Ge{constructor(h,g){super(h,g),this._dialog=re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Jp,this._addEventListeners()}static get Default(){return uP}static get DefaultType(){return hP}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||B.trigger(this._element,d0,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(f0),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(B.trigger(this._element,nP).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(p0),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){B.off(window,Ir),B.off(this._dialog,Ir),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new s0({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new a0({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const g=re.findOne(".modal-body",this._dialog);g&&(g.scrollTop=0),w(this._element),this._element.classList.add(p0),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,B.trigger(this._element,iP,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){B.on(this._element,lP,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),B.on(window,sP,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),B.on(this._element,aP,h=>{B.one(this._element,oP,g=>{this._element===h.target&&this._element===g.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(f0),this._resetAdjustments(),this._scrollBar.reset(),B.trigger(this._element,h0)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(B.trigger(this._element,rP).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,g=this._element.style.overflowY;g==="hidden"||this._element.classList.contains(Zp)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Zp),this._queueCallback(()=>{this._element.classList.remove(Zp),this._queueCallback(()=>{this._element.style.overflowY=g},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,g=this._scrollBar.getWidth(),S=g>0;if(S&&!h){const V=R()?"paddingLeft":"paddingRight";this._element.style[V]=`${g}px`}if(!S&&h){const V=R()?"paddingRight":"paddingLeft";this._element.style[V]=`${g}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,g){return this.each(function(){const S=Wo.getOrCreateInstance(this,h);if(typeof h=="string"){if(S[h]===void 0)throw new TypeError(`No method named "${h}"`);S[h](g)}})}}B.on(document,cP,'[data-bs-toggle="modal"]',function(_){const h=re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),B.one(h,d0,S=>{S.defaultPrevented||B.one(h,h0,()=>{u(this)&&this.focus()})});const g=re.findOne(".modal.show");g&&Wo.getInstance(g).hide(),Wo.getOrCreateInstance(h).toggle(this)}),pn(Wo),A(Wo);const zi=".bs.offcanvas",g0=".data-api",dP=`load${zi}${g0}`,m0="show",v0="showing",y0="hiding",_0=".offcanvas.show",fP=`show${zi}`,pP=`shown${zi}`,gP=`hide${zi}`,w0=`hidePrevented${zi}`,E0=`hidden${zi}`,mP=`resize${zi}`,vP=`click${zi}${g0}`,yP=`keydown.dismiss${zi}`,_P={backdrop:!0,keyboard:!0,scroll:!1},wP={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class qi extends Ge{constructor(h,g){super(h,g),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return _P}static get DefaultType(){return wP}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||B.trigger(this._element,fP,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Jp().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(v0),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(m0),this._element.classList.remove(v0),B.trigger(this._element,pP,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(B.trigger(this._element,gP).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(y0),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(m0,y0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Jp().reset(),B.trigger(this._element,E0)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new s0({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():B.trigger(this._element,w0)}:null})}_initializeFocusTrap(){return new a0({trapElement:this._element})}_addEventListeners(){B.on(this._element,yP,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():B.trigger(this._element,w0))})}static jQueryInterface(h){return this.each(function(){const g=qi.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h](this)}})}}B.on(document,vP,'[data-bs-toggle="offcanvas"]',function(_){const h=re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),d(this))return;B.one(h,E0,()=>{u(this)&&this.focus()});const g=re.findOne(_0);g&&g!==h&&qi.getInstance(g).hide(),qi.getOrCreateInstance(h).toggle(this)}),B.on(window,dP,()=>{for(const _ of re.find(_0))qi.getOrCreateInstance(_).show()}),B.on(window,mP,()=>{for(const _ of re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&qi.getOrCreateInstance(_).hide()}),pn(qi),A(qi);const T0={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},EP=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),TP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,IP=(_,h)=>{const g=_.nodeName.toLowerCase();return h.includes(g)?!EP.has(g)||!!TP.test(_.nodeValue):h.filter(S=>S instanceof RegExp).some(S=>S.test(g))},SP={allowList:T0,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},bP={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},CP={entry:"(string|element|function|null)",selector:"(string|element)"};class AP extends kt{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return SP}static get DefaultType(){return bP}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[V,F]of Object.entries(this._config.content))this._setContent(h,F,V);const g=h.children[0],S=this._resolvePossibleFunction(this._config.extraClass);return S&&g.classList.add(...S.split(" ")),g}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[g,S]of Object.entries(h))super._typeCheckConfig({selector:g,entry:S},CP)}_setContent(h,g,S){const V=re.findOne(S,h);V&&((g=this._resolvePossibleFunction(g))?a(g)?this._putElementInTemplate(l(g),V):this._config.html?V.innerHTML=this._maybeSanitize(g):V.textContent=g:V.remove())}_maybeSanitize(h){return this._config.sanitize?function(g,S,V){if(!g.length)return g;if(V&&typeof V=="function")return V(g);const F=new window.DOMParser().parseFromString(g,"text/html"),H=[].concat(...F.body.querySelectorAll("*"));for(const G of H){const Z=G.nodeName.toLowerCase();if(!Object.keys(S).includes(Z)){G.remove();continue}const ie=[].concat(...G.attributes),oe=[].concat(S["*"]||[],S[Z]||[]);for(const ee of ie)IP(ee,oe)||G.removeAttribute(ee.nodeName)}return F.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return T(h,[this])}_putElementInTemplate(h,g){if(this._config.html)return g.innerHTML="",void g.append(h);g.textContent=h.textContent}}const xP=new Set(["sanitize","allowList","sanitizeFn"]),eg="fade",Qh="show",I0=".modal",S0="hide.bs.modal",Vc="hover",tg="focus",PP={AUTO:"auto",TOP:"top",RIGHT:R()?"left":"right",BOTTOM:"bottom",LEFT:R()?"right":"left"},kP={allowList:T0,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},RP={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ko extends Ge{constructor(h,g){if(tl===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,g),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return kP}static get DefaultType(){return RP}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),B.off(this._element.closest(I0),S0,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=B.trigger(this._element,this.constructor.eventName("show")),g=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!g)return;this._disposePopper();const S=this._getTipElement();this._element.setAttribute("aria-describedby",S.getAttribute("id"));const{container:V}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(V.append(S),B.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(S),S.classList.add(Qh),"ontouchstart"in document.documentElement)for(const F of[].concat(...document.body.children))B.on(F,"mouseover",m);this._queueCallback(()=>{B.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!B.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Qh),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))B.off(h,"mouseover",m);this._activeTrigger.click=!1,this._activeTrigger[tg]=!1,this._activeTrigger[Vc]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),B.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const g=this._getTemplateFactory(h).toHtml();if(!g)return null;g.classList.remove(eg,Qh),g.classList.add(`bs-${this.constructor.NAME}-auto`);const S=(V=>{do V+=Math.floor(1e6*Math.random());while(document.getElementById(V));return V})(this.constructor.NAME).toString();return g.setAttribute("id",S),this._isAnimated()&&g.classList.add(eg),g}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new AP({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(eg)}_isShown(){return this.tip&&this.tip.classList.contains(Qh)}_createPopper(h){const g=T(this._config.placement,[this,h,this._element]),S=PP[g.toUpperCase()];return qo(this._element,h,this._getPopperConfig(S))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(g=>Number.parseInt(g,10)):typeof h=="function"?g=>h(g,this._element):h}_resolvePossibleFunction(h){return T(h,[this._element])}_getPopperConfig(h){const g={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:S=>{this._getTipElement().setAttribute("data-popper-placement",S.state.placement)}}]};return{...g,...T(this._config.popperConfig,[g])}}_setListeners(){const h=this._config.trigger.split(" ");for(const g of h)if(g==="click")B.on(this._element,this.constructor.eventName("click"),this._config.selector,S=>{this._initializeOnDelegatedTarget(S).toggle()});else if(g!=="manual"){const S=g===Vc?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),V=g===Vc?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");B.on(this._element,S,this._config.selector,F=>{const H=this._initializeOnDelegatedTarget(F);H._activeTrigger[F.type==="focusin"?tg:Vc]=!0,H._enter()}),B.on(this._element,V,this._config.selector,F=>{const H=this._initializeOnDelegatedTarget(F);H._activeTrigger[F.type==="focusout"?tg:Vc]=H._element.contains(F.relatedTarget),H._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},B.on(this._element.closest(I0),S0,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,g){clearTimeout(this._timeout),this._timeout=setTimeout(h,g)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const g=st.getDataAttributes(this._element);for(const S of Object.keys(g))xP.has(S)&&delete g[S];return h={...g,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:l(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[g,S]of Object.entries(this._config))this.constructor.Default[g]!==S&&(h[g]=S);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const g=Ko.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h]()}})}}A(Ko);const DP={...Ko.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},OP={...Ko.DefaultType,content:"(null|string|element|function)"};class Yh extends Ko{static get Default(){return DP}static get DefaultType(){return OP}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const g=Yh.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h]()}})}}A(Yh);const ng=".bs.scrollspy",NP=`activate${ng}`,b0=`click${ng}`,LP=`load${ng}.data-api`,il="active",rg="[href]",C0=".nav-link",MP=`${C0}, .nav-item > ${C0}, .list-group-item`,VP={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},jP={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class jc extends Ge{constructor(h,g){super(h,g),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return VP}static get DefaultType(){return jP}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=l(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(g=>Number.parseFloat(g))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(B.off(this._config.target,b0),B.on(this._config.target,b0,rg,h=>{const g=this._observableSections.get(h.target.hash);if(g){h.preventDefault();const S=this._rootElement||window,V=g.offsetTop-this._element.offsetTop;if(S.scrollTo)return void S.scrollTo({top:V,behavior:"smooth"});S.scrollTop=V}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(g=>this._observerCallback(g),h)}_observerCallback(h){const g=H=>this._targetLinks.get(`#${H.target.id}`),S=H=>{this._previousScrollData.visibleEntryTop=H.target.offsetTop,this._process(g(H))},V=(this._rootElement||document.documentElement).scrollTop,F=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const H of h){if(!H.isIntersecting){this._activeTarget=null,this._clearActiveClass(g(H));continue}const G=H.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(F&&G){if(S(H),!V)return}else F||G||S(H)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=re.find(rg,this._config.target);for(const g of h){if(!g.hash||d(g))continue;const S=re.findOne(decodeURI(g.hash),this._element);u(S)&&(this._targetLinks.set(decodeURI(g.hash),g),this._observableSections.set(g.hash,S))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(il),this._activateParents(h),B.trigger(this._element,NP,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))re.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(il);else for(const g of re.parents(h,".nav, .list-group"))for(const S of re.prev(g,MP))S.classList.add(il)}_clearActiveClass(h){h.classList.remove(il);const g=re.find(`${rg}.${il}`,h);for(const S of g)S.classList.remove(il)}static jQueryInterface(h){return this.each(function(){const g=jc.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h]()}})}}B.on(window,LP,()=>{for(const _ of re.find('[data-bs-spy="scroll"]'))jc.getOrCreateInstance(_)}),A(jc);const Go=".bs.tab",FP=`hide${Go}`,UP=`hidden${Go}`,$P=`show${Go}`,BP=`shown${Go}`,zP=`click${Go}`,qP=`keydown${Go}`,HP=`load${Go}`,WP="ArrowLeft",A0="ArrowRight",KP="ArrowUp",x0="ArrowDown",ig="Home",P0="End",Qo="active",k0="fade",sg="show",R0=".dropdown-toggle",og=`:not(${R0})`,D0='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ag=`.nav-link${og}, .list-group-item${og}, [role="tab"]${og}, ${D0}`,GP=`.${Qo}[data-bs-toggle="tab"], .${Qo}[data-bs-toggle="pill"], .${Qo}[data-bs-toggle="list"]`;class Yo extends Ge{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),B.on(this._element,qP,g=>this._keydown(g)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const g=this._getActiveElem(),S=g?B.trigger(g,FP,{relatedTarget:h}):null;B.trigger(h,$P,{relatedTarget:g}).defaultPrevented||S&&S.defaultPrevented||(this._deactivate(g,h),this._activate(h,g))}_activate(h,g){h&&(h.classList.add(Qo),this._activate(re.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),B.trigger(h,BP,{relatedTarget:g})):h.classList.add(sg)},h,h.classList.contains(k0)))}_deactivate(h,g){h&&(h.classList.remove(Qo),h.blur(),this._deactivate(re.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),B.trigger(h,UP,{relatedTarget:g})):h.classList.remove(sg)},h,h.classList.contains(k0)))}_keydown(h){if(![WP,A0,KP,x0,ig,P0].includes(h.key))return;h.stopPropagation(),h.preventDefault();const g=this._getChildren().filter(V=>!d(V));let S;if([ig,P0].includes(h.key))S=g[h.key===ig?0:g.length-1];else{const V=[A0,x0].includes(h.key);S=M(g,h.target,V,!0)}S&&(S.focus({preventScroll:!0}),Yo.getOrCreateInstance(S).show())}_getChildren(){return re.find(ag,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,g){this._setAttributeIfNotExists(h,"role","tablist");for(const S of g)this._setInitialAttributesOnChild(S)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const g=this._elemIsActive(h),S=this._getOuterElement(h);h.setAttribute("aria-selected",g),S!==h&&this._setAttributeIfNotExists(S,"role","presentation"),g||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const g=re.getElementFromSelector(h);g&&(this._setAttributeIfNotExists(g,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(g,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,g){const S=this._getOuterElement(h);if(!S.classList.contains("dropdown"))return;const V=(F,H)=>{const G=re.findOne(F,S);G&&G.classList.toggle(H,g)};V(R0,Qo),V(".dropdown-menu",sg),S.setAttribute("aria-expanded",g)}_setAttributeIfNotExists(h,g,S){h.hasAttribute(g)||h.setAttribute(g,S)}_elemIsActive(h){return h.classList.contains(Qo)}_getInnerElement(h){return h.matches(ag)?h:re.findOne(ag,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const g=Yo.getOrCreateInstance(this);if(typeof h=="string"){if(g[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);g[h]()}})}}B.on(document,zP,D0,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),d(this)||Yo.getOrCreateInstance(this).show()}),B.on(window,HP,()=>{for(const _ of re.find(GP))Yo.getOrCreateInstance(_)}),A(Yo);const Ls=".bs.toast",QP=`mouseover${Ls}`,YP=`mouseout${Ls}`,XP=`focusin${Ls}`,JP=`focusout${Ls}`,ZP=`hide${Ls}`,ek=`hidden${Ls}`,tk=`show${Ls}`,nk=`shown${Ls}`,O0="hide",Xh="show",Jh="showing",rk={animation:"boolean",autohide:"boolean",delay:"number"},ik={animation:!0,autohide:!0,delay:5e3};class Fc extends Ge{constructor(h,g){super(h,g),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ik}static get DefaultType(){return rk}static get NAME(){return"toast"}show(){B.trigger(this._element,tk).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(O0),w(this._element),this._element.classList.add(Xh,Jh),this._queueCallback(()=>{this._element.classList.remove(Jh),B.trigger(this._element,nk),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(B.trigger(this._element,ZP).defaultPrevented||(this._element.classList.add(Jh),this._queueCallback(()=>{this._element.classList.add(O0),this._element.classList.remove(Jh,Xh),B.trigger(this._element,ek)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Xh),super.dispose()}isShown(){return this._element.classList.contains(Xh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,g){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=g;break;case"focusin":case"focusout":this._hasKeyboardInteraction=g}if(g)return void this._clearTimeout();const S=h.relatedTarget;this._element===S||this._element.contains(S)||this._maybeScheduleHide()}_setListeners(){B.on(this._element,QP,h=>this._onInteraction(h,!0)),B.on(this._element,YP,h=>this._onInteraction(h,!1)),B.on(this._element,XP,h=>this._onInteraction(h,!0)),B.on(this._element,JP,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const g=Fc.getOrCreateInstance(this,h);if(typeof h=="string"){if(g[h]===void 0)throw new TypeError(`No method named "${h}"`);g[h](this)}})}}return pn(Fc),A(Fc),{Alert:ln,Button:mn,Carousel:zn,Collapse:fi,Dropdown:lt,Modal:Wo,Offcanvas:qi,Popover:Yh,ScrollSpy:jc,Tab:Yo,Toast:Fc,Tooltip:Ko}})})(HD);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yu.apply(this,arguments)}var to;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(to||(to={}));const tE="popstate";function WD(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return nv("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Df(i)}return GD(e,n,null,t)}function Ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KD(){return Math.random().toString(36).substr(2,8)}function nE(t,e){return{usr:t.state,key:t.key,idx:e}}function nv(t,e,n,r){return n===void 0&&(n=null),Yu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?dc(e):e,{state:n,key:e&&e.key||r||KD()})}function Df(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function dc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GD(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=to.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Yu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=to.Pop;let R=d(),A=R==null?null:R-u;u=R,l&&l({action:a,location:x.location,delta:A})}function m(R,A){a=to.Push;let T=nv(x.location,R,A);u=d()+1;let I=nE(T,u),M=x.createHref(T);try{o.pushState(I,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}s&&l&&l({action:a,location:x.location,delta:1})}function w(R,A){a=to.Replace;let T=nv(x.location,R,A);u=d();let I=nE(T,u),M=x.createHref(T);o.replaceState(I,"",M),s&&l&&l({action:a,location:x.location,delta:0})}function E(R){let A=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof R=="string"?R:Df(R);return T=T.replace(/ $/,"%20"),Ft(A,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,A)}let x={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(tE,p),l=R,()=>{i.removeEventListener(tE,p),l=null}},createHref(R){return e(i,R)},createURL:E,encodeLocation(R){let A=E(R);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:w,go(R){return o.go(R)}};return x}var rE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(rE||(rE={}));function QD(t,e,n){return n===void 0&&(n="/"),YD(t,e,n,!1)}function YD(t,e,n,r){let i=typeof e=="string"?dc(e):e,s=$y(i.pathname||"/",n);if(s==null)return null;let o=qS(t);XD(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=lO(s);a=oO(o[l],u,r)}return a}function qS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ft(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ho([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),qS(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:iO(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of HS(s.path))i(s,o,l)}),e}function HS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=HS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function XD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JD=/^:[\w-]+$/,ZD=3,eO=2,tO=1,nO=10,rO=-2,iE=t=>t==="*";function iO(t,e){let n=t.split("/"),r=n.length;return n.some(iE)&&(r+=rO),e&&(r+=eO),n.filter(i=>!iE(i)).reduce((i,s)=>i+(JD.test(s)?ZD:s===""?tO:nO),r)}function sO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function oO(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=sE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),m=l.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=sE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:ho([s,p.pathname]),pathnameBase:dO(ho([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=ho([s,p.pathnameBase]))}return o}function sE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,p)=>{let{paramName:m,isOptional:w}=d;if(m==="*"){let x=a[p]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const E=a[p];return w&&!E?u[m]=void 0:u[m]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function aO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $y(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?dc(t):t;return{pathname:n?n.startsWith("/")?n:uO(n,e):e,search:fO(r),hash:pO(i)}}function uO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hO(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function By(t,e){let n=hO(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zy(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=dc(t):(i=Yu({},t),Ft(!i.pathname||!i.pathname.includes("?"),Vg("?","pathname","search",i)),Ft(!i.pathname||!i.pathname.includes("#"),Vg("#","pathname","hash",i)),Ft(!i.search||!i.search.includes("#"),Vg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=cO(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const ho=t=>t.join("/").replace(/\/\/+/g,"/"),dO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WS=["post","put","patch","delete"];new Set(WS);const mO=["get",...WS];new Set(mO);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}const qy=N.createContext(null),vO=N.createContext(null),Ao=N.createContext(null),_p=N.createContext(null),ps=N.createContext({outlet:null,matches:[],isDataRoute:!1}),KS=N.createContext(null);function yO(t,e){let{relative:n}=e===void 0?{}:e;fc()||Ft(!1);let{basename:r,navigator:i}=N.useContext(Ao),{hash:s,pathname:o,search:a}=QS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ho([r,o])),i.createHref({pathname:l,search:a,hash:s})}function fc(){return N.useContext(_p)!=null}function xo(){return fc()||Ft(!1),N.useContext(_p).location}function GS(t){N.useContext(Ao).static||N.useLayoutEffect(t)}function La(){let{isDataRoute:t}=N.useContext(ps);return t?DO():_O()}function _O(){fc()||Ft(!1);let t=N.useContext(qy),{basename:e,future:n,navigator:r}=N.useContext(Ao),{matches:i}=N.useContext(ps),{pathname:s}=xo(),o=JSON.stringify(By(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return GS(()=>{a.current=!0}),N.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=zy(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ho([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}function wO(){let{matches:t}=N.useContext(ps),e=t[t.length-1];return e?e.params:{}}function QS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Ao),{matches:i}=N.useContext(ps),{pathname:s}=xo(),o=JSON.stringify(By(i,r.v7_relativeSplatPath));return N.useMemo(()=>zy(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function EO(t,e){return TO(t,e)}function TO(t,e,n,r){fc()||Ft(!1);let{navigator:i}=N.useContext(Ao),{matches:s}=N.useContext(ps),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=xo(),d;if(e){var p;let R=typeof e=="string"?dc(e):e;l==="/"||(p=R.pathname)!=null&&p.startsWith(l)||Ft(!1),d=R}else d=u;let m=d.pathname||"/",w=m;if(l!=="/"){let R=l.replace(/^\//,"").split("/");w="/"+m.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=QD(t,{pathname:w}),x=AO(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:ho([l,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:ho([l,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&x?N.createElement(_p.Provider,{value:{location:Xu({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:to.Pop}},x):x}function IO(){let t=RO(),e=gO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const SO=N.createElement(IO,null);class bO extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(ps.Provider,{value:this.props.routeContext},N.createElement(KS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function CO(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(qy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(ps.Provider,{value:e},r)}function AO(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Ft(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:m,errors:w}=n,E=p.route.loader&&m[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let w,E=!1,x=null,R=null;n&&(w=a&&p.route.id?a[p.route.id]:void 0,x=p.route.errorElement||SO,l&&(u<0&&m===0?(E=!0,R=null):u===m&&(E=!0,R=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,m+1)),T=()=>{let I;return w?I=x:E?I=R:p.route.Component?I=N.createElement(p.route.Component,null):p.route.element?I=p.route.element:I=d,N.createElement(CO,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:I})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?N.createElement(bO,{location:n.location,revalidation:n.revalidation,component:x,error:w,children:T(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):T()},null)}var YS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(YS||{}),Of=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Of||{});function xO(t){let e=N.useContext(qy);return e||Ft(!1),e}function PO(t){let e=N.useContext(vO);return e||Ft(!1),e}function kO(t){let e=N.useContext(ps);return e||Ft(!1),e}function XS(t){let e=kO(),n=e.matches[e.matches.length-1];return n.route.id||Ft(!1),n.route.id}function RO(){var t;let e=N.useContext(KS),n=PO(Of.UseRouteError),r=XS(Of.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function DO(){let{router:t}=xO(YS.UseNavigateStable),e=XS(Of.UseNavigateStable),n=N.useRef(!1);return GS(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Xu({fromRouteId:e},s)))},[t,e])}const oE={};function OO(t,e){oE[e]||(oE[e]=!0,console.warn(e))}const aE=(t,e,n)=>OO(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function NO(t,e){t!=null&&t.v7_startTransition||aE("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&aE("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function JS(t){let{to:e,replace:n,state:r,relative:i}=t;fc()||Ft(!1);let{future:s,static:o}=N.useContext(Ao),{matches:a}=N.useContext(ps),{pathname:l}=xo(),u=La(),d=zy(e,By(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return N.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function Dn(t){Ft(!1)}function LO(t){let{basename:e="/",children:n=null,location:r,navigationType:i=to.Pop,navigator:s,static:o=!1,future:a}=t;fc()&&Ft(!1);let l=e.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:l,navigator:s,static:o,future:Xu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=dc(r));let{pathname:d="/",search:p="",hash:m="",state:w=null,key:E="default"}=r,x=N.useMemo(()=>{let R=$y(d,l);return R==null?null:{location:{pathname:R,search:p,hash:m,state:w,key:E},navigationType:i}},[l,d,p,m,w,E,i]);return x==null?null:N.createElement(Ao.Provider,{value:u},N.createElement(_p.Provider,{children:n,value:x}))}function MO(t){let{children:e,location:n}=t;return EO(rv(e),n)}new Promise(()=>{});function rv(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,rv(r.props.children,s));return}r.type!==Dn&&Ft(!1),!r.props.index||!r.props.children||Ft(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iv.apply(this,arguments)}function VO(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function jO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FO(t,e){return t.button===0&&(!e||e==="_self")&&!jO(t)}const UO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$O="6";try{window.__reactRouterVersion=$O}catch{}const BO="startTransition",lE=Ok[BO];function zO(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=WD({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=N.useCallback(p=>{u&&lE?lE(()=>l(p)):l(p)},[l,u]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>NO(r),[r]),N.createElement(LO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const qO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hr=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:p}=e,m=VO(e,UO),{basename:w}=N.useContext(Ao),E,x=!1;if(typeof u=="string"&&HO.test(u)&&(E=u,qO))try{let I=new URL(window.location.href),M=u.startsWith("//")?new URL(I.protocol+u):new URL(u),z=$y(M.pathname,w);M.origin===I.origin&&z!=null?u=z+M.search+M.hash:x=!0}catch{}let R=yO(u,{relative:i}),A=WO(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:p});function T(I){r&&r(I),I.defaultPrevented||A(I)}return N.createElement("a",iv({},m,{href:E||R,onClick:x||s?r:T,ref:n,target:l}))});var cE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cE||(cE={}));var uE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uE||(uE={}));function WO(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=La(),u=xo(),d=QS(t,{relative:o});return N.useCallback(p=>{if(FO(p,n)){p.preventDefault();let m=r!==void 0?r:Df(u)===Df(d);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}var hE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},KO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,w=u&63;l||(w=64,o||(m=64)),r.push(n[d],n[p],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new GO;const m=s<<2|a>>4;if(r.push(m),u!==64){const w=a<<4&240|u>>2;if(r.push(w),p!==64){const E=u<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QO=function(t){const e=ZS(t);return eb.encodeByteArray(e,!0)},tb=function(t){return QO(t).replace(/\./g,"")},nb=function(t){try{return eb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=()=>YO().__FIREBASE_DEFAULTS__,JO=()=>{if(typeof process>"u"||typeof hE>"u")return;const t=hE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&nb(t[1]);return e&&JSON.parse(e)},wp=()=>{try{return XO()||JO()||ZO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},e2=t=>{var e,n;return(n=(e=wp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rb=()=>{var t;return(t=wp())===null||t===void 0?void 0:t.config},ib=t=>{var e;return(e=wp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function r2(){var t;const e=(t=wp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function i2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function s2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function o2(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ob(){return!r2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hy(){try{return typeof indexedDB=="object"}catch{return!1}}function ab(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function a2(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="FirebaseError";class ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=l2,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ma.prototype.create)}}class Ma{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?c2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ci(i,a,r)}}function c2(t,e){return t.replace(u2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const u2=/\{\$([^}]+)}/g;function h2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ql(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(dE(s)&&dE(o)){if(!Ql(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function au(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function d2(t,e){const n=new f2(t,e);return n.subscribe.bind(n)}class f2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");p2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jg),i.error===void 0&&(i.error=jg),i.complete===void 0&&(i.complete=jg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function p2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1e3,m2=2,v2=4*60*60*1e3,y2=.5;function fE(t,e=g2,n=m2){const r=e*Math.pow(n,t),i=Math.round(y2*r*(Math.random()-.5)*2);return Math.min(v2,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class li{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new t2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(E2(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:w2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function w2(t){return t===ta?void 0:t}function E2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const I2={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},S2=Oe.INFO,b2={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},C2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=b2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ep{constructor(e){this.name=e,this._logLevel=S2,this._logHandler=C2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const A2=(t,e)=>e.some(n=>t instanceof n);let pE,gE;function x2(){return pE||(pE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function P2(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lb=new WeakMap,sv=new WeakMap,cb=new WeakMap,Fg=new WeakMap,Wy=new WeakMap;function k2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(fo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lb.set(n,t)}).catch(()=>{}),Wy.set(e,t),e}function R2(t){if(sv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});sv.set(t,e)}let ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function D2(t){ov=t(ov)}function O2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ug(this),e,...n);return cb.set(r,e.sort?e.sort():[e]),fo(r)}:P2().includes(t)?function(...e){return t.apply(Ug(this),e),fo(lb.get(this))}:function(...e){return fo(t.apply(Ug(this),e))}}function N2(t){return typeof t=="function"?O2(t):(t instanceof IDBTransaction&&R2(t),A2(t,x2())?new Proxy(t,ov):t)}function fo(t){if(t instanceof IDBRequest)return k2(t);if(Fg.has(t))return Fg.get(t);const e=N2(t);return e!==t&&(Fg.set(t,e),Wy.set(e,t)),e}const Ug=t=>Wy.get(t);function ub(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=fo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(fo(o.result),l.oldVersion,l.newVersion,fo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const L2=["get","getKey","getAll","getAllKeys","count"],M2=["put","add","delete","clear"],$g=new Map;function mE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($g.get(e))return $g.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=M2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||L2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return $g.set(e,s),s}D2(t=>({...t,get:(e,n,r)=>mE(e,n)||t.get(e,n,r),has:(e,n)=>!!mE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(j2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function j2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const av="@firebase/app",vE="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Ep("@firebase/app"),F2="@firebase/app-compat",U2="@firebase/analytics-compat",$2="@firebase/analytics",B2="@firebase/app-check-compat",z2="@firebase/app-check",q2="@firebase/auth",H2="@firebase/auth-compat",W2="@firebase/database",K2="@firebase/data-connect",G2="@firebase/database-compat",Q2="@firebase/functions",Y2="@firebase/functions-compat",X2="@firebase/installations",J2="@firebase/installations-compat",Z2="@firebase/messaging",eN="@firebase/messaging-compat",tN="@firebase/performance",nN="@firebase/performance-compat",rN="@firebase/remote-config",iN="@firebase/remote-config-compat",sN="@firebase/storage",oN="@firebase/storage-compat",aN="@firebase/firestore",lN="@firebase/vertexai",cN="@firebase/firestore-compat",uN="firebase",hN="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="[DEFAULT]",dN={[av]:"fire-core",[F2]:"fire-core-compat",[$2]:"fire-analytics",[U2]:"fire-analytics-compat",[z2]:"fire-app-check",[B2]:"fire-app-check-compat",[q2]:"fire-auth",[H2]:"fire-auth-compat",[W2]:"fire-rtdb",[K2]:"fire-data-connect",[G2]:"fire-rtdb-compat",[Q2]:"fire-fn",[Y2]:"fire-fn-compat",[X2]:"fire-iid",[J2]:"fire-iid-compat",[Z2]:"fire-fcm",[eN]:"fire-fcm-compat",[tN]:"fire-perf",[nN]:"fire-perf-compat",[rN]:"fire-rc",[iN]:"fire-rc-compat",[sN]:"fire-gcs",[oN]:"fire-gcs-compat",[aN]:"fire-fst",[cN]:"fire-fst-compat",[lN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Map,fN=new Map,cv=new Map;function yE(t,e){try{t.container.addComponent(e)}catch(n){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(cv.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;cv.set(e,t);for(const n of Nf.values())yE(n,t);for(const n of fN.values())yE(n,t);return!0}function Va(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ni(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new Ma("app","Firebase",pN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=hN;function hb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:lv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw po.create("bad-app-name",{appName:String(i)});if(n||(n=rb()),!n)throw po.create("no-options");const s=Nf.get(i);if(s){if(Ql(n,s.options)&&Ql(r,s.config))return s;throw po.create("duplicate-app",{appName:i})}const o=new T2(i);for(const l of cv.values())o.addComponent(l);const a=new gN(n,r,o);return Nf.set(i,a),a}function db(t=lv){const e=Nf.get(t);if(!e&&t===lv&&rb())return hb();if(!e)throw po.create("no-app",{appName:t});return e}function Vr(t,e,n){var r;let i=(r=dN[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(a.join(" "));return}Di(new li(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="firebase-heartbeat-database",vN=1,Ju="firebase-heartbeat-store";let Bg=null;function fb(){return Bg||(Bg=ub(mN,vN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw po.create("idb-open",{originalErrorMessage:t.message})})),Bg}async function yN(t){try{const n=(await fb()).transaction(Ju),r=await n.objectStore(Ju).get(pb(t));return await n.done,r}catch(e){if(e instanceof ci)ls.warn(e.message);else{const n=po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(n.message)}}}async function _E(t,e){try{const r=(await fb()).transaction(Ju,"readwrite");await r.objectStore(Ju).put(e,pb(t)),await r.done}catch(n){if(n instanceof ci)ls.warn(n.message);else{const r=po.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ls.warn(r.message)}}}function pb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=1024,wN=30*24*60*60*1e3;class EN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new IN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=wN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=wE(),{heartbeatsToSend:r,unsentEntries:i}=TN(this._heartbeatsCache.heartbeats),s=tb(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ls.warn(n),""}}}function wE(){return new Date().toISOString().substring(0,10)}function TN(t,e=_N){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),EE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),EE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class IN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hy()?ab().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function EE(t){return tb(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t){Di(new li("platform-logger",e=>new V2(e),"PRIVATE")),Di(new li("heartbeat",e=>new EN(e),"PRIVATE")),Vr(av,vE,t),Vr(av,vE,"esm2017"),Vr("fire-js","")}SN("");function Ky(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bN=gb,mb=new Ma("auth","Firebase",gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf=new Ep("@firebase/auth");function CN(t,...e){Lf.logLevel<=Oe.WARN&&Lf.warn(`Auth (${pc}): ${t}`,...e)}function zd(t,...e){Lf.logLevel<=Oe.ERROR&&Lf.error(`Auth (${pc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw Qy(t,...e)}function si(t,...e){return Qy(t,...e)}function Gy(t,e,n){const r=Object.assign(Object.assign({},bN()),{[e]:n});return new Ma("auth","Firebase",r).create(e,{appName:t.name})}function ns(t){return Gy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$r(t,"argument-error"),Gy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return mb.create(t,...e)}function ge(t,e,...n){if(!t)throw Qy(e,...n)}function Xi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zd(e),new Error(e)}function cs(t,e){t||Xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xN(){return TE()==="http:"||TE()==="https:"}function TE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xN()||sb()||"connection"in navigator)?navigator.onLine:!0}function kN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,cs(n>e,"Short delay should be less than long delay!"),this.isMobile=n2()||s2()}get(){return PN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e){cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new gh(3e4,6e4);function Po(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gs(t,e,n,r,i={}){return yb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ph(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return i2()||(u.referrerPolicy="no-referrer"),vb.fetch()(_b(t,t.config.apiHost,n,a),u)})}async function yb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},RN),e);try{const i=new NN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _d(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _d(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _d(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Gy(t,d,u);$r(t,d)}}catch(i){if(i instanceof ci)throw i;$r(t,"network-request-failed",{message:String(i)})}}async function mh(t,e,n,r,i={}){const s=await gs(t,e,n,r,i);return"mfaPendingCredential"in s&&$r(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _b(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Yy(t.config,i):`${t.config.apiScheme}://${i}`}function ON(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(si(this.auth,"network-request-failed")),DN.get())})}}function _d(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=si(t,e,r);return i.customData._tokenResponse=n,i}function IE(t){return t!==void 0&&t.enterprise!==void 0}class LN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ON(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MN(t,e){return gs(t,"GET","/v2/recaptchaConfig",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return gs(t,"POST","/v1/accounts:delete",e)}async function wb(t,e){return gs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jN(t,e=!1){const n=qt(t),r=await n.getIdToken(e),i=Xy(r);ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Su(zg(i.auth_time)),issuedAtTime:Su(zg(i.iat)),expirationTime:Su(zg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zg(t){return Number(t)*1e3}function Xy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zd("JWT malformed, contained fewer than 3 sections"),null;try{const i=nb(n);return i?JSON.parse(i):(zd("Failed to decode base64 JWT payload"),null)}catch(i){return zd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function SE(t){const e=Xy(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ci&&FN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function FN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Yl(t,wb(n,{idToken:r}));ge(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Eb(s.providerUserInfo):[],a=BN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hv(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function $N(t){const e=qt(t);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Eb(t){return t.map(e=>{var{providerId:n}=e,r=Ky(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){const n=await yb(t,{},async()=>{const r=ph({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=_b(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vb.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qN(t,e){return gs(t,"POST","/v2/accounts:revokeToken",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=SE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vl;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ge(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ji{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ky(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new UN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Yl(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jN(this,e)}reload(){return $N(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ji(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Yl(this,VN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(u=n.createdAt)!==null&&u!==void 0?u:void 0,T=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:M,isAnonymous:z,providerData:W,stsTokenManager:P}=n;ge(I&&P,e,"internal-error");const C=Vl.fromJSON(this.name,P);ge(typeof I=="string",e,"internal-error"),js(p,e.name),js(m,e.name),ge(typeof M=="boolean",e,"internal-error"),ge(typeof z=="boolean",e,"internal-error"),js(w,e.name),js(E,e.name),js(x,e.name),js(R,e.name),js(A,e.name),js(T,e.name);const k=new Ji({uid:I,auth:e,email:m,emailVerified:M,displayName:p,isAnonymous:z,photoURL:E,phoneNumber:w,tenantId:x,stsTokenManager:C,createdAt:A,lastLoginAt:T});return W&&Array.isArray(W)&&(k.providerData=W.map(O=>Object.assign({},O))),R&&(k._redirectEventId=R),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vl;i.updateFromServerResponse(n);const s=new Ji({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ge(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Eb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vl;a.updateFromIdToken(r);const l=new Ji({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE=new Map;function Zi(t){cs(t instanceof Function,"Expected a class definition");let e=bE.get(t);return e?(cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,bE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tb.type="NONE";const CE=Tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(t,e,n){return`firebase:${t}:${e}:${n}`}class jl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qd(this.userKey,i.apiKey,s),this.fullPersistenceKey=qd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ji._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jl(Zi(CE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Zi(CE);const o=qd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const p=Ji._fromJSON(e,d);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new jl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new jl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ib(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xb(e))return"Blackberry";if(Pb(e))return"Webos";if(Sb(e))return"Safari";if((e.includes("chrome/")||bb(e))&&!e.includes("edge/"))return"Chrome";if(Ab(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ib(t=Zt()){return/firefox\//i.test(t)}function Sb(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bb(t=Zt()){return/crios\//i.test(t)}function Cb(t=Zt()){return/iemobile/i.test(t)}function Ab(t=Zt()){return/android/i.test(t)}function xb(t=Zt()){return/blackberry/i.test(t)}function Pb(t=Zt()){return/webos/i.test(t)}function Jy(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HN(t=Zt()){var e;return Jy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WN(){return o2()&&document.documentMode===10}function kb(t=Zt()){return Jy(t)||Ab(t)||Pb(t)||xb(t)||/windows phone/i.test(t)||Cb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t,e=[]){let n;switch(t){case"Browser":n=AE(Zt());break;case"Worker":n=`${AE(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${pc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e={}){return gs(t,"GET","/v2/passwordPolicy",Po(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=6;class YN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:QN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xE(this),this.idTokenSubscription=new xE(this),this.beforeStateQueue=new KN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await jl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wb(this,{idToken:e}),r=await Ji._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ni(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(ns(this));const n=e?qt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GN(this),n=new YN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ma("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await jl.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&CN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ko(t){return qt(t)}class xE{constructor(e){this.auth=e,this.observer=null,this.addObserver=d2(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JN(t){Tp=t}function Db(t){return Tp.loadJS(t)}function ZN(){return Tp.recaptchaEnterpriseScript}function eL(){return Tp.gapiScript}function tL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class nL{constructor(){this.enterprise=new rL}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class rL{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const iL="recaptcha-enterprise",Ob="NO_RECAPTCHA";class sL{constructor(e){this.type=iL,this.auth=ko(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{MN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new LN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;IE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(Ob)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nL().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&IE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=ZN();l.length!==0&&(l+=a),Db(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function PE(t,e,n,r=!1,i=!1){const s=new sL(t);let o;if(i)o=Ob;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function dv(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await PE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await PE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(t,e){const n=Va(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ql(s,e??{}))return i;$r(i,"already-initialized")}return n.initialize({options:e})}function aL(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lL(t,e,n){const r=ko(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Nb(e),{host:o,port:a}=cL(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),uL()}function Nb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cL(t){const e=Nb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:kE(o)}}}function kE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uL(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,n){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}}async function hL(t,e){return gs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(t,e){return mh(t,"POST","/v1/accounts:signInWithPassword",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fL(t,e){return mh(t,"POST","/v1/accounts:signInWithEmailLink",Po(t,e))}async function pL(t,e){return mh(t,"POST","/v1/accounts:signInWithEmailLink",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Zy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Zu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Zu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dv(e,n,"signInWithPassword",dL);case"emailLink":return fL(e,{email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dv(e,r,"signUpPassword",hL);case"emailLink":return pL(e,{idToken:n,email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t,e){return mh(t,"POST","/v1/accounts:signInWithIdp",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="http://localhost";class Ta extends Zy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ky(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ta(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fl(e,n)}buildRequest(){const e={requestUri:gL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ph(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vL(t){const e=ou(au(t)).link,n=e?ou(au(e)).deep_link_id:null,r=ou(au(t)).deep_link_id;return(r?ou(au(r)).link:null)||r||n||e||t}class e_{constructor(e){var n,r,i,s,o,a;const l=ou(au(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=mL((i=l.mode)!==null&&i!==void 0?i:null);ge(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=vL(e);try{return new e_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(){this.providerId=gc.PROVIDER_ID}static credential(e,n){return Zu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=e_.parseLink(n);return ge(r,"argument-error"),Zu._fromEmailAndCode(e,r.code,r.tenantId)}}gc.PROVIDER_ID="password";gc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh extends t_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends vh{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends vh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ta._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return bi.credential(n,r)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends vh{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.GITHUB_SIGN_IN_METHOD="github.com";Qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends vh{constructor(){super("twitter.com")}static credential(e,n){return Ta._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ys.credential(n,r)}catch{return null}}}Ys.TWITTER_SIGN_IN_METHOD="twitter.com";Ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e){return mh(t,"POST","/v1/accounts:signUp",Po(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ji._fromIdTokenResponse(e,r,i),o=RE(r);return new Ia({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RE(r);return new Ia({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf extends ci{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Vf(e,n,r,i)}}function Lb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Vf._fromErrorAndOperation(t,s,e,r):s})}async function _L(t,e,n=!1){const r=await Yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ia._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t,e,n=!1){const{auth:r}=t;if(ni(r.app))return Promise.reject(ns(r));const i="reauthenticate";try{const s=await Yl(t,Lb(r,i,e,t),n);ge(s.idToken,r,"internal-error");const o=Xy(s.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),Ia._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&$r(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(t,e,n=!1){if(ni(t.app))return Promise.reject(ns(t));const r="signIn",i=await Lb(t,r,e),s=await Ia._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function EL(t,e){return Mb(ko(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(t){const e=ko(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TL(t,e,n){if(ni(t.app))return Promise.reject(ns(t));const r=ko(t),o=await dv(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Vb(t),l}),a=await Ia._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function IL(t,e,n){return ni(t.app)?Promise.reject(ns(t)):EL(qt(t),gc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Vb(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(t,e){return gs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=qt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Yl(r,SL(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function bL(t,e,n,r){return qt(t).onIdTokenChanged(e,n,r)}function CL(t,e,n){return qt(t).beforeAuthStateChanged(e,n)}function Fb(t,e,n,r){return qt(t).onAuthStateChanged(e,n,r)}function AL(t){return qt(t).signOut()}const jf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jf,"1"),this.storage.removeItem(jf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=1e3,PL=10;class $b extends Ub{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);WN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$b.type="LOCAL";const kL=$b;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb extends Ub{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bb.type="SESSION";const zb=Bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ip(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await RL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=n_("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return window}function OL(t){Ri().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(){return typeof Ri().WorkerGlobalScope<"u"&&typeof Ri().importScripts=="function"}async function NL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ML(){return qb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebaseLocalStorageDb",VL=1,Ff="firebaseLocalStorage",Wb="fbase_key";class yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sp(t,e){return t.transaction([Ff],e?"readwrite":"readonly").objectStore(Ff)}function jL(){const t=indexedDB.deleteDatabase(Hb);return new yh(t).toPromise()}function fv(){const t=indexedDB.open(Hb,VL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ff,{keyPath:Wb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ff)?e(r):(r.close(),await jL(),e(await fv()))})})}async function DE(t,e,n){const r=Sp(t,!0).put({[Wb]:e,value:n});return new yh(r).toPromise()}async function FL(t,e){const n=Sp(t,!1).get(e),r=await new yh(n).toPromise();return r===void 0?null:r.value}function OE(t,e){const n=Sp(t,!0).delete(e);return new yh(n).toPromise()}const UL=800,$L=3;class Kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$L)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(ML()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NL(),!this.activeServiceWorker)return;this.sender=new DL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fv();return await DE(e,jf,"1"),await OE(e,jf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>DE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>OE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sp(i,!1).getAll();return new yh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kb.type="LOCAL";const BL=Kb;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t,e){return e?Zi(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_ extends Zy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zL(t){return Mb(t.auth,new r_(t),t.bypassAuthState)}function qL(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),wL(n,new r_(t),t.bypassAuthState)}async function HL(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),_L(n,new r_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zL;case"linkViaPopup":case"linkViaRedirect":return HL;case"reauthViaPopup":case"reauthViaRedirect":return qL;default:$r(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=new gh(2e3,1e4);async function Yb(t,e,n){if(ni(t.app))return Promise.reject(si(t,"operation-not-supported-in-this-environment"));const r=ko(t);AN(t,e,t_);const i=Gb(r,n);return new ua(r,"signInViaPopup",e,i).executeNotNull()}class ua extends Qb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ua.currentPopupAction&&ua.currentPopupAction.cancel(),ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=n_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WL.get())};e()}}ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL="pendingRedirect",Hd=new Map;class GL extends Qb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hd.get(this.auth._key());if(!e){try{const r=await QL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hd.set(this.auth._key(),e)}return this.bypassAuthState||Hd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QL(t,e){const n=JL(e),r=XL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function YL(t,e){Hd.set(t._key(),e)}function XL(t){return Zi(t._redirectPersistence)}function JL(t){return qd(KL,t.config.apiKey,t.name)}async function ZL(t,e,n=!1){if(ni(t.app))return Promise.reject(ns(t));const r=ko(t),i=Gb(r,e),o=await new GL(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=10*60*1e3;class tM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Xb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(si(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eM&&this.cachedEventUids.clear(),this.cachedEventUids.has(NE(e))}saveEventToCache(e){this.cachedEventUids.add(NE(e)),this.lastProcessedEventTime=Date.now()}}function NE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Xb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e={}){return gs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sM=/^https?/;async function oM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rM(t);for(const n of e)try{if(aM(n))return}catch{}$r(t,"unauthorized-domain")}function aM(t){const e=uv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sM.test(n))return!1;if(iM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new gh(3e4,6e4);function LE(){const t=Ri().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cM(t){return new Promise((e,n)=>{var r,i,s;function o(){LE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LE(),n(si(t,"network-request-failed"))},timeout:lM.get()})}if(!((i=(r=Ri().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ri().gapi)===null||s===void 0)&&s.load)o();else{const a=tL("iframefcb");return Ri()[a]=()=>{gapi.load?o():n(si(t,"network-request-failed"))},Db(`${eL()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Wd=null,e})}let Wd=null;function uM(t){return Wd=Wd||cM(t),Wd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=new gh(5e3,15e3),dM="__/auth/iframe",fM="emulator/auth/iframe",pM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mM(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yy(e,fM):`https://${t.config.authDomain}/${dM}`,r={apiKey:e.apiKey,appName:t.name,v:pc},i=gM.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ph(r).slice(1)}`}async function vM(t){const e=await uM(t),n=Ri().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:mM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pM,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=si(t,"network-request-failed"),a=Ri().setTimeout(()=>{s(o)},hM.get());function l(){Ri().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_M=500,wM=600,EM="_blank",TM="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IM(t,e,n,r=_M,i=wM){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},yM),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Zt().toLowerCase();n&&(a=bb(u)?EM:n),Ib(u)&&(e=e||TM,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[w,E])=>`${m}${w}=${E},`,"");if(HN(u)&&a!=="_self")return SM(e||"",a),new ME(null);const p=window.open(e||"",a,d);ge(p,t,"popup-blocked");try{p.focus()}catch{}return new ME(p)}function SM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM="__/auth/handler",CM="emulator/auth/handler",AM=encodeURIComponent("fac");async function VE(t,e,n,r,i,s){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:pc,eventId:i};if(e instanceof t_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",h2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof vh){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${AM}=${encodeURIComponent(l)}`:"";return`${xM(t)}?${ph(a).slice(1)}${u}`}function xM({config:t}){return t.emulator?Yy(t,CM):`https://${t.authDomain}/${bM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="webStorageSupport";class PM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zb,this._completeRedirectFn=ZL,this._overrideRedirectResult=YL}async _openPopup(e,n,r,i){var s;cs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await VE(e,n,r,uv(),i);return IM(e,o,n_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await VE(e,n,r,uv(),i);return OL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(cs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vM(e),r=new tM(e);return n.register("authEvent",i=>(ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qg,{type:qg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[qg];o!==void 0&&n(!!o),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kb()||Sb()||Jy()}}const kM=PM;var jE="@firebase/auth",FE="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OM(t){Di(new li("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rb(t)},u=new XN(r,i,s,l);return aL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new li("auth-internal",e=>{const n=ko(e.getProvider("auth").getImmediate());return(r=>new RM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(jE,FE,DM(t)),Vr(jE,FE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=5*60,LM=ib("authIdTokenMaxAge")||NM;let UE=null;const MM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LM)return;const i=n==null?void 0:n.token;UE!==i&&(UE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VM(t=db()){const e=Va(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oL(t,{popupRedirectResolver:kM,persistence:[BL,kL,zb]}),r=ib("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=MM(s.toString());CL(n,o,()=>o(n.currentUser)),bL(n,a=>o(a))}}const i=e2("auth");return i&&lL(n,`http://${i}`),n}function jM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=si("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",jM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OM("Browser");var FM="firebase",UM="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(FM,UM,"app");var $E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pa,Jb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function k(){}k.prototype=C.prototype,P.D=C.prototype,P.prototype=new k,P.prototype.constructor=P,P.C=function(O,L,j){for(var D=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)D[mt-2]=arguments[mt];return C.prototype[L].apply(O,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,k){k||(k=0);var O=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)O[L]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(L=0;16>L;++L)O[L]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=P.g[0],k=P.g[1],L=P.g[2];var j=P.g[3],D=C+(j^k&(L^j))+O[0]+3614090360&4294967295;C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[1]+3905402710&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[2]+606105819&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[3]+3250441966&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(j^k&(L^j))+O[4]+4118548399&4294967295,C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[5]+1200080426&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[6]+2821735955&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[7]+4249261313&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(j^k&(L^j))+O[8]+1770035416&4294967295,C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[9]+2336552879&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[10]+4294925233&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[11]+2304563134&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(j^k&(L^j))+O[12]+1804603682&4294967295,C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[13]+4254626195&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[14]+2792965006&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[15]+1236535329&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(L^j&(k^L))+O[1]+4129170786&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[6]+3225465664&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[11]+643717713&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[0]+3921069994&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(L^j&(k^L))+O[5]+3593408605&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[10]+38016083&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[15]+3634488961&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[4]+3889429448&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(L^j&(k^L))+O[9]+568446438&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[14]+3275163606&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[3]+4107603335&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[8]+1163531501&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(L^j&(k^L))+O[13]+2850285829&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[2]+4243563512&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[7]+1735328473&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[12]+2368359562&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(k^L^j)+O[5]+4294588738&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[8]+2272392833&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[11]+1839030562&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[14]+4259657740&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(k^L^j)+O[1]+2763975236&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[4]+1272893353&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[7]+4139469664&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[10]+3200236656&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(k^L^j)+O[13]+681279174&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[0]+3936430074&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[3]+3572445317&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[6]+76029189&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(k^L^j)+O[9]+3654602809&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[12]+3873151461&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[15]+530742520&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[2]+3299628645&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(L^(k|~j))+O[0]+4096336452&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[7]+1126891415&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[14]+2878612391&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[5]+4237533241&4294967295,k=L+(D<<21&4294967295|D>>>11),D=C+(L^(k|~j))+O[12]+1700485571&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[3]+2399980690&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[10]+4293915773&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[1]+2240044497&4294967295,k=L+(D<<21&4294967295|D>>>11),D=C+(L^(k|~j))+O[8]+1873313359&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[15]+4264355552&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[6]+2734768916&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[13]+1309151649&4294967295,k=L+(D<<21&4294967295|D>>>11),D=C+(L^(k|~j))+O[4]+4149444226&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[11]+3174756917&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[2]+718787259&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+j&4294967295}r.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var k=C-this.blockSize,O=this.B,L=this.h,j=0;j<C;){if(L==0)for(;j<=k;)i(this,P,j),j+=this.blockSize;if(typeof P=="string"){for(;j<C;)if(O[L++]=P.charCodeAt(j++),L==this.blockSize){i(this,O),L=0;break}}else for(;j<C;)if(O[L++]=P[j++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=C},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var k=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=k&255,k/=256;for(this.u(P),P=Array(16),C=k=0;4>C;++C)for(var O=0;32>O;O+=8)P[k++]=this.g[C]>>>O&255;return P};function s(P,C){var k=a;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=C(P)}function o(P,C){this.h=C;for(var k=[],O=!0,L=P.length-1;0<=L;L--){var j=P[L]|0;O&&j==C||(k[L]=j,O=!1)}this.g=k}var a={};function l(P){return-128<=P&&128>P?s(P,function(C){return new o([C|0],0>C?-1:0)}):new o([P|0],0>P?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return R(u(-P));for(var C=[],k=1,O=0;P>=k;O++)C[O]=P/k|0,k*=4294967296;return new o(C,0)}function d(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return R(d(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(C,8)),O=p,L=0;L<P.length;L+=8){var j=Math.min(8,P.length-L),D=parseInt(P.substring(L,L+j),C);8>j?(j=u(Math.pow(C,j)),O=O.j(j).add(u(D))):(O=O.j(k),O=O.add(u(D)))}return O}var p=l(0),m=l(1),w=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-R(this).m();for(var P=0,C=1,k=0;k<this.g.length;k++){var O=this.i(k);P+=(0<=O?O:4294967296+O)*C,C*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(x(this))return"-"+R(this).toString(P);for(var C=u(Math.pow(P,6)),k=this,O="";;){var L=M(k,C).g;k=A(k,L.j(C));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(P);if(k=L,E(k))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function x(P){return P.h==-1}t.l=function(P){return P=A(this,P),x(P)?-1:E(P)?0:1};function R(P){for(var C=P.g.length,k=[],O=0;O<C;O++)k[O]=~P.g[O];return new o(k,~P.h).add(m)}t.abs=function(){return x(this)?R(this):this},t.add=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0,L=0;L<=C;L++){var j=O+(this.i(L)&65535)+(P.i(L)&65535),D=(j>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);O=D>>>16,j&=65535,D&=65535,k[L]=D<<16|j}return new o(k,k[k.length-1]&-2147483648?-1:0)};function A(P,C){return P.add(R(C))}t.j=function(P){if(E(this)||E(P))return p;if(x(this))return x(P)?R(this).j(R(P)):R(R(this).j(P));if(x(P))return R(this.j(R(P)));if(0>this.l(w)&&0>P.l(w))return u(this.m()*P.m());for(var C=this.g.length+P.g.length,k=[],O=0;O<2*C;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<P.g.length;L++){var j=this.i(O)>>>16,D=this.i(O)&65535,mt=P.i(L)>>>16,St=P.i(L)&65535;k[2*O+2*L]+=D*St,T(k,2*O+2*L),k[2*O+2*L+1]+=j*St,T(k,2*O+2*L+1),k[2*O+2*L+1]+=D*mt,T(k,2*O+2*L+1),k[2*O+2*L+2]+=j*mt,T(k,2*O+2*L+2)}for(O=0;O<C;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=C;O<2*C;O++)k[O]=0;return new o(k,0)};function T(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function I(P,C){this.g=P,this.h=C}function M(P,C){if(E(C))throw Error("division by zero");if(E(P))return new I(p,p);if(x(P))return C=M(R(P),C),new I(R(C.g),R(C.h));if(x(C))return C=M(P,R(C)),new I(R(C.g),C.h);if(30<P.g.length){if(x(P)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var k=m,O=C;0>=O.l(P);)k=z(k),O=z(O);var L=W(k,1),j=W(O,1);for(O=W(O,2),k=W(k,2);!E(O);){var D=j.add(O);0>=D.l(P)&&(L=L.add(k),j=D),O=W(O,1),k=W(k,1)}return C=A(P,L.j(C)),new I(L,C)}for(L=p;0<=P.l(C);){for(k=Math.max(1,Math.floor(P.m()/C.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=u(k),D=j.j(C);x(D)||0<D.l(P);)k-=O,j=u(k),D=j.j(C);E(j)&&(j=m),L=L.add(j),P=A(P,D)}return new I(L,P)}t.A=function(P){return M(this,P).h},t.and=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0;O<C;O++)k[O]=this.i(O)&P.i(O);return new o(k,this.h&P.h)},t.or=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0;O<C;O++)k[O]=this.i(O)|P.i(O);return new o(k,this.h|P.h)},t.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0;O<C;O++)k[O]=this.i(O)^P.i(O);return new o(k,this.h^P.h)};function z(P){for(var C=P.g.length+1,k=[],O=0;O<C;O++)k[O]=P.i(O)<<1|P.i(O-1)>>>31;return new o(k,P.h)}function W(P,C){var k=C>>5;C%=32;for(var O=P.g.length-k,L=[],j=0;j<O;j++)L[j]=0<C?P.i(j+k)>>>C|P.i(j+k+1)<<32-C:P.i(j+k);return new o(L,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,pa=o}).apply(typeof $E<"u"?$E:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zb,lu,eC,Kd,pv,tC,nC,rC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,y){return c==Array.prototype||c==Object.prototype||(c[f]=y.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var f=0;f<c.length;++f){var y=c[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var y=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var U=c[b];if(!(U in y))break e;y=y[U]}c=c[c.length-1],b=y[c],f=f(b),f!=b&&f!=null&&e(y,c,{configurable:!0,writable:!0,value:f})}}function s(c,f){c instanceof String&&(c+="");var y=0,b=!1,U={next:function(){if(!b&&y<c.length){var q=y++;return{value:f(q,c[q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(c){return c||function(){return s(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function d(c,f,y){return c.call.apply(c.bind,arguments)}function p(c,f,y){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,b),c.apply(f,U)}}return function(){return c.apply(f,arguments)}}function m(c,f,y){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function w(c,f){var y=Array.prototype.slice.call(arguments,1);return function(){var b=y.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function E(c,f){function y(){}y.prototype=f.prototype,c.aa=f.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(b,U,q){for(var J=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)J[Je-2]=arguments[Je];return f.prototype[U].apply(b,J)}}function x(c){const f=c.length;if(0<f){const y=Array(f);for(let b=0;b<f;b++)y[b]=c[b];return y}return[]}function R(c,f){for(let y=1;y<arguments.length;y++){const b=arguments[y];if(l(b)){const U=c.length||0,q=b.length||0;c.length=U+q;for(let J=0;J<q;J++)c[U+J]=b[J]}else c.push(b)}}class A{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(c){return/^[\s\xa0]*$/.test(c)}function I(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function M(c){return M[" "](c),c}M[" "]=function(){};var z=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function W(c,f,y){for(const b in c)f.call(y,c[b],b,c)}function P(c,f){for(const y in c)f.call(void 0,c[y],y,c)}function C(c){const f={};for(const y in c)f[y]=c[y];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,f){let y,b;for(let U=1;U<arguments.length;U++){b=arguments[U];for(y in b)c[y]=b[y];for(let q=0;q<k.length;q++)y=k[q],Object.prototype.hasOwnProperty.call(b,y)&&(c[y]=b[y])}}function L(c){var f=1;c=c.split(":");const y=[];for(;0<f&&c.length;)y.push(c.shift()),f--;return c.length&&y.push(c.join(":")),y}function j(c){a.setTimeout(()=>{throw c},0)}function D(){var c=he;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class mt{constructor(){this.h=this.g=null}add(f,y){const b=St.get();b.set(f,y),this.h?this.h.next=b:this.g=b,this.h=b}}var St=new A(()=>new Ut,c=>c.reset());class Ut{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,X=!1,he=new mt,B=()=>{const c=a.Promise.resolve(void 0);Ye=()=>{c.then(Me)}};var Me=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(y){j(y)}var f=St;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}X=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var st=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};a.addEventListener("test",y,f),a.removeEventListener("test",y,f)}catch{}return c}();function kt(c,f){if(Be.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(z){e:{try{M(f.nodeName);var U=!0;break e}catch{}U=!1}U||(f=null)}}else y=="mouseover"?f=c.fromElement:y=="mouseout"&&(f=c.toElement);this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ge[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&kt.aa.h.call(this)}}E(kt,Be);var Ge={2:"touch",3:"pen",4:"mouse"};kt.prototype.h=function(){kt.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),re=0;function pn(c,f,y,b,U){this.listener=c,this.proxy=null,this.src=f,this.type=y,this.capture=!!b,this.ha=U,this.key=++re,this.da=this.fa=!1}function gn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function wt(c){this.src=c,this.g={},this.h=0}wt.prototype.add=function(c,f,y,b,U){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var J=ln(c,f,b,U);return-1<J?(f=c[J],y||(f.fa=!1)):(f=new pn(f,this.src,q,!!b,U),f.fa=y,c.push(f)),f};function Lt(c,f){var y=f.type;if(y in c.g){var b=c.g[y],U=Array.prototype.indexOf.call(b,f,void 0),q;(q=0<=U)&&Array.prototype.splice.call(b,U,1),q&&(gn(f),c.g[y].length==0&&(delete c.g[y],c.h--))}}function ln(c,f,y,b){for(var U=0;U<c.length;++U){var q=c[U];if(!q.da&&q.listener==f&&q.capture==!!y&&q.ha==b)return U}return-1}var Br="closure_lm_"+(1e6*Math.random()|0),mn={};function Wt(c,f,y,b,U){if(Array.isArray(f)){for(var q=0;q<f.length;q++)Wt(c,f[q],y,b,U);return null}return y=Ue(y),c&&c[fe]?c.K(f,y,u(b)?!!b.capture:!!b,U):_s(c,f,y,!1,b,U)}function _s(c,f,y,b,U,q){if(!f)throw Error("Invalid event type");var J=u(U)?!!U.capture:!!U,Je=Ve(c);if(Je||(c[Br]=Je=new wt(c)),y=Je.add(f,y,b,J,q),y.proxy)return y;if(b=ui(),y.proxy=b,b.src=c,b.listener=y,c.addEventListener)st||(U=J),U===void 0&&(U=!1),c.addEventListener(f.toString(),b,U);else if(c.attachEvent)c.attachEvent(ue(f.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ui(){function c(y){return f.call(c.src,c.listener,y)}const f=be;return c}function ce(c,f,y,b,U){if(Array.isArray(f))for(var q=0;q<f.length;q++)ce(c,f[q],y,b,U);else b=u(b)?!!b.capture:!!b,y=Ue(y),c&&c[fe]?(c=c.i,f=String(f).toString(),f in c.g&&(q=c.g[f],y=ln(q,y,b,U),-1<y&&(gn(q[y]),Array.prototype.splice.call(q,y,1),q.length==0&&(delete c.g[f],c.h--)))):c&&(c=Ve(c))&&(f=c.g[f.toString()],c=-1,f&&(c=ln(f,y,b,U)),(y=-1<c?f[c]:null)&&me(y))}function me(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[fe])Lt(f.i,c);else{var y=c.type,b=c.proxy;f.removeEventListener?f.removeEventListener(y,b,c.capture):f.detachEvent?f.detachEvent(ue(y),b):f.addListener&&f.removeListener&&f.removeListener(b),(y=Ve(f))?(Lt(y,c),y.h==0&&(y.src=null,f[Br]=null)):gn(c)}}}function ue(c){return c in mn?mn[c]:mn[c]="on"+c}function be(c,f){if(c.da)c=!0;else{f=new kt(f,this);var y=c.listener,b=c.ha||c.src;c.fa&&me(c),c=y.call(b,f)}return c}function Ve(c){return c=c[Br],c instanceof wt?c:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(c){return typeof c=="function"?c:(c[vt]||(c[vt]=function(f){return c.handleEvent(f)}),c[vt])}function He(){Re.call(this),this.i=new wt(this),this.M=this,this.F=null}E(He,Re),He.prototype[fe]=!0,He.prototype.removeEventListener=function(c,f,y,b){ce(this,c,f,y,b)};function ot(c,f){var y,b=c.F;if(b)for(y=[];b;b=b.F)y.push(b);if(c=c.M,b=f.type||f,typeof f=="string")f=new Be(f,c);else if(f instanceof Be)f.target=f.target||c;else{var U=f;f=new Be(b,c),O(f,U)}if(U=!0,y)for(var q=y.length-1;0<=q;q--){var J=f.g=y[q];U=tr(J,b,!0,f)&&U}if(J=f.g=c,U=tr(J,b,!0,f)&&U,U=tr(J,b,!1,f)&&U,y)for(q=0;q<y.length;q++)J=f.g=y[q],U=tr(J,b,!1,f)&&U}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var y=c.g[f],b=0;b<y.length;b++)gn(y[b]);delete c.g[f],c.h--}}this.F=null},He.prototype.K=function(c,f,y,b){return this.i.add(String(c),f,!1,y,b)},He.prototype.L=function(c,f,y,b){return this.i.add(String(c),f,!0,y,b)};function tr(c,f,y,b){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var U=!0,q=0;q<f.length;++q){var J=f[q];if(J&&!J.da&&J.capture==y){var Je=J.listener,Gt=J.ha||J.src;J.fa&&Lt(c.i,J),U=Je.call(Gt,b)!==!1&&U}}return U&&!b.defaultPrevented}function zr(c,f,y){if(typeof c=="function")y&&(c=m(c,y));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(c,f||0)}function Ni(c){c.g=zr(()=>{c.g=null,c.i&&(c.i=!1,Ni(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class ws extends Re{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ni(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nr(c){Re.call(this),this.h=c,this.g={}}E(nr,Re);var $a=[];function Li(c){W(c.g,function(f,y){this.g.hasOwnProperty(y)&&me(f)},c),c.g={}}nr.prototype.N=function(){nr.aa.N.call(this),Li(this)},nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=a.JSON.stringify,_c=a.JSON.parse,wc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function No(){}No.prototype.h=null;function Lo(c){return c.h||(c.h=c.i())}function qr(){}var di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Es(){Be.call(this,"d")}E(Es,Be);function Mo(){Be.call(this,"c")}E(Mo,Be);var Hr={},Ts=null;function Is(){return Ts=Ts||new He}Hr.La="serverreachability";function zn(c){Be.call(this,Hr.La,c)}E(zn,Be);function xn(c){const f=Is();ot(f,new zn(f))}Hr.STAT_EVENT="statevent";function Ba(c,f){Be.call(this,Hr.STAT_EVENT,c),this.stat=f}E(Ba,Be);function Kt(c){const f=Is();ot(f,new Ba(f,c))}Hr.Ma="timingevent";function za(c,f){Be.call(this,Hr.Ma,c),this.size=f}E(za,Be);function Mi(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},f)}function ze(){this.g=!0}ze.prototype.xa=function(){this.g=!1};function at(c,f,y,b,U,q){c.info(function(){if(c.g)if(q)for(var J="",Je=q.split("&"),Gt=0;Gt<Je.length;Gt++){var je=Je[Gt].split("=");if(1<je.length){var lt=je[0];je=je[1];var Qt=lt.split("_");J=2<=Qt.length&&Qt[1]=="type"?J+(lt+"="+je+"&"):J+(lt+"=redacted&")}}else J=null;else J=q;return"XMLHTTP REQ ("+b+") [attempt "+U+"]: "+f+`
`+y+`
`+J})}function Mt(c,f,y,b,U,q,J){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+U+"]: "+f+`
`+y+`
`+q+" "+J})}function Xe(c,f,y,b){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+cn(c,y)+(b?" "+b:"")})}function vr(c,f){c.info(function(){return"TIMEOUT: "+f})}ze.prototype.info=function(){};function cn(c,f){if(!c.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var b=y[c];if(!(2>b.length)){var U=b[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var J=1;J<U.length;J++)U[J]=""}}}}return hi(y)}catch{return f}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ph={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fi;function $t(){}E($t,No),$t.prototype.g=function(){return new XMLHttpRequest},$t.prototype.i=function(){return{}},fi=new $t;function Rt(c,f,y,b){this.j=c,this.i=f,this.l=y,this.R=b||1,this.U=new nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vn}function vn(){this.i=null,this.g="",this.h=!1}var tn={},bs={};function pi(c,f,y){c.L=1,c.v=As(rr(f)),c.m=y,c.P=!0,gi(c,null)}function gi(c,f){c.F=Date.now(),Cs(c),c.A=rr(c.v);var y=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),xc(y.i,"t",b),c.C=0,y=c.j.J,c.h=new vn,c.g=qh(c.j,y?f:null,!c.m),0<c.O&&(c.M=new ws(m(c.Y,c,c.g),c.O)),f=c.U,y=c.g,b=c.ca;var U="readystatechange";Array.isArray(U)||(U&&($a[0]=U.toString()),U=$a);for(var q=0;q<U.length;q++){var J=Wt(y,U[q],b||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),xn(),at(c.i,c.u,c.A,c.l,c.R,c.m)}Rt.prototype.ca=function(c){c=c.target;const f=this.M;f&&Er(c)==3?f.j():this.Y(c)},Rt.prototype.Y=function(c){try{if(c==this.g)e:{const Qt=Er(this.g);var f=this.g.Ba();const Bi=this.g.Z();if(!(3>Qt)&&(Qt!=3||this.g&&(this.h.h||this.g.oa()||Dc(this.g)))){this.J||Qt!=4||f==7||(f==8||0>=Bi?xn(3):xn(2)),qa(this);var y=this.g.Z();this.X=y;t:if(Vi(this)){var b=Dc(this.g);c="";var U=b.length,q=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Fi(this);var J="";break t}this.h.i=new a.TextDecoder}for(f=0;f<U;f++)this.h.h=!0,c+=this.h.i.decode(b[f],{stream:!(q&&f==U-1)});b.length=0,this.h.g+=c,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=y==200,Mt(this.i,this.u,this.A,this.l,this.R,Qt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Gt=this.g;if((Je=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Je)){var je=Je;break t}}je=null}if(y=je)Xe(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ha(this,y);else{this.o=!1,this.s=3,Kt(12),Wr(this),Fi(this);break e}}if(this.P){y=!0;let Kn;for(;!this.J&&this.C<J.length;)if(Kn=kh(this,J),Kn==bs){Qt==4&&(this.s=4,Kt(14),y=!1),Xe(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==tn){this.s=4,Kt(15),Xe(this.i,this.l,J,"[Invalid Chunk]"),y=!1;break}else Xe(this.i,this.l,Kn,null),Ha(this,Kn);if(Vi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qt!=4||J.length!=0||this.h.h||(this.s=1,Kt(16),y=!1),this.o=this.o&&y,!y)Xe(this.i,this.l,J,"[Invalid Chunked Response]"),Wr(this),Fi(this);else if(0<J.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),tl(lt),lt.M=!0,Kt(11))}}else Xe(this.i,this.l,J,null),Ha(this,J);Qt==4&&Wr(this),this.o&&!this.J&&(Qt==4?nl(this.j,this):(this.o=!1,Cs(this)))}else Mh(this.g),y==400&&0<J.indexOf("Unknown SID")?(this.s=3,Kt(12)):(this.s=0,Kt(13)),Wr(this),Fi(this)}}}catch{}finally{}};function Vi(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function kh(c,f){var y=c.C,b=f.indexOf(`
`,y);return b==-1?bs:(y=Number(f.substring(y,b)),isNaN(y)?tn:(b+=1,b+y>f.length?bs:(f=f.slice(b,b+y),c.C=b+y,f)))}Rt.prototype.cancel=function(){this.J=!0,Wr(this)};function Cs(c){c.S=Date.now()+c.I,ji(c,c.I)}function ji(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Mi(m(c.ba,c),f)}function qa(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Rt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(vr(this.i,this.A),this.L!=2&&(xn(),Kt(17)),Wr(this),this.s=2,Fi(this)):ji(this,this.S-c)};function Fi(c){c.j.G==0||c.J||nl(c.j,c)}function Wr(c){qa(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,Li(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function Ha(c,f){try{var y=c.j;if(y.G!=0&&(y.g==c||Wa(y.h,c))){if(!c.K&&Wa(y.h,c)&&y.G==3){try{var b=y.Da.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var U=b;if(U[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Tr(y),zo(y);else break e;qo(y),Kt(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=Mi(m(y.Za,y),6e3));if(1>=Ic(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else _i(y,11)}else if((c.K||y.g==c)&&Tr(y),!T(f))for(U=y.Da.g.parse(f),f=0;f<U.length;f++){let je=U[f];if(y.T=je[0],je=je[1],y.G==2)if(je[0]=="c"){y.K=je[1],y.ia=je[2];const lt=je[3];lt!=null&&(y.la=lt,y.j.info("VER="+y.la));const Qt=je[4];Qt!=null&&(y.Aa=Qt,y.j.info("SVER="+y.Aa));const Bi=je[5];Bi!=null&&typeof Bi=="number"&&0<Bi&&(b=1.5*Bi,y.L=b,y.j.info("backChannelRequestTimeoutMs_="+b)),b=y;const Kn=c.g;if(Kn){const rl=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var q=b.h;q.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ka(q,q.h),q.h=null))}if(b.D){const Mc=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mc&&(b.ya=Mc,qe(b.I,b.D,Mc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),b=y;var J=c;if(b.qa=zh(b,b.J?b.ia:null,b.W),J.K){Sc(b.h,J);var Je=J,Gt=b.L;Gt&&(Je.I=Gt),Je.B&&(qa(Je),Cs(Je)),b.g=J}else Uh(b);0<y.i.length&&el(y)}else je[0]!="stop"&&je[0]!="close"||_i(y,7);else y.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?_i(y,7):Bo(y):je[0]!="noop"&&y.l&&y.l.ta(je),y.v=0)}}xn(4)}catch{}}var Rh=class{constructor(c,f){this.g=c,this.map=f}};function Ec(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ic(c){return c.h?1:c.g?c.g.size:0}function Wa(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Ka(c,f){c.g?c.g.add(f):c.h=f}function Sc(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}Ec.prototype.cancel=function(){if(this.i=bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const y of c.g.values())f=f.concat(y.D);return f}return x(c.i)}function Dh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var f=[],y=c.length,b=0;b<y;b++)f.push(c[b]);return f}f=[],y=0;for(b in c)f[y++]=c[b];return f}function yr(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var f=[];c=c.length;for(var y=0;y<c;y++)f.push(y);return f}f=[],y=0;for(const b in c)f[y++]=b;return f}}}function yn(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var y=yr(c),b=Dh(c),U=b.length,q=0;q<U;q++)f.call(void 0,b[q],y&&y[q],c)}var mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qn(c,f){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var b=c[y].indexOf("="),U=null;if(0<=b){var q=c[y].substring(0,b);U=c[y].substring(b+1)}else q=c[y];f(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Kr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Kr){this.h=c.h,Pn(this,c.j),this.o=c.o,this.g=c.g,_r(this,c.s),this.l=c.l;var f=c.i,y=new Ps;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Vo(this,y),this.m=c.m}else c&&(f=String(c).match(mi))?(this.h=!1,Pn(this,f[1]||"",!0),this.o=xs(f[2]||""),this.g=xs(f[3]||"",!0),_r(this,f[4]),this.l=xs(f[5]||"",!0),Vo(this,f[6]||"",!0),this.m=xs(f[7]||"")):(this.h=!1,this.i=new Ps(null,this.h))}Kr.prototype.toString=function(){var c=[],f=this.j;f&&c.push(wr(f,Ac,!0),":");var y=this.g;return(y||f=="file")&&(c.push("//"),(f=this.o)&&c.push(wr(f,Ac,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(wr(y,y.charAt(0)=="/"?Yp:Gr,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",wr(y,Ga)),c.join("")};function rr(c){return new Kr(c)}function Pn(c,f,y){c.j=y?xs(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function _r(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Vo(c,f,y){f instanceof Ps?(c.i=f,Oh(c.i,c.h)):(y||(f=wr(f,vi)),c.i=new Ps(f,c.h))}function qe(c,f,y){c.i.set(f,y)}function As(c){return qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function xs(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wr(c,f,y){return typeof c=="string"?(c=encodeURI(c).replace(f,Cc),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Cc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Ac=/[#\/\?@]/g,Gr=/[#\?:]/g,Yp=/[#\?]/g,vi=/[#\?@]/g,Ga=/#/g;function Ps(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Hn(c){c.g||(c.g=new Map,c.h=0,c.i&&qn(c.i,function(f,y){c.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}t=Ps.prototype,t.add=function(c,f){Hn(this),this.i=null,c=Ui(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(f),this.h+=1,this};function Qa(c,f){Hn(c),f=Ui(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function ks(c,f){return Hn(c),f=Ui(c,f),c.g.has(f)}t.forEach=function(c,f){Hn(this),this.g.forEach(function(y,b){y.forEach(function(U){c.call(f,U,b,this)},this)},this)},t.na=function(){Hn(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let b=0;b<f.length;b++){const U=c[b];for(let q=0;q<U.length;q++)y.push(f[b])}return y},t.V=function(c){Hn(this);let f=[];if(typeof c=="string")ks(this,c)&&(f=f.concat(this.g.get(Ui(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)f=f.concat(c[y])}return f},t.set=function(c,f){return Hn(this),this.i=null,c=Ui(this,c),ks(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function xc(c,f,y){Qa(c,f),0<y.length&&(c.i=null,c.g.set(Ui(c,f),x(y)),c.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var b=f[y];const q=encodeURIComponent(String(b)),J=this.V(b);for(b=0;b<J.length;b++){var U=q;J[b]!==""&&(U+="="+encodeURIComponent(String(J[b]))),c.push(U)}}return this.i=c.join("&")};function Ui(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function Oh(c,f){f&&!c.j&&(Hn(c),c.i=null,c.g.forEach(function(y,b){var U=b.toLowerCase();b!=U&&(Qa(this,b),xc(this,U,y))},c)),c.j=f}function Rs(c,f){const y=new ze;if(a.Image){const b=new Image;b.onload=w(Qr,y,"TestLoadImage: loaded",!0,f,b),b.onerror=w(Qr,y,"TestLoadImage: error",!1,f,b),b.onabort=w(Qr,y,"TestLoadImage: abort",!1,f,b),b.ontimeout=w(Qr,y,"TestLoadImage: timeout",!1,f,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else f(!1)}function Xp(c,f){const y=new ze,b=new AbortController,U=setTimeout(()=>{b.abort(),Qr(y,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:b.signal}).then(q=>{clearTimeout(U),q.ok?Qr(y,"TestPingServer: ok",!0,f):Qr(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(U),Qr(y,"TestPingServer: error",!1,f)})}function Qr(c,f,y,b,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),b(y)}catch{}}function Pc(){this.g=new wc}function Ya(c,f,y){const b=y||"";try{yn(c,function(U,q){let J=U;u(U)&&(J=hi(U)),f.push(b+q+"="+encodeURIComponent(J))})}catch(U){throw f.push(b+"type="+encodeURIComponent("_badmap")),U}}function Ds(c){this.l=c.Ub||null,this.j=c.eb||!1}E(Ds,No),Ds.prototype.g=function(){return new Xa(this.l,this.j)},Ds.prototype.i=function(c){return function(){return c}}({});function Xa(c,f){He.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Xa,He),t=Xa.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Os(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function jo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Fo(this):Os(this),this.readyState==3&&jo(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Fo(this))},t.Qa=function(c){this.g&&(this.response=c,Fo(this))},t.ga=function(){this.g&&Fo(this)};function Fo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Os(c)}t.setRequestHeader=function(c,f){this.u.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=f.next();return c.join(`\r
`)};function Os(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ja(c){let f="";return W(c,function(y,b){f+=b,f+=":",f+=y,f+=`\r
`}),f}function Uo(c,f,y){e:{for(b in y){var b=!1;break e}b=!0}b||(y=Ja(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):qe(c,f,y))}function ft(c){He.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ft,He);var Nh=/^https?$/i,$o=["POST","PUT"];t=ft.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,f,y,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fi.g(),this.v=this.o?Lo(this.o):Lo(fi),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(q){Za(this,q);return}if(c=y||"",y=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var U in b)y.set(U,b[U]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())y.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(y.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call($o,f,void 0))||b||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,J]of y)this.g.setRequestHeader(q,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lh(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){Za(this,q)}};function Za(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,kc(c),Yr(c)}function kc(c){c.A||(c.A=!0,ot(c,"complete"),ot(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ot(this,"complete"),ot(this,"abort"),Yr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Rc(this):this.bb())},t.bb=function(){Rc(this)};function Rc(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Er(c)!=4||c.Z()!=2)){if(c.u&&Er(c)==4)zr(c.Ea,0,c);else if(ot(c,"readystatechange"),Er(c)==4){c.h=!1;try{const J=c.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var b;if(b=J===0){var U=String(c.D).match(mi)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),b=!Nh.test(U?U.toLowerCase():"")}y=b}if(y)ot(c,"complete"),ot(c,"success");else{c.m=6;try{var q=2<Er(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",kc(c)}}finally{Yr(c)}}}}function Yr(c,f){if(c.g){Lh(c);const y=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||ot(c,"ready");try{y.onreadystatechange=b}catch{}}}function Lh(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Er(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),_c(f)}};function Dc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Mh(c){const f={};c=(c.g&&2<=Er(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(T(c[b]))continue;var y=L(c[b]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const q=f[U]||[];f[U]=q,q.push(y)}P(f,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ns(c,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||f}function Oc(c){this.Aa=0,this.i=[],this.j=new ze,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ns("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ns("baseRetryDelayMs",5e3,c),this.cb=Ns("retryDelaySeedMs",1e4,c),this.Wa=Ns("forwardChannelMaxRetries",2,c),this.wa=Ns("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ec(c&&c.concurrentRequestLimit),this.Da=new Pc,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Oc.prototype,t.la=8,t.G=1,t.connect=function(c,f,y,b){Kt(0),this.W=c,this.H=f||{},y&&b!==void 0&&(this.H.OSID=y,this.H.OAID=b),this.F=this.X,this.I=zh(this,null,this.W),el(this)};function Bo(c){if(Vh(c),c.G==3){var f=c.U++,y=rr(c.I);if(qe(y,"SID",c.K),qe(y,"RID",f),qe(y,"TYPE","terminate"),yi(c,y),f=new Rt(c,c.j,f),f.L=2,f.v=As(rr(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=f.v,y=!0),y||(f.g=qh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Cs(f)}Bh(c)}function zo(c){c.g&&(tl(c),c.g.cancel(),c.g=null)}function Vh(c){zo(c),c.u&&(a.clearTimeout(c.u),c.u=null),Tr(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function el(c){if(!Tc(c.h)&&!c.s){c.s=!0;var f=c.Ga;Ye||B(),X||(Ye(),X=!0),he.add(f,c),c.B=0}}function jh(c,f){return Ic(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Mi(m(c.Ga,c,f),$h(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new Rt(this,this.j,c);let q=this.o;if(this.S&&(q?(q=C(q),O(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var b=this.i[y];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Fh(this,U,f),y=rr(this.I),qe(y,"RID",c),qe(y,"CVER",22),this.D&&qe(y,"X-HTTP-Session-Id",this.D),yi(this,y),q&&(this.O?f="headers="+encodeURIComponent(String(Ja(q)))+"&"+f:this.m&&Uo(y,this.m,q)),Ka(this.h,U),this.Ua&&qe(y,"TYPE","init"),this.P?(qe(y,"$req",f),qe(y,"SID","null"),U.T=!0,pi(U,y,null)):pi(U,y,f),this.G=2}}else this.G==3&&(c?Nc(this,c):this.i.length==0||Tc(this.h)||Nc(this))};function Nc(c,f){var y;f?y=f.l:y=c.U++;const b=rr(c.I);qe(b,"SID",c.K),qe(b,"RID",y),qe(b,"AID",c.T),yi(c,b),c.m&&c.o&&Uo(b,c.m,c.o),y=new Rt(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Fh(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ka(c.h,y),pi(y,b,f)}function yi(c,f){c.H&&W(c.H,function(y,b){qe(f,b,y)}),c.l&&yn({},function(y,b){qe(f,b,y)})}function Fh(c,f,y){y=Math.min(c.i.length,y);var b=c.l?m(c.l.Na,c.l,c):null;e:{var U=c.i;let q=-1;for(;;){const J=["count="+y];q==-1?0<y?(q=U[0].g,J.push("ofs="+q)):q=0:J.push("ofs="+q);let Je=!0;for(let Gt=0;Gt<y;Gt++){let je=U[Gt].g;const lt=U[Gt].map;if(je-=q,0>je)q=Math.max(0,U[Gt].g-100),Je=!1;else try{Ya(lt,J,"req"+je+"_")}catch{b&&b(lt)}}if(Je){b=J.join("&");break e}}}return c=c.i.splice(0,y),f.D=c,b}function Uh(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Ye||B(),X||(Ye(),X=!0),he.add(f,c),c.v=0}}function qo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Mi(m(c.Fa,c),$h(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Lc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Mi(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kt(10),zo(this),Lc(this))};function tl(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Lc(c){c.g=new Rt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=rr(c.qa);qe(f,"RID","rpc"),qe(f,"SID",c.K),qe(f,"AID",c.T),qe(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&qe(f,"TO",c.ja),qe(f,"TYPE","xmlhttp"),yi(c,f),c.m&&c.o&&Uo(f,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=As(rr(f)),y.m=null,y.P=!0,gi(y,c)}t.Za=function(){this.C!=null&&(this.C=null,zo(this),qo(this),Kt(19))};function Tr(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nl(c,f){var y=null;if(c.g==f){Tr(c),tl(c),c.g=null;var b=2}else if(Wa(c.h,f))y=f.D,Sc(c.h,f),b=1;else return;if(c.G!=0){if(f.o)if(b==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var U=c.B;b=Is(),ot(b,new za(b,y)),el(c)}else Uh(c);else if(U=f.s,U==3||U==0&&0<f.X||!(b==1&&jh(c,f)||b==2&&qo(c)))switch(y&&0<y.length&&(f=c.h,f.i=f.i.concat(y)),U){case 1:_i(c,5);break;case 4:_i(c,10);break;case 3:_i(c,6);break;default:_i(c,2)}}}function $h(c,f){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*f}function _i(c,f){if(c.j.info("Error code "+f),f==2){var y=m(c.fb,c),b=c.Xa;const U=!b;b=new Kr(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Pn(b,"https"),As(b),U?Rs(b.toString(),y):Xp(b.toString(),y)}else Kt(2);c.G=0,c.l&&c.l.sa(f),Bh(c),Vh(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Bh(c){if(c.G=0,c.ka=[],c.l){const f=bc(c.h);(f.length!=0||c.i.length!=0)&&(R(c.ka,f),R(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function zh(c,f,y){var b=y instanceof Kr?rr(y):new Kr(y);if(b.g!="")f&&(b.g=f+"."+b.g),_r(b,b.s);else{var U=a.location;b=U.protocol,f=f?f+"."+U.hostname:U.hostname,U=+U.port;var q=new Kr(null);b&&Pn(q,b),f&&(q.g=f),U&&_r(q,U),y&&(q.l=y),b=q}return y=c.D,f=c.ya,y&&f&&qe(b,y,f),qe(b,"VER",c.la),yi(c,b),b}function qh(c,f,y){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new ft(new Ds({eb:y})):new ft(c.pa),f.Ha(c.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hh(){}t=Hh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ho(){}Ho.prototype.g=function(c,f){return new _n(c,f)};function _n(c,f){He.call(this),this.g=new Oc(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!T(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Wn(this)}E(_n,He),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Bo(this.g)},_n.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=hi(c),c=y);f.i.push(new Rh(f.Ya++,c)),f.G==3&&el(f)},_n.prototype.N=function(){this.g.l=null,delete this.j,Bo(this.g),delete this.g,_n.aa.N.call(this)};function Wh(c){Es.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const y in f){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}E(Wh,Es);function $i(){Mo.call(this),this.status=1}E($i,Mo);function Wn(c){this.g=c}E(Wn,Hh),Wn.prototype.ua=function(){ot(this.g,"a")},Wn.prototype.ta=function(c){ot(this.g,new Wh(c))},Wn.prototype.sa=function(c){ot(this.g,new $i)},Wn.prototype.ra=function(){ot(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,rC=function(){return new Ho},nC=function(){return Is()},tC=Hr,pv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,Kd=Ss,Ph.COMPLETE="complete",eC=Ph,qr.EventType=di,di.OPEN="a",di.CLOSE="b",di.ERROR="c",di.MESSAGE="d",He.prototype.listen=He.prototype.K,lu=qr,ft.prototype.listenOnce=ft.prototype.L,ft.prototype.getLastError=ft.prototype.Ka,ft.prototype.getLastErrorCode=ft.prototype.Ba,ft.prototype.getStatus=ft.prototype.Z,ft.prototype.getResponseJson=ft.prototype.Oa,ft.prototype.getResponseText=ft.prototype.oa,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Ha,Zb=ft}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const BE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new Ep("@firebase/firestore");function dl(){return Sa.logLevel}function Q(t,...e){if(Sa.logLevel<=Oe.DEBUG){const n=e.map(i_);Sa.debug(`Firestore (${mc}): ${t}`,...n)}}function Ln(t,...e){if(Sa.logLevel<=Oe.ERROR){const n=e.map(i_);Sa.error(`Firestore (${mc}): ${t}`,...n)}}function Xl(t,...e){if(Sa.logLevel<=Oe.WARN){const n=e.map(i_);Sa.warn(`Firestore (${mc}): ${t}`,...n)}}function i_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: `+t;throw Ln(e),new Error(e)}function le(t,e){t||ae()}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nn.UNAUTHENTICATED))}shutdown(){}}class zM{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new rs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new $M(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Nn(e)}}class qM{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class HM{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new WM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Te(t,e){return t<e?-1:t>e?1:0}function Jl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function sC(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new xt(0,0))}static max(){return new de(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return eh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof eh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class nt extends eh{construct(e,n,r){return new nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const QM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends eh{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return QM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(nt.fromString(e))}static fromName(e){return new te(nt.fromString(e).popFirst(5))}static empty(){return new te(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function gv(t){return t.fields.find(e=>e.kind===2)}function na(t){return t.fields.filter(e=>e.kind!==2)}Uf.UNKNOWN_ID=-1;class Gd{constructor(e,n){this.fieldPath=e,this.kind=n}}class th{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new th(0,pr.min())}}function YM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new pr(i,te.empty(),e)}function oC(t){return new pr(t.readTime,t.key,-1)}class pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pr(de.min(),te.empty(),-1)}static max(){return new pr(de.max(),te.empty(),-1)}}function s_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Te(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==aC)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{static open(e,n,r,i){try{return new bp(n,e.transaction(i,r))}catch(s){throw new bu(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new rs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new bu(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=o_(r.target.error);this.V.reject(new bu(e,i))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new JM(n)}}class go{static delete(e){return Q("SimpleDb","Removing database:",e),ra(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!Hy())return!1;if(go.S())return!0;const e=Zt(),n=go.D(e),r=0<n&&n<10,i=cC(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.F=r,go.D(Zt())===12.2&&Ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new bu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ne(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new bu(e,o))},i.onupgradeneeded=s=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.F.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=bp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),$.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(Q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function cC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class XM{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ra(this.B.delete())}}class bu extends ne{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ro(t){return t.name==="IndexedDbTransactionError"}class JM{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ra(r)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),ra(this.store.add(e))}get(e){return ra(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),ra(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),ra(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new $((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new $((r,i)=>{n.onerror=s=>{const o=o_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new XM(a),u=n(a.primaryKey,a.value,l);if(u instanceof $){const d=u.catch(p=>(l.done(),$.reject(p)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ra(t){return new $((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=o_(r.target.error);n(i)}})}let zE=!1;function o_(t){const e=go.D(Zt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zE||(zE=!0,setTimeout(()=>{throw r},0)),r}}return t}class ZM{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Ro(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await ja(n)}await this.X(6e4)})}}class eV{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return $.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=oC(s);s_(o,r)>0&&(r=o)}),new pr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Lr.oe=-1;function Cp(t){return t==null}function nh(t){return t===0&&1/t==-1/0}function tV(t){return typeof t=="number"&&Number.isInteger(t)&&!nh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qE(e)),e=nV(t.get(n),e);return qE(e)}function nV(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function qE(t){return t+""}function Ai(t){const e=t.length;if(le(e>=2),e===2)return le(t.charAt(0)===""&&t.charAt(1)===""),nt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ae(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ae()}s=o+2}return new nt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e){return[t,Cn(e)]}function uC(t,e,n){return[t,Cn(e),n]}const rV={},iV=["prefixPath","collectionGroup","readTime","documentId"],sV=["prefixPath","collectionGroup","documentId"],oV=["collectionGroup","readTime","prefixPath","documentId"],aV=["canonicalId","targetId"],lV=["targetId","path"],cV=["path","targetId"],uV=["collectionId","parent"],hV=["indexId","uid"],dV=["uid","sequenceNumber"],fV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pV=["indexId","uid","orderedDocumentKey"],gV=["userId","collectionPath","documentId"],mV=["userId","collectionPath","largestBatchId"],vV=["userId","collectionGroup","largestBatchId"],hC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yV=[...hC,"documentOverlays"],dC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fC=dC,a_=[...fC,"indexConfiguration","indexState","indexEntries"],_V=a_,wV=[...a_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends lC{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function en(t,e){const n=_e(t);return go.C(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ed(this.root,e,this.comparator,!0)}}class Ed{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hn.RED,this.left=i??hn.EMPTY,this.right=s??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KE(this.data.getIterator())}getIteratorFrom(e){return new KE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof it)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new it(this.comparator);return n.data=e,n}}class KE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function al(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new lr([])}unionWith(e){let n=new it(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new lr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gC("Invalid base64 string: "+s):s}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const EV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(t){if(le(!!t),typeof t=="string"){let e=0;const n=EV.exec(t);if(le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?Ht.fromBase64String(t):Ht.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ap(t){const e=t.mapValue.fields.__previous_value__;return l_(e)?Ap(e):e}function rh(t){const e=us(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Yd={nullValue:"NULL_VALUE"};function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?l_(t)?4:mC(t)?9007199254740991:xp(t)?10:11:ae()}function Oi(t,e){if(t===e)return!0;const n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rh(t).isEqual(rh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=us(i.timestampValue),a=us(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return hs(i.bytesValue).isEqual(hs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?nh(o)===nh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(WE(o)!==WE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Oi(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function ih(t,e){return(t.values||[]).find(n=>Oi(n,e))!==void 0}function Eo(t,e){if(t===e)return 0;const n=wo(t),r=wo(e);if(n!==r)return Te(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Te(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Et(s.integerValue||s.doubleValue),l=Et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return GE(t.timestampValue,e.timestampValue);case 4:return GE(rh(t),rh(e));case 5:return Te(t.stringValue,e.stringValue);case 6:return function(s,o){const a=hs(s),l=hs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Te(a[u],l[u]);if(d!==0)return d}return Te(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Te(Et(s.latitude),Et(o.latitude));return a!==0?a:Te(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return QE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const p=s.fields||{},m=o.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=Te(((u=w==null?void 0:w.values)===null||u===void 0?void 0:u.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:QE(w,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===no.mapValue&&o===no.mapValue)return 0;if(s===no.mapValue)return 1;if(o===no.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Te(l[p],d[p]);if(m!==0)return m;const w=Eo(a[l[p]],u[d[p]]);if(w!==0)return w}return Te(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ae()}}function GE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Te(t,e);const n=us(t),r=us(e),i=Te(n.seconds,r.seconds);return i!==0?i:Te(n.nanos,r.nanos)}function QE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Eo(n[i],r[i]);if(s)return s}return Te(n.length,r.length)}function Zl(t){return vv(t)}function vv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vv(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function Xd(t){switch(wo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ap(t);return e?16+Xd(e):16;case 5:return 2*t.stringValue.length;case 6:return hs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Xd(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Do(r.fields,(s,o)=>{i+=s.length+Xd(o)}),i}(t.mapValue);default:throw ae()}}function c_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yv(t){return!!t&&"integerValue"in t}function sh(t){return!!t&&"arrayValue"in t}function YE(t){return!!t&&"nullValue"in t}function XE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jd(t){return!!t&&"mapValue"in t}function xp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Cu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const vC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function IV(t){return"nullValue"in t?Yd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?c_(ba.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?xp(t)?vC:{mapValue:{}}:ae()}function SV(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?c_(ba.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?vC:"mapValue"in t?xp(t)?{mapValue:{}}:no:ae()}function JE(t,e){const n=Eo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ZE(t,e){const n=Eo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Cu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Jd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Jd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mn(Cu(this.value))}}function yC(t){const e=[];return Do(t.fields,(n,r)=>{const i=new Ct([n]);if(Jd(r)){const s=yC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nt(e,0,de.min(),de.min(),de.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,de.min(),de.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,de.min(),de.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n){this.position=e,this.inclusive=n}}function e1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=Eo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function t1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,n="asc"){this.field=e,this.dir=n}}function bV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{}class Le extends _C{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CV(e,n,r):n==="array-contains"?new PV(e,r):n==="in"?new bC(e,r):n==="not-in"?new kV(e,r):n==="array-contains-any"?new RV(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AV(e,r):new xV(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Eo(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ht extends _C{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ht(e,n)}matches(e){return tc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tc(t){return t.op==="and"}function _v(t){return t.op==="or"}function u_(t){return wC(t)&&tc(t)}function wC(t){for(const e of t.filters)if(e instanceof ht)return!1;return!0}function wv(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Zl(t.value);if(u_(t))return t.filters.map(e=>wv(e)).join(",");{const e=t.filters.map(n=>wv(n)).join(",");return`${t.op}(${e})`}}function EC(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&Oi(r.value,i.value)}(t,e):t instanceof ht?function(r,i){return i instanceof ht&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&EC(o,i.filters[a]),!0):!1}(t,e):void ae()}function TC(t,e){const n=t.filters.concat(e);return ht.create(n,t.op)}function IC(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`}(t):t instanceof ht?function(n){return n.op.toString()+" {"+n.getFilters().map(IC).join(" ,")+"}"}(t):"Filter"}class CV extends Le{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class AV extends Le{constructor(e,n){super(e,"in",n),this.keys=SC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xV extends Le{constructor(e,n){super(e,"not-in",n),this.keys=SC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class PV extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sh(n)&&ih(n.arrayValue,this.value)}}class bC extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ih(this.value.arrayValue,n)}}class kV extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ih(this.value.arrayValue,n)}}class RV extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ih(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ev(t,e=null,n=[],r=[],i=null,s=null,o=null){return new DV(t,e,n,r,i,s,o)}function Ca(t){const e=_e(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zl(r)).join(",")),e.ue=n}return e.ue}function _h(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bV(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t1(t.startAt,e.startAt)&&t1(t.endAt,e.endAt)}function Bf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function zf(t,e){return t.filters.filter(n=>n instanceof Le&&n.field.isEqual(e))}function n1(t,e,n){let r=Yd,i=!0;for(const s of zf(t,e)){let o=Yd,a=!0;switch(s.op){case"<":case"<=":o=IV(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Yd}JE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];JE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function r1(t,e,n){let r=no,i=!0;for(const s of zf(t,e)){let o=no,a=!0;switch(s.op){case">=":case">":o=SV(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=no}ZE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];ZE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OV(t,e,n,r,i,s,o,a){return new Pp(t,e,n,r,i,s,o,a)}function wh(t){return new Pp(t)}function i1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NV(t){return t.collectionGroup!==null}function Au(t){const e=_e(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new it(Ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new $f(s,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new $f(Ct.keyField(),r))}return e.ce}function jr(t){const e=_e(t);return e.le||(e.le=LV(e,Au(t))),e.le}function LV(t,e){if(t.limitType==="F")return Ev(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $f(i.field,s)});const n=t.endAt?new ec(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ec(t.startAt.position,t.startAt.inclusive):null;return Ev(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Tv(t,e,n){return new Pp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kp(t,e){return _h(jr(t),jr(e))&&t.limitType===e.limitType}function CC(t){return`${Ca(jr(t))}|lt:${t.limitType}`}function fl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IC(i)).join(", ")}]`),Cp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zl(i)).join(",")),`Target(${r})`}(jr(t))}; limitType=${t.limitType})`}function Eh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Au(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=e1(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Au(r),i)||r.endAt&&!function(o,a,l){const u=e1(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Au(r),i))}(t,e)}function MV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function AC(t){return(e,n)=>{let r=!1;for(const i of Au(t)){const s=VV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VV(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Eo(l,u):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new It(te.comparator);function cr(){return jV}const xC=new It(te.comparator);function cu(...t){let e=xC;for(const n of t)e=e.insert(n.key,n);return e}function PC(t){let e=xC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xi(){return xu()}function kC(){return xu()}function xu(){return new ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const FV=new It(te.comparator),UV=new it(te.comparator);function Pe(...t){let e=UV;for(const n of t)e=e.add(n);return e}const $V=new it(Te);function BV(){return $V}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nh(e)?"-0":e}}function RC(t){return{integerValue:""+t}}function DC(t,e){return tV(e)?RC(e):h_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this._=void 0}}function zV(t,e,n){return t instanceof nc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&l_(s)&&(s=Ap(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof rc?NC(t,e):t instanceof ic?LC(t,e):function(i,s){const o=OC(i,s),a=s1(o)+s1(i.Pe);return yv(o)&&yv(i.Pe)?RC(a):h_(i.serializer,a)}(t,e)}function qV(t,e,n){return t instanceof rc?NC(t,e):t instanceof ic?LC(t,e):n}function OC(t,e){return t instanceof sc?function(r){return yv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class nc extends Rp{}class rc extends Rp{constructor(e){super(),this.elements=e}}function NC(t,e){const n=MC(e);for(const r of t.elements)n.some(i=>Oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class ic extends Rp{constructor(e){super(),this.elements=e}}function LC(t,e){let n=MC(e);for(const r of t.elements)n=n.filter(i=>!Oi(i,r));return{arrayValue:{values:n}}}class sc extends Rp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function s1(t){return Et(t.integerValue||t.doubleValue)}function MC(t){return sh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.field=e,this.transform=n}}function HV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rc&&i instanceof rc||r instanceof ic&&i instanceof ic?Jl(r.elements,i.elements,Oi):r instanceof sc&&i instanceof sc?Oi(r.Pe,i.Pe):r instanceof nc&&i instanceof nc}(t.transform,e.transform)}class WV{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dp{}function VC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new f_(t.key,Vn.none()):new vc(t.key,t.data,Vn.none());{const n=t.data,r=Mn.empty();let i=new it(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vs(t.key,r,new lr(i.toArray()),Vn.none())}}function KV(t,e,n){t instanceof vc?function(i,s,o){const a=i.value.clone(),l=a1(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vs?function(i,s,o){if(!Zd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=a1(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(jC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pu(t,e,n,r){return t instanceof vc?function(s,o,a,l){if(!Zd(s.precondition,o))return a;const u=s.value.clone(),d=l1(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof vs?function(s,o,a,l){if(!Zd(s.precondition,o))return a;const u=l1(s.fieldTransforms,l,o),d=o.data;return d.setAll(jC(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Zd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function GV(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OC(r.transform,i||null);s!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,s))}return n||null}function o1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jl(r,i,(s,o)=>HV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vc extends Dp{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vs extends Dp{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function jC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function a1(t,e,n){const r=new Map;le(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qV(o,a,n[i]))}return r}function l1(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,zV(s,o,e))}return r}class f_ extends Dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FC extends Dp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KV(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=kC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=VC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(n,r)=>o1(n,r))&&Jl(this.baseMutations,e.baseMutations,(n,r)=>o1(n,r))}}class g_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length);let i=function(){return FV}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new g_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,Fe;function YV(t){switch(t){default:return ae();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function UC(t){if(t===void 0)return Ln("GRPC error has no .code"),K.UNKNOWN;switch(t){case Bt.OK:return K.OK;case Bt.CANCELLED:return K.CANCELLED;case Bt.UNKNOWN:return K.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return K.INTERNAL;case Bt.UNAVAILABLE:return K.UNAVAILABLE;case Bt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Bt.NOT_FOUND:return K.NOT_FOUND;case Bt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Bt.ABORTED:return K.ABORTED;case Bt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Bt.DATA_LOSS:return K.DATA_LOSS;default:return ae()}}(Fe=Bt||(Bt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new pa([4294967295,4294967295],0);function c1(t){const e=XV().encode(t),n=new Jb;return n.update(e),new Uint8Array(n.digest())}function u1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new pa([n,r],0),new pa([i,s],0)]}class v_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uu(`Invalid padding: ${n}`);if(r<0)throw new uu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=pa.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(pa.fromNumber(r)));return i.compare(JV)===1&&(i=new pa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=c1(e),[r,i]=u1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new v_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=c1(e),[r,i]=u1(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Th.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Op(de.min(),i,new It(Te),cr(),Pe())}}class Th{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Th(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $C{constructor(e,n){this.targetId=e,this.me=n}}class BC{constructor(e,n,r=Ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class h1{constructor(){this.fe=0,this.ge=d1(),this.pe=Ht.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Th(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=d1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZV{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=Td(),this.Qe=Td(),this.Ke=new It(Te)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Bf(s))if(r===0){const o=new te(s.path);this.We(n,o,Nt.newNoDocument(o,de.min()))}else le(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=hs(r).toUint8Array()}catch(l){if(l instanceof gC)return Xl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new v_(o,i,s)}catch(l){return Xl(l instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Bf(a.target)){const l=new te(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Nt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Pe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Op(e,n,this.Ke,this.ke,r);return this.ke=cr(),this.qe=Td(),this.Qe=Td(),this.Ke=new It(Te),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new h1,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new it(Te),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new it(Te),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new h1),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Td(){return new It(te.comparator)}function d1(){return new It(te.comparator)}const e5={asc:"ASCENDING",desc:"DESCENDING"},t5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n5={and:"AND",or:"OR"};class r5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Iv(t,e){return t.useProto3Json||Cp(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i5(t,e){return oc(t,e.toTimestamp())}function Fn(t){return le(!!t),de.fromTimestamp(function(n){const r=us(n);return new xt(r.seconds,r.nanos)}(t))}function y_(t,e){return Sv(t,e).canonicalString()}function Sv(t,e){const n=function(i){return new nt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qC(t){const e=nt.fromString(t);return le(ZC(e)),e}function qf(t,e){return y_(t.databaseId,e.path)}function ga(t,e){const n=qC(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(KC(n))}function HC(t,e){return y_(t.databaseId,e)}function WC(t){const e=qC(t);return e.length===4?nt.emptyPath():KC(e)}function bv(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function KC(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function f1(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function s5(t,e,n){const r=ga(t,e.name),i=Fn(e.updateTime),s=e.createTime?Fn(e.createTime):de.min(),o=new Mn({mapValue:{fields:e.fields}}),a=Nt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function o5(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(le(d===void 0||typeof d=="string"),Ht.fromBase64String(d||"")):(le(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ht.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?K.UNKNOWN:UC(u.code);return new ne(d,u.message||"")}(o);n=new BC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ga(t,r.document.name),s=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):de.min(),a=new Mn({mapValue:{fields:r.document.fields}}),l=Nt.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new ef(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ga(t,r.document),s=r.readTime?Fn(r.readTime):de.min(),o=Nt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ef([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ga(t,r.document),s=r.removedTargetIds||[];n=new ef([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QV(i,s),a=r.targetId;n=new $C(a,o)}}return n}function Hf(t,e){let n;if(e instanceof vc)n={update:f1(t,e.key,e.value)};else if(e instanceof f_)n={delete:qf(t,e.key)};else if(e instanceof vs)n={update:f1(t,e.key,e.data),updateMask:d5(e.fieldMask)};else{if(!(e instanceof FC))return ae();n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof nc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ic)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:i5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function Cv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Vn.updateTime(Fn(s.updateTime)):s.exists!==void 0?Vn.exists(s.exists):Vn.none()}(e.currentDocument):Vn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)le(a.setToServerValue==="REQUEST_TIME"),l=new nc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new rc(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new ic(d)}else"increment"in a?l=new sc(o,a.increment):ae();const u=Ct.fromServerFormat(a.fieldPath);return new d_(u,l)}(t,i)):[];if(e.update){e.update.name;const i=ga(t,e.update.name),s=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new lr(u.map(d=>Ct.fromServerFormat(d)))}(e.updateMask);return new vs(i,s,o,n,r)}return new vc(i,s,n,r)}if(e.delete){const i=ga(t,e.delete);return new f_(i,n)}if(e.verify){const i=ga(t,e.verify);return new FC(i,n)}return ae()}function a5(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Fn(i.updateTime):Fn(s);return o.isEqual(de.min())&&(o=Fn(s)),new WV(o,i.transformResults||[])}(n,e))):[]}function GC(t,e){return{documents:[HC(t,e.path)]}}function QC(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HC(t,i);const s=function(u){if(u.length!==0)return JC(ht.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:pl(m.field),direction:c5(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Iv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:n,parent:i}}function YC(t){let e=WC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){le(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const m=XC(p);return m instanceof ht&&u_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(E){return new $f(gl(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Cp(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,w=p.values||[];return new ec(w,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,w=p.values||[];return new ec(w,m)}(n.endAt)),OV(e,i,o,s,a,"F",l,u)}function l5(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gl(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gl(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gl(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gl(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(gl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ht.create(n.compositeFilter.filters.map(r=>XC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function c5(t){return e5[t]}function u5(t){return t5[t]}function h5(t){return n5[t]}function pl(t){return{fieldPath:t.canonicalString()}}function gl(t){return Ct.fromServerFormat(t.fieldPath)}function JC(t){return t instanceof Le?function(n){if(n.op==="=="){if(XE(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NAN"}};if(YE(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XE(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NOT_NAN"}};if(YE(n.value))return{unaryFilter:{field:pl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(n.field),op:u5(n.op),value:n.value}}}(t):t instanceof ht?function(n){const r=n.getFilters().map(i=>JC(i));return r.length===1?r[0]:{compositeFilter:{op:h5(n.op),filters:r}}}(t):ae()}function d5(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,n,r,i,s=de.min(),o=de.min(),a=Ht.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.ht=e}}function f5(t,e){let n;if(e.document)n=s5(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),i=xa(e.noDocument.readTime);n=Nt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{const r=te.fromSegments(e.unknownDocument.path),i=xa(e.unknownDocument.version);n=Nt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new xt(i[0],i[1]);return de.fromTimestamp(s)}(e.readTime)),n}function p1(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Wf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:qf(s,o.key),fields:o.data.value.mapValue.fields,updateTime:oc(s,o.version.toTimestamp()),createTime:oc(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Aa(e.version)};else{if(!e.isUnknownDocument())return ae();r.unknownDocument={path:n.path.toArray(),version:Aa(e.version)}}return r}function Wf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Aa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xa(t){const e=new xt(t.seconds,t.nanoseconds);return de.fromTimestamp(e)}function ia(t,e){const n=(e.baseMutations||[]).map(s=>Cv(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Cv(t.ht,s)),i=xt.fromMillis(e.localWriteTimeMs);return new p_(e.batchId,i,n,r)}function hu(t){const e=xa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?xa(t.lastLimboFreeSnapshotVersion):de.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return le(s.documents.length===1),jr(wh(WC(s.documents[0])))}(t.query):function(s){return jr(YC(s))}(t.query),new es(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ht.fromBase64String(t.resumeToken))}function tA(t,e){const n=Aa(e.snapshotVersion),r=Aa(e.lastLimboFreeSnapshotVersion);let i;i=Bf(e.target)?GC(t.ht,e.target):QC(t.ht,e.target).ct;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ca(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nA(t){const e=YC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tv(e,e.limit,"L"):e}function Hg(t,e){return new m_(e.largestBatchId,Cv(t.ht,e.overlayMutation))}function g1(t,e){const n=e.path.lastSegment();return[t,Cn(e.path.popLast()),n]}function m1(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Aa(r.readTime),documentKey:Cn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{getBundleMetadata(e,n){return v1(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:xa(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return v1(e).put(function(i){return{bundleId:i.id,createTime:Aa(Fn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return y1(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:nA(s.bundledQuery),readTime:xa(s.readTime)}}(r)})}saveNamedQuery(e,n){return y1(e).put(function(i){return{name:i.name,readTime:Aa(Fn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function v1(t){return en(t,"bundles")}function y1(t){return en(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new Np(e,r)}getOverlay(e,n){return Gc(e).get(g1(this.userId,n)).next(r=>r?Hg(this.serializer,r):null)}getOverlays(e,n){const r=xi();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new m_(n,o);i.push(this.Tt(e,a))}),$.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(Cn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Gc(e).j("collectionPathOverlayIndex",a))}),$.waitFor(s)}getOverlaysForCollection(e,n,r){const i=xi(),s=Cn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gc(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Hg(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=xi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Gc(e).J({index:"collectionGroupOverlayIndex",range:a},(l,u,d)=>{const p=Hg(this.serializer,u);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):d.done()}).next(()=>s)}Tt(e,n){return Gc(e).put(function(i,s,o){const[a,l,u]=g1(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Hf(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function Gc(t){return en(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{It(e){return en(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Ht.fromUint8Array(r):Ht.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.It(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){}Et(e,n){this.dt(e,n),n.At()}dt(e,n){if("nullValue"in e)this.Rt(n,5);else if("booleanValue"in e)this.Rt(n,10),n.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(n,15),n.Vt(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.Rt(n,13):(this.Rt(n,15),nh(r)?n.Vt(0):n.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(n,20),typeof r=="string"&&(r=us(r)),n.ft(`${r.seconds||""}`),n.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,n),this.yt(n);else if("bytesValue"in e)this.Rt(n,30),n.wt(hs(e.bytesValue)),this.yt(n);else if("referenceValue"in e)this.St(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(n,45),n.Vt(r.latitude||0),n.Vt(r.longitude||0)}else"mapValue"in e?mC(e)?this.Rt(n,Number.MAX_SAFE_INTEGER):xp(e)?this.bt(e.mapValue,n):(this.Dt(e.mapValue,n),this.yt(n)):"arrayValue"in e?(this.vt(e.arrayValue,n),this.yt(n)):ae()}gt(e,n){this.Rt(n,25),this.Ct(e,n)}Ct(e,n){n.ft(e)}Dt(e,n){const r=e.fields||{};this.Rt(n,55);for(const i of Object.keys(r))this.gt(i,n),this.dt(r[i],n)}bt(e,n){var r,i;const s=e.fields||{};this.Rt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(n,15),n.Vt(Et(a)),this.gt(o,n),this.dt(s[o],n)}vt(e,n){const r=e.values||[];this.Rt(n,50);for(const i of r)this.dt(i,n)}St(e,n){this.Rt(n,37),te.fromName(e).path.forEach(r=>{this.Rt(n,60),this.Ct(r,n)})}Rt(e,n){e.Vt(n)}yt(e){e.Vt(2)}}sa.Ft=new sa;function m5(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function _1(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=m5(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class v5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.xt(r.value),r=n.next();this.Ot()}Nt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Lt(r.value),r=n.next();this.Bt()}kt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=n.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}qt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Lt(r);else if(r<2048)this.Lt(960|r>>>6),this.Lt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Lt(480|r>>>12),this.Lt(128|63&r>>>6),this.Lt(128|63&r);else{const i=n.codePointAt(0);this.Lt(240|i>>>18),this.Lt(128|63&i>>>12),this.Lt(128|63&i>>>6),this.Lt(128|63&i)}}this.Bt()}Qt(e){const n=this.Kt(e),r=_1(n);this.$t(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Ut(e){const n=this.Kt(e),r=_1(n);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}xt(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(n)}Lt(e){const n=255&e;n===0?(this.jt(0),this.jt(255)):n===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class y5{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class _5{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Qc{constructor(){this.Jt=new v5,this.Yt=new y5(this.Jt),this.Zt=new _5(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}en(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new oa(this.indexId,this.documentKey,this.arrayValue,r)}}function Fs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=w1(t.arrayValue,e.arrayValue),n!==0?n:(n=w1(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function w1(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.tn=new it((n,r)=>Ct.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(le(e.collectionGroup===this.collectionId),this.sn)return!1;const n=gv(e);if(n!==void 0&&!this._n(n))return!1;const r=na(e);let i=new Set,s=0,o=0;for(;s<r.length&&this._n(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn.size>0){const a=this.tn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.an(a,l)||!this.un(this.nn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.nn.length||!this.un(this.nn[o++],a))return!1}return!0}cn(){if(this.sn)return null;let e=new it(Ct.comparator);const n=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Gd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Gd(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Gd(r.field,r.dir==="asc"?0:1)));return new Uf(Uf.UNKNOWN_ID,this.collectionId,n,th.empty())}_n(e){for(const n of this.rn)if(this.an(n,e))return!0;return!1}an(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}un(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){var e,n;if(le(t instanceof Le||t instanceof ht),t instanceof Le){if(t instanceof bC){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Le.create(t.field,"==",s)))||[];return ht.create(i,"or")}return t}const r=t.filters.map(i=>rA(i));return ht.create(r,t.op)}function w5(t){if(t.getFilters().length===0)return[];const e=Pv(rA(t));return le(iA(e)),Av(e)||xv(e)?[e]:e.getFilters()}function Av(t){return t instanceof Le}function xv(t){return t instanceof ht&&u_(t)}function iA(t){return Av(t)||xv(t)||function(n){if(n instanceof ht&&_v(n)){for(const r of n.getFilters())if(!Av(r)&&!xv(r))return!1;return!0}return!1}(t)}function Pv(t){if(le(t instanceof Le||t instanceof ht),t instanceof Le)return t;if(t.filters.length===1)return Pv(t.filters[0]);const e=t.filters.map(r=>Pv(r));let n=ht.create(e,t.op);return n=Kf(n),iA(n)?n:(le(n instanceof ht),le(tc(n)),le(n.filters.length>1),n.filters.reduce((r,i)=>__(r,i)))}function __(t,e){let n;return le(t instanceof Le||t instanceof ht),le(e instanceof Le||e instanceof ht),n=t instanceof Le?e instanceof Le?function(i,s){return ht.create([i,s],"and")}(t,e):T1(t,e):e instanceof Le?T1(e,t):function(i,s){if(le(i.filters.length>0&&s.filters.length>0),tc(i)&&tc(s))return TC(i,s.getFilters());const o=_v(i)?i:s,a=_v(i)?s:i,l=o.filters.map(u=>__(u,a));return ht.create(l,"or")}(t,e),Kf(n)}function T1(t,e){if(tc(e))return TC(e,t.getFilters());{const n=e.filters.map(r=>__(t,r));return ht.create(n,"or")}}function Kf(t){if(le(t instanceof Le||t instanceof ht),t instanceof Le)return t;const e=t.getFilters();if(e.length===1)return Kf(e[0]);if(wC(t))return t;const n=e.map(i=>Kf(i)),r=[];return n.forEach(i=>{i instanceof Le?r.push(i):i instanceof ht&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ht.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.ln=new w_}addToCollectionParentIndex(e,n){return this.ln.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(pr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class w_{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new it(nt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new Uint8Array(0);class T5{constructor(e,n){this.databaseId=n,this.hn=new w_,this.Pn=new ms(r=>Ca(r),(r,i)=>_h(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.hn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.hn.add(n)});const s={collectionId:r,parent:Cn(i)};return I1(e).put(s)}return $.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[sC(n),""],!1,!0);return I1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ai(o.parent))}return r})}addFieldIndex(e,n){const r=Yc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=cl(e);return s.next(a=>{o.put(m1(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Yc(e),i=cl(e),s=ll(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Yc(e),r=ll(e),i=cl(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return $.forEach(this.Tn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new E1(r).cn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=ll(e);let i=!0;const s=new Map;return $.forEach(this.Tn(n),o=>this.In(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Pe();const a=[];return $.forEach(s,(l,u)=>{Q("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(l)} to execute ${Ca(n)}`);const d=function(I,M){const z=gv(M);if(z===void 0)return null;for(const W of zf(I,z.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null}(u,l),p=function(I,M){const z=new Map;for(const W of na(M))for(const P of zf(I,W.fieldPath))switch(P.op){case"==":case"in":z.set(W.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return z.set(W.fieldPath.canonicalString(),P.value),Array.from(z.values())}return null}(u,l),m=function(I,M){const z=[];let W=!0;for(const P of na(M)){const C=P.kind===0?n1(I,P.fieldPath,I.startAt):r1(I,P.fieldPath,I.startAt);z.push(C.value),W&&(W=C.inclusive)}return new ec(z,W)}(u,l),w=function(I,M){const z=[];let W=!0;for(const P of na(M)){const C=P.kind===0?r1(I,P.fieldPath,I.endAt):n1(I,P.fieldPath,I.endAt);z.push(C.value),W&&(W=C.inclusive)}return new ec(z,W)}(u,l),E=this.En(l,u,m),x=this.En(l,u,w),R=this.dn(l,u,p),A=this.An(l.indexId,d,E,m.inclusive,x,w.inclusive,R);return $.forEach(A,T=>r.G(T,n.limit).next(I=>{I.forEach(M=>{const z=te.fromSegments(M.documentKey);o.has(z)||(o=o.add(z),a.push(z))})}))}).next(()=>a)}return $.resolve(null)})}Tn(e){let n=this.Pn.get(e);return n||(e.filters.length===0?n=[e]:n=w5(ht.create(e.filters,"and")).map(r=>Ev(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,n),n)}An(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),d=[];for(let p=0;p<l;++p){const m=n?this.Rn(n[p/u]):Id,w=this.Vn(e,m,r[p%u],i),E=this.mn(e,m,s[p%u],o),x=a.map(R=>this.Vn(e,m,R,!0));d.push(...this.createRange(w,E,x))}return d}Vn(e,n,r,i){const s=new oa(e,te.empty(),n,r);return i?s:s.en()}mn(e,n,r,i){const s=new oa(e,te.empty(),n,r);return i?s.en():s}In(e,n){const r=new E1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.on(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Tn(n);return $.forEach(i,s=>this.In(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new it(Ct.comparator),d=!1;for(const p of l.filters)for(const m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:u=u.add(m.field));for(const p of l.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}fn(e,n){const r=new Qc;for(const i of na(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Xt(i.kind);sa.Ft.Et(s,o)}return r.Ht()}Rn(e){const n=new Qc;return sa.Ft.Et(e,n.Xt(0)),n.Ht()}gn(e,n){const r=new Qc;return sa.Ft.Et(c_(this.databaseId,n),r.Xt(function(s){const o=na(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ht()}dn(e,n,r){if(r===null)return[];let i=[];i.push(new Qc);let s=0;for(const o of na(e)){const a=r[s++];for(const l of i)if(this.pn(n,o.fieldPath)&&sh(a))i=this.yn(i,o,a);else{const u=l.Xt(o.kind);sa.Ft.Et(a,u)}}return this.wn(i)}En(e,n,r){return this.dn(e,n,r.position)}wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ht();return n}yn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Qc;l.seed(a.Ht()),sa.Ft.Et(o,l.Xt(n.kind)),s.push(l)}return s}pn(e,n){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Yc(e),i=cl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return $.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,p){const m=p?new th(p.sequenceNumber,new pr(xa(p.readTime),new te(Ai(p.documentKey)),p.largestBatchId)):th.empty(),w=d.fields.map(([E,x])=>new Gd(Ct.fromServerFormat(E),x));return new Uf(d.indexId,d.collectionGroup,w,m)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Te(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Yc(e),s=cl(e);return this.Sn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>$.forEach(a,l=>s.put(m1(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),$.forEach(a,l=>this.bn(e,i,l).next(u=>{const d=this.Dn(s,l);return u.isEqual(d)?$.resolve():this.vn(e,s,l,u,d)}))))})}Cn(e,n,r,i){return ll(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Fn(e,n,r,i){return ll(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}bn(e,n,r){const i=ll(e);let s=new it(Fs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{s=s.add(new oa(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Dn(e,n){let r=new it(Fs);const i=this.fn(n,e);if(i==null)return r;const s=gv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(sh(o))for(const a of o.arrayValue.values||[])r=r.add(new oa(n.indexId,e.key,this.Rn(a),i))}else r=r.add(new oa(n.indexId,e.key,Id,i));return r}vn(e,n,r,i,s){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,d,p,m){const w=l.getIterator(),E=u.getIterator();let x=al(w),R=al(E);for(;x||R;){let A=!1,T=!1;if(x&&R){const I=d(x,R);I<0?T=!0:I>0&&(A=!0)}else x!=null?T=!0:A=!0;A?(p(R),R=al(E)):T?(m(x),x=al(w)):(x=al(w),R=al(E))}}(i,s,Fs,a=>{o.push(this.Cn(e,n,r,a))},a=>{o.push(this.Fn(e,n,r,a))}),$.waitFor(o)}Sn(e){let n=1;return cl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Fs(o,a)).filter((o,a,l)=>!a||Fs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Fs(o,e),l=Fs(o,n);if(a===0)i[0]=e.en();else if(a>0&&l<0)i.push(o),i.push(o.en());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Mn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Id,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Id,[]];s.push(IDBKeyRange.bound(a,l))}return s}Mn(e,n){return Fs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(S1)}getMinOffset(e,n){return $.mapArray(this.Tn(n),r=>this.In(e,r).next(i=>i||ae())).next(S1)}}function I1(t){return en(t,"collectionParents")}function ll(t){return en(t,"indexEntries")}function Yc(t){return en(t,"indexConfiguration")}function cl(t){return en(t,"indexState")}function S1(t){le(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;s_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,p,m)=>(a++,m.delete()));s.push(l.next(()=>{le(a===1)}));const u=[];for(const d of n.mutations){const p=uC(e,d.key.path,n.batchId);s.push(i.delete(p)),u.push(d.key)}return $.waitFor(s).next(()=>u)}function Gf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(41943040,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class Lp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.xn={}}static Pt(e,n,r,i){le(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Lp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ml(e),o=Us(e);return o.add({}).next(a=>{le(typeof a=="number");const l=new p_(a,n,r,i),u=function(w,E,x){const R=x.baseMutations.map(T=>Hf(w.ht,T)),A=x.mutations.map(T=>Hf(w.ht,T));return{userId:E,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:R,mutations:A}}(this.serializer,this.userId,l),d=[];let p=new it((m,w)=>Te(m.canonicalString(),w.canonicalString()));for(const m of i){const w=uC(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),d.push(o.put(u)),d.push(s.put(w,rV))}return p.forEach(m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.xn[a]=l.keys()}),$.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Us(e).get(n).next(r=>r?(le(r.userId===this.userId),ia(this.serializer,r)):null)}On(e,n){return this.xn[n]?$.resolve(this.xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Us(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(le(a.batchId>=r),s=ia(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Us(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).U("userMutationsIndex",n).next(r=>r.map(i=>ia(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Qd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ml(e).J({range:i},(o,a,l)=>{const[u,d,p]=o,m=Ai(d);if(u===this.userId&&n.path.isEqual(m))return Us(e).get(p).next(w=>{if(!w)throw ae();le(w.userId===this.userId),s.push(ia(this.serializer,w))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(Te);const i=[];return n.forEach(s=>{const o=Qd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ml(e).J({range:a},(u,d,p)=>{const[m,w,E]=u,x=Ai(w);m===this.userId&&s.path.isEqual(x)?r=r.add(E):p.done()});i.push(l)}),$.waitFor(i).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Qd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new it(Te);return ml(e).J({range:o},(l,u,d)=>{const[p,m,w]=l,E=Ai(m);p===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(w)):d.done()}).next(()=>this.Nn(e,a))}Nn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Us(e).get(s).next(o=>{if(o===null)throw ae();le(o.userId===this.userId),r.push(ia(this.serializer,o))}))}),$.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return sA(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Ln(n.batchId)}),$.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ml(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Ai(s[1]);i.push(l)}else a.done()}).next(()=>{le(i.length===0)})})}containsKey(e,n){return oA(e,this.userId,n)}Bn(e){return aA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oA(t,e,n){const r=Qd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ml(t).J({range:s,H:!0},(a,l,u)=>{const[d,p,m]=a;d===e&&p===i&&(o=!0),u.done()}).next(()=>o)}function Us(t){return en(t,"mutations")}function ml(t){return en(t,"documentMutations")}function aA(t){return en(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Pa(0)}static Qn(){return new Pa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Kn(e).next(n=>{const r=new Pa(n.highestTargetId);return n.highestTargetId=r.next(),this.$n(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(n=>de.fromTimestamp(new xt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.$n(e,i)))}addTargetData(e,n){return this.Un(e,n).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(n,r),this.$n(e,r))))}updateTargetData(e,n){return this.Un(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ul(e).delete(n.targetId)).next(()=>this.Kn(e)).next(r=>(le(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return ul(e).J((o,a)=>{const l=hu(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>$.waitFor(s)).next(()=>i)}forEachTarget(e,n){return ul(e).J((r,i)=>{const s=hu(i);n(s)})}Kn(e){return C1(e).get("targetGlobalKey").next(n=>(le(n!==null),n))}$n(e,n){return C1(e).put("targetGlobalKey",n)}Un(e,n){return ul(e).put(tA(this.serializer,n))}Wn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ca(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ul(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=hu(a);_h(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Xs(e);return n.forEach(o=>{const a=Cn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(i)}removeMatchingKeys(e,n,r){const i=Xs(e);return $.forEach(n,s=>{const o=Cn(s.path);return $.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Xs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Xs(e);let s=Pe();return i.J({range:r,H:!0},(o,a,l)=>{const u=Ai(o[1]),d=new te(u);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=Cn(n.path),i=IDBKeyRange.bound([r],[sC(r)],!1,!0);let s=0;return Xs(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ut(e,n){return ul(e).get(n).next(r=>r?hu(r):null)}}function ul(t){return en(t,"targets")}function C1(t){return en(t,"targetGlobal")}function Xs(t){return en(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1([t,e],[n,r]){const i=Te(t,n);return i===0?Te(e,r):i}class S5{constructor(e){this.Gn=e,this.buffer=new it(A1),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();A1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lA{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ro(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ja(n)}await this.Yn(3e5)})}}class b5{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Lr.oe);const r=new S5(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(b1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b1):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),dl()<=Oe.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function cA(t,e){return new b5(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,n){this.db=e,this.garbageCollector=cA(this,n)}Xn(e){const n=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}er(e,n){return this.rr(e,(r,i)=>n(i))}addReference(e,n,r){return Sd(e,r)}removeReference(e,n,r){return Sd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Sd(e,n)}ir(e,n){return function(i,s){let o=!1;return aA(i).Y(a=>oA(i,a,s).next(l=>(l&&(o=!0),$.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.rr(e,(o,a)=>{if(a<=n){const l=this.ir(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,de.min()),Xs(e).delete(function(p){return[0,Cn(p.path)]}(o))))});i.push(l)}}).next(()=>$.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Sd(e,n)}rr(e,n){const r=Xs(e);let i,s=Lr.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==Lr.oe&&n(new te(Ai(i)),s),s=u,i=l):s=Lr.oe}).next(()=>{s!==Lr.oe&&n(new te(Ai(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sd(t,e){return Xs(t).put(function(r,i){return{targetId:0,path:Cn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.changes=new ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Jo(e).put(r)}removeEntry(e,n,r){return Jo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Wf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.sr(e,r)))}getEntry(e,n){let r=Nt.newInvalidDocument(n);return Jo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xc(n))},(i,s)=>{r=this._r(n,s)}).next(()=>r)}ar(e,n){let r={size:0,document:Nt.newInvalidDocument(n)};return Jo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xc(n))},(i,s)=>{r={document:this._r(n,s),size:Gf(s)}}).next(()=>r)}getEntries(e,n){let r=cr();return this.ur(e,n,(i,s)=>{const o=this._r(i,s);r=r.insert(i,o)}).next(()=>r)}cr(e,n){let r=cr(),i=new It(te.comparator);return this.ur(e,n,(s,o)=>{const a=this._r(s,o);r=r.insert(s,a),i=i.insert(s,Gf(o))}).next(()=>({documents:r,lr:i}))}ur(e,n,r){if(n.isEmpty())return $.resolve();let i=new it(k1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Xc(i.first()),Xc(i.last())),o=i.getIterator();let a=o.getNext();return Jo(e).J({index:"documentKeyIndex",range:s},(l,u,d)=>{const p=te.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&k1(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Xc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Wf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Jo(e).U(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let d=cr();for(const p of u){const m=this._r(te.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Eh(n,m)||i.has(m.key))&&(d=d.insert(m.key,m))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=cr();const o=P1(n,r),a=P1(n,pr.max());return Jo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,d)=>{const p=this._r(te.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(p.key,p),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new x5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return x1(e).get("remoteDocumentGlobalKey").next(n=>(le(!!n),n))}sr(e,n){return x1(e).put("remoteDocumentGlobalKey",n)}_r(e,n){if(n){const r=f5(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(de.min())))return r}return Nt.newInvalidDocument(e)}}function hA(t){return new A5(t)}class x5 extends uA{constructor(e,n){super(),this.hr=e,this.trackRemovals=n,this.Pr=new ms(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new it((s,o)=>Te(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Pr.get(s);if(n.push(this.hr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=p1(this.hr.serializer,o);i=i.add(s.path.popLast());const u=Gf(l);r+=u-a.size,n.push(this.hr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=p1(this.hr.serializer,o.convertToNoDocument(de.min()));n.push(this.hr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.hr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.hr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.hr.ar(e,n).next(r=>(this.Pr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.hr.cr(e,n).next(({documents:r,lr:i})=>(i.forEach((s,o)=>{this.Pr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function x1(t){return en(t,"remoteDocumentGlobal")}function Jo(t){return en(t,"remoteDocumentsV14")}function Xc(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P1(t,e){const n=e.documentKey.path.toArray();return[t,Wf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function k1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Te(n[s],r[s]),i)return i;return i=Te(n.length,r.length),i||(i=Te(n[n.length-2],r[r.length-2]),i||Te(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pu(r.mutation,i,lr.empty(),xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const i=xi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=cu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=cr();const o=xu(),a=function(){return xu()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof vs)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Pu(d.mutation,u,d.mutation.getFieldMask(),xt.now())):o.set(u.key,lr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var p;return a.set(u,new P5(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=xu();let i=new It((o,a)=>o-a),s=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||lr.empty();d=a.applyToLocalView(u,d),r.set(l,d);const p=(i.get(a.batchId)||Pe()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,p=kC();d.forEach(m=>{if(!s.has(m)){const w=VC(n.get(m),r.get(m));w!==null&&p.set(m,w),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(xi());let a=-1,l=s;return o.next(u=>$.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?$.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Pe())).next(d=>({batchId:a,changes:PC(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=cu();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const u=function(p,m){return new Pp(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Nt.newInvalidDocument(d)))});let a=cu();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Pu(d.mutation,u,lr.empty(),xt.now()),Eh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return $.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:nA(i.bundledQuery),readTime:Fn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(){this.overlays=new It(te.comparator),this.Er=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xi();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=xi(),s=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new It((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=xi(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=xi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return $.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new m_(n,r));let s=this.Er.get(n);s===void 0&&(s=Pe(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.dr=new it(sn.Ar),this.Rr=new it(sn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new sn(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new sn(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new te(new nt([])),r=new sn(n,e),i=new sn(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new te(new nt([])),r=new sn(n,e),i=new sn(n,e+1);let s=Pe();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new sn(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class sn{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return te.comparator(e.key,n.key)||Te(e.br,n.br)}static Vr(e,n){return Te(e.br,n.br)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new it(sn.Ar)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new p_(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new sn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new sn(n,0),i=new sn(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new it(Te);return n.forEach(i=>{const s=new sn(i,0),o=new sn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),$.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new sn(new te(s),0);let a=new it(Te);return this.vr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.br)),!0)},o),$.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return $.forEach(n.mutations,i=>{const s=new sn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new sn(n,0),i=this.vr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e){this.Nr=e,this.docs=function(){return new It(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=cr();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||s_(oC(d),r)<=0||(i.has(d.key)||Eh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Lr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new L5(this)}getSize(e){return $.resolve(this.size)}}class L5 extends uA{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.persistence=e,this.Br=new ms(n=>Ca(n),_h),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.kr=0,this.qr=new E_,this.targetCount=0,this.Qr=Pa.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),$.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Pa(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Un(n),$.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Lr(0),this.Ur=!1,this.Ur=!0,this.Wr=new D5,this.referenceDelegate=e(this),this.Gr=new M5(this),this.indexManager=new E5,this.remoteDocumentCache=function(i){return new N5(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new eA(n),this.jr=new k5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new R5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new O5(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new V5(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return $.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class V5 extends lC{constructor(e){super(),this.currentSequenceNumber=e}}class Mp{constructor(e){this.persistence=e,this.Zr=new E_,this.Xr=null}static ei(e){return new Mp(e)}get ti(){if(this.Xr)return this.Xr;throw ae()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),$.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ti,r=>{const i=te.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return $.or([()=>$.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Qf{constructor(e,n){this.persistence=e,this.ri=new ms(r=>Cn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=cA(this,n)}static ei(e,n){return new Qf(e,n)}Hr(){}Jr(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return $.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),$.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xd(e.data.value)),n}ir(e,n,r){return $.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.serializer=e}O(e,n,r,i){const s=new bp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HE,{unique:!0}),l.createObjectStore("documentMutations")}(e),R1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),R1(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:de.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",HE,{unique:!0});const p=u.store("mutations"),m=d.map(w=>p.put(w));return $.waitFor(m)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ii(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.si(s)))),r<7&&i>=7&&(o=o.next(()=>this.oi(s))),r<8&&i>=8&&(o=o.next(()=>this._i(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ai(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:gV});u.createIndex("collectionPathOverlayIndex",mV,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",vV,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:iV});u.createIndex("documentKeyIndex",sV),u.createIndex("collectionGroupIndex",oV)}(e)).next(()=>this.ui(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ci(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:hV}).createIndex("sequenceNumberIndex",dV,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:fV}).createIndex("documentKeyIndex",pV,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}si(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=Gf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>$.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>$.forEach(a,l=>{le(l.userId===s.userId);const u=ia(this.serializer,l);return sA(e,s.userId,u).next(()=>{})}))}))}oi(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new nt(o),u=function(p){return[0,Cn(p)]}(l);s.push(n.get(u).next(d=>d?$.resolve():(p=>n.put({targetId:0,path:Cn(p),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>$.waitFor(s))})}_i(e,n){e.createObjectStore("collectionParents",{keyPath:uV});const r=n.store("collectionParents"),i=new w_,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Cn(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new nt(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],u)=>{const d=Ai(a);return s(d.popLast())}))}ai(e){const n=e.store("targets");return n.J((r,i)=>{const s=hu(i),o=tA(this.serializer,s);return n.put(o)})}ui(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(p){return p.document?new te(nt.fromString(p.document.name).popFirst(5)):p.noDocument?te.fromSegments(p.noDocument.path):p.unknownDocument?te.fromSegments(p.unknownDocument.path):ae()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>$.waitFor(i))}ci(e,n){const r=n.store("mutations"),i=hA(this.serializer),s=new T_(Mp.ei,this.serializer.ht);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var u;let d=(u=a.get(l.userId))!==null&&u!==void 0?u:Pe();ia(this.serializer,l).keys().forEach(p=>d=d.add(p)),a.set(l.userId,d)}),$.forEach(a,(l,u)=>{const d=new Nn(u),p=Np.Pt(this.serializer,d),m=s.getIndexManager(d),w=Lp.Pt(d,this.serializer,m,s.referenceDelegate);return new dA(i,w,p,m).recalculateAndSaveOverlaysForDocumentKeys(new mv(n,Lr.oe),l).next()})})}}function R1(t){t.createObjectStore("targetDocuments",{keyPath:lV}).createIndex("documentTargetsIndex",cV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aV,{unique:!0}),t.createObjectStore("targetGlobal")}const Wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class I_{constructor(e,n,r,i,s,o,a,l,u,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.li=s,this.window=o,this.document=a,this.hi=u,this.Pi=d,this.Ti=p,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=m=>Promise.resolve(),!I_.p())throw new ne(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new C5(this,i),this.Vi=n+"main",this.serializer=new eA(l),this.mi=new go(this.Vi,this.Ti,new j5(this.serializer)),this.Wr=new g5,this.Gr=new I5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hA(this.serializer),this.jr=new p5,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,d===!1&&Ln("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(K.FAILED_PRECONDITION,Wg);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Lr(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(n=>{n||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(n=>this.isPrimary&&!n?this.vi(e).next(()=>!1):!!n&&this.Ci(e).next(()=>!0))).catch(e=>{if(Ro(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Jc(e).get("owner").next(n=>$.resolve(this.Fi(n)))}Mi(e){return bd(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=en(n,"clientMetadata");return r.U().next(i=>{const s=this.Ni(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return $.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.fi)for(const n of e)this.fi.removeItem(this.Li(n.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?$.resolve(!0):Jc(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Bi(n.ownerId)){if(this.Fi(n)&&this.networkEnabled)return!0;if(!this.Fi(n)){if(!n.allowTabSynchronization)throw new ne(K.FAILED_PRECONDITION,Wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||bd(e).U().next(r=>this.Ni(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new mv(e,Lr.oe);return this.vi(n).next(()=>this.Mi(n))}),this.mi.close(),this.Ki()}Ni(e,n){return e.filter(r=>this.Oi(r.updateTimeMs,n)&&!this.Bi(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>bd(e).U().next(n=>this.Ni(n,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,n){return Lp.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new T5(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Np.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,n,r){Q("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?wV:l===16?_V:l===15?a_:l===14?fC:l===13?dC:l===12?yV:l===11?hC:void ae()}(this.Ti);let o;return this.mi.runTransaction(e,i,s,a=>(o=new mv(a,this.$r?this.$r.next():Lr.oe),n==="readwrite-primary"?this.bi(o).next(l=>!!l||this.Di(o)).next(l=>{if(!l)throw Ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new ne(K.FAILED_PRECONDITION,aC);return r(o)}).next(l=>this.Ci(o).next(()=>l)):this.Ui(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ui(e){return Jc(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Bi(n.ownerId)&&!this.Fi(n)&&!(this.Pi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(K.FAILED_PRECONDITION,Wg)})}Ci(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jc(e).put("owner",n)}static p(){return go.p()}vi(e){const n=Jc(e);return n.get("owner").next(r=>this.Fi(r)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Oi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ln(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const n=/(?:Version|Mobile)\/1[456]/;ob()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var n;try{const r=((n=this.fi)===null||n===void 0?void 0:n.getItem(this.Li(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ln("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(e){Ln("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jc(t){return en(t,"owner")}function bd(t){return en(t,"clientMetadata")}function F5(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=Pe(),i=Pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new S_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return ob()?8:cC(Zt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new U5;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(dl()<=Oe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",fl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),$.resolve()):(dl()<=Oe.DEBUG&&Q("QueryEngine","Query:",fl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(dl()<=Oe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",fl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(n))):$.resolve())}Xi(e,n){if(i1(n))return $.resolve(null);let r=jr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tv(n,null,"F"),r=jr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pe(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.rs(n,a);return this.ss(n,u,o,l.readTime)?this.Xi(e,Tv(n,null,"F")):this.os(e,u,n,l)}))})))}es(e,n,r,i){return i1(n)||i.isEqual(de.min())?$.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?$.resolve(null):(dl()<=Oe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fl(n)),this.os(e,o,n,YM(i,-1)).next(a=>a))})}rs(e,n){let r=new it(AC(e));return n.forEach((i,s)=>{Eh(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return dl()<=Oe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",fl(n)),this.Zi.getDocumentsMatchingQuery(e,n,pr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new It(Te),this.cs=new ms(s=>Ca(s),_h),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dA(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function pA(t,e,n,r){return new $5(t,e,n,r)}async function gA(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ts:u,removedBatchIds:o,addedBatchIds:a}))})})}function B5(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const p=u.batch,m=p.keys();let w=$.resolve();return m.forEach(E=>{w=w.next(()=>d.getEntry(l,E)).next(x=>{const R=u.docVersions.get(E);le(R!==null),x.version.compareTo(R)<0&&(p.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function mA(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function z5(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,p)=>{const m=i.get(p);if(!m)return;a.push(n.Gr.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Gr.addMatchingKeys(s,d.addedDocuments,p)));let w=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(Ht.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),i=i.insert(p,w),function(x,R,A){return x.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,w,d)&&a.push(n.Gr.updateTargetData(s,w))});let l=cr(),u=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(q5(s,o,e.documentUpdates).next(d=>{l=d.Is,u=d.Es})),!r.isEqual(de.min())){const d=n.Gr.getLastRemoteSnapshotVersion(s).next(p=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.us=i,s))}function q5(t,e,n){let r=Pe(),i=Pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=cr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Is:o,Es:i}})}function H5(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W5(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new es(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function kv(t,e,n){const r=_e(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ro(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function D1(t,e,n){const r=_e(t);let i=de.min(),s=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const p=_e(l),m=p.cs.get(d);return m!==void 0?$.resolve(p.us.get(m)):p.Gr.getTargetData(u,d)}(r,o,jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:Pe())).next(a=>(K5(r,MV(e),a),{documents:a,ds:s})))}function K5(t,e,n){let r=t.ls.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class O1{constructor(){this.activeTargetIds=BV()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vA{constructor(){this._o=new O1,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new O1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd=null;function Kg(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class X5 extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=Kg(),l=this.No(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(u,s,o),this.Bo(n,l,u,i).then(d=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Xl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=Q5[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=Kg();return new Promise((o,a)=>{const l=new Zb;l.setWithCredentials(!0),l.listenOnce(eC.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Kd.NO_ERROR:const d=l.getResponseJson();Q(Tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Kd.TIMEOUT:Q(Tn,`RPC '${e}' ${s} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const p=l.getStatus();if(Q(Tn,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const E=function(R){const A=R.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(A)>=0?A:K.UNKNOWN}(w.status);a(new ne(E,w.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Q(Tn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Q(Tn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}qo(e,n,r){const i=Kg(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rC(),a=nC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Q(Tn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,w=!1;const E=new Y5({Eo:R=>{w?Q(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(Q(Tn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),Q(Tn,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Ao:()=>p.close()}),x=(R,A,T)=>{R.listen(A,I=>{try{T(I)}catch(M){setTimeout(()=>{throw M},0)}})};return x(p,lu.EventType.OPEN,()=>{w||(Q(Tn,`RPC '${e}' stream ${i} transport opened.`),E.So())}),x(p,lu.EventType.CLOSE,()=>{w||(w=!0,Q(Tn,`RPC '${e}' stream ${i} transport closed`),E.Do())}),x(p,lu.EventType.ERROR,R=>{w||(w=!0,Xl(Tn,`RPC '${e}' stream ${i} transport errored:`,R),E.Do(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),x(p,lu.EventType.MESSAGE,R=>{var A;if(!w){const T=R.data[0];le(!!T);const I=T,M=(I==null?void 0:I.error)||((A=I[0])===null||A===void 0?void 0:A.error);if(M){Q(Tn,`RPC '${e}' stream ${i} received error:`,M);const z=M.status;let W=function(k){const O=Bt[k];if(O!==void 0)return UC(O)}(z),P=M.message;W===void 0&&(W=K.INTERNAL,P="Unknown error status: "+z+" with message "+M.message),w=!0,E.Do(new ne(W,P)),p.close()}else Q(Tn,`RPC '${e}' stream ${i} received:`,T),E.vo(T)}}),x(a,tC.STAT_EVENT,R=>{R.stat===pv.PROXY?Q(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===pv.NOPROXY&&Q(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.bo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(){return typeof window<"u"?window:null}function tf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t){return new r5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new yA(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Ln(n.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z5 extends _A{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=o5(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Fn(o.readTime):de.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=bv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Bf(l)?{documents:GC(s,l)}:{query:QC(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zC(s,o.resumeToken);const u=Iv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=oc(s,o.snapshotVersion.toTimestamp());const u=Iv(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=l5(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=bv(this.serializer),n.removeTarget=e,this.c_(n)}}class ej extends _A{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=a5(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=bv(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Hf(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Sv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(K.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Sv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class nj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ln(n),this.C_=!1):Q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Fa(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=_e(l);u.k_.add(4),await Ih(u),u.K_.set("Unknown"),u.k_.delete(4),await jp(u)}(this))})}),this.K_=new nj(r,i)}}async function jp(t){if(Fa(t))for(const e of t.q_)await e(!0)}async function Ih(t){for(const e of t.q_)await e(!1)}function wA(t,e){const n=_e(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),x_(n)?A_(n):yc(n).s_()&&C_(n,e))}function b_(t,e){const n=_e(t),r=yc(n);n.B_.delete(e),r.s_()&&EA(n,e),n.B_.size===0&&(r.s_()?r.a_():Fa(n)&&n.K_.set("Unknown"))}function C_(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}yc(t).V_(e)}function EA(t,e){t.U_.xe(e),yc(t).m_(e)}function A_(t){t.U_=new ZV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),yc(t).start(),t.K_.F_()}function x_(t){return Fa(t)&&!yc(t).i_()&&t.B_.size>0}function Fa(t){return _e(t).k_.size===0}function TA(t){t.U_=void 0}async function ij(t){t.K_.set("Online")}async function sj(t){t.B_.forEach((e,n)=>{C_(t,e)})}async function oj(t,e){TA(t),x_(t)?(t.K_.O_(e),A_(t)):t.K_.set("Unknown")}async function aj(t,e,n){if(t.K_.set("Online"),e instanceof BC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yf(t,r)}else if(e instanceof ef?t.U_.$e(e):e instanceof $C?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(de.min()))try{const r=await mA(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.B_.get(u);d&&s.B_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.B_.get(l);if(!d)return;s.B_.set(l,d.withResumeToken(Ht.EMPTY_BYTE_STRING,d.snapshotVersion)),EA(s,l);const p=new es(d.target,l,u,d.sequenceNumber);C_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Yf(t,r)}}async function Yf(t,e,n){if(!Ro(e))throw e;t.k_.add(1),await Ih(t),t.K_.set("Offline"),n||(n=()=>mA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await jp(t)})}function IA(t,e){return e().catch(n=>Yf(t,n,e))}async function Sh(t){const e=_e(t),n=To(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;lj(e);)try{const i=await H5(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,cj(e,i)}catch(i){await Yf(e,i)}SA(e)&&bA(e)}function lj(t){return Fa(t)&&t.L_.length<10}function cj(t,e){t.L_.push(e);const n=To(t);n.s_()&&n.f_&&n.g_(e.mutations)}function SA(t){return Fa(t)&&!To(t).i_()&&t.L_.length>0}function bA(t){To(t).start()}async function uj(t){To(t).w_()}async function hj(t){const e=To(t);for(const n of t.L_)e.g_(n.mutations)}async function dj(t,e,n){const r=t.L_.shift(),i=g_.from(r,e,n);await IA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Sh(t)}async function fj(t,e){e&&To(t).f_&&await async function(r,i){if(function(o){return YV(o)&&o!==K.ABORTED}(i.code)){const s=r.L_.shift();To(r).__(),await IA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sh(r)}}(t,e),SA(t)&&bA(t)}async function L1(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Fa(n);n.k_.add(3),await Ih(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await jp(n)}async function pj(t,e){const n=_e(t);e?(n.k_.delete(2),await jp(n)):e||(n.k_.add(2),await Ih(n),n.K_.set("Unknown"))}function yc(t){return t.W_||(t.W_=function(n,r,i){const s=_e(n);return s.b_(),new Z5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:ij.bind(null,t),mo:sj.bind(null,t),po:oj.bind(null,t),R_:aj.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),x_(t)?A_(t):t.K_.set("Unknown")):(await t.W_.stop(),TA(t))})),t.W_}function To(t){return t.G_||(t.G_=function(n,r,i){const s=_e(n);return s.b_(),new ej(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:uj.bind(null,t),po:fj.bind(null,t),p_:hj.bind(null,t),y_:dj.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Sh(t)):(await t.G_.stop(),t.L_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new P_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function k_(t,e){if(Ln("AsyncQueue",`${e}: ${t}`),Ro(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=cu(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ul;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.z_=new It(te.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ae():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ac{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ac(e,n,Ul.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class mj{constructor(){this.queries=V1(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=_e(n),s=i.queries;i.queries=V1(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function V1(){return new ms(t=>CC(t),kp)}async function CA(t,e){const n=_e(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new gj,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=k_(o,`Initialization of query '${fl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&R_(n)}async function AA(t,e){const n=_e(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vj(t,e){const n=_e(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&R_(n)}function yj(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function R_(t){t.X_.forEach(e=>{e.next()})}var Rv,j1;(j1=Rv||(Rv={})).na="default",j1.Cache="cache";class xA{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Rv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.key=e}}class kA{constructor(e){this.key=e}}class _j{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=AC(e),this.ma=new Ul(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new M1,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const m=i.get(d),w=Eh(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),x=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;m&&w?m.data.isEqual(w.data)?E!==x&&(r.track({type:3,doc:w}),R=!0):this.ya(m,w)||(r.track({type:2,doc:w}),R=!0,(l&&this.Va(w,l)>0||u&&this.Va(w,u)<0)&&(a=!0)):!m&&w?(r.track({type:0,doc:w}),R=!0):m&&!w&&(r.track({type:1,doc:m}),R=!0,(l||u)&&(a=!0)),R&&(w?(o=o.add(w),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((d,p)=>function(w,E){const x=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return x(w)-x(E)}(d.type,p.type)||this.Va(d.doc,p.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,u=l!==this.Aa;return this.Aa=l,o.length!==0||u?{snapshot:new ac(this.query,e.ma,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new M1,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new kA(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new PA(r))}),n}va(e){this.da=e.ds,this.Ra=Pe();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return ac.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class wj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ej{constructor(e){this.key=e,this.Fa=!1}}class Tj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new ms(a=>CC(a),kp),this.Oa=new Map,this.Na=new Set,this.La=new It(te.comparator),this.Ba=new Map,this.ka=new E_,this.qa={},this.Qa=new Map,this.Ka=Pa.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Ij(t,e,n=!0){const r=MA(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await RA(r,e,n,!0),i}async function Sj(t,e){const n=MA(t);await RA(n,e,!0,!1)}async function RA(t,e,n,r){const i=await W5(t.localStore,jr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await bj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&wA(t.remoteStore,i),a}async function bj(t,e,n,r,i){t.Ua=(p,m,w)=>async function(x,R,A,T){let I=R.view.ga(A);I.ss&&(I=await D1(x.localStore,R.query,!1).then(({documents:P})=>R.view.ga(P,I)));const M=T&&T.targetChanges.get(R.targetId),z=T&&T.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(I,x.isPrimaryClient,M,z);return U1(x,R.targetId,W.ba),W.snapshot}(t,p,m,w);const s=await D1(t.localStore,e,!0),o=new _j(e,s.ds),a=o.ga(s.documents),l=Th.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);U1(t,n,u.ba);const d=new wj(e,n,o);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),u.snapshot}async function Cj(t,e,n){const r=_e(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!kp(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&b_(r.remoteStore,i.targetId),Dv(r,i.targetId)}).catch(ja)):(Dv(r,i.targetId),await kv(r.localStore,i.targetId,!0))}async function Aj(t,e){const n=_e(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),b_(n.remoteStore,r.targetId))}async function xj(t,e,n){const r=VA(t);try{const i=await function(o,a){const l=_e(o),u=xt.now(),d=a.reduce((w,E)=>w.add(E.key),Pe());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=cr(),x=Pe();return l.hs.getEntries(w,d).next(R=>{E=R,E.forEach((A,T)=>{T.isValidDocument()||(x=x.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,E)).next(R=>{p=R;const A=[];for(const T of a){const I=GV(T,p.get(T.key).overlayedDocument);I!=null&&A.push(new vs(T.key,I,yC(I.value.mapValue),Vn.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,A,a)}).next(R=>{m=R;const A=R.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(w,R.batchId,A)})}).then(()=>({batchId:m.batchId,changes:PC(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.qa[o.currentUser.toKey()];u||(u=new It(Te)),u=u.insert(a,l),o.qa[o.currentUser.toKey()]=u}(r,i.batchId,n),await bh(r,i.changes),await Sh(r.remoteStore)}catch(i){const s=k_(i,"Failed to persist write");n.reject(s)}}async function DA(t,e){const n=_e(t);try{const r=await z5(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?le(o.Fa):i.removedDocuments.size>0&&(le(o.Fa),o.Fa=!1))}),await bh(n,r,e)}catch(r){await ja(r)}}function F1(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let u=!1;l.queries.forEach((d,p)=>{for(const m of p.J_)m.ea(a)&&(u=!0)}),u&&R_(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Pj(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new It(te.comparator);o=o.insert(s,Nt.newNoDocument(s,de.min()));const a=Pe().add(s),l=new Op(de.min(),new Map,new It(Te),o,a);await DA(r,l),r.La=r.La.remove(s),r.Ba.delete(e),D_(r)}else await kv(r.localStore,e,!1).then(()=>Dv(r,e,n)).catch(ja)}async function kj(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await B5(n.localStore,e);NA(n,r,null),OA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bh(n,i)}catch(i){await ja(i)}}async function Rj(t,e,n){const r=_e(t);try{const i=await function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(le(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);NA(r,e,n),OA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bh(r,i)}catch(i){await ja(i)}}function OA(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function NA(t,e,n){const r=_e(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Dv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||LA(t,r)})}function LA(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(b_(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),D_(t))}function U1(t,e,n){for(const r of n)r instanceof PA?(t.ka.addReference(r.key,e),Dj(t,r)):r instanceof kA?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||LA(t,r.key)):ae()}function Dj(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.Na.add(r),D_(t))}function D_(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new te(nt.fromString(e)),r=t.Ka.next();t.Ba.set(r,new Ej(n)),t.La=t.La.insert(n,r),wA(t.remoteStore,new es(jr(wh(n.path)),r,"TargetPurposeLimboResolution",Lr.oe))}}async function bh(t,e,n){const r=_e(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=S_.zi(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,u){const d=_e(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(u,m=>$.forEach(m.Wi,w=>d.persistence.referenceDelegate.addReference(p,m.targetId,w)).next(()=>$.forEach(m.Gi,w=>d.persistence.referenceDelegate.removeReference(p,m.targetId,w)))))}catch(p){if(!Ro(p))throw p;Q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const w=d.us.get(m),E=w.snapshotVersion,x=w.withLastLimboFreeSnapshotVersion(E);d.us=d.us.insert(m,x)}}}(r.localStore,s))}async function Oj(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await gA(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bh(n,r.Ts)}}function Nj(t,e){const n=_e(t),r=n.Ba.get(e);if(r&&r.Fa)return Pe().add(r.key);{let i=Pe();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function MA(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pj.bind(null,e),e.Ma.R_=vj.bind(null,e.eventManager),e.Ma.Wa=yj.bind(null,e.eventManager),e}function VA(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rj.bind(null,e),e}class oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vp(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return pA(this.persistence,new fA,e.initialUser,this.serializer)}ja(e){return new T_(Mp.ei,this.serializer)}za(e){return new vA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}oh.provider={build:()=>new oh};class Lj extends oh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){le(this.persistence.referenceDelegate instanceof Qf);const r=this.persistence.referenceDelegate.garbageCollector;return new lA(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new T_(r=>Qf.ei(r,n),this.serializer)}}class Mj extends oh{constructor(e,n,r){super(),this.Za=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await VA(this.Za.syncEngine),await Sh(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return pA(this.persistence,new fA,e.initialUser,this.serializer)}Ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lA(r,e.asyncQueue,n)}Ya(e,n){const r=new eV(n,this.persistence);return new ZM(e.asyncQueue,r)}ja(e){const n=F5(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new I_(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,J5(),tf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new vA}}class Xf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oj.bind(null,this.syncEngine),await pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mj}()}createDatastore(e){const n=Vp(e.databaseInfo.databaseId),r=function(s){return new X5(s)}(e.databaseInfo);return function(s,o,a,l){return new tj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new rj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>F1(this.syncEngine,n,0),function(){return N1.p()?new N1:new G5}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const p=new Tj(i,s,o,a,l,u);return d&&(p.$a=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=_e(i);Q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Ih(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xf.provider={build:()=>new Xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nn.UNAUTHENTICATED,this.clientId=iC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=k_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gg(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await gA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jj(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>L1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>L1(e.remoteStore,i)),t._onlineComponents=e}async function jj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xl("Error using user provided cache. Falling back to memory cache: "+n),await Gg(t,new oh)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Gg(t,new Lj(void 0));return t._offlineComponents}async function FA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await $1(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await $1(t,new Xf))),t._onlineComponents}function Fj(t){return FA(t).then(e=>e.syncEngine)}async function Ov(t){const e=await FA(t),n=e.eventManager;return n.onListen=Ij.bind(null,e.syncEngine),n.onUnlisten=Cj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Aj.bind(null,e.syncEngine),n}function Uj(t,e,n={}){const r=new rs;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new jA({next:m=>{d.eu(),o.enqueueAndForget(()=>AA(s,p));const w=m.docs.has(a);!w&&m.fromCache?u.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&l&&l.source==="server"?u.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new xA(wh(a.path),d,{includeMetadataChanges:!0,ua:!0});return CA(s,p)}(await Ov(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $j(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z1(t){if(!te.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q1(t){if(te.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function O_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function oi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=O_(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$j("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class N_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BM;switch(r.type){case"firstParty":return new HM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B1.get(n);r&&(Q("ComponentProvider","Removing Datastore"),B1.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fp(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class mo extends Fp{constructor(e,n,r){super(e,n,wh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new te(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function Bj(t,e,...n){if(t=qt(t),$A("collection","path",e),t instanceof N_){const r=nt.fromString(e,...n);return q1(r),new mo(t,null,r)}{if(!(t instanceof Un||t instanceof mo))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return q1(r),new mo(t.firestore,null,r)}}function Qe(t,e,...n){if(t=qt(t),arguments.length===1&&(e=iC.newId()),$A("doc","path",e),t instanceof N_){const r=nt.fromString(e,...n);return z1(r),new Un(t,null,new te(r))}{if(!(t instanceof Un||t instanceof mo))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return z1(r),new Un(t.firestore,t instanceof mo?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new yA(this,"async_queue_retry"),this.fu=()=>{const r=tf();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=tf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=tf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new rs;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ro(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ln("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=P_.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ae()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function K1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Io extends N_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new W1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W1(e),this._firestoreClient=void 0,await e}}}function zj(t,e,n){n||(n="(default)");const r=Va(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Ql(s,e))return i;throw new ne(K.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ne(K.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function L_(t){if(t._terminated)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||BA(t),t._firestoreClient}function BA(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new TV(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,UA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Vj(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function qj(t,e){Xl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return Hj(t,Xf.provider,{build:r=>new Mj(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function Hj(t,e,n){if((t=oi(t,Io))._firestoreClient||t._terminated)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ne(K.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},BA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lc(Ht.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new lc(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=/^__.*__$/;class Kj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new vc(e,this.data,n,this.fieldTransforms)}}class Gj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class j_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new j_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Jf(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(zA(this.Mu)&&Wj.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Qj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vp(e)}$u(e,n,r,i=!1){return new j_({Mu:e,methodName:n,Ku:r,path:Ct.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F_(t){const e=t._freezeSettings(),n=Vp(t._databaseId);return new Qj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qA(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);q_("Data must be an object, but it was:",o,r);const a=HA(r,o);let l,u;if(s.merge)l=new lr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const m=KA(e,p,n);if(!o.contains(m))throw new ne(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Zj(d,m)||d.push(m)}l=new lr(d),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new Kj(new Mn(a),l,u)}class U_ extends Ch{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof U_}}class $_ extends Ch{_toFieldTransform(e){return new d_(e.path,new nc)}isEqual(e){return e instanceof $_}}class B_ extends Ch{constructor(e,n){super(e),this.Wu=n}_toFieldTransform(e){const n=new sc(e.serializer,DC(e.serializer,this.Wu));return new d_(e.path,n)}isEqual(e){return e instanceof B_&&this.Wu===e.Wu}}function Yj(t,e,n,r){const i=t.$u(1,e,n);q_("Data must be an object, but it was:",i,r);const s=[],o=Mn.empty();Do(r,(l,u)=>{const d=H_(e,l,n);u=qt(u);const p=i.Bu(d);if(u instanceof U_)s.push(d);else{const m=z_(u,p);m!=null&&(s.push(d),o.set(d,m))}});const a=new lr(s);return new Gj(o,a,i.fieldTransforms)}function Xj(t,e,n,r,i,s){if(t.$u(1,e,n),KA(e,r,n),s.length%2!=0)throw new ne(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`)}function z_(t,e){if(WA(t=qt(t)))return q_("Unsupported field value:",e,t),HA(t,e);if(t instanceof Ch)return function(r,i){if(!zA(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=z_(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=xt.fromDate(r);return{timestampValue:oc(i.serializer,s)}}if(r instanceof xt){const s=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(i.serializer,s)}}if(r instanceof M_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lc)return{bytesValue:zC(i.serializer,r._byteString)};if(r instanceof Un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:y_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof V_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return h_(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${O_(r)}`)}(t,e)}function HA(t,e){const n={};return pC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{const s=z_(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function WA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof M_||t instanceof lc||t instanceof Un||t instanceof Ch||t instanceof V_)}function q_(t,e,n){if(!WA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=O_(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function KA(t,e,n){if((e=qt(e))instanceof Up)return e._internalPath;if(typeof e=="string")return H_(t,e);throw Jf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Jj=new RegExp("[~\\*/\\[\\]]");function H_(t,e,n){if(e.search(Jj)>=0)throw Jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Up(...e.split("."))._internalPath}catch{throw Jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function Zj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(QA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e3 extends GA{data(){return super.data()}}function QA(t,e){return typeof e=="string"?H_(t,e):e instanceof Up?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n3{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Do(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Et(o.doubleValue));return new V_(s)}convertGeoPoint(e){return new M_(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rh(e));default:return null}}convertTimestamp(e){const n=us(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nt.fromString(e);le(ZC(r));const i=new ba(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||Ln(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class XA extends GA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(QA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nf extends XA{data(e={}){return super.data(e)}}class r3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new du(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nf(this._firestore,this._userDataWriter,r.key,r,new du(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new nf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new nf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new du(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:i3(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function i3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t){t=oi(t,Un);const e=oi(t.firestore,Io);return Uj(L_(e),t._key).then(n=>ZA(e,t,n))}class JA extends n3{constructor(e){super(),this.firestore=e}convertBytes(e){return new lc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function Zf(t,e,n){t=oi(t,Un);const r=oi(t.firestore,Io),i=YA(t.converter,e);return W_(r,[qA(F_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vn.none())])}function Pr(t,e,n,...r){t=oi(t,Un);const i=oi(t.firestore,Io),s=F_(i);let o;return o=typeof(e=qt(e))=="string"||e instanceof Up?Xj(s,"updateDoc",t._key,e,n,r):Yj(s,"updateDoc",t._key,e),W_(i,[o.toMutation(t._key,Vn.exists(!0))])}function s3(t,e){const n=oi(t.firestore,Io),r=Qe(t),i=YA(t.converter,e);return W_(n,[qA(F_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}function Zc(t,...e){var n,r,i;t=qt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||K1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(K1(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,u,d;if(t instanceof Un)u=oi(t.firestore,Io),d=wh(t._key.path),l={next:p=>{e[o]&&e[o](ZA(u,t,p))},error:e[o+1],complete:e[o+2]};else{const p=oi(t,Fp);u=oi(p.firestore,Io),d=p._query;const m=new JA(u);l={next:w=>{e[o]&&e[o](new r3(u,m,p,w))},error:e[o+1],complete:e[o+2]},t3(t._query)}return function(m,w,E,x){const R=new jA(x),A=new xA(w,R,E);return m.asyncQueue.enqueueAndForget(async()=>CA(await Ov(m),A)),()=>{R.eu(),m.asyncQueue.enqueueAndForget(async()=>AA(await Ov(m),A))}}(L_(u),d,a,l)}function W_(t,e){return function(r,i){const s=new rs;return r.asyncQueue.enqueueAndForget(async()=>xj(await Fj(r),i,s)),s.promise}(L_(t),e)}function ZA(t,e,n){const r=n.docs.get(e._key),i=new JA(t);return new XA(t,i,e._key,r,new du(n.hasPendingWrites,n.fromCache),e.converter)}function Nv(){return new $_("serverTimestamp")}function o3(t){return new B_("increment",t)}(function(e,n=!0){(function(i){mc=i})(pc),Di(new li("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Io(new zM(r.getProvider("auth-internal")),new KM(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Vr(BE,"4.7.5",e),Vr(BE,"4.7.5","esm2017")})();const ex="@firebase/installations",K_="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=1e4,nx=`w:${K_}`,rx="FIS_v2",a3="https://firebaseinstallations.googleapis.com/v1",l3=60*60*1e3,c3="installations",u3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ka=new Ma(c3,u3,h3);function ix(t){return t instanceof ci&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx({projectId:t}){return`${a3}/projects/${t}/installations`}function ox(t){return{token:t.token,requestStatus:2,expiresIn:f3(t.expiresIn),creationTime:Date.now()}}async function ax(t,e){const r=(await e.json()).error;return ka.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function d3(t,{refreshToken:e}){const n=lx(t);return n.append("Authorization",p3(e)),n}async function cx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function f3(t){return Number(t.replace("s","000"))}function p3(t){return`${rx} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=sx(t),i=lx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:rx,appId:t.appId,sdkVersion:nx},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await cx(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:ox(u.authToken)}}else throw await ax("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=/^[cdef][\w-]{21}$/,Lv="";function y3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=_3(t);return v3.test(n)?n:Lv}catch{return Lv}}function _3(t){return m3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Map;function dx(t,e){const n=$p(t);fx(n,e),w3(n,e)}function fx(t,e){const n=hx.get(t);if(n)for(const r of n)r(e)}function w3(t,e){const n=E3();n&&n.postMessage({key:t,fid:e}),T3()}let ha=null;function E3(){return!ha&&"BroadcastChannel"in self&&(ha=new BroadcastChannel("[Firebase] FID Change"),ha.onmessage=t=>{fx(t.data.key,t.data.fid)}),ha}function T3(){hx.size===0&&ha&&(ha.close(),ha=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="firebase-installations-database",S3=1,Ra="firebase-installations-store";let Qg=null;function G_(){return Qg||(Qg=ub(I3,S3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ra)}}})),Qg}async function ep(t,e){const n=$p(t),i=(await G_()).transaction(Ra,"readwrite"),s=i.objectStore(Ra),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&dx(t,e.fid),e}async function px(t){const e=$p(t),r=(await G_()).transaction(Ra,"readwrite");await r.objectStore(Ra).delete(e),await r.done}async function Bp(t,e){const n=$p(t),i=(await G_()).transaction(Ra,"readwrite"),s=i.objectStore(Ra),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&dx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q_(t){let e;const n=await Bp(t.appConfig,r=>{const i=b3(r),s=C3(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Lv?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function b3(t){const e=t||{fid:y3(),registrationStatus:0};return gx(e)}function C3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ka.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=A3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:x3(t)}:{installationEntry:e}}async function A3(t,e){try{const n=await g3(t,e);return ep(t.appConfig,n)}catch(n){throw ix(n)&&n.customData.serverCode===409?await px(t.appConfig):await ep(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function x3(t){let e=await G1(t.appConfig);for(;e.registrationStatus===1;)await ux(100),e=await G1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Q_(t);return r||n}return e}function G1(t){return Bp(t,e=>{if(!e)throw ka.create("installation-not-found");return gx(e)})}function gx(t){return P3(t)?{fid:t.fid,registrationStatus:0}:t}function P3(t){return t.registrationStatus===1&&t.registrationTime+tx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k3({appConfig:t,heartbeatServiceProvider:e},n){const r=R3(t,n),i=d3(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:nx,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await cx(()=>fetch(r,a));if(l.ok){const u=await l.json();return ox(u)}else throw await ax("Generate Auth Token",l)}function R3(t,{fid:e}){return`${sx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y_(t,e=!1){let n;const r=await Bp(t.appConfig,s=>{if(!mx(s))throw ka.create("not-registered");const o=s.authToken;if(!e&&N3(o))return s;if(o.requestStatus===1)return n=D3(t,e),s;{if(!navigator.onLine)throw ka.create("app-offline");const a=M3(s);return n=O3(t,a),a}});return n?await n:r.authToken}async function D3(t,e){let n=await Q1(t.appConfig);for(;n.authToken.requestStatus===1;)await ux(100),n=await Q1(t.appConfig);const r=n.authToken;return r.requestStatus===0?Y_(t,e):r}function Q1(t){return Bp(t,e=>{if(!mx(e))throw ka.create("not-registered");const n=e.authToken;return V3(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function O3(t,e){try{const n=await k3(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ep(t.appConfig,r),n}catch(n){if(ix(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await px(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ep(t.appConfig,r)}throw n}}function mx(t){return t!==void 0&&t.registrationStatus===2}function N3(t){return t.requestStatus===2&&!L3(t)}function L3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+l3}function M3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function V3(t){return t.requestStatus===1&&t.requestTime+tx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(t){const e=t,{installationEntry:n,registrationPromise:r}=await Q_(e);return r?r.catch(console.error):Y_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(t,e=!1){const n=t;return await U3(n),(await Y_(n,e)).token}async function U3(t){const{registrationPromise:e}=await Q_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){if(!t||!t.options)throw Yg("App Configuration");if(!t.name)throw Yg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Yg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Yg(t){return ka.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="installations",B3="installations-internal",z3=t=>{const e=t.getProvider("app").getImmediate(),n=$3(e),r=Va(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},q3=t=>{const e=t.getProvider("app").getImmediate(),n=Va(e,vx).getImmediate();return{getId:()=>j3(n),getToken:i=>F3(n,i)}};function H3(){Di(new li(vx,z3,"PUBLIC")),Di(new li(B3,q3,"PRIVATE"))}H3();Vr(ex,K_);Vr(ex,K_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="analytics",W3="firebase_id",K3="origin",G3=60*1e3,Q3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",X_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new Ep("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dr=new Ma("analytics","Analytics",Y3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(t){if(!t.startsWith(X_)){const e=dr.create("invalid-gtag-resource",{gtagURL:t});return er.warn(e.message),""}return t}function yx(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function J3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Z3(t,e){const n=J3("firebase-js-sdk-policy",{createScriptURL:X3}),r=document.createElement("script"),i=`${X_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function e4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function t4(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await yx(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){er.error(a)}t("config",i,s)}async function n4(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await yx(n);for(const l of o){const u=a.find(p=>p.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){er.error(s)}}function r4(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await n4(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await t4(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){er.error(a)}}return i}function i4(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=r4(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function s4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(X_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=30,a4=1e3;class l4{constructor(e={},n=a4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const _x=new l4;function c4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function u4(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:c4(r)},s=Q3.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw dr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function h4(t,e=_x,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw dr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw dr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new p4;return setTimeout(async()=>{a.abort()},G3),wx({appId:r,apiKey:i,measurementId:s},o,a,e)}async function wx(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=_x){var s;const{appId:o,measurementId:a}=t;try{await d4(r,e)}catch(l){if(a)return er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await u4(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!f4(u)){if(i.deleteThrottleMetadata(o),a)return er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?fE(n,i.intervalMillis,o4):fE(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,p),er.debug(`Calling attemptFetch again in ${d} millis`),wx(t,p,r,i)}}function d4(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(dr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function f4(t){if(!(t instanceof ci)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class p4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function g4(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(){if(Hy())try{await ab()}catch(t){return er.warn(dr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return er.warn(dr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function v4(t,e,n,r,i,s,o){var a;const l=h4(t);l.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&er.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>er.error(w)),e.push(l);const u=m4().then(w=>{if(w)return r.getId()}),[d,p]=await Promise.all([l,u]);s4(s)||Z3(s,d.measurementId),i("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[K3]="firebase",m.update=!0,p!=null&&(m[W3]=p),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.app=e}_delete(){return delete ku[this.app.options.appId],Promise.resolve()}}let ku={},Y1=[];const X1={};let Xg="dataLayer",_4="gtag",J1,Ex,Z1=!1;function w4(){const t=[];if(sb()&&t.push("This is a browser extension environment."),a2()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=dr.create("invalid-analytics-context",{errorInfo:e});er.warn(n.message)}}function E4(t,e,n){w4();const r=t.options.appId;if(!r)throw dr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dr.create("no-api-key");if(ku[r]!=null)throw dr.create("already-exists",{id:r});if(!Z1){e4(Xg);const{wrappedGtag:s,gtagCore:o}=i4(ku,Y1,X1,Xg,_4);Ex=s,J1=o,Z1=!0}return ku[r]=v4(t,Y1,X1,e,J1,Xg,n),new y4(t)}function T4(t=db()){t=qt(t);const e=Va(t,tp);return e.isInitialized()?e.getImmediate():I4(t)}function I4(t,e={}){const n=Va(t,tp);if(n.isInitialized()){const i=n.getImmediate();if(Ql(e,n.getOptions()))return i;throw dr.create("already-initialized")}return n.initialize({options:e})}function S4(t,e,n,r){t=qt(t),g4(Ex,ku[t.app.options.appId],e,n,r).catch(i=>er.error(i))}const eT="@firebase/analytics",tT="0.10.10";function b4(){Di(new li(tp,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return E4(r,i,n)},"PUBLIC")),Di(new li("analytics-internal",t,"PRIVATE")),Vr(eT,tT),Vr(eT,tT,"esm2017");function t(e){try{const n=e.getProvider(tp).getImmediate();return{logEvent:(r,i,s)=>S4(n,r,i,s)}}catch(n){throw dr.create("interop-component-reg-failed",{reason:n})}}}b4();const C4={apiKey:"AIzaSyDcGX1V06Iox4rkwOm9BW2gfC1-jj8TiSs",authDomain:"chessmatch-b38ef.firebaseapp.com",projectId:"chessmatch-b38ef",storageBucket:"chessmatch-b38ef.firebasestorage.app",messagingSenderId:"293162008011",appId:"1:293162008011:web:e605313c7055f1ce784a4e",measurementId:"G-2V8DL9QX5J"},J_=hb(C4),tt=VM(J_),Ke=zj(J_,{cacheSizeBytes:5242880,experimentalForceLongPolling:!0});T4(J_);qj(Ke).catch(t=>{console.error("Error enabling persistence:",t)});function A4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const ah="abcdefgh".split(""),rf={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},x4={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},P4={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},k4=[7,6,5,4,3,2,1,0],R4=[0,1,2,3,4,5,6,7],nT={wP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),v.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),v.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),v.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),v.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),v.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"}),v.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),v.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[v.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),v.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),v.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),v.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Mv(t,e,n){const r=e/8,i=t==="white"?x4:P4,s=t==="white"?k4:R4,o=i[n[0]]*r+r/2,a=s[parseInt(n[1],10)-1]*r+r/2;return{x:o,y:a}}function rT(t){let e=!1;return Object.keys(rf).forEach(n=>{t[n]!==rf[n]&&(e=!0)}),Object.keys(t).forEach(n=>{rf[n]!==t[n]&&(e=!0)}),e}function D4(t,e){const n={removed:{},added:{}};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n.removed[r]=t[r])}),Object.keys(e).forEach(r=>{t[r]!==e[r]&&(n.added[r]=e[r])}),n}function iT(t){return t==="start"?rf:typeof t=="string"?O4(t):t}function O4(t){if(!N4(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),n={};let r=8;for(let i=0;i<8;i++){const s=e[i].split("");let o=0;for(let a=0;a<s.length;a++)if(s[a].search(/[1-8]/)!==-1){const l=parseInt(s[a],10);o=o+l}else{const l=ah[o]+r;n[l]=M4(s[a]),o=o+1}r=r-1}return n}function N4(t){t=t.replace(/ .+$/,""),t=L4(t);const e=t.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function L4(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function M4(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const V4=(t,e=!0,n,r)=>{const[i,s]=N.useState([]),[o,a]=N.useState([]),[l,u]=N.useState();N.useEffect(()=>{Array.isArray(t)&&(d(),s(t==null?void 0:t.filter(E=>E[0]!==E[1])))},[t]),N.useEffect(()=>{n==null||n(o)},[o]);function d(){a([]),u(void 0)}const p=(E,x)=>{e&&u([E,x,r])},m=[...o,...i];return{arrows:m,newArrow:l,clearArrows:d,drawNewArrow:p,setArrows:a,onArrowDrawEnd:(E,x)=>{if(E===x||!e)return;let R;const A=[E,x,r];m.every(([I,M])=>!(I===E&&M===x))?R=[...o,A]:R=o.filter(([I,M])=>!(I===E&&M===x)),u(void 0),a(R)}}},Tx=N.createContext({}),ys=()=>N.useContext(Tx),j4=N.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:r=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:o="white",boardWidth:a,children:l,clearPremovesOnRightClick:u=!0,customArrows:d,customArrowColor:p="rgb(255,170,0)",customBoardStyle:m,customNotationStyle:w,customDarkSquareStyle:E={backgroundColor:"#B58863"},customDropSquareStyle:x={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:R={backgroundColor:"#F0D9B5"},customPieces:A,customPremoveDarkSquareStyle:T={backgroundColor:"#A42323"},customPremoveLightSquareStyle:I={backgroundColor:"#BD2828"},customSquare:M="div",customSquareStyles:z,dropOffBoardAction:W="snapback",id:P=0,isDraggablePiece:C=()=>!0,getPositionObject:k=()=>{},onArrowsChange:O=()=>{},onDragOverSquare:L=()=>{},onMouseOutSquare:j=()=>{},onMouseOverSquare:D=()=>{},onPieceClick:mt=()=>{},onPieceDragBegin:St=()=>{},onPieceDragEnd:Ut=()=>{},onPieceDrop:Ye=()=>!0,onPieceDropOffBoard:X=()=>{},onPromotionCheck:he=(wt,Lt,ln)=>(ln==="wP"&&wt[1]==="7"&&Lt[1]==="8"||ln==="bP"&&wt[1]==="2"&&Lt[1]==="1")&&Math.abs(wt.charCodeAt(0)-Lt.charCodeAt(0))<=1,onPromotionPieceSelect:B=()=>!0,onSparePieceDrop:Me=()=>!0,onSquareClick:Re=()=>{},onSquareRightClick:Be=()=>{},position:st="start",promotionDialogVariant:kt="default",promotionToSquare:Ge=null,showBoardNotation:fe=!0,showPromotionDialog:re=!1,snapToCursor:pn=!0},gn)=>{const[wt,Lt]=N.useState(iT(st)),[ln,Br]=N.useState({removed:{},added:{}}),[mn,Wt]=N.useState(void 0),[_s,ui]=N.useState(re&&!s),[ce,me]=N.useState(null),[ue,be]=N.useState(Ge),[Ve,vt]=N.useState([]),Ue=N.useRef(Ve),[He,ot]=N.useState(),[tr,zr]=N.useState(Object.assign(Object.assign({},nT),A)),[Ni,ws]=N.useState(!1),[nr,$a]=N.useState(),[Li,hi]=N.useState(!1),[_c,wc]=N.useState(null);N.useImperativeHandle(gn,()=>({clearPremoves(ze=!0){zn(ze)}})),N.useEffect(()=>{zr(Object.assign(Object.assign({},nT),A))},[A]),N.useEffect(()=>{ui(re),be(Ge)},[Ge,re]),N.useEffect(()=>{var ze,at,Mt;xn();const Xe=iT(st),vr=D4(wt,Xe),cn=((ze=Object.keys(vr.added))===null||ze===void 0?void 0:ze.length)<=2?(Mt=(at=Object.entries(vr.added))===null||at===void 0?void 0:at[0])===null||Mt===void 0?void 0:Mt[1][0]:void 0;if(Li)Lt(Xe),hi(!1),i&&Ts(cn),nr&&clearTimeout(nr);else if(Ni)Lt(Xe),hi(!1),i&&Ts(cn);else{rT(Xe)&&mn!==void 0?Wt(cn):rT(Xe)?Wt(void 0):Wt("b"),Br(vr),hi(!0);const Ss=setTimeout(()=>{Lt(Xe),hi(!1),i&&Ts(cn)},e);$a(Ss)}return ws(!1),k(Xe),qr(),()=>{clearTimeout(nr)}},[st]);const{arrows:No,newArrow:Lo,clearArrows:qr,drawNewArrow:di,onArrowDrawEnd:Es}=V4(d,n,O,p);function Mo(ze,at,Mt,Xe){if(ze===at)return;if(qr(),i&&Li||i&&(mn===Mt[0]||Ue.current.filter(cn=>cn.piece[0]===Mt[0]).length>0)){const cn=[...Ue.current];cn.push({sourceSq:ze,targetSq:at,piece:Mt}),Ue.current=cn,vt([...cn]),xn();return}if(!i&&Li)return;const vr=Object.assign({},wt);ws(!!Xe),Wt(Mt[0]),Ye.length?Ye(ze,at,Mt)||(zn(),ws(!1)):(delete vr[ze],vr[at]=Mt,Lt(vr)),xn(),k(vr)}function Hr(ze){const at=Object.assign({},wt);delete at[ze],Lt(at),k(at)}function Ts(ze){if(Ue.current.length===0)return;const at=Ue.current[0];if(at.piece[0]!==void 0&&at.piece[0]!==ze&&Ye.length)if(Wt(at.piece[0]),ws(!0),Ye(at.sourceSq,at.targetSq,at.piece)){const Xe=[...Ue.current];Xe.shift(),Ue.current=Xe,vt([...Xe])}else zn()}function Is(ze,at){if(!Me(ze,at))return;const Xe=Object.assign({},wt);Xe[at]=ze,Lt(Xe),k(Xe)}function zn(ze=!0){ze&&Wt(void 0),Ue.current=[],vt([])}function xn(){me(null),be(null),ui(!1)}function Ba(ze){ot(ze)}function Kt(ze){if(He){if(He===ze){ot(void 0),u&&zn(!1),Be(ze);return}}else ot(void 0)}function za(){ot(void 0)}const Mi={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:i,arrows:No,autoPromoteToQueen:s,boardOrientation:o,boardWidth:a,chessPieces:tr,clearArrows:qr,clearCurrentRightClickDown:za,currentPosition:wt,currentRightClickDown:He,customArrowColor:p,customBoardStyle:m,customDarkSquareStyle:E,customDropSquareStyle:x,customLightSquareStyle:R,customNotationStyle:w,customPremoveDarkSquareStyle:T,customPremoveLightSquareStyle:I,customSquare:M,customSquareStyles:z,deletePieceFromSquare:Hr,drawNewArrow:di,dropOffBoardAction:W,handleSetPosition:Mo,handleSparePieceDrop:Is,id:P,isDraggablePiece:C,isWaitingForAnimation:Li,lastPieceColour:mn,lastSquareDraggedOver:_c,newArrow:Lo,onArrowDrawEnd:Es,onDragOverSquare:L,onMouseOutSquare:j,onMouseOverSquare:D,onPieceClick:mt,onPieceDragBegin:St,onPieceDragEnd:Ut,onPieceDrop:Ye,onPieceDropOffBoard:X,onPromotionCheck:he,onPromotionPieceSelect:B,onRightClickDown:Ba,onRightClickUp:Kt,onSparePieceDrop:Me,onSquareClick:Re,positionDifferences:ln,premoves:Ve,promoteFromSquare:ce,promoteToSquare:ue,promotionDialogVariant:kt,setLastSquareDraggedOver:wc,setPromoteFromSquare:me,setPromoteToSquare:be,setShowPromoteDialog:ui,showBoardNotation:fe,showPromoteDialog:_s,snapToCursor:pn};return v.jsx(Tx.Provider,Object.assign({value:Mi},{children:l}))});function F4({row:t,col:e}){const{boardOrientation:n,boardWidth:r,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:o}=ys(),a=s.backgroundColor,l=i.backgroundColor,u=e===0,d=t===7,p=u&&d;function m(){return n==="white"?8-t:t+1}function w(){return n==="black"?ah[7-e]:ah[e]}function E(){return v.jsxs(v.Fragment,{children:[v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),oT(r,o))},{children:m()})),v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),sT(r,o))},{children:w()}))]})}function x(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?l:a}),sT(r,o))},{children:w()}))}function R(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:t%2===0?l:a}:{color:t%2===0?l:a}),oT(r,o))},{children:m()}))}return p?E():d?x():u?R():null}const sT=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),oT=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),Ix=N.createContext({dragDropManager:void 0});function xr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var aT=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),lT=function(){return Math.random().toString(36).substring(7).split("").join(".")},cT={INIT:"@@redux/INIT"+lT(),REPLACE:"@@redux/REPLACE"+lT()};function U4(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Sx(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xr(1));return n(Sx)(t,e)}if(typeof t!="function")throw new Error(xr(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(xr(3));return s}function p(x){if(typeof x!="function")throw new Error(xr(4));if(l)throw new Error(xr(5));var R=!0;return u(),a.push(x),function(){if(R){if(l)throw new Error(xr(6));R=!1,u();var T=a.indexOf(x);a.splice(T,1),o=null}}}function m(x){if(!U4(x))throw new Error(xr(7));if(typeof x.type>"u")throw new Error(xr(8));if(l)throw new Error(xr(9));try{l=!0,s=i(s,x)}finally{l=!1}for(var R=o=a,A=0;A<R.length;A++){var T=R[A];T()}return x}function w(x){if(typeof x!="function")throw new Error(xr(10));i=x,m({type:cT.REPLACE})}function E(){var x,R=p;return x={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(xr(11));function I(){T.next&&T.next(d())}I();var M=R(I);return{unsubscribe:M}}},x[aT]=function(){return this},x}return m({type:cT.INIT}),r={dispatch:m,subscribe:p,getState:d,replaceReducer:w},r[aT]=E,r}function Se(t,e,...n){if($4()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function $4(){return typeof process<"u"&&!0}function B4(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function z4(t,e){return t.filter(n=>n!==e)}function bx(t){return typeof t=="object"}function q4(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function H4(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Z_="dnd-core/INIT_COORDS",zp="dnd-core/BEGIN_DRAG",e0="dnd-core/PUBLISH_DRAG_SOURCE",qp="dnd-core/HOVER",Hp="dnd-core/DROP",Wp="dnd-core/END_DRAG";function uT(t,e){return{type:Z_,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const W4={type:Z_,payload:{clientOffset:null,sourceClientOffset:null}};function K4(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch(uT(s)),G4(n,a,l);const u=X4(n,a);if(u==null){t.dispatch(W4);return}let d=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");Q4(o),d=o(u)}t.dispatch(uT(s,d));const m=l.getSource(u).beginDrag(a,u);if(m==null)return;Y4(m),l.pinSource(u);const w=l.getSourceType(u);return{type:zp,payload:{itemType:w,item:m,sourceId:u,clientOffset:s||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function G4(t,e,n){Se(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){Se(n.getSource(r),"Expected sourceIds to be registered.")})}function Q4(t){Se(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Y4(t){Se(bx(t),"Item must be an object.")}function X4(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function J4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){J4(t,i,n[i])})}return t}function eF(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();tF(r),iF(r).forEach((o,a)=>{const l=nF(o,a,i,r),u={type:Hp,payload:{dropResult:Z4({},n,l)}};t.dispatch(u)})}}function tF(t){Se(t.isDragging(),"Cannot call drop while not dragging."),Se(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function nF(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return rF(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function rF(t){Se(typeof t>"u"||bx(t),"Drop result must either be an object or undefined.")}function iF(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function sF(t){return function(){const n=t.getMonitor(),r=t.getRegistry();oF(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Wp}}}function oF(t){Se(t.isDragging(),"Cannot call endDrag while not dragging.")}function Vv(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function aF(t){return function(n,{clientOffset:r}={}){lF(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return uF(i,o,a),cF(i,s,o),hF(i,s,o),{type:qp,payload:{targetIds:i,clientOffset:r||null}}}}function lF(t){Se(Array.isArray(t),"Expected targetIds to be an array.")}function cF(t,e,n){Se(e.isDragging(),"Cannot call hover while not dragging."),Se(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];Se(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);Se(s,"Expected targetIds to be registered.")}}function uF(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);Vv(s,n)||t.splice(r,1)}}function hF(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function dF(t){return function(){if(t.getMonitor().isDragging())return{type:e0}}}function fF(t){return{beginDrag:K4(t),publishDragSource:dF(t),hover:aF(t),drop:eF(t),endDrag:sF(t)}}class pF{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=fF(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function gF(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Cx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mF(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:Cx(gF(e,r),n)}function vF(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:Cx(e,n)}const Ru=[],t0=[];Ru.__IS_NONE__=!0;t0.__IS_ALL__=!0;function yF(t,e){return t===Ru?!1:t===t0||typeof e>"u"?!0:H4(e,t).length>0}class _F{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;Se(typeof e=="function","listener must be a function."),Se(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!yF(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){Se(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Se(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Se(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return Vv(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Se(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!Vv(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return mF(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return vF(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const hT=typeof global<"u"?global:self,Ax=hT.MutationObserver||hT.WebKitMutationObserver;function xx(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function wF(t){let e=1;const n=new Ax(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const EF=typeof Ax=="function"?wF:xx;class TF{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=EF(this.flush),this.requestErrorThrow=xx(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class IF{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class SF{create(e){const n=this.freeTasks,r=n.length?n.pop():new IF(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const Px=new TF,bF=new SF(Px.registerPendingError);function CF(t){Px.enqueueTask(bF.create(t))}const n0="dnd-core/ADD_SOURCE",r0="dnd-core/ADD_TARGET",i0="dnd-core/REMOVE_SOURCE",Kp="dnd-core/REMOVE_TARGET";function AF(t){return{type:n0,payload:{sourceId:t}}}function xF(t){return{type:r0,payload:{targetId:t}}}function PF(t){return{type:i0,payload:{sourceId:t}}}function kF(t){return{type:Kp,payload:{targetId:t}}}function RF(t){Se(typeof t.canDrag=="function","Expected canDrag to be a function."),Se(typeof t.beginDrag=="function","Expected beginDrag to be a function."),Se(typeof t.endDrag=="function","Expected endDrag to be a function.")}function DF(t){Se(typeof t.canDrop=="function","Expected canDrop to be a function."),Se(typeof t.hover=="function","Expected hover to be a function."),Se(typeof t.drop=="function","Expected beginDrag to be a function.")}function jv(t,e){if(e&&Array.isArray(t)){t.forEach(n=>jv(n,!1));return}Se(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Or;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Or||(Or={}));let OF=0;function NF(){return OF++}function LF(t){const e=NF().toString();switch(t){case Or.SOURCE:return`S${e}`;case Or.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function dT(t){switch(t[0]){case"S":return Or.SOURCE;case"T":return Or.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function fT(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class MF{addSource(e,n){jv(e),RF(n);const r=this.addHandler(Or.SOURCE,e,n);return this.store.dispatch(AF(r)),r}addTarget(e,n){jv(e,!0),DF(n);const r=this.addHandler(Or.TARGET,e,n);return this.store.dispatch(xF(r)),r}containsHandler(e){return fT(this.dragSources,e)||fT(this.dropTargets,e)}getSource(e,n=!1){return Se(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Se(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Se(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Se(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return dT(e)===Or.SOURCE}isTargetId(e){return dT(e)===Or.TARGET}removeSource(e){Se(this.getSource(e),"Expected an existing source."),this.store.dispatch(PF(e)),CF(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Se(this.getTarget(e),"Expected an existing target."),this.store.dispatch(kF(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Se(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Se(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=LF(e);return this.types.set(i,n),e===Or.SOURCE?this.dragSources.set(i,r):e===Or.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const VF=(t,e)=>t===e;function jF(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function FF(t,e,n=VF){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function UF(t=Ru,e){switch(e.type){case qp:break;case n0:case r0:case Kp:case i0:return Ru;case zp:case e0:case Wp:case Hp:default:return t0}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=q4(n,r);if(!(i.length>0||!FF(n,r)))return Ru;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function $F(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){$F(t,i,n[i])})}return t}const pT={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function zF(t=pT,e){const{payload:n}=e;switch(e.type){case Z_:case zp:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case qp:return jF(t.clientOffset,n.clientOffset)?t:BF({},t,{clientOffset:n.clientOffset});case Wp:case Hp:return pT;default:return t}}function qF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){qF(t,i,n[i])})}return t}const HF={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function WF(t=HF,e){const{payload:n}=e;switch(e.type){case zp:return hl({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case e0:return hl({},t,{isSourcePublic:!0});case qp:return hl({},t,{targetIds:n.targetIds});case Kp:return t.targetIds.indexOf(n.targetId)===-1?t:hl({},t,{targetIds:z4(t.targetIds,n.targetId)});case Hp:return hl({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Wp:return hl({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function KF(t=0,e){switch(e.type){case n0:case r0:return t+1;case i0:case Kp:return t-1;default:return t}}function GF(t=0){return t+1}function QF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){QF(t,i,n[i])})}return t}function XF(t={},e){return{dirtyHandlerIds:UF(t.dirtyHandlerIds,{type:e.type,payload:YF({},e.payload,{prevTargetIds:B4(t,"dragOperation.targetIds",[])})}),dragOffset:zF(t.dragOffset,e),refCount:KF(t.refCount,e),dragOperation:WF(t.dragOperation,e),stateId:GF(t.stateId)}}function JF(t,e=void 0,n={},r=!1){const i=ZF(r),s=new _F(i,new MF(i)),o=new pF(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function ZF(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Sx(XF,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function eU(t,e){if(t==null)return{};var n=tU(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tU(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let gT=0;const sf=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var nU=N.memo(function(e){var{children:n}=e,r=eU(e,["children"]);const[i,s]=rU(r);return N.useEffect(()=>{if(s){const o=kx();return++gT,()=>{--gT===0&&(o[sf]=null)}}},[]),v.jsx(Ix.Provider,{value:i,children:n})});function rU(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=iU(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function iU(t,e=kx(),n,r){const i=e;return i[sf]||(i[sf]={dragDropManager:JF(t,e,n,r)}),i[sf]}function kx(){return typeof global<"u"?global:window}var sU=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Da=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Rx(t,e,n){const[r,i]=N.useState(()=>e(t)),s=N.useCallback(()=>{const o=e(t);sU(r,o)||(i(o),n&&n())},[r,t,n]);return Da(s),[r,s]}function oU(t,e,n){const[r,i]=Rx(t,e,n);return Da(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function Dx(t,e,n){return oU(e,t||(()=>({})),()=>n.reconnect())}function Ox(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),N.useMemo(()=>typeof t=="function"?t():t,n)}function aU(t){return N.useMemo(()=>t.hooks.dragSource(),[t])}function lU(t){return N.useMemo(()=>t.hooks.dragPreview(),[t])}let Jg=!1,Zg=!1;class cU{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Se(!Jg,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Jg=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Jg=!1}}isDragging(){if(!this.sourceId)return!1;Se(!Zg,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Zg=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Zg=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let em=!1;class uU{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Se(!em,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return em=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{em=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function hU(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function dU(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function Fv(t,e,n,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const u=s[l];if(!a(u))return!1;const d=t[u],p=e[u];if(i=void 0,i===!1||i===void 0&&d!==p)return!1}return!0}function Uv(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function fU(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function pU(t){return(e=null,n=null)=>{if(!N.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return fU(r),gU(r,n?s=>t(s,n):t)}}function Nx(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=pU(r);e[n]=()=>i}}),e}function mT(t,e){typeof t=="function"?t(e):t.current=e}function gU(t,e){const n=t.ref;return Se(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?N.cloneElement(t,{ref:r=>{mT(n,r),mT(e,r)}}):N.cloneElement(t,{ref:e})}class mU{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Fv(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Fv(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Nx({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Uv(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Uv(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class vU{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Fv(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Nx({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Uv(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Ua(){const{dragDropManager:t}=N.useContext(Ix);return Se(t!=null,"Expected drag drop context"),t}function yU(t,e){const n=Ua(),r=N.useMemo(()=>new mU(n.getBackend()),[n]);return Da(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Da(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function _U(){const t=Ua();return N.useMemo(()=>new cU(t),[t])}class wU{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function EU(t,e,n){const r=N.useMemo(()=>new wU(t,e,n),[e,n]);return N.useEffect(()=>{r.spec=t},[t]),r}function TU(t){return N.useMemo(()=>{const e=t.type;return Se(e!=null,"spec.type must be defined"),e},[t])}function IU(t,e,n){const r=Ua(),i=EU(t,e,n),s=TU(t);Da(function(){if(s!=null){const[a,l]=dU(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function SU(t,e){const n=Ox(t,e);Se(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=_U(),i=yU(n.options,n.previewOptions);return IU(n,r,i),[Dx(n.collect,r,i),aU(i),lU(i)]}function bU(t){const n=Ua().getMonitor(),[r,i]=Rx(n,t);return N.useEffect(()=>n.subscribeToOffsetChange(i)),N.useEffect(()=>n.subscribeToStateChange(i)),r}function CU(t){return N.useMemo(()=>t.hooks.dropTarget(),[t])}function AU(t){const e=Ua(),n=N.useMemo(()=>new vU(e.getBackend()),[e]);return Da(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function xU(){const t=Ua();return N.useMemo(()=>new uU(t),[t])}function PU(t){const{accept:e}=t;return N.useMemo(()=>(Se(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class kU{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function RU(t,e){const n=N.useMemo(()=>new kU(t,e),[e]);return N.useEffect(()=>{n.spec=t},[t]),n}function DU(t,e,n){const r=Ua(),i=RU(t,e),s=PU(t);Da(function(){const[a,l]=hU(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function OU(t,e){const n=Ox(t,e),r=xU(),i=AU(n.options);return DU(n,r,i),[Dx(n.collect,r,i),CU(i)]}function Lx(t){let e=null;return()=>(e==null&&(e=t()),e)}function NU(t,e){return t.filter(n=>n!==e)}function LU(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class MU{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=LU(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=NU(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class VU{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Mx="__NATIVE_FILE__",Vx="__NATIVE_URL__",jx="__NATIVE_TEXT__",Fx="__NATIVE_HTML__";var vT=Object.freeze({__proto__:null,FILE:Mx,HTML:Fx,TEXT:jx,URL:Vx});function tm(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const $v={[Mx]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Fx]:{exposeProperties:{html:(t,e)=>tm(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Vx]:{exposeProperties:{urls:(t,e)=>tm(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[jx]:{exposeProperties:{text:(t,e)=>tm(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function jU(t,e){const n=$v[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new VU(n);return r.loadDataTransfer(e),r}function nm(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys($v).filter(n=>{const r=$v[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const FU=Lx(()=>/firefox/i.test(navigator.userAgent)),Ux=Lx(()=>!!window.safari);class yT{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,u=o.length-1,d;for(;l<=u;){d=Math.floor(.5*(l+u));const w=n[d];if(w<e)l=d+1;else if(w>e)u=d-1;else return r[d]}a=Math.max(0,u);const p=e-n[a],m=p*p;return r[a]+i[a]*p+s[a]*m+o[a]*p*m}constructor(e,n){const{length:r}=e,i=[];for(let w=0;w<r;w++)i.push(w);i.sort((w,E)=>e[w]<e[E]?-1:1);const s=[],o=[];let a,l;for(let w=0;w<r-1;w++)a=e[w+1]-e[w],l=n[w+1]-n[w],s.push(a),o.push(l/a);const u=[o[0]];for(let w=0;w<s.length-1;w++){const E=o[w],x=o[w+1];if(E*x<=0)u.push(0);else{a=s[w];const R=s[w+1],A=a+R;u.push(3*A/((A+R)/E+(A+a)/x))}}u.push(o[o.length-1]);const d=[],p=[];let m;for(let w=0;w<u.length-1;w++){m=o[w];const E=u[w],x=1/s[w],R=E+u[w+1]-m-m;d.push((m-E-R)*x),p.push(R*x*x)}this.xs=e,this.ys=n,this.c1s=u,this.c2s=d,this.c3s=p}}const UU=1;function $x(t){const e=t.nodeType===UU?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function Ad(t){return{x:t.clientX,y:t.clientY}}function $U(t){var e;return t.nodeName==="IMG"&&(FU()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function BU(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return Ux()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function zU(t,e,n,r,i){const s=$U(e),a=$x(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:u,offsetHeight:d}=t,{anchorX:p,anchorY:m}=r,{dragPreviewWidth:w,dragPreviewHeight:E}=BU(s,e,u,d),x=()=>{let W=new yT([0,.5,1],[l.y,l.y/d*E,l.y+E-d]).interpolate(m);return Ux()&&s&&(W+=(window.devicePixelRatio-1)*E),W},R=()=>new yT([0,.5,1],[l.x,l.x/u*w,l.x+w-u]).interpolate(p),{offsetX:A,offsetY:T}=i,I=A===0||A,M=T===0||T;return{x:I?A:R(),y:M?T:x()}}let qU=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function HU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _T(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){HU(t,i,n[i])})}return t}class WU{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return _T({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return _T({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(vT).some(n=>vT[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=jU(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&$x(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=Ad(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=nm(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const d=this.monitor.getSourceId(),p=this.sourceNodes.get(d),m=this.sourcePreviewNodes.get(d)||p;if(m){const{anchorX:w,anchorY:E,offsetX:x,offsetY:R}=this.getCurrentSourcePreviewNodeOptions(),I=zU(p,m,o,{anchorX:w,anchorY:E},{offsetX:x,offsetY:R});a.setDragImage(m,I.x,I.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=nm(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:Ad(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Ad(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else nm(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:Ad(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new qU(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new MU(this.isNodeInDocument)}}let xd;function KU(){return xd||(xd=new Image,xd.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),xd}const GU=function(e,n,r){return new WU(e,n,r)};function wT({isPremovedPiece:t=!1,piece:e,square:n,squares:r}){const{animationDuration:i,arePiecesDraggable:s,boardWidth:o,boardOrientation:a,chessPieces:l,currentPosition:u,deletePieceFromSquare:d,dropOffBoardAction:p,id:m,isDraggablePiece:w,isWaitingForAnimation:E,onPieceClick:x,onPieceDragBegin:R,onPieceDragEnd:A,onPieceDropOffBoard:T,onPromotionCheck:I,positionDifferences:M}=ys(),[z,W]=N.useState({opacity:1,zIndex:5,touchAction:"none",cursor:s&&w({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:P,isDragging:C},k,O]=SU(()=>({type:"piece",item:()=>(R(e,n),{piece:e,square:n,id:m}),end:(j,D)=>{A(e,n),!D.didDrop()&&(p==="trash"&&d(n),T==null||T(n,e))},collect:j=>({canDrag:w({piece:e,sourceSquare:n}),isDragging:!!j.isDragging()})}),[e,n,u,m]);O(KU(),{captureDraggingState:!0}),N.useEffect(()=>{W(j=>Object.assign(Object.assign({},j),{opacity:C?0:1}))},[C]),N.useEffect(()=>{var j;const D=(j=M.removed)===null||j===void 0?void 0:j[n];if(!M.added||!D)return;const mt=Object.entries(M.added).find(([St,Ut])=>Ut===D||I(n,St,D));if(E&&D&&mt&&!t){const St=n,Ut=mt[0];if(St&&Ut){const Ye=o/8;W(X=>Object.assign(Object.assign({},X),{transform:`translate(${(a==="black"?-1:1)*(Ut.charCodeAt(0)-St.charCodeAt(0))*Ye}px, ${(a==="black"?-1:1)*(Number(St[1])-Number(Ut[1]))*Ye}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[M]),N.useEffect(()=>{const{sourceSq:j}=L();j&&W(D=>Object.assign(Object.assign({},D),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[u]),N.useEffect(()=>{W(j=>Object.assign(Object.assign({},j),{cursor:s&&w({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,u,s]);function L(){return{sourceSq:r[n]}}return v.jsx("div",Object.assign({ref:s&&P?k:null,onClick:()=>x(e,n),"data-piece":e,style:z},{children:typeof l[e]=="function"?l[e]({squareWidth:o/8,isDragging:C,square:n}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:v.jsx("g",{children:l[e]})}))}))}function QU({square:t,squareColor:e,setSquares:n,squareHasPremove:r,children:i}){const s=N.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:l,clearArrows:u,currentPosition:d,currentRightClickDown:p,customBoardStyle:m,customDarkSquareStyle:w,customDropSquareStyle:E,customLightSquareStyle:x,customPremoveDarkSquareStyle:R,customPremoveLightSquareStyle:A,customSquare:T,customSquareStyles:I,drawNewArrow:M,handleSetPosition:z,handleSparePieceDrop:W,isWaitingForAnimation:P,lastPieceColour:C,lastSquareDraggedOver:k,onArrowDrawEnd:O,onDragOverSquare:L,onMouseOutSquare:j,onMouseOverSquare:D,onPieceDrop:mt,onPromotionCheck:St,onRightClickDown:Ut,onRightClickUp:Ye,onSquareClick:X,setLastSquareDraggedOver:he,setPromoteFromSquare:B,setPromoteToSquare:Me,setShowPromoteDialog:Re}=ys(),[{isOver:Be},st]=OU(()=>({accept:"piece",drop:kt,collect:fe=>({isOver:!!fe.isOver()})}),[t,d,mt,P,C]);function kt(fe){if(fe.isSpare){W(fe.piece,t);return}St(fe.square,t,fe.piece)?o?z(fe.square,t,fe.piece[0]==="w"?"wQ":"bQ"):(B(fe.square),Me(t),Re(!0)):z(fe.square,t,fe.piece,!0)}N.useEffect(()=>{if(s.current){const{x:fe,y:re}=s.current.getBoundingClientRect();n(pn=>Object.assign(Object.assign({},pn),{[t]:{x:fe,y:re}}))}},[a,l]);const Ge=Object.assign(Object.assign(Object.assign(Object.assign({},YU(t,l,m)),e==="black"?w:x),r&&(e==="black"?R:A)),Be&&E);return v.jsx("div",Object.assign({ref:st,style:Ge,"data-square-color":e,"data-square":t,onTouchMove:fe=>{var re;const pn=fe.touches[0],gn=document.elementsFromPoint(pn.clientX,pn.clientY),wt=(re=gn==null?void 0:gn.find(Lt=>Lt.getAttribute("data-square")))===null||re===void 0?void 0:re.getAttribute("data-square");wt&&wt!==k&&(he(wt),L(wt))},onMouseOver:fe=>{fe.buttons===2&&p&&M(p,t),!(fe.relatedTarget&&fe.currentTarget.contains(fe.relatedTarget))&&D(t)},onMouseOut:fe=>{fe.relatedTarget&&fe.currentTarget.contains(fe.relatedTarget)||j(t)},onMouseDown:fe=>{fe.button===2&&Ut(t)},onMouseUp:fe=>{fe.button===2&&(p&&O(p,t),Ye(t))},onDragEnter:()=>L(t),onClick:()=>{const fe=d[t];X(t,fe),u()},onContextMenu:fe=>{fe.preventDefault()}},{children:typeof T=="string"?v.jsx(T,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},TT(a)),ET),!r&&(I==null?void 0:I[t]))},{children:i})):v.jsx(T,Object.assign({ref:s,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},TT(a)),ET),!r&&(I==null?void 0:I[t]))},{children:i}))}))}const ET={display:"flex",justifyContent:"center"},TT=t=>({width:t/8,height:t/8}),YU=(t,e,n)=>n!=null&&n.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function XU(){const[t,e]=N.useState({}),{arePremovesAllowed:n,boardOrientation:r,boardWidth:i,currentPosition:s,id:o,premoves:a,showBoardNotation:l}=ys(),u=N.useMemo(()=>{const d=[];return n?(a.forEach((p,m)=>{const{sourceSq:w,targetSq:E,piece:x}=p,R=d.find(A=>{var T;return A.piece===x&&((T=A.premovesRoute.at(-1))===null||T===void 0?void 0:T.targetSq)===w});R?R.premovesRoute.push({sourceSq:w,targetSq:E,index:m}):d.push({piece:x,premovesRoute:[{sourceSq:w,targetSq:E,index:m}]})}),d):[]},[a]);return v.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((d,p)=>v.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((m,w)=>{const E=r==="black"?ah[7-w]+(p+1):ah[w]+(8-p),x=w%2===p%2?"white":"black",R=a.find(T=>T.sourceSq===E||T.targetSq===E),A=u.filter(({premovesRoute:T})=>{var I;return((I=T.at(-1))===null||I===void 0?void 0:I.targetSq)===E}).sort((T,I)=>{var M,z;return((M=I.premovesRoute.at(-1))===null||M===void 0?void 0:M.index)-((z=T.premovesRoute.at(-1))===null||z===void 0?void 0:z.index)}).at(0);return v.jsxs(QU,Object.assign({square:E,squareColor:x,setSquares:e,squareHasPremove:!!R},{children:[!R&&s[E]&&v.jsx(wT,{piece:s[E],square:E,squares:t}),A&&v.jsx(wT,{isPremovedPiece:!0,piece:A.piece,square:E,squares:t}),l&&v.jsx(F4,{row:p,col:w})]}),`${w}${p}`)})}),p.toString()))}))}const JU=()=>{const{arrows:t,newArrow:e,boardOrientation:n,boardWidth:r,customArrowColor:i}=ys(),s=[...t,e].filter(Boolean);return v.jsx("svg",Object.assign({width:r,height:r,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((o,a)=>{const[l,u,d]=o;if(l===u)return null;const p=Mv(n,r,l),m=Mv(n,r,u);let w=r/32;const E=a===t.length;t.some(I=>I[0]!==l&&I[1]===u)&&!E&&(w=r/16);const x=m.x-p.x,R=m.y-p.y,A=Math.hypot(R,x),T={x:p.x+x*(A-w)/A,y:p.y+R*(A-w)/A};return v.jsxs(N.Fragment,{children:[v.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:v.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:d??i})})),v.jsx("line",{x1:p.x,y1:p.y,x2:T.x,y2:T.y,opacity:E?"0.5":"0.65",stroke:d??i,strokeWidth:E?.9*r/40:r/40,markerEnd:`url(#arrowhead-${a})`})]},`${l}-${u}${E?"-active":""}`)})}))};function ZU({option:t}){const[e,n]=N.useState(!1),{boardWidth:r,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:l,promoteFromSquare:u,promoteToSquare:d,promotionDialogVariant:p}=ys(),m=()=>{switch(t[1]){case"Q":return s.backgroundColor;case"R":return o.backgroundColor;case"N":return p==="default"?o.backgroundColor:s.backgroundColor;case"B":return p==="default"?s.backgroundColor:o.backgroundColor}};return v.jsx("div",Object.assign({onClick:()=>{l(t,u??void 0,d??void 0)&&a(u,d,t,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?m():`${m()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?v.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:r/8,isDragging:!1})})):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:r/8,height:r/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:v.jsx("g",{children:i[t]})}))}))}function e6(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:n,promoteToSquare:r}=ys(),i=(r==null?void 0:r[1])==="1"?"b":"w",s=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=Mv(t,e,r||"a8");return v.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[n]),title:"Choose promotion piece"},{children:s.map(l=>v.jsx(ZU,{option:l},l))}))}const t6={whiteKing:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:v.jsx("g",{children:v.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function n6({children:t}){try{return v.jsx(v.Fragment,{children:t})}catch(e){return console.log(e),v.jsx(Bx,{showError:!0})}}function Bx({showError:t=!1}){return v.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[v.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:t6.whiteKing})),t&&v.jsx("h1",{children:"Something went wrong"})]}))}function r6(){const t=N.useRef(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:r,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:o}=ys();return N.useEffect(()=>{function a(l){t.current&&!t.current.contains(l.target)&&n()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?v.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:v.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},i6(e)),o)},{children:[v.jsx(XU,{}),v.jsx(JU,{}),s&&v.jsxs(v.Fragment,{children:[v.jsx("div",{onClick:()=>{i(!1),r==null||r()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),v.jsx(e6,{})]})]}))})):v.jsx(Bx,{})}const i6=t=>({cursor:"default",height:t,width:t});var vo;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(vo||(vo={}));class s6{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function o6(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function a6(t,e,n,r,i){if(!i)return!1;const s=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<i.length;++o){const a=i[o];if(a&&(a.start==null||s>=a.start)&&(a.end==null||s<=a.end))return!0}return!1}const l6={Left:1},c6={Left:0};function rm(t){return t.button===void 0||t.button===c6.Left}function u6(t){return t.buttons===void 0||(t.buttons&l6.Left)===0}function zx(t){return!!t.targetTouches}const h6=1;function d6(t){const e=t.nodeType===h6?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function f6(t,e){if(t.targetTouches.length===1)return np(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return np(t.touches[0])}function np(t,e){return zx(t)?f6(t,e):{x:t.clientX,y:t.clientY}}const IT=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),eu={[vo.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[vo.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[vo.keyboard]:{keydown:"keydown"}};class Du{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(Se(!Du.isSetUp,"Cannot have two Touch backends at the same time."),Du.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Du.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,i=!1){const s=IT?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=eu[o][n];a&&e.addEventListener(a,r,s)})}removeEventListener(e,n,r,i=!1){const s=IT?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=eu[o][n];a&&e.removeEventListener(a,r,s)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const i=s=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(s.type){case eu.mouse.move:o={x:s.clientX,y:s.clientY};break;case eu.touch.move:var a,l;o={x:((a=s.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((l=s.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,d=u&&n.contains(u);if(u===n||d)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&d6(s)},this.handleTopMoveStartCapture=i=>{rm(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!rm(i))return;const s=np(i);s&&(zx(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!rm(i))return;const s=i.type===eu.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,l=np(i,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&a6(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&o6(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const d=(o||[]).map(E=>this.targetNodes.get(E)).filter(E=>!!E),p=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,d):this.document.elementsFromPoint(l.x,l.y),m=[];for(const E in p){if(!p.hasOwnProperty(E))continue;let x=p[E];for(x!=null&&m.push(x);x;)x=x.parentElement,x&&m.indexOf(x)===-1&&m.push(x)}const w=m.filter(E=>d.indexOf(E)>-1).map(E=>this._getDropTargetId(E)).filter(E=>!!E).filter((E,x,R)=>R.indexOf(E)===x);if(a)for(const E in this.targetNodes){const x=this.targetNodes.get(E);if(u&&x&&x.contains(u)&&w.indexOf(E)===-1){w.unshift(E);break}}w.reverse(),this.actions.hover(w,{clientOffset:l})},this._getDropTargetId=i=>{const s=this.targetNodes.keys();let o=s.next();for(;o.done===!1;){const a=o.value;if(i===this.targetNodes.get(a))return a;o=s.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!u6(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new s6(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(vo.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(vo.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(vo.keyboard)}}const p6=function(e,n={},r={}){return new Du(e,n,r)},g6=N.createContext({isCustomDndProviderSet:!1}),m6=({children:t})=>v.jsx(v.Fragment,{children:t}),v6=({customDndBackend:t,customDndBackendOptions:e,children:n})=>{const[r,i]=N.useState(),[s,o]=N.useState(!1),[a,l]=N.useState(!1),{isCustomDndProviderSet:u}=N.useContext(g6);N.useEffect(()=>{l("ontouchstart"in window),o(!0),i(window)},[]);const d=u?m6:nU;return s?r?v.jsx(d,Object.assign({backend:t||(a?p6:GU),context:r,options:t?e:void 0},{children:n})):v.jsx(v.Fragment,{children:n}):null};function y6({boardContainer:t}){const{boardWidth:e,chessPieces:n,id:r,snapToCursor:i,allowDragOutsideBoard:s}=ys(),o=bU(m=>({item:m.getItem(),clientOffset:m.getClientOffset(),sourceClientOffset:m.getSourceClientOffset(),isDragging:m.isDragging()})),{isDragging:a,item:l,clientOffset:u,sourceClientOffset:d}=o,p=N.useCallback((m,w)=>{if(!m||!w)return{display:"none"};let{x:E,y:x}=i?m:w;const R=e/8/2;if(i&&(E-=R,x-=R),!s){const{left:T,top:I}=t,M=T-R,z=I-R,W=T+e-R,P=I+e-R;E=Math.max(M,Math.min(E,W)),x=Math.max(z,Math.min(x,P))}const A=`translate(${E}px, ${x}px)`;return{transform:A,WebkitTransform:A,touchAction:"none"}},[e,s,i,t]);return a&&l.id===r?v.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:v.jsx("div",Object.assign({style:p(u,d)},{children:typeof n[l.piece]=="function"?n[l.piece]({squareWidth:e/8,isDragging:!0}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:v.jsx("g",{children:n[l.piece]})}))}))})):null}const qx=N.forwardRef((t,e)=>{const{customDndBackend:n,customDndBackendOptions:r,onBoardWidthChange:i}=t,s=A4(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=N.useState(t.boardWidth),l=N.useRef(null),u=N.useRef(null),[d,p]=N.useState({left:0,top:0}),m=N.useMemo(()=>{var w;return(w=l.current)===null||w===void 0?void 0:w.getBoundingClientRect()},[l.current]);return N.useEffect(()=>{o&&(i==null||i(o))},[o]),N.useEffect(()=>{p({left:m!=null&&m.left?m==null?void 0:m.left:0,top:m!=null&&m.top?m==null?void 0:m.top:0})},[m]),N.useEffect(()=>{var w;if(t.boardWidth===void 0&&(!((w=l.current)===null||w===void 0)&&w.offsetWidth)){const E=new ResizeObserver(()=>{var x;a((x=l.current)===null||x===void 0?void 0:x.offsetWidth)});return E.observe(l.current),()=>{E.disconnect()}}},[l.current]),v.jsx(n6,{children:v.jsxs("div",Object.assign({ref:u,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[v.jsx("div",{ref:l,style:{width:"100%"}}),v.jsx(v6,Object.assign({customDndBackend:n,customDndBackendOptions:r},{children:o&&v.jsxs(j4,Object.assign({boardWidth:o},s,{ref:e},{children:[v.jsx(y6,{boardContainer:d}),v.jsx(r6,{})]}))}))]}))})});/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const In="w",kr="b",rn="p",Bv="n",of="b",fu="r",Hs="q",Yt="k",im="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Gn=-1,_6={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},ye={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Ce={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},sm={b:[16,32,17,15],w:[-16,-32,-17,-15]},ST={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},w6=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],E6=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],T6={p:1,n:2,b:4,r:8,q:16,k:32},I6="pnbrqkPNBRQK",bT=[Bv,of,fu,Hs],S6=7,b6=6,C6=1,A6=0,Pd={[Yt]:ye.KSIDE_CASTLE,[Hs]:ye.QSIDE_CASTLE},$s={w:[{square:Ce.a1,flag:ye.QSIDE_CASTLE},{square:Ce.h1,flag:ye.KSIDE_CASTLE}],b:[{square:Ce.a8,flag:ye.QSIDE_CASTLE},{square:Ce.h8,flag:ye.KSIDE_CASTLE}]},x6={b:C6,w:b6},P6=["1-0","0-1","1/2-1/2","*"];function ma(t){return t>>4}function lh(t){return t&15}function Hx(t){return"0123456789".indexOf(t)!==-1}function sr(t){const e=lh(t),n=ma(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function tu(t){return t===In?kr:In}function k6(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let a=0,l=!1;for(let u=0;u<i[o].length;u++)if(Hx(i[o][u])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(i[o][u],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of s){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function R6(t,e){const n=t.from,r=t.to,i=t.piece;let s=0,o=0,a=0;for(let l=0,u=e.length;l<u;l++){const d=e[l].from,p=e[l].to,m=e[l].piece;i===m&&n!==d&&r===p&&(s++,ma(n)===ma(d)&&o++,lh(n)===lh(d)&&a++)}return s>0?o>0&&a>0?sr(n):a>0?sr(n).charAt(1):sr(n).charAt(0):""}function Bs(t,e,n,r,i,s=void 0,o=ye.NORMAL){const a=ma(r);if(i===rn&&(a===S6||a===A6))for(let l=0;l<bT.length;l++){const u=bT[l];t.push({color:e,from:n,to:r,piece:i,captured:s,promotion:u,flags:o|ye.PROMOTION})}else t.push({color:e,from:n,to:r,piece:i,captured:s,flags:o})}function CT(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:rn:(e=e.toLowerCase(),e==="o"?Yt:e)}function om(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function am(t){return t.split(" ").slice(0,4).join(" ")}class Gi{constructor(e=im){Ar(this,"_board",new Array(128));Ar(this,"_turn",In);Ar(this,"_header",{});Ar(this,"_kings",{w:Gn,b:Gn});Ar(this,"_epSquare",-1);Ar(this,"_halfMoves",0);Ar(this,"_moveNumber",0);Ar(this,"_history",[]);Ar(this,"_comments",{});Ar(this,"_castling",{w:0,b:0});Ar(this,"_positionCount",{});this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Gn,b:Gn},this._turn=In,this._castling={w:0,b:0},this._epSquare=Gn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const a=["-","-","0","1"];e=i.concat(a.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:a,error:l}=k6(e);if(!a)throw new Error(l)}const s=i[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<s.length;a++){const l=s.charAt(a);if(l==="/")o+=8;else if(Hx(l))o+=parseInt(l,10);else{const u=l<"a"?In:kr;this._put({type:l.toLowerCase(),color:u},sr(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=ye.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=ye.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=ye.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=ye.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Gn:Ce[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var s,o;let e=0,n="";for(let a=Ce.a8;a<=Ce.h1;a++){if(this._board[a]){e>0&&(n+=e,e=0);const{color:l,type:u}=this._board[a];n+=l===In?u.toUpperCase():u.toLowerCase()}else e++;a+1&136&&(e>0&&(n+=e),a!==Ce.h1&&(n+="/"),e=0,a+=8)}let r="";this._castling[In]&ye.KSIDE_CASTLE&&(r+="K"),this._castling[In]&ye.QSIDE_CASTLE&&(r+="Q"),this._castling[kr]&ye.KSIDE_CASTLE&&(r+="k"),this._castling[kr]&ye.QSIDE_CASTLE&&(r+="q"),r=r||"-";let i="-";if(this._epSquare!==Gn){const a=this._epSquare+(this._turn===In?16:-16),l=[a+1,a-1];for(const u of l){if(u&136)continue;const d=this._turn;if(((s=this._board[u])==null?void 0:s.color)===d&&((o=this._board[u])==null?void 0:o.type)===rn){this._makeMove({color:d,from:u,to:this._epSquare,piece:rn,captured:rn,flags:ye.EP_CAPTURE});const p=!this._isKingAttacked(d);if(this._undoMove(),p){i=sr(this._epSquare);break}}}}return[n,this._turn,r,i,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==im?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(im)}get(e){return this._board[Ce[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(I6.indexOf(e.toLowerCase())===-1||!(r in Ce))return!1;const i=Ce[r];if(e==Yt&&!(this._kings[n]==Gn||this._kings[n]==i))return!1;const s=this._board[i];return s&&s.type===Yt&&(this._kings[s.color]=Gn),this._board[i]={type:e,color:n},e===Yt&&(this._kings[n]=i),!0}remove(e){const n=this.get(e);return delete this._board[Ce[e]],n&&n.type===Yt&&(this._kings[n.color]=Gn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,i,s,o,a,l,u,d,p,m,w,E;const e=((r=this._board[Ce.e1])==null?void 0:r.type)===Yt&&((i=this._board[Ce.e1])==null?void 0:i.color)===In,n=((s=this._board[Ce.e8])==null?void 0:s.type)===Yt&&((o=this._board[Ce.e8])==null?void 0:o.color)===kr;(!e||((a=this._board[Ce.a1])==null?void 0:a.type)!==fu||((l=this._board[Ce.a1])==null?void 0:l.color)!==In)&&(this._castling.w&=~ye.QSIDE_CASTLE),(!e||((u=this._board[Ce.h1])==null?void 0:u.type)!==fu||((d=this._board[Ce.h1])==null?void 0:d.color)!==In)&&(this._castling.w&=~ye.KSIDE_CASTLE),(!n||((p=this._board[Ce.a8])==null?void 0:p.type)!==fu||((m=this._board[Ce.a8])==null?void 0:m.color)!==kr)&&(this._castling.b&=~ye.QSIDE_CASTLE),(!n||((w=this._board[Ce.h8])==null?void 0:w.type)!==fu||((E=this._board[Ce.h8])==null?void 0:E.color)!==kr)&&(this._castling.b&=~ye.KSIDE_CASTLE)}_updateEnPassantSquare(){var s,o;if(this._epSquare===Gn)return;const e=this._epSquare+(this._turn===In?-16:16),n=this._epSquare+(this._turn===In?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((s=this._board[n])==null?void 0:s.color)!==tu(this._turn)||((o=this._board[n])==null?void 0:o.type)!==rn){this._epSquare=Gn;return}const i=a=>{var l,u;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((u=this._board[a])==null?void 0:u.type)===rn};r.some(i)||(this._epSquare=Gn)}_attacked(e,n){for(let r=Ce.a8;r<=Ce.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const i=this._board[r],s=r-n;if(s===0)continue;const o=s+119;if(w6[o]&T6[i.type]){if(i.type===rn){if(s>0){if(i.color===In)return!0}else if(i.color===kr)return!0;continue}if(i.type==="n"||i.type==="k")return!0;const a=E6[o];let l=r+a,u=!1;for(;l!==n;){if(this._board[l]!=null){u=!0;break}l+=a}if(!u)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(tu(e),n)}isAttacked(e,n){return this._attacked(n,Ce[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,i=0;for(let s=Ce.a8;s<=Ce.h1;s++){if(i=(i+1)%2,s&136){s+=7;continue}const o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===of&&n.push(i),r++)}if(r===2)return!0;if(r===3&&(e[of]===1||e[Bv]===1))return!0;if(r===e[of]+2){let s=0;const o=n.length;for(let a=0;a<o;a++)s+=n[a];if(s===0||s===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const i=this._moves({square:n,piece:r});return e?i.map(s=>this._makePretty(s)):i.map(s=>this._moveToSan(s,i))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var w;const i=r?r.toLowerCase():void 0,s=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=tu(a);let u=Ce.a8,d=Ce.h1,p=!1;if(i)if(i in Ce)u=d=Ce[i],p=!0;else return[];for(let E=u;E<=d;E++){if(E&136){E+=7;continue}if(!this._board[E]||this._board[E].color===l)continue;const{type:x}=this._board[E];let R;if(x===rn){if(s&&s!==x)continue;R=E+sm[a][0],this._board[R]||(Bs(o,a,E,R,rn),R=E+sm[a][1],x6[a]===ma(E)&&!this._board[R]&&Bs(o,a,E,R,rn,void 0,ye.BIG_PAWN));for(let A=2;A<4;A++)R=E+sm[a][A],!(R&136)&&(((w=this._board[R])==null?void 0:w.color)===l?Bs(o,a,E,R,rn,this._board[R].type,ye.CAPTURE):R===this._epSquare&&Bs(o,a,E,R,rn,rn,ye.EP_CAPTURE))}else{if(s&&s!==x)continue;for(let A=0,T=ST[x].length;A<T;A++){const I=ST[x][A];for(R=E;R+=I,!(R&136);){if(!this._board[R])Bs(o,a,E,R,x);else{if(this._board[R].color===a)break;Bs(o,a,E,R,x,this._board[R].type,ye.CAPTURE);break}if(x===Bv||x===Yt)break}}}}if((s===void 0||s===Yt)&&(!p||d===this._kings[a])){if(this._castling[a]&ye.KSIDE_CASTLE){const E=this._kings[a],x=E+2;!this._board[E+1]&&!this._board[x]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,E+1)&&!this._attacked(l,x)&&Bs(o,a,this._kings[a],x,Yt,void 0,ye.KSIDE_CASTLE)}if(this._castling[a]&ye.QSIDE_CASTLE){const E=this._kings[a],x=E-2;!this._board[E-1]&&!this._board[E-2]&&!this._board[E-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,E-1)&&!this._attacked(l,x)&&Bs(o,a,this._kings[a],x,Yt,void 0,ye.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const m=[];for(let E=0,x=o.length;E<x;E++)this._makeMove(o[E]),this._isKingAttacked(a)||m.push(o[E]),this._undoMove();return m}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const s=this._moves();for(let o=0,a=s.length;o<a;o++)if(e.from===sr(s[o].from)&&e.to===sr(s[o].to)&&(!("promotion"in s[o])||e.promotion===s[o].promotion)){r=s[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const i=this._makePretty(r);return this._makeMove(r),this._incPositionCount(i.after),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=tu(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&ye.EP_CAPTURE&&(this._turn===kr?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===Yt){if(this._kings[n]=e.to,e.flags&ye.KSIDE_CASTLE){const i=e.to-1,s=e.to+1;this._board[i]=this._board[s],delete this._board[s]}else if(e.flags&ye.QSIDE_CASTLE){const i=e.to+1,s=e.to-2;this._board[i]=this._board[s],delete this._board[s]}this._castling[n]=0}if(this._castling[n]){for(let i=0,s=$s[n].length;i<s;i++)if(e.from===$s[n][i].square&&this._castling[n]&$s[n][i].flag){this._castling[n]^=$s[n][i].flag;break}}if(this._castling[r]){for(let i=0,s=$s[r].length;i<s;i++)if(e.to===$s[r][i].square&&this._castling[r]&$s[r][i].flag){this._castling[r]^=$s[r][i].flag;break}}e.flags&ye.BIG_PAWN?n===kr?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=Gn,e.piece===rn?this._halfMoves=0:e.flags&(ye.CAPTURE|ye.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===kr&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,i=tu(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&ye.EP_CAPTURE){let s;r===kr?s=n.to-16:s=n.to+16,this._board[s]={type:rn,color:i}}else this._board[n.to]={type:n.captured,color:i};if(n.flags&(ye.KSIDE_CASTLE|ye.QSIDE_CASTLE)){let s,o;n.flags&ye.KSIDE_CASTLE?(s=n.to+1,o=n.to-1):(s=n.to-2,o=n.to+1),this._board[s]=this._board[o],delete this._board[o]}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let i=!1;for(const m in this._header)r.push("["+m+' "'+this._header[m]+'"]'+e),i=!0;i&&this._history.length&&r.push(e);const s=m=>{const w=this._comments[this.fen()];if(typeof w<"u"){const E=m.length>0?" ":"";m=`${m}${E}{${w}}`}return m},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(s(""));o.length>0;){l=s(l);const m=o.pop();if(!m)break;if(!this._history.length&&m.color==="b"){const w=`${this._moveNumber}. ...`;l=l?`${l} ${w}`:w}else m.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(m,this._moves({legal:!0})),this._makeMove(m)}if(l.length&&a.push(s(l)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},d=function(m,w){for(const E of w.split(" "))if(E){if(m+E.length>n){for(;u();)m--;r.push(e),m=0}r.push(E),m+=E.length,r.push(" "),m++}return u()&&m--,m};let p=0;for(let m=0;m<a.length;m++){if(p+a[m].length>n&&a[m].includes("{")){p=d(p,a[m]);continue}p+a[m].length>n&&m!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),p=0):m!==0&&(r.push(" "),p++),r.push(a[m]),p+=a[m].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){function i(I){return I.replace(/\\/g,"\\")}function s(I){const M={},z=I.split(new RegExp(i(r)));let W="",P="";for(let C=0;C<z.length;C++){const k=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;W=z[C].replace(k,"$1"),P=z[C].replace(k,"$2"),W.trim().length>0&&(M[W]=P)}return M}e=e.trim();const a=new RegExp("^(\\[((?:"+i(r)+")|.)*\\])((?:\\s*"+i(r)+"){2}|(?:\\s*"+i(r)+")*$)").exec(e),l=a&&a.length>=2?a[1]:"";this.reset();const u=s(l);let d="";for(const I in u)I.toLowerCase()==="fen"&&(d=u[I]),this.header(I,u[I]);if(!n)d&&this.load(d,{preserveHeaders:!0});else if(u.SetUp==="1"){if(!("FEN"in u))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(u.FEN,{preserveHeaders:!0})}function p(I){return Array.from(I).map(function(M){return M.charCodeAt(0)<128?M.charCodeAt(0).toString(16):encodeURIComponent(M).replace(/%/g,"").toLowerCase()}).join("")}function m(I){return I.length==0?"":decodeURIComponent("%"+(I.match(/.{1,2}/g)||[]).join("%"))}const w=function(I){return I=I.replace(new RegExp(i(r),"g")," "),`{${p(I.slice(1,I.length-1))}}`},E=function(I){if(I.startsWith("{")&&I.endsWith("}"))return m(I.slice(1,I.length-1))};let x=e.replace(l,"").replace(new RegExp(`({[^}]*})+?|;([^${i(r)}]*)`,"g"),function(I,M,z){return M!==void 0?w(M):" "+w(`{${z.slice(1)}}`)}).replace(new RegExp(i(r),"g")," ");const R=/(\([^()]+\))+?/g;for(;R.test(x);)x=x.replace(R,"");x=x.replace(/\d+\.(\.\.)?/g,""),x=x.replace(/\.\.\./g,""),x=x.replace(/\$\d+/g,"");let A=x.trim().split(new RegExp(/\s+/));A=A.filter(I=>I!=="");let T="";for(let I=0;I<A.length;I++){const M=E(A[I]);if(M!==void 0){this._comments[this.fen()]=M;continue}const z=this._moveFromSan(A[I],n);if(z==null)if(P6.indexOf(A[I])>-1)T=A[I];else throw new Error(`Invalid move in PGN: ${A[I]}`);else T="",this._makeMove(z),this._incPositionCount(this.fen())}T&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",T)}_moveToSan(e,n){let r="";if(e.flags&ye.KSIDE_CASTLE)r="O-O";else if(e.flags&ye.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==rn){const i=R6(e,n);r+=e.piece.toUpperCase()+i}e.flags&(ye.CAPTURE|ye.EP_CAPTURE)&&(e.piece===rn&&(r+=sr(e.from)[0]),r+="x"),r+=sr(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=om(e);let i=CT(r),s=this._moves({legal:!0,piece:i});for(let m=0,w=s.length;m<w;m++)if(r===om(this._moveToSan(s[m],s)))return s[m];if(n)return null;let o,a,l,u,d,p=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],u=a[3],d=a[4],l.length==1&&(p=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],u=a[3],d=a[4],l.length==1&&(p=!0))),i=CT(r),s=this._moves({legal:!0,piece:o||i}),!u)return null;for(let m=0,w=s.length;m<w;m++)if(l){if((!o||o.toLowerCase()==s[m].piece)&&Ce[l]==s[m].from&&Ce[u]==s[m].to&&(!d||d.toLowerCase()==s[m].promotion))return s[m];if(p){const E=sr(s[m].from);if((!o||o.toLowerCase()==s[m].piece)&&Ce[u]==s[m].to&&(l==E[0]||l==E[1])&&(!d||d.toLowerCase()==s[m].promotion))return s[m]}}else if(r===om(this._moveToSan(s[m],s)).replace("x",""))return s[m];return null}ascii(){let e=`   +------------------------+
`;for(let n=Ce.a8;n<=Ce.h1;n++){if(lh(n)===0&&(e+=" "+"87654321"[ma(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===In?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const i=this._turn;for(let s=0,o=n.length;s<o;s++)this._makeMove(n[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:i,to:s,flags:o,captured:a,promotion:l}=e;let u="";for(const w in ye)ye[w]&o&&(u+=_6[w]);const d=sr(i),p=sr(s),m={color:n,piece:r,from:d,to:p,san:this._moveToSan(e,this._moves({legal:!0})),flags:u,lan:d+p,before:this.fen(),after:""};return this._makeMove(e),m.after=this.fen(),this._undoMove(),a&&(m.captured=a),l&&(m.promotion=l,m.lan+=l),m}turn(){return this._turn}board(){const e=[];let n=[];for(let r=Ce.a8;r<=Ce.h1;r++)this._board[r]==null?n.push(null):n.push({square:sr(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in Ce){const n=Ce[e];return(ma(n)+lh(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){const n=am(e);return this._positionCount[n]||0}_incPositionCount(e){const n=am(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=am(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[Yt,Hs])n[i]!==void 0&&(n[i]?this._castling[e]|=Pd[i]:this._castling[e]&=~Pd[i]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[Yt]===void 0||n[Yt]===r[Yt])&&(n[Hs]===void 0||n[Hs]===r[Hs])}getCastlingRights(e){return{[Yt]:(this._castling[e]&Pd[Yt])!==0,[Hs]:(this._castling[e]&Pd[Hs])!==0}}moveNumber(){return this._moveNumber}}const Pl=({timeInMinutes:t,increment:e,isActive:n,color:r,onTimeout:i,onTimeUpdate:s,remainingTime:o})=>{const[a,l]=N.useState(o||t*60),u=N.useRef(null);N.useEffect(()=>{l(o||t*60)},[o,t]),N.useEffect(()=>(n&&a>0?u.current=setInterval(()=>{l(p=>{const m=p-1;return s(m),m})},1e3):!n&&u.current&&(clearInterval(u.current),e>0&&a>0&&l(p=>{const m=p+e;return s(m),m})),()=>{u.current&&clearInterval(u.current)}),[n,e]),N.useEffect(()=>{a<=0&&(u.current&&clearInterval(u.current),i())},[a,i]);const d=p=>{const m=Math.floor(p/60),w=p%60;return`${m}:${w.toString().padStart(2,"0")}`};return v.jsx("div",{className:`game-clock ${r} ${n?"active":""}`,children:d(a)})},pu=({isPuzzle:t=!1,timeControl:e})=>{const[n,r]=N.useState(null),[i,s]=N.useState(null),[o,a]=N.useState("Cargando puzzle..."),[l,u]=N.useState(0),[d,p]=N.useState("white");N.useEffect(()=>{let E=!0,x=!1;return t&&(async()=>{try{if(n||i||x)return;x=!0;const A=await fetch("https://lichess.org/api/puzzle/daily");if(!A.ok)throw new Error("Error al cargar el puzzle");const T=await A.json(),I=new Gi;try{I.loadPgn(T.game.pgn);const M=I.history();console.log("Movimientos totales:",M.length),console.log("Initial Ply:",T.puzzle.initialPly),console.log("Moves:",M),I.reset();for(let P=0;P<T.puzzle.initialPly;P++)I.move(M[P]);const z=I.fen(),W=M[T.puzzle.initialPly];if(console.log("Siguiente movimiento:",W),!W){console.error("No se encontr el siguiente movimiento"),E&&a("Error al cargar el puzzle. Intenta recargar la pgina.");return}E&&(s({fen:z,moves:T.puzzle.solution,rating:T.puzzle.rating,themes:T.puzzle.themes}),r(new Gi(z)),a("Observa el movimiento del oponente..."),setTimeout(()=>{if(!E)return;const P=new Gi(z);try{if(console.log("Intentando mover:",W),!P.move(W))throw new Error(`Movimiento invlido: ${W}`);r(P),a("Tu turno - Encuentra el mejor movimiento")}catch(C){console.error("Error al realizar el movimiento:",C),a("Error al cargar el puzzle. Intenta recargar la pgina.")}},1e3))}catch(M){console.error("Error al procesar el puzzle:",M),E&&a("Error al cargar el puzzle. Intenta recargar la pgina.")}}catch(A){console.error("Error al obtener el puzzle:",A),E&&a("Error al cargar el puzzle. Intenta recargar la pgina.")}})(),()=>{E=!1}},[t]);function m(E){return E.includes("O-O-O")?{from:"e1",to:"c1"}:E.includes("O-O")?{from:"e1",to:"g1"}:{from:E.slice(0,2),to:E.slice(2,4),promotion:E.length===5?E[4]:void 0}}function w(E){if(!n||!i)return!1;try{const x=new Gi(n.fen());if(x.move(E)){const A=i.moves[l],T=m(A),I=x.fen().split(" ")[0],M=new Gi(n.fen()),W=M.move(T)?M.fen().split(" ")[0]:"";if(I===W)return r(x),l===i.moves.length-1?(a("Felicidades!  Has resuelto el puzzle correctamente."),!0):(u(l+1),setTimeout(()=>{if(l+1<i.moves.length){const P=i.moves[l+1],C=P.slice(0,2),k=P.slice(2,4);x.move({from:C,to:k,promotion:P.length===5?P[4]:void 0})&&(r(new Gi(x.fen())),u(l+2),a("Tu turno"))}},500),!0)}return a("Movimiento incorrecto. Intenta de nuevo."),!1}catch(x){return console.error("Error en makeAMove:",x),!1}}return v.jsxs("div",{className:"board-container",children:[e&&v.jsx(Pl,{timeInMinutes:e.time,increment:e.increment,isActive:d==="black",color:"black",onTimeout:async()=>{},onTimeUpdate:E=>{},remainingTime:e.time*60}),n&&v.jsx(qx,{position:n.fen(),boardOrientation:"white",onPieceDrop:(E,x)=>{const R=w({from:E,to:x,promotion:"q"});return R&&p(n.turn()==="w"?"white":"black"),R}}),e&&v.jsx(Pl,{timeInMinutes:e.time,increment:e.increment,isActive:d==="white",color:"white",onTimeout:async()=>{},onTimeUpdate:E=>{},remainingTime:e.time*60}),o&&v.jsx("div",{className:"puzzle-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:i&&l===i.moves.length-1?"#e6ffe6":"#fff",border:"1px solid #ccc",borderRadius:"4px"},children:o})]})};class kl{constructor(){this.cache=new Map}static getInstance(){return kl.instance||(kl.instance=new kl),kl.instance}set(e,n,r=5*60*1e3){this.cache.set(e,{value:n,timestamp:Date.now(),expiresIn:r})}get(e){const n=this.cache.get(e);return n?Date.now()-n.timestamp>n.expiresIn?(this.cache.delete(e),null):n.value:null}clear(){this.cache.clear()}}const Wx=N.createContext({currentUser:null,userData:null,loading:!0,refreshUserData:async()=>{}}),D6=()=>N.useContext(Wx),O6=({children:t})=>{const[e,n]=N.useState(null),[r,i]=N.useState(null),[s,o]=N.useState(!0),a=kl.getInstance(),l=async p=>{const m=a.get(`userData_${p}`);if(m)return m;const w=await Ci(Qe(Ke,"users",p));if(w.exists()){const E=w.data();return a.set(`userData_${p}`,E,5*60*1e3),E}return null},u=async()=>{if(e){const p=await l(e.uid);i(p)}};N.useEffect(()=>{const p=tt.onAuthStateChanged(async m=>{if(n(m),m){const w=await l(m.uid);i(w)}else i(null),a.clear();o(!1)});return()=>p()},[]);const d={currentUser:e,userData:r,loading:s,refreshUserData:u};return v.jsx(Wx.Provider,{value:d,children:!s&&t})},Ah=N.memo(()=>{console.log("Renderizando Header");const{currentUser:t}=D6(),e=async()=>{try{await AL(tt)}catch(n){console.error("Error al cerrar sesin:",n)}};return v.jsxs("header",{className:"main-header",children:[v.jsxs(hr,{to:"/",className:"logo",children:[v.jsx("i",{className:"fas fa-chess-knight logo-icon"}),v.jsxs("div",{className:"logo-text",children:[v.jsx("span",{className:"logo-chess",children:"CHESS"}),v.jsx("span",{className:"logo-match",children:"MATCH"})]})]}),v.jsx("div",{className:"auth-buttons",children:t?v.jsxs("button",{onClick:e,className:"btn-logout",children:[v.jsx("i",{className:"fas fa-sign-out-alt"}),"Cerrar sesin"]}):v.jsxs(v.Fragment,{children:[v.jsx(hr,{to:"/register",className:"btn-signup",children:"Registrarse"}),v.jsx(hr,{to:"/login",className:"btn-login",children:"Iniciar sesin"})]})})]})}),AT=()=>(N.useEffect(()=>{console.log("Home montado");const t=document.querySelectorAll(".game-button");console.log("Botones encontrados:",t.length)},[]),console.log("Renderizando componente Home"),console.log("Estilos cargados:",document.styleSheets),v.jsxs("div",{className:"page-container",children:[v.jsx(Ah,{}),v.jsx("div",{className:"home-container",children:v.jsxs("div",{className:"game-options",children:[v.jsx("h1",{children:"Play Chess Online on the #1 Site!"}),v.jsxs("div",{className:"stats",children:[v.jsx("span",{className:"games-today",children:"13,562,492 Games Today"}),v.jsx("span",{className:"playing-now",children:"118,172 Playing Now"})]}),v.jsxs("div",{className:"game-buttons",children:[v.jsxs(hr,{to:"/play/online",className:"game-button primary",children:[v.jsx("span",{className:"icon",children:""}),v.jsxs("div",{className:"button-content",children:[v.jsx("h3",{children:"Play Online"}),v.jsx("p",{children:"Play with someone at your level"})]})]}),v.jsxs(hr,{to:"/play/computer",className:"game-button",children:[v.jsx("span",{className:"icon",children:""}),v.jsxs("div",{className:"button-content",children:[v.jsx("h3",{children:"Play Computer"}),v.jsx("p",{children:"Play vs customizable training bots"})]})]})]}),v.jsxs("div",{className:"puzzle-section",children:[v.jsx("h2",{children:"Solve Chess Puzzles"}),v.jsx("div",{className:"mini-board",children:v.jsx(pu,{isPuzzle:!0})}),v.jsx("div",{className:"quote",children:v.jsxs("p",{children:['"En Ajedrez, el vencedor es quien hace la siguiente jugada al ltimo error." ',v.jsx("br",{})," GM S. Tartakower"]})}),v.jsx("button",{className:"game-button",children:"Solve Puzzles"})]}),v.jsx("button",{className:"game-button chess-today",children:"Chess Today"})]})})]}));let N6={data:""},L6=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||N6,M6=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,V6=/\/\*[^]*?\*\/|  +/g,xT=/\n+/g,Js=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Js(o,s):s+"{"+Js(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Js(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Js.p?Js.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Hi={},Kx=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Kx(t[n]);return e}return t},j6=(t,e,n,r,i)=>{let s=Kx(t),o=Hi[s]||(Hi[s]=(l=>{let u=0,d=11;for(;u<l.length;)d=101*d+l.charCodeAt(u++)>>>0;return"go"+d})(s));if(!Hi[o]){let l=s!==t?t:(u=>{let d,p,m=[{}];for(;d=M6.exec(u.replace(V6,""));)d[4]?m.shift():d[3]?(p=d[3].replace(xT," ").trim(),m.unshift(m[0][p]=m[0][p]||{})):m[0][d[1]]=d[2].replace(xT," ").trim();return m[0]})(t);Hi[o]=Js(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Hi.g?Hi.g:null;return n&&(Hi.g=Hi[o]),((l,u,d,p)=>{p?u.data=u.data.replace(p,l):u.data.indexOf(l)===-1&&(u.data=d?l+u.data:u.data+l)})(Hi[o],e,r,a),o},F6=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Js(a,""):a===!1?"":a}return r+i+(o??"")},"");function Gp(t){let e=this||{},n=t.call?t(e.p):t;return j6(n.unshift?n.raw?F6(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,L6(e.target),e.g,e.o,e.k)}let Gx,zv,qv;Gp.bind({g:1});let ds=Gp.bind({k:1});function U6(t,e,n,r){Js.p=e,Gx=t,zv=n,qv=r}function Oo(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:zv&&zv()},a),n.o=/ *go\d+/.test(l),a.className=Gp.apply(n,r)+(l?" "+l:"");let u=t;return t[0]&&(u=a.as||t,delete a.as),qv&&u[0]&&qv(a),Gx(u,a)}return i}}var $6=t=>typeof t=="function",Hv=(t,e)=>$6(t)?t(e):t,B6=(()=>{let t=0;return()=>(++t).toString()})(),z6=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),q6=20,af=new Map,H6=1e3,PT=t=>{if(af.has(t))return;let e=setTimeout(()=>{af.delete(t),Qp({type:4,toastId:t})},H6);af.set(t,e)},W6=t=>{let e=af.get(t);e&&clearTimeout(e)},Wv=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,q6)};case 1:return e.toast.id&&W6(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?Wv(t,{type:1,toast:n}):Wv(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?PT(r):t.toasts.forEach(s=>{PT(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},K6=[],lm={toasts:[],pausedAt:void 0},Qp=t=>{lm=Wv(lm,t),K6.forEach(e=>{e(lm)})},G6=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||B6()}),xh=t=>(e,n)=>{let r=G6(e,t,n);return Qp({type:2,toast:r}),r.id},Ie=(t,e)=>xh("blank")(t,e);Ie.error=xh("error");Ie.success=xh("success");Ie.loading=xh("loading");Ie.custom=xh("custom");Ie.dismiss=t=>{Qp({type:3,toastId:t})};Ie.remove=t=>Qp({type:4,toastId:t});Ie.promise=(t,e,n)=>{let r=Ie.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(Ie.success(Hv(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Ie.error(Hv(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var Q6=ds`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Y6=ds`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X6=ds`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,J6=Oo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Q6} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Y6} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${X6} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Z6=ds`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,e9=Oo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Z6} 1s linear infinite;
`,t9=ds`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,n9=ds`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,r9=Oo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${t9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${n9} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,i9=Oo("div")`
  position: absolute;
`,s9=Oo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,o9=ds`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,a9=Oo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${o9} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,l9=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(a9,null,e):e:n==="blank"?null:N.createElement(s9,null,N.createElement(e9,{...r}),n!=="loading"&&N.createElement(i9,null,n==="error"?N.createElement(J6,{...r}):N.createElement(r9,{...r})))},c9=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,u9=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,h9="0%{opacity:0;} 100%{opacity:1;}",d9="0%{opacity:1;} 100%{opacity:0;}",f9=Oo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,p9=Oo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,g9=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=z6()?[h9,d9]:[c9(n),u9(n)];return{animation:e?`${ds(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ds(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};N.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?g9(t.position||e||"top-center",t.visible):{opacity:0},s=N.createElement(l9,{toast:t}),o=N.createElement(p9,{...t.ariaProps},Hv(t.message,t));return N.createElement(f9,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):N.createElement(N.Fragment,null,s,o))});U6(N.createElement);Gp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const m9=()=>{var m;const t=La(),e=xo(),n=window.location.pathname.split("/challenge/")[1],r=n?`/challenge/${n}`:((m=e.state)==null?void 0:m.redirect)||"/lobby",[i,s]=N.useState(""),[o,a]=N.useState(""),[l,u]=N.useState(!1),d=async w=>{w.preventDefault();try{await IL(tt,i,o),Ie.success("Bienvenido de nuevo!"),t(r)}catch(E){console.error("Error al iniciar sesin:",E),E.code==="auth/invalid-credential"?Ie.error("Email o contrasea incorrectos"):E.code==="auth/user-not-found"?Ie.error("Usuario no encontrado"):E.code==="auth/wrong-password"?Ie.error("Contrasea incorrecta"):Ie.error("Error al iniciar sesin")}},p=async()=>{const w=new bi;try{console.log("Iniciando login con Google...");const E=await Yb(tt,w),x=await Ci(Qe(Ke,"users",E.user.uid));if(console.log("Usuario existe en Firestore:",x.exists()),!x.exists()){console.log("Redirigiendo a complete-profile con redirectTo:",r),t("/complete-profile",{state:{uid:E.user.uid,email:E.user.email,photoURL:E.user.photoURL,redirectTo:r}});return}console.log("Redirigiendo a:",r),t(r)}catch(E){console.error("Error con Google login:",E),Ie.error("Error al iniciar sesin con Google")}};return v.jsxs("div",{className:"page-container",children:[v.jsx(Ah,{}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx(hr,{to:"/",className:"back-button",children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsx("h2",{children:"Ingresa tu email y contrasea"}),v.jsx("p",{className:"auth-subtitle",children:"Esto te permite iniciar sesin en cualquier dispositivo"}),v.jsxs("form",{onSubmit:d,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-envelope"}),v.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:w=>s(w.target.value),required:!0})]})}),v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-lock"}),v.jsx("input",{type:l?"text":"password",placeholder:"Contrasea",value:o,onChange:w=>a(w.target.value),required:!0}),v.jsx("button",{type:"button",className:"toggle-password",onClick:()=>u(!l),children:v.jsx("i",{className:`fas fa-eye${l?"-slash":""}`})})]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Continuar"})]}),v.jsx("div",{className:"auth-divider",children:"O"}),v.jsxs("div",{className:"social-buttons",children:[v.jsxs("button",{className:"btn-social google",onClick:p,children:[v.jsx("i",{className:"fab fa-google"}),"Continuar con Google"]}),v.jsxs("button",{className:"btn-social apple",children:[v.jsx("i",{className:"fab fa-apple"}),"Continuar con Apple"]})]}),v.jsxs("div",{className:"auth-links",children:[v.jsx(hr,{to:"/forgot-password",children:"Olvidaste tu contrasea?"}),v.jsx(hr,{to:"/register",children:"No tienes una cuenta? Regstrate"})]})]})})]})},v9=()=>{const t=La(),[e,n]=N.useState({username:"",email:"",password:""}),r=async a=>{if(!/^[a-zA-Z0-9_]{3,15}$/.test(a))return!1;const l=Qe(Ke,"usernames",a.toLowerCase());return!(await Ci(l)).exists()},i=async(a,l,u,d)=>{try{await Zf(Qe(Ke,"usernames",l.toLowerCase()),{uid:a}),await Zf(Qe(Ke,"users",a),{username:l,email:u,createdAt:new Date,rating:1200,photoURL:d||null}),await jb(tt.currentUser,{displayName:l,photoURL:d||null})}catch(p){throw console.error("Error guardando datos de usuario:",p),p}},s=async a=>{a.preventDefault();try{if(!await r(e.username)){Ie.error("Nombre de usuario no vlido o ya est en uso");return}const u=await TL(tt,e.email,e.password);await i(u.user.uid,e.username,e.email),Ie.success("Cuenta creada exitosamente!"),t("/lobby")}catch(l){l.code==="auth/email-already-in-use"?Ie.error("Este email ya est registrado"):Ie.error("Error al crear la cuenta")}},o=async()=>{var a,l;try{const u=new bi,d=await Yb(tt,u);let p=((a=d.user.email)==null?void 0:a.split("@")[0])||"",m=await r(p),w=1;for(;!m&&w<100;)p=`${(l=d.user.email)==null?void 0:l.split("@")[0]}_${w}`,m=await r(p),w++;if(!m){Ie.error("No se pudo generar un nombre de usuario nico");return}await i(d.user.uid,p,d.user.email,d.user.photoURL||void 0),Ie.success("Cuenta creada exitosamente!"),t("/lobby")}catch(u){u.code==="auth/popup-closed-by-user"?Ie.error("Registro cancelado"):Ie.error("Error al registrarse con Google")}};return v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx(hr,{to:"/",className:"back-button",children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsxs(hr,{to:"/",className:"logo",children:[v.jsx("i",{className:"fas fa-chess-knight logo-icon"}),v.jsxs("div",{className:"logo-text",children:[v.jsx("span",{className:"logo-chess",children:"CHESS"}),v.jsx("span",{className:"logo-match",children:"MATCH"})]})]}),v.jsx("h2",{children:"Crear cuenta"}),v.jsx("p",{className:"auth-subtitle",children:"Este es el nombre que vern tus amigos y otros jugadores"}),v.jsxs("form",{onSubmit:s,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-user"}),v.jsx("input",{type:"text",placeholder:"Nombre de usuario",value:e.username,onChange:a=>n({...e,username:a.target.value}),required:!0,minLength:3,maxLength:15,pattern:"^[a-zA-Z0-9_]+$",title:"El nombre de usuario debe tener entre 3 y 15 caracteres y solo puede contener letras, nmeros y guiones bajos"})]})}),v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-envelope"}),v.jsx("input",{type:"email",placeholder:"Email",value:e.email,onChange:a=>n({...e,email:a.target.value}),required:!0})]})}),v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-lock"}),v.jsx("input",{type:"password",placeholder:"Contrasea",value:e.password,onChange:a=>n({...e,password:a.target.value}),required:!0})]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Crear cuenta"})]}),v.jsx("div",{className:"auth-divider",children:"O"}),v.jsxs("div",{className:"social-buttons",children:[v.jsxs("button",{className:"btn-social google",onClick:o,children:[v.jsx("i",{className:"fab fa-google"}),"Continuar con Google"]}),v.jsxs("button",{className:"btn-social apple",children:[v.jsx("i",{className:"fab fa-apple"}),"Continuar con Apple"]})]}),v.jsx("div",{className:"auth-links",children:v.jsx(hr,{to:"/login",children:"Ya tienes una cuenta? Inicia sesin"})})]})})},y9=()=>{const[t,e]=N.useState(""),[n,r]=N.useState(!1),i=s=>{s.preventDefault(),console.log("Recuperar contrasea para:",t),r(!0)};return v.jsxs("div",{className:"page-container",children:[v.jsx(Ah,{}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx(hr,{to:"/login",className:"back-button",children:v.jsx("i",{className:"fas fa-arrow-left"})}),n?v.jsxs("div",{className:"success-message",children:[v.jsx("i",{className:"fas fa-check-circle"}),v.jsx("h2",{children:"Email enviado!"}),v.jsxs("p",{children:["Hemos enviado las instrucciones para restablecer tu contrasea a ",t]}),v.jsx("p",{className:"small",children:"Si no recibes el email en unos minutos, revisa tu carpeta de spam"}),v.jsx(hr,{to:"/login",className:"btn-continue",children:"Volver al inicio de sesin"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h2",{children:"Recuperar contrasea"}),v.jsx("p",{className:"auth-subtitle",children:"Ingresa tu email y te enviaremos instrucciones para restablecer tu contrasea"}),v.jsxs("form",{onSubmit:i,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-envelope"}),v.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:s=>e(s.target.value),required:!0})]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Enviar instrucciones"})]})]})]})})]})},$l=[{name:"Bullet",time:1,increment:0},{name:"Bullet",time:1,increment:1},{name:"Blitz",time:3,increment:0},{name:"Blitz",time:3,increment:2},{name:"Blitz",time:5,increment:0},{name:"Blitz",time:5,increment:3},{name:"Rpida",time:10,increment:0},{name:"Rpida",time:15,increment:10},{name:"Clsica",time:30,increment:0}];$l.find(t=>t.time===3&&t.increment===2)||$l[0];const Qx=({selectedOption:t,options:e,onChange:n})=>{const r=Array.from(new Set(e.map(i=>i.name)));return v.jsxs("div",{className:"time-control",children:[v.jsx("h3",{children:"Control de Tiempo"}),r.map(i=>v.jsxs("div",{className:"time-category",children:[v.jsx("span",{children:i}),v.jsx("div",{className:"time-category-options",children:e.filter(s=>s.name===i).map(s=>v.jsxs("button",{className:`time-option ${s.time===t.time&&s.increment===t.increment?"selected":""}`,onClick:()=>n(s),children:[v.jsx("span",{className:"time",children:`${s.time}+${s.increment}`}),v.jsx("span",{className:"name",children:s.name})]},`${s.time}-${s.increment}`))})]},i))]})},Yx=({selectedCount:t,onChange:e})=>{const n=[1,3,5,7,10];return v.jsxs("div",{className:"game-count-container",children:[v.jsx("h3",{children:"Nmero de partidas"}),v.jsx("div",{className:"game-count-options",children:n.map(r=>v.jsx("button",{className:`game-count-button ${t===r?"active":""}`,onClick:()=>e(r),children:r===1?"1 partida":`Al mejor de ${r}`},r))})]})},_9=({config:t,onChange:e})=>v.jsxs("div",{className:"match-settings",children:[v.jsx(Qx,{selectedOption:t.timeControl,options:$l,onChange:n=>e({...t,timeControl:n})}),v.jsx(Yx,{selectedCount:t.numberOfGames,onChange:n=>e({...t,numberOfGames:n})}),v.jsxs("div",{className:"setting-group",children:[v.jsx("h3",{children:"Tipo de Match"}),v.jsxs("div",{className:"toggle-group",children:[v.jsx("button",{className:t.rated?"selected":"",onClick:()=>e({...t,rated:!0}),children:"Clasificatorio"}),v.jsx("button",{className:t.rated?"":"selected",onClick:()=>e({...t,rated:!1}),children:"Amistoso"})]})]}),v.jsxs("div",{className:"setting-group",children:[v.jsx("h3",{children:"Color de Piezas"}),v.jsxs("div",{className:"color-selector",children:[v.jsxs("button",{className:t.color==="random"?"selected":"",onClick:()=>e({...t,color:"random"}),children:[v.jsx("i",{className:"fas fa-random"}),"Aleatorio"]}),v.jsxs("button",{className:t.color==="white"?"selected":"",onClick:()=>e({...t,color:"white"}),children:[v.jsx("i",{className:"fas fa-chess-pawn"}),"Blancas"]}),v.jsxs("button",{className:t.color==="black"?"selected":"",onClick:()=>e({...t,color:"black"}),children:[v.jsx("i",{className:"fas fa-chess-pawn chess-piece-black"}),"Negras"]})]})]})]}),w9=({challengeId:t,challenge:e})=>{const n=La(),[r,i]=N.useState(null),[s,o]=N.useState({timeControl:$l.find(u=>u.time===3&&u.increment===2)||$l[0],numberOfGames:3,rated:!0,color:"random"});N.useEffect(()=>{const u=Fb(tt,p=>{p||n("/login")});return(async()=>{if(tt.currentUser){const p=await Ci(Qe(Ke,"users",tt.currentUser.uid));p.exists()&&i(p.data())}})(),()=>u()},[n]);const a=async()=>{try{if(!tt.currentUser||!(r!=null&&r.username)){Ie.error("Debes iniciar sesin para crear un reto"),n("/login");return}const u=s.timeControl.time*60,d={createdBy:tt.currentUser.uid,creatorUsername:r.username,createdAt:Nv(),config:s,status:"waiting",currentGame:1,gameStarted:!1,timeLeft:{white:u,black:u},players:{white:null,black:null},currentTurn:"white",fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},p=await s3(Bj(Ke,"challenges"),d);Ie.success("Reto creado!"),n(`/challenge/${p.id}`)}catch(u){console.error("Error al crear reto:",u),Ie.error("Error al crear el reto")}},l=async()=>{if(!(!t||!tt.currentUser))try{const u=e!=null&&e.players.white?"black":"white";await Pr(Qe(Ke,"challenges",t),{[`players.${u}`]:tt.currentUser.uid}),n(`/challenge/${t}`)}catch{Ie.error("Error al unirse al juego")}};return N.useEffect(()=>{e&&(!e.players.white||!e.players.black)&&l()},[e,t]),v.jsx("div",{className:"lobby-container",children:t?v.jsxs("div",{className:"waiting-screen",children:[v.jsx("h2",{children:"Esperando jugadores..."}),v.jsx("div",{className:"spinner"})]}):v.jsxs("div",{className:"create-challenge",children:[v.jsx("h2",{children:"Crear nuevo reto"}),v.jsx(Qx,{selectedOption:s.timeControl,options:$l,onChange:u=>o({...s,timeControl:u})}),v.jsx(_9,{config:s,onChange:o}),v.jsx(Yx,{selectedCount:s.numberOfGames,onChange:u=>o({...s,numberOfGames:u})}),v.jsx("button",{className:"create-button",onClick:a,children:"Crear Reto"})]})})},E9=()=>{new Audio("/sounds/game-start.mp3").play().catch(e=>console.error("Error reproduciendo sonido:",e))},T9=({whitePlayer:t,blackPlayer:e,numberOfGames:n,results:r=[],currentGame:i})=>{const s=cm.useMemo(()=>{const o=[...r].filter(u=>u!==null),a=o.reduce((u,d)=>d?d==="1-0"?u+1:d==="-"?u+.5:d==="0-1"?u+0:u:u,0),l=o.reduce((u,d)=>d?d==="0-1"?u+1:d==="-"?u+.5:d==="1-0"?u+0:u:u,0);return{whiteScore:Number(a.toFixed(1)),blackScore:Number(l.toFixed(1))}},[r]);return cm.useMemo(()=>v.jsx("div",{className:"match-score-table",children:v.jsxs("table",{children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{className:"player-column",children:"Jugador"}),Array.from({length:n},(o,a)=>v.jsx("th",{className:`game-column ${a+1===i?"current":""}`,children:a+1},a)),v.jsx("th",{className:"total-column",children:"Total"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{children:[v.jsx("td",{className:"player-column",children:t||"Blancas"}),Array.from({length:n},(o,a)=>v.jsx("td",{className:`game-column ${a+1===i?"current":""}`,children:r[a]==="1-0"?"1":r[a]==="0-1"?"0":r[a]==="-"?"":"-"},a)),v.jsx("td",{className:"total-column",children:s.whiteScore.toFixed(1)})]}),v.jsxs("tr",{children:[v.jsx("td",{className:"player-column",children:e||"Negras"}),Array.from({length:n},(o,a)=>v.jsx("td",{className:`game-column ${a+1===i?"current":""}`,children:r[a]==="0-1"?"1":r[a]==="1-0"?"0":r[a]==="-"?"":"-"},a)),v.jsx("td",{className:"total-column",children:s.blackScore.toFixed(1)})]})]})]})}),[t,e,n,r,i,s])},I9=({isOpen:t,gameResult:e,reason:n,whiteScore:r,blackScore:i,currentGame:s,totalGames:o,onNextGame:a,readyForNextGame:l,playerColor:u})=>{if(!t)return null;const d=()=>{switch(n){case"checkmate":return"Jaque Mate";case"timeout":return"Tiempo Agotado";case"draw":return"Tablas";case"resignation":return"Abandono";default:return"Partida Finalizada"}},p=r>o/2||i>o/2,m=u?l[u]:!1;l.white&&l.black;const w=()=>u?l[u]?"Esperando al oponente...":l[u==="white"?"black":"white"]?"Comenzar siguiente partida":"Listo para siguiente partida":"";return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"game-over-modal",children:[v.jsx("h2",{children:"Fin de la Partida"}),v.jsxs("div",{className:"result-info",children:[v.jsx("p",{className:"reason",children:d()}),v.jsxs("p",{className:"score",children:["Resultado: ",e]}),v.jsxs("div",{className:"match-score",children:[v.jsx("p",{children:"Puntuacin del Match"}),v.jsxs("p",{className:"score-numbers",children:[Number(r).toFixed(1)," - ",Number(i).toFixed(1)]})]}),!p&&s<o&&v.jsx("button",{className:`btn btn-primary next-game-btn ${m?"confirmed":""}`,onClick:a,disabled:m,children:w()}),p&&v.jsxs("p",{className:"match-finished",children:["Match finalizado! ",r>i?"Victoria Blancas":"Victoria Negras"]})]})]})})},S9=()=>{var Re,Be,st,kt,Ge,fe,re,pn,gn,wt,Lt,ln,Br,mn,Wt,_s,ui;const[t,e]=N.useState(new Gi),[n,r]=N.useState(!1),[i,s]=N.useState(null),[o,a]=N.useState(!0),[l,u]=N.useState({isCreator:!1,gameStarted:!1,timeWhite:0,timeBlack:0,currentGame:1,totalGames:1,challenge:null,isWhiteTurn:!0,isLoading:!0,error:null,players:{white:null,black:null,whiteUsername:null,blackUsername:null},results:[],gameFinished:!1}),{challengeId:d}=wO(),p=La(),[m,w]=N.useState(!1),[E,x]=N.useState(0),[R,A]=N.useState(!1),[T,I]=N.useState(null),[M,z]=N.useState(null),[W,P]=N.useState(null),[C,k]=N.useState({}),[O,L]=N.useState(null);N.useEffect(()=>{if(console.log("Iniciando efecto con challengeId:",d),!d)return;(async()=>{try{const ue=Qe(Ke,"challenges",d),be=await Ci(ue);if(!be.exists()){Ie.error("Reto no encontrado"),p("/");return}const Ve=be.data();console.log("Datos del reto cargados:",Ve);const vt=(Ve.config.timeControl.time||0)*60;if(x(vt),u(Ue=>({...Ue,challenge:{id:d,...Ve},timeWhite:vt,timeBlack:vt,isLoading:!1,gameStarted:Ve.gameStarted||!1})),tt.currentUser){const Ue=Ve.players.white===tt.currentUser.uid,He=Ve.players.black===tt.currentUser.uid;if(Ue)s("white");else if(He)s("black");else if(!Ve.players.white||!Ve.players.black){const ot=Ve.players.white?"black":"white";await j(ot)}}w(Ve.gameStarted||!1),a(!1)}catch(ue){console.error("Error cargando el reto:",ue),a(!1)}})();const me=Zc(Qe(Ke,"challenges",d),async ue=>{if(!ue.exists())return;const be=ue.data();if(be.players.white&&be.players.black&&!be.gameStarted&&(E9(),await Pr(Qe(Ke,"challenges",d),{gameStarted:!0,startedAt:Nv()})),be.players.white&&be.players.white!==l.players.white){const Ue=await Ci(Qe(Ke,"users",be.players.white));Ue.exists()&&u(He=>({...He,players:{...He.players,white:be.players.white,whiteUsername:Ue.data().username}}))}if(be.players.black&&be.players.black!==l.players.black){const Ue=await Ci(Qe(Ke,"users",be.players.black));Ue.exists()&&u(He=>({...He,players:{...He.players,black:be.players.black,blackUsername:Ue.data().username}}))}w(be.gameStarted||!1)});return()=>me()},[d]);const j=async ce=>{if(!(!d||!tt.currentUser))try{const me=Qe(Ke,"challenges",d);await Pr(me,{[`players.${ce}`]:tt.currentUser.uid,...ce==="black"?{gameStarted:!0}:{}}),s(ce),Ie.success("Te has unido al juego")}catch(me){console.error("Error al unirse al juego:",me),Ie.error("Error al unirse al juego")}};if(N.useEffect(()=>{!l.gameStarted||l.challenge},[l.gameStarted,l.challenge]),N.useEffect(()=>{(async()=>{if(l.players.white){const me=await Ci(Qe(Ke,"users",l.players.white));me.exists()&&u(ue=>({...ue,players:{...ue.players,whiteUsername:me.data().username}}))}if(l.players.black){const me=await Ci(Qe(Ke,"users",l.players.black));me.exists()&&u(ue=>({...ue,players:{...ue.players,blackUsername:me.data().username}}))}})()},[l.players.white,l.players.black]),N.useEffect(()=>{console.log("Estado del challenge:",{isLoading:o,challengeState:l,playerColor:i,game:t==null?void 0:t.fen()})},[o,l,i,t]),N.useEffect(()=>{if(!d)return;const ce=Zc(Qe(Ke,"challenges",d),me=>{const ue=me.data();if(!ue)return;const be=new Gi(ue.fen||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");if(e(be),ue.drawOffer?L(ue.drawOffer.offeredBy):L(null),ue.status==="completed"&&ue.endReason==="resignation"){const vt=ue.winner==="white"?"1-0":"0-1";I(vt),A(!0),Ie.success(`${ue.winner===i?"Has ganado!":"Tu oponente ha abandonado"}`)}const Ve=i===(be.turn()==="w"?"white":"black");r(Ve)});return()=>ce()},[d,i]),N.useEffect(()=>{if(!l.challenge)return;const ce=l.challenge.players.white&&l.challenge.players.black;w(!!ce),console.log("Estado del juego:",{hasAllPlayers:ce,players:l.challenge.players,gameStarted:m})},[l.challenge]),N.useEffect(()=>{if(!d)return;const ce=Zc(Qe(Ke,"challenges",d),async me=>{var be,Ve;const ue=me.data();if(ue&&(be=ue.readyForNextGame)!=null&&be.white&&(Ve=ue.readyForNextGame)!=null&&Ve.black){const vt=new Gi;e(vt),await Pr(me.ref,{fen:vt.fen(),status:"active",drawOffer:null,readyForNextGame:null,currentGame:(ue.currentGame||1)+1,gameStarted:!0,currentTurn:"white","timeLeft.white":E,"timeLeft.black":E}),I(null),A(!1),L(null),w(!0),r(i==="white")}});return()=>ce()},[d,E,i]),N.useEffect(()=>{if(!d)return;const ce=Zc(Qe(Ke,"challenges",d),me=>{const ue=me.data();ue&&ue.status==="completed"&&(I(ue.result),z(ue.endReason),A(!0),u(be=>{var Ve,vt,Ue;return{...be,challenge:{...be.challenge,whiteScore:((Ve=ue.score)==null?void 0:Ve.white)||0,blackScore:((vt=ue.score)==null?void 0:vt.black)||0,results:[...((Ue=be.challenge)==null?void 0:Ue.results)||[],ue.result]}}}))});return()=>ce()},[d]),N.useEffect(()=>{if(!d)return;const ce=Zc(Qe(Ke,"challenges",d),me=>{const ue=me.data();ue&&u(be=>{var Ve;return JSON.stringify((Ve=be.challenge)==null?void 0:Ve.results)===JSON.stringify(ue.results)?be:{...be,challenge:{...be.challenge,id:d,...ue},currentGame:ue.currentGame||1,results:ue.results||[]}})});return()=>ce()},[d]),o)return v.jsx("div",{className:"loading",children:"Cargando reto..."});const D=(ce,me)=>{try{if(t.move({from:ce,to:me,promotion:"q"})&&d){if(t.isCheckmate()){const be=t.turn()==="w"?"black":"white",Ve=be==="white"?"1-0":"0-1";Pr(Qe(Ke,"challenges",d),{status:"completed",result:Ve,endReason:"checkmate",winner:be,[`score.${be}`]:o3(1)}),I(Ve),z("checkmate"),A(!0)}return Pr(Qe(Ke,"challenges",d),{fen:t.fen(),lastMove:{from:ce,to:me},currentTurn:t.turn()==="w"?"white":"black"}),!0}return!1}catch(ue){return console.error("Error en makeMove:",ue),!1}},mt=async()=>{if(!(!d||!tt.currentUser))try{const ce=Qe(Ke,"challenges",d);await Pr(ce,{drawOffer:{offeredBy:tt.currentUser.uid,offeredAt:Date.now()}}),L(tt.currentUser.uid),Ie.success("Oferta de tablas enviada")}catch{Ie.error("Error al ofrecer tablas")}},St=async ce=>{if(!(!d||!tt.currentUser))try{const me=Qe(Ke,"challenges",d);ce?(await Pr(me,{status:"completed",result:"-",endReason:"draw_agreed",drawOffer:null,completedAt:Nv()}),I("-"),z("draw"),A(!0),Ie.success("Tablas acordadas")):(await Pr(me,{drawOffer:null}),Ie("Oferta de tablas rechazada",{icon:""})),L(null)}catch{Ie.error("Error al responder a la oferta de tablas")}},Ut=async()=>{if(!(!d||!tt.currentUser))try{const ce=Qe(Ke,"challenges",d);await Pr(ce,{status:"completed",winner:i==="white"?"black":"white",result:i==="white"?"0-1":"1-0",endReason:"resignation"}),Ie.success("Has abandonado la partida")}catch{Ie.error("Error al abandonar la partida")}},Ye=async(ce,me)=>{if(!(!d||!m)){u(ue=>({...ue,[`time${ce.charAt(0).toUpperCase()+ce.slice(1)}`]:me}));try{await Pr(Qe(Ke,"challenges",d),{[`timeLeft.${ce}`]:me})}catch(ue){console.error("Error updating time:",ue)}}},X=async ce=>{I(ce==="white"?"0-1":"1-0"),z("timeout"),A(!0)},he=async()=>{if(!(!d||!i))try{await Pr(Qe(Ke,"challenges",d),{[`readyForNextGame.${i}`]:!0})}catch(ce){console.error("Error al preparar nueva partida:",ce),Ie.error("Error al preparar nueva partida")}},B=ce=>{if(n)if(W===null){const me=t.get(ce);me&&me.color===(i==="white"?"w":"b")&&P(ce)}else if(ce===W)P(null);else{const me=D(W,ce);return P(null),me}},Me=(ce,me,ue)=>D(ce,me);return v.jsxs("div",{className:"challenge-container",children:[v.jsx(Ah,{}),v.jsx("div",{className:"challenge-content container-fluid pt-5",children:v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"col-12 col-lg-8",children:[i==="black"?v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box white mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.whiteUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Pl,{timeInMinutes:((Re=l.challenge)==null?void 0:Re.config.timeControl.time)||0,increment:((Be=l.challenge)==null?void 0:Be.config.timeControl.increment)||0,isActive:m&&t.turn()==="w",color:"white",onTimeout:async()=>await X("black"),onTimeUpdate:ce=>Ye("white",ce),remainingTime:l.timeWhite})})]})})}):v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box black mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.blackUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Pl,{timeInMinutes:((st=l.challenge)==null?void 0:st.config.timeControl.time)||0,increment:((kt=l.challenge)==null?void 0:kt.config.timeControl.increment)||0,isActive:m&&t.turn()==="b",color:"black",onTimeout:async()=>await X("white"),onTimeUpdate:ce=>Ye("black",ce),remainingTime:l.timeBlack})})]})})}),v.jsx("div",{className:"board-wrapper mb-3",children:v.jsx("div",{className:"board-container",children:v.jsx(qx,{position:t.fen(),onPieceDrop:Me,onSquareClick:B,boardOrientation:i==="black"?"black":"white",customBoardStyle:{borderRadius:"4px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.3)"},customSquareStyles:{...W&&{[W]:{backgroundColor:"rgba(255, 140, 66, 0.4)"}}}})})}),i==="black"?v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box black mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.blackUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Pl,{timeInMinutes:((Ge=l.challenge)==null?void 0:Ge.config.timeControl.time)||0,increment:((fe=l.challenge)==null?void 0:fe.config.timeControl.increment)||0,isActive:m&&t.turn()==="b",color:"black",onTimeout:async()=>await X("white"),onTimeUpdate:ce=>Ye("black",ce),remainingTime:l.timeBlack})})]})})}):v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box white mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.whiteUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Pl,{timeInMinutes:((re=l.challenge)==null?void 0:re.config.timeControl.time)||0,increment:((pn=l.challenge)==null?void 0:pn.config.timeControl.increment)||0,isActive:m&&t.turn()==="w",color:"white",onTimeout:async()=>await X("black"),onTimeUpdate:ce=>Ye("white",ce),remainingTime:l.timeWhite})})]})})})]}),v.jsx("div",{className:"col-12 col-lg-4",children:v.jsxs("div",{className:"card bg-dark text-light",children:[v.jsx("div",{className:"card-header",children:v.jsx("div",{className:"d-flex justify-content-between align-items-center",children:v.jsxs("div",{className:"game-info",children:[v.jsx("i",{className:"fas fa-chess me-2"}),v.jsxs("span",{children:["Partida ",l.currentGame," de ",(gn=l.challenge)==null?void 0:gn.config.numberOfGames]})]})})}),v.jsxs("div",{className:"card-body",children:[v.jsx(T9,{whitePlayer:l.players.whiteUsername,blackPlayer:l.players.blackUsername,numberOfGames:((wt=l.challenge)==null?void 0:wt.config.numberOfGames)||1,results:((Lt=l.challenge)==null?void 0:Lt.results)||[],currentGame:l.currentGame}),v.jsxs("div",{className:"game-controls mt-4",children:[O&&O!==((ln=tt.currentUser)==null?void 0:ln.uid)?v.jsxs("div",{className:"draw-offer-buttons",children:[v.jsx("button",{className:"btn btn-success me-2",onClick:()=>St(!0),children:"Aceptar tablas"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>St(!1),children:"Rechazar tablas"})]}):v.jsx("button",{className:"btn btn-warning me-2",onClick:()=>mt(),disabled:!m||!!O,children:O===((Br=tt.currentUser)==null?void 0:Br.uid)?"Tablas ofrecidas":"Ofrecer Tablas"}),v.jsx("button",{className:"btn btn-danger",onClick:()=>Ut(),disabled:!m,children:"Abandonar"})]})]})]})})]})}),v.jsx(I9,{isOpen:R,gameResult:T,reason:M??"checkmate",whiteScore:((mn=l.challenge)==null?void 0:mn.whiteScore)||0,blackScore:((Wt=l.challenge)==null?void 0:Wt.blackScore)||0,currentGame:l.currentGame,totalGames:((_s=l.challenge)==null?void 0:_s.config.numberOfGames)||1,onNextGame:he,readyForNextGame:((ui=l.challenge)==null?void 0:ui.readyForNextGame)||{},playerColor:i})]})},b9=()=>{const t=La(),e=xo(),{uid:n,email:r,photoURL:i}=e.state||{},[s,o]=N.useState(""),a=async u=>{if(!/^[a-zA-Z0-9_]{3,15}$/.test(u))return!1;const d=Qe(Ke,"usernames",u.toLowerCase());return!(await Ci(d)).exists()},l=async u=>{u.preventDefault();try{if(!await a(s)){Ie.error("Nombre de usuario no vlido o ya est en uso");return}await Zf(Qe(Ke,"usernames",s.toLowerCase()),{uid:n}),await Zf(Qe(Ke,"users",n),{username:s,email:r,createdAt:new Date,rating:1200,photoURL:i||null}),tt.currentUser&&await jb(tt.currentUser,{displayName:s}),Ie.success("Perfil completado!"),t("/lobby")}catch(d){console.error("Error al guardar el perfil:",d),Ie.error("Error al guardar el perfil")}};return v.jsxs("div",{className:"page-container",children:[v.jsx(Ah,{}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx("h2",{children:"Completa tu perfil"}),v.jsx("p",{className:"auth-subtitle",children:"Solo necesitamos un nombre de usuario para continuar"}),v.jsxs("form",{onSubmit:l,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-user"}),v.jsx("input",{type:"text",placeholder:"Nombre de usuario",value:s,onChange:u=>o(u.target.value),required:!0,minLength:3,maxLength:15,pattern:"^[a-zA-Z0-9_]+$",title:"El nombre de usuario debe tener entre 3 y 15 caracteres y solo puede contener letras, nmeros y guiones bajos"})]})}),v.jsx("div",{className:"form-info",children:v.jsxs("p",{children:["Email: ",r]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Completar perfil"})]})]})})]})},kd=({children:t})=>{const[e,n]=N.useState("loading"),r=xo();return N.useEffect(()=>{const i=Fb(tt,s=>{n(s?"authenticated":"unauthenticated")});return()=>i()},[]),e==="loading"?v.jsx("div",{children:"Cargando..."}):e==="unauthenticated"?v.jsx(JS,{to:"/login",state:{redirect:r.pathname},replace:!0}):v.jsx(v.Fragment,{children:t})};function C9(){return v.jsx(O6,{children:v.jsx(zO,{children:v.jsx("div",{className:"app-container",children:v.jsxs(MO,{children:[v.jsx(Dn,{index:!0,element:v.jsx(AT,{})}),v.jsx(Dn,{path:"/",element:v.jsx(AT,{})}),v.jsx(Dn,{path:"/login",element:v.jsx(m9,{})}),v.jsx(Dn,{path:"/register",element:v.jsx(v9,{})}),v.jsx(Dn,{path:"/forgot-password",element:v.jsx(y9,{})}),v.jsx(Dn,{path:"/lobby",element:v.jsx(kd,{children:v.jsx(w9,{})})}),v.jsx(Dn,{path:"/challenge/:challengeId",element:v.jsx(kd,{children:v.jsx(S9,{})})}),v.jsxs(Dn,{path:"/play",children:[v.jsx(Dn,{path:"computer",element:v.jsx(pu,{})}),v.jsx(Dn,{path:"online",element:v.jsx(kd,{children:v.jsx(pu,{})})}),v.jsx(Dn,{path:"friend",element:v.jsx(kd,{children:v.jsx(pu,{})})}),v.jsx(Dn,{path:"puzzle",element:v.jsx(pu,{isPuzzle:!0})})]}),v.jsx(Dn,{path:"/complete-profile",element:v.jsx(b9,{})}),v.jsx(Dn,{path:"*",element:v.jsx(JS,{to:"/",replace:!0})})]})})})})}console.log("Iniciando aplicacin");const Xx=document.getElementById("root");console.log("Elemento root encontrado:",Xx);BS(Xx).render(v.jsx(N.StrictMode,{children:v.jsx(C9,{})}));
