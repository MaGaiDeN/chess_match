var YA=Object.defineProperty;var XA=(t,e,n)=>e in t?YA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fr=(t,e,n)=>XA(t,typeof e!="symbol"?e+"":e,n);function JA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ZA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ek(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var WE={exports:{}},nf={},KE={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec=Symbol.for("react.element"),tk=Symbol.for("react.portal"),nk=Symbol.for("react.fragment"),rk=Symbol.for("react.strict_mode"),ik=Symbol.for("react.profiler"),sk=Symbol.for("react.provider"),ok=Symbol.for("react.context"),ak=Symbol.for("react.forward_ref"),lk=Symbol.for("react.suspense"),uk=Symbol.for("react.memo"),ck=Symbol.for("react.lazy"),P_=Symbol.iterator;function hk(t){return t===null||typeof t!="object"?null:(t=P_&&t[P_]||t["@@iterator"],typeof t=="function"?t:null)}var GE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QE=Object.assign,YE={};function Cl(t,e,n){this.props=t,this.context=e,this.refs=YE,this.updater=n||GE}Cl.prototype.isReactComponent={};Cl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XE(){}XE.prototype=Cl.prototype;function zm(t,e,n){this.props=t,this.context=e,this.refs=YE,this.updater=n||GE}var Bm=zm.prototype=new XE;Bm.constructor=zm;QE(Bm,Cl.prototype);Bm.isPureReactComponent=!0;var R_=Array.isArray,JE=Object.prototype.hasOwnProperty,Hm={current:null},ZE={key:!0,ref:!0,__self:!0,__source:!0};function e1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)JE.call(e,r)&&!ZE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ec,type:t,key:s,ref:o,props:i,_owner:Hm.current}}function dk(t,e){return{$$typeof:Ec,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ec}function fk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var x_=/\/+/g;function fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fk(""+t.key):e.toString(36)}function jh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ec:case tk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fp(o,0):r,R_(i)?(n="",t!=null&&(n=t.replace(x_,"$&/")+"/"),jh(i,e,n,"",function(h){return h})):i!=null&&(qm(i)&&(i=dk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(x_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",R_(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+fp(s,a);o+=jh(s,e,n,u,i)}else if(u=hk(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+fp(s,a++),o+=jh(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ch(t,e,n){if(t==null)return t;var r=[],i=0;return jh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function pk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var In={current:null},Vh={transition:null},gk={ReactCurrentDispatcher:In,ReactCurrentBatchConfig:Vh,ReactCurrentOwner:Hm};function t1(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ch,forEach:function(t,e,n){ch(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ch(t,function(){e++}),e},toArray:function(t){return ch(t,function(e){return e})||[]},only:function(t){if(!qm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Cl;Se.Fragment=nk;Se.Profiler=ik;Se.PureComponent=zm;Se.StrictMode=rk;Se.Suspense=lk;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gk;Se.act=t1;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=QE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Hm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)JE.call(e,u)&&!ZE.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];r.children=a}return{$$typeof:Ec,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:ok,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sk,_context:t},t.Consumer=t};Se.createElement=e1;Se.createFactory=function(t){var e=e1.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:ak,render:t}};Se.isValidElement=qm;Se.lazy=function(t){return{$$typeof:ck,_payload:{_status:-1,_result:t},_init:pk}};Se.memo=function(t,e){return{$$typeof:uk,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Vh.transition;Vh.transition={};try{t()}finally{Vh.transition=e}};Se.unstable_act=t1;Se.useCallback=function(t,e){return In.current.useCallback(t,e)};Se.useContext=function(t){return In.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return In.current.useDeferredValue(t)};Se.useEffect=function(t,e){return In.current.useEffect(t,e)};Se.useId=function(){return In.current.useId()};Se.useImperativeHandle=function(t,e,n){return In.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return In.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return In.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return In.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return In.current.useReducer(t,e,n)};Se.useRef=function(t){return In.current.useRef(t)};Se.useState=function(t){return In.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return In.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return In.current.useTransition()};Se.version="18.3.1";KE.exports=Se;var M=KE.exports;const n1=ek(M),mk=JA({__proto__:null,default:n1},[M]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk=M,yk=Symbol.for("react.element"),_k=Symbol.for("react.fragment"),wk=Object.prototype.hasOwnProperty,Ek=vk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tk={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)wk.call(e,r)&&!Tk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yk,type:t,key:s,ref:o,props:i,_owner:Ek.current}}nf.Fragment=_k;nf.jsx=r1;nf.jsxs=r1;WE.exports=nf;var y=WE.exports,i1={exports:{}},er={},s1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,oe){var $=J.length;J.push(oe);e:for(;0<$;){var Ae=$-1>>>1,Re=J[Ae];if(0<i(Re,oe))J[Ae]=oe,J[$]=Re,$=Ae;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var oe=J[0],$=J.pop();if($!==oe){J[0]=$;e:for(var Ae=0,Re=J.length,Ve=Re>>>1;Ae<Ve;){var rt=2*(Ae+1)-1,Pt=J[rt],Ye=rt+1,ue=J[Ye];if(0>i(Pt,$))Ye<Re&&0>i(ue,Pt)?(J[Ae]=ue,J[Ye]=$,Ae=Ye):(J[Ae]=Pt,J[rt]=$,Ae=rt);else if(Ye<Re&&0>i(ue,$))J[Ae]=ue,J[Ye]=$,Ae=Ye;else break e}}return oe}function i(J,oe){var $=J.sortIndex-oe.sortIndex;return $!==0?$:J.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],f=1,g=null,v=3,w=!1,S=!1,k=!1,D=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(J){for(var oe=n(h);oe!==null;){if(oe.callback===null)r(h);else if(oe.startTime<=J)r(h),oe.sortIndex=oe.expirationTime,e(u,oe);else break;oe=n(h)}}function V(J){if(k=!1,A(J),!S)if(n(u)!==null)S=!0,vt(H);else{var oe=n(h);oe!==null&&Qe(V,oe.startTime-J)}}function H(J,oe){S=!1,k&&(k=!1,b(E),E=-1),w=!0;var $=v;try{for(A(oe),g=n(u);g!==null&&(!(g.expirationTime>oe)||J&&!N());){var Ae=g.callback;if(typeof Ae=="function"){g.callback=null,v=g.priorityLevel;var Re=Ae(g.expirationTime<=oe);oe=t.unstable_now(),typeof Re=="function"?g.callback=Re:g===n(u)&&r(u),A(oe)}else r(u);g=n(u)}if(g!==null)var Ve=!0;else{var rt=n(h);rt!==null&&Qe(V,rt.startTime-oe),Ve=!1}return Ve}finally{g=null,v=$,w=!1}}var W=!1,R=null,E=-1,P=5,x=-1;function N(){return!(t.unstable_now()-x<P)}function L(){if(R!==null){var J=t.unstable_now();x=J;var oe=!0;try{oe=R(!0,J)}finally{oe?O():(W=!1,R=null)}}else W=!1}var O;if(typeof I=="function")O=function(){I(L)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,lt=Je.port2;Je.port1.onmessage=L,O=function(){lt.postMessage(null)}}else O=function(){D(L,0)};function vt(J){R=J,W||(W=!0,O())}function Qe(J,oe){E=D(function(){J(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,vt(H))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(J){switch(v){case 1:case 2:case 3:var oe=3;break;default:oe=v}var $=v;v=oe;try{return J()}finally{v=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var $=v;v=J;try{return oe()}finally{v=$}},t.unstable_scheduleCallback=function(J,oe,$){var Ae=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Ae+$:Ae):$=Ae,J){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=$+Re,J={id:f++,callback:oe,priorityLevel:J,startTime:$,expirationTime:Re,sortIndex:-1},$>Ae?(J.sortIndex=$,e(h,J),n(u)===null&&J===n(h)&&(k?(b(E),E=-1):k=!0,Qe(V,$-Ae))):(J.sortIndex=Re,e(u,J),S||w||(S=!0,vt(H))),J},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(J){var oe=v;return function(){var $=v;v=oe;try{return J.apply(this,arguments)}finally{v=$}}}})(o1);s1.exports=o1;var Ik=s1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk=M,Zn=Ik;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a1=new Set,Wu={};function ra(t,e){al(t,e),al(t+"Capture",e)}function al(t,e){for(Wu[t]=e,t=0;t<e.length;t++)a1.add(e[t])}var Fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hg=Object.prototype.hasOwnProperty,Ck=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O_={},D_={};function bk(t){return hg.call(D_,t)?!0:hg.call(O_,t)?!1:Ck.test(t)?D_[t]=!0:(O_[t]=!0,!1)}function Ak(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kk(t,e,n,r){if(e===null||typeof e>"u"||Ak(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wm=/[\-:]([a-z])/g;function Km(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wm,Km);Zt[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wm,Km);Zt[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wm,Km);Zt[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gm(t,e,n,r){var i=Zt.hasOwnProperty(e)?Zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kk(e,n,i,r)&&(n=null),r||i===null?bk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gi=Sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hh=Symbol.for("react.element"),Fa=Symbol.for("react.portal"),Ua=Symbol.for("react.fragment"),Qm=Symbol.for("react.strict_mode"),dg=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),Ym=Symbol.for("react.forward_ref"),fg=Symbol.for("react.suspense"),pg=Symbol.for("react.suspense_list"),Xm=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),c1=Symbol.for("react.offscreen"),N_=Symbol.iterator;function su(t){return t===null||typeof t!="object"?null:(t=N_&&t[N_]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,pp;function mu(t){if(pp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pp=e&&e[1]||""}return`
`+pp+t}var gp=!1;function mp(t,e){if(!t||gp)return"";gp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{gp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?mu(t):""}function Pk(t){switch(t.tag){case 5:return mu(t.type);case 16:return mu("Lazy");case 13:return mu("Suspense");case 19:return mu("SuspenseList");case 0:case 2:case 15:return t=mp(t.type,!1),t;case 11:return t=mp(t.type.render,!1),t;case 1:return t=mp(t.type,!0),t;default:return""}}function gg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ua:return"Fragment";case Fa:return"Portal";case dg:return"Profiler";case Qm:return"StrictMode";case fg:return"Suspense";case pg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case Ym:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xm:return e=t.displayName||null,e!==null?e:gg(t.type)||"Memo";case Ts:e=t._payload,t=t._init;try{return gg(t(e))}catch{}}return null}function Rk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gg(e);case 8:return e===Qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xk(t){var e=h1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dh(t){t._valueTracker||(t._valueTracker=xk(t))}function d1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=h1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ud(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mg(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function L_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&Gm(t,"checked",e,!1)}function vg(t,e){f1(t,e);var n=Qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yg(t,e.type,n):e.hasOwnProperty("defaultValue")&&yg(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function M_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yg(t,e,n){(e!=="number"||ud(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vu=Array.isArray;function Xa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _g(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function j_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(vu(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qs(n)}}function p1(t,e){var n=Qs(e.value),r=Qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function g1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?g1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fh,m1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fh=fh||document.createElement("div"),fh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ku(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ok=["Webkit","ms","Moz","O"];Object.keys(ku).forEach(function(t){Ok.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ku[e]=ku[t]})});function v1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ku.hasOwnProperty(t)&&ku[t]?(""+e).trim():e+"px"}function y1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=v1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Dk=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eg(t,e){if(e){if(Dk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Tg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ig=null;function Jm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sg=null,Ja=null,Za=null;function F_(t){if(t=Sc(t)){if(typeof Sg!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=lf(e),Sg(t.stateNode,t.type,e))}}function _1(t){Ja?Za?Za.push(t):Za=[t]:Ja=t}function w1(){if(Ja){var t=Ja,e=Za;if(Za=Ja=null,F_(t),e)for(t=0;t<e.length;t++)F_(e[t])}}function E1(t,e){return t(e)}function T1(){}var vp=!1;function I1(t,e,n){if(vp)return t(e,n);vp=!0;try{return E1(t,e,n)}finally{vp=!1,(Ja!==null||Za!==null)&&(T1(),w1())}}function Gu(t,e){var n=t.stateNode;if(n===null)return null;var r=lf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Cg=!1;if(Fi)try{var ou={};Object.defineProperty(ou,"passive",{get:function(){Cg=!0}}),window.addEventListener("test",ou,ou),window.removeEventListener("test",ou,ou)}catch{Cg=!1}function Nk(t,e,n,r,i,s,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Pu=!1,cd=null,hd=!1,bg=null,Lk={onError:function(t){Pu=!0,cd=t}};function Mk(t,e,n,r,i,s,o,a,u){Pu=!1,cd=null,Nk.apply(Lk,arguments)}function jk(t,e,n,r,i,s,o,a,u){if(Mk.apply(this,arguments),Pu){if(Pu){var h=cd;Pu=!1,cd=null}else throw Error(Q(198));hd||(hd=!0,bg=h)}}function ia(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U_(t){if(ia(t)!==t)throw Error(Q(188))}function Vk(t){var e=t.alternate;if(!e){if(e=ia(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return U_(i),t;if(s===r)return U_(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function C1(t){return t=Vk(t),t!==null?b1(t):null}function b1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b1(t);if(e!==null)return e;t=t.sibling}return null}var A1=Zn.unstable_scheduleCallback,$_=Zn.unstable_cancelCallback,Fk=Zn.unstable_shouldYield,Uk=Zn.unstable_requestPaint,Tt=Zn.unstable_now,$k=Zn.unstable_getCurrentPriorityLevel,Zm=Zn.unstable_ImmediatePriority,k1=Zn.unstable_UserBlockingPriority,dd=Zn.unstable_NormalPriority,zk=Zn.unstable_LowPriority,P1=Zn.unstable_IdlePriority,rf=null,ui=null;function Bk(t){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(rf,t,void 0,(t.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:Wk,Hk=Math.log,qk=Math.LN2;function Wk(t){return t>>>=0,t===0?32:31-(Hk(t)/qk|0)|0}var ph=64,gh=4194304;function yu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=yu(a):(s&=o,s!==0&&(r=yu(s)))}else o=n&~i,o!==0?r=yu(o):s!==0&&(r=yu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ur(e),i=1<<n,r|=t[n],e&=~i;return r}function Kk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ur(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Kk(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Ag(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function R1(){var t=ph;return ph<<=1,!(ph&4194240)&&(ph=64),t}function yp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ur(e),t[e]=n}function Qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ur(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ev(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ur(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Be=0;function x1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var O1,tv,D1,N1,L1,kg=!1,mh=[],Ls=null,Ms=null,js=null,Qu=new Map,Yu=new Map,Cs=[],Yk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z_(t,e){switch(t){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Qu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(e.pointerId)}}function au(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Sc(e),e!==null&&tv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Xk(t,e,n,r,i){switch(e){case"focusin":return Ls=au(Ls,t,e,n,r,i),!0;case"dragenter":return Ms=au(Ms,t,e,n,r,i),!0;case"mouseover":return js=au(js,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Qu.set(s,au(Qu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Yu.set(s,au(Yu.get(s)||null,t,e,n,r,i)),!0}return!1}function M1(t){var e=Lo(t.target);if(e!==null){var n=ia(e);if(n!==null){if(e=n.tag,e===13){if(e=S1(n),e!==null){t.blockedOn=e,L1(t.priority,function(){D1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ig=r,n.target.dispatchEvent(r),Ig=null}else return e=Sc(n),e!==null&&tv(e),t.blockedOn=n,!1;e.shift()}return!0}function B_(t,e,n){Fh(t)&&n.delete(e)}function Jk(){kg=!1,Ls!==null&&Fh(Ls)&&(Ls=null),Ms!==null&&Fh(Ms)&&(Ms=null),js!==null&&Fh(js)&&(js=null),Qu.forEach(B_),Yu.forEach(B_)}function lu(t,e){t.blockedOn===e&&(t.blockedOn=null,kg||(kg=!0,Zn.unstable_scheduleCallback(Zn.unstable_NormalPriority,Jk)))}function Xu(t){function e(i){return lu(i,t)}if(0<mh.length){lu(mh[0],t);for(var n=1;n<mh.length;n++){var r=mh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ls!==null&&lu(Ls,t),Ms!==null&&lu(Ms,t),js!==null&&lu(js,t),Qu.forEach(e),Yu.forEach(e),n=0;n<Cs.length;n++)r=Cs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cs.length&&(n=Cs[0],n.blockedOn===null);)M1(n),n.blockedOn===null&&Cs.shift()}var el=Gi.ReactCurrentBatchConfig,pd=!0;function Zk(t,e,n,r){var i=Be,s=el.transition;el.transition=null;try{Be=1,nv(t,e,n,r)}finally{Be=i,el.transition=s}}function eP(t,e,n,r){var i=Be,s=el.transition;el.transition=null;try{Be=4,nv(t,e,n,r)}finally{Be=i,el.transition=s}}function nv(t,e,n,r){if(pd){var i=Pg(t,e,n,r);if(i===null)kp(t,e,r,gd,n),z_(t,r);else if(Xk(i,t,e,n,r))r.stopPropagation();else if(z_(t,r),e&4&&-1<Yk.indexOf(t)){for(;i!==null;){var s=Sc(i);if(s!==null&&O1(s),s=Pg(t,e,n,r),s===null&&kp(t,e,r,gd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else kp(t,e,r,null,n)}}var gd=null;function Pg(t,e,n,r){if(gd=null,t=Jm(r),t=Lo(t),t!==null)if(e=ia(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gd=t,null}function j1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($k()){case Zm:return 1;case k1:return 4;case dd:case zk:return 16;case P1:return 536870912;default:return 16}default:return 16}}var xs=null,rv=null,Uh=null;function V1(){if(Uh)return Uh;var t,e=rv,n=e.length,r,i="value"in xs?xs.value:xs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Uh=i.slice(t,1<r?1-r:void 0)}function $h(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vh(){return!0}function H_(){return!1}function tr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vh:H_,this.isPropagationStopped=H_,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vh)},persist:function(){},isPersistent:vh}),e}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iv=tr(bl),Ic=dt({},bl,{view:0,detail:0}),tP=tr(Ic),_p,wp,uu,sf=dt({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uu&&(uu&&t.type==="mousemove"?(_p=t.screenX-uu.screenX,wp=t.screenY-uu.screenY):wp=_p=0,uu=t),_p)},movementY:function(t){return"movementY"in t?t.movementY:wp}}),q_=tr(sf),nP=dt({},sf,{dataTransfer:0}),rP=tr(nP),iP=dt({},Ic,{relatedTarget:0}),Ep=tr(iP),sP=dt({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),oP=tr(sP),aP=dt({},bl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lP=tr(aP),uP=dt({},bl,{data:0}),W_=tr(uP),cP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dP[t])?!!e[t]:!1}function sv(){return fP}var pP=dt({},Ic,{key:function(t){if(t.key){var e=cP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$h(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sv,charCode:function(t){return t.type==="keypress"?$h(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$h(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gP=tr(pP),mP=dt({},sf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K_=tr(mP),vP=dt({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sv}),yP=tr(vP),_P=dt({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),wP=tr(_P),EP=dt({},sf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TP=tr(EP),IP=[9,13,27,32],ov=Fi&&"CompositionEvent"in window,Ru=null;Fi&&"documentMode"in document&&(Ru=document.documentMode);var SP=Fi&&"TextEvent"in window&&!Ru,F1=Fi&&(!ov||Ru&&8<Ru&&11>=Ru),G_=" ",Q_=!1;function U1(t,e){switch(t){case"keyup":return IP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function CP(t,e){switch(t){case"compositionend":return $1(e);case"keypress":return e.which!==32?null:(Q_=!0,G_);case"textInput":return t=e.data,t===G_&&Q_?null:t;default:return null}}function bP(t,e){if($a)return t==="compositionend"||!ov&&U1(t,e)?(t=V1(),Uh=rv=xs=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return F1&&e.locale!=="ko"?null:e.data;default:return null}}var AP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AP[t.type]:e==="textarea"}function z1(t,e,n,r){_1(r),e=md(e,"onChange"),0<e.length&&(n=new iv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xu=null,Ju=null;function kP(t){Z1(t,0)}function of(t){var e=Ha(t);if(d1(e))return t}function PP(t,e){if(t==="change")return e}var B1=!1;if(Fi){var Tp;if(Fi){var Ip="oninput"in document;if(!Ip){var X_=document.createElement("div");X_.setAttribute("oninput","return;"),Ip=typeof X_.oninput=="function"}Tp=Ip}else Tp=!1;B1=Tp&&(!document.documentMode||9<document.documentMode)}function J_(){xu&&(xu.detachEvent("onpropertychange",H1),Ju=xu=null)}function H1(t){if(t.propertyName==="value"&&of(Ju)){var e=[];z1(e,Ju,t,Jm(t)),I1(kP,e)}}function RP(t,e,n){t==="focusin"?(J_(),xu=e,Ju=n,xu.attachEvent("onpropertychange",H1)):t==="focusout"&&J_()}function xP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return of(Ju)}function OP(t,e){if(t==="click")return of(e)}function DP(t,e){if(t==="input"||t==="change")return of(e)}function NP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qr=typeof Object.is=="function"?Object.is:NP;function Zu(t,e){if(qr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hg.call(e,i)||!qr(t[i],e[i]))return!1}return!0}function Z_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function e0(t,e){var n=Z_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z_(n)}}function q1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W1(){for(var t=window,e=ud();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ud(t.document)}return e}function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LP(t){var e=W1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q1(n.ownerDocument.documentElement,n)){if(r!==null&&av(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=e0(n,s);var o=e0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MP=Fi&&"documentMode"in document&&11>=document.documentMode,za=null,Rg=null,Ou=null,xg=!1;function t0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xg||za==null||za!==ud(r)||(r=za,"selectionStart"in r&&av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ou&&Zu(Ou,r)||(Ou=r,r=md(Rg,"onSelect"),0<r.length&&(e=new iv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=za)))}function yh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ba={animationend:yh("Animation","AnimationEnd"),animationiteration:yh("Animation","AnimationIteration"),animationstart:yh("Animation","AnimationStart"),transitionend:yh("Transition","TransitionEnd")},Sp={},K1={};Fi&&(K1=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function af(t){if(Sp[t])return Sp[t];if(!Ba[t])return t;var e=Ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in K1)return Sp[t]=e[n];return t}var G1=af("animationend"),Q1=af("animationiteration"),Y1=af("animationstart"),X1=af("transitionend"),J1=new Map,n0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function no(t,e){J1.set(t,e),ra(e,[t])}for(var Cp=0;Cp<n0.length;Cp++){var bp=n0[Cp],jP=bp.toLowerCase(),VP=bp[0].toUpperCase()+bp.slice(1);no(jP,"on"+VP)}no(G1,"onAnimationEnd");no(Q1,"onAnimationIteration");no(Y1,"onAnimationStart");no("dblclick","onDoubleClick");no("focusin","onFocus");no("focusout","onBlur");no(X1,"onTransitionEnd");al("onMouseEnter",["mouseout","mouseover"]);al("onMouseLeave",["mouseout","mouseover"]);al("onPointerEnter",["pointerout","pointerover"]);al("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FP=new Set("cancel close invalid load scroll toggle".split(" ").concat(_u));function r0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jk(r,e,void 0,t),t.currentTarget=null}function Z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;r0(i,a,h),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;r0(i,a,h),s=u}}}if(hd)throw t=bg,hd=!1,bg=null,t}function it(t,e){var n=e[Mg];n===void 0&&(n=e[Mg]=new Set);var r=t+"__bubble";n.has(r)||(eT(e,t,2,!1),n.add(r))}function Ap(t,e,n){var r=0;e&&(r|=4),eT(n,t,r,e)}var _h="_reactListening"+Math.random().toString(36).slice(2);function ec(t){if(!t[_h]){t[_h]=!0,a1.forEach(function(n){n!=="selectionchange"&&(FP.has(n)||Ap(n,!1,t),Ap(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_h]||(e[_h]=!0,Ap("selectionchange",!1,e))}}function eT(t,e,n,r){switch(j1(e)){case 1:var i=Zk;break;case 4:i=eP;break;default:i=nv}n=i.bind(null,e,n,t),i=void 0,!Cg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function kp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Lo(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}I1(function(){var h=s,f=Jm(n),g=[];e:{var v=J1.get(t);if(v!==void 0){var w=iv,S=t;switch(t){case"keypress":if($h(n)===0)break e;case"keydown":case"keyup":w=gP;break;case"focusin":S="focus",w=Ep;break;case"focusout":S="blur",w=Ep;break;case"beforeblur":case"afterblur":w=Ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=q_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=rP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=yP;break;case G1:case Q1:case Y1:w=oP;break;case X1:w=wP;break;case"scroll":w=tP;break;case"wheel":w=TP;break;case"copy":case"cut":case"paste":w=lP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=K_}var k=(e&4)!==0,D=!k&&t==="scroll",b=k?v!==null?v+"Capture":null:v;k=[];for(var I=h,A;I!==null;){A=I;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,b!==null&&(V=Gu(I,b),V!=null&&k.push(tc(I,V,A)))),D)break;I=I.return}0<k.length&&(v=new w(v,S,null,n,f),g.push({event:v,listeners:k}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",v&&n!==Ig&&(S=n.relatedTarget||n.fromElement)&&(Lo(S)||S[Ui]))break e;if((w||v)&&(v=f.window===f?f:(v=f.ownerDocument)?v.defaultView||v.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=h,S=S?Lo(S):null,S!==null&&(D=ia(S),S!==D||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=h),w!==S)){if(k=q_,V="onMouseLeave",b="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(k=K_,V="onPointerLeave",b="onPointerEnter",I="pointer"),D=w==null?v:Ha(w),A=S==null?v:Ha(S),v=new k(V,I+"leave",w,n,f),v.target=D,v.relatedTarget=A,V=null,Lo(f)===h&&(k=new k(b,I+"enter",S,n,f),k.target=A,k.relatedTarget=D,V=k),D=V,w&&S)t:{for(k=w,b=S,I=0,A=k;A;A=Da(A))I++;for(A=0,V=b;V;V=Da(V))A++;for(;0<I-A;)k=Da(k),I--;for(;0<A-I;)b=Da(b),A--;for(;I--;){if(k===b||b!==null&&k===b.alternate)break t;k=Da(k),b=Da(b)}k=null}else k=null;w!==null&&i0(g,v,w,k,!1),S!==null&&D!==null&&i0(g,D,S,k,!0)}}e:{if(v=h?Ha(h):window,w=v.nodeName&&v.nodeName.toLowerCase(),w==="select"||w==="input"&&v.type==="file")var H=PP;else if(Y_(v))if(B1)H=DP;else{H=xP;var W=RP}else(w=v.nodeName)&&w.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(H=OP);if(H&&(H=H(t,h))){z1(g,H,n,f);break e}W&&W(t,v,h),t==="focusout"&&(W=v._wrapperState)&&W.controlled&&v.type==="number"&&yg(v,"number",v.value)}switch(W=h?Ha(h):window,t){case"focusin":(Y_(W)||W.contentEditable==="true")&&(za=W,Rg=h,Ou=null);break;case"focusout":Ou=Rg=za=null;break;case"mousedown":xg=!0;break;case"contextmenu":case"mouseup":case"dragend":xg=!1,t0(g,n,f);break;case"selectionchange":if(MP)break;case"keydown":case"keyup":t0(g,n,f)}var R;if(ov)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else $a?U1(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(F1&&n.locale!=="ko"&&($a||E!=="onCompositionStart"?E==="onCompositionEnd"&&$a&&(R=V1()):(xs=f,rv="value"in xs?xs.value:xs.textContent,$a=!0)),W=md(h,E),0<W.length&&(E=new W_(E,t,null,n,f),g.push({event:E,listeners:W}),R?E.data=R:(R=$1(n),R!==null&&(E.data=R)))),(R=SP?CP(t,n):bP(t,n))&&(h=md(h,"onBeforeInput"),0<h.length&&(f=new W_("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:h}),f.data=R))}Z1(g,e)})}function tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function md(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gu(t,n),s!=null&&r.unshift(tc(t,s,i)),s=Gu(t,e),s!=null&&r.push(tc(t,s,i))),t=t.return}return r}function Da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&h!==null&&(a=h,i?(u=Gu(n,s),u!=null&&o.unshift(tc(n,u,a))):i||(u=Gu(n,s),u!=null&&o.push(tc(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UP=/\r\n?/g,$P=/\u0000|\uFFFD/g;function s0(t){return(typeof t=="string"?t:""+t).replace(UP,`
`).replace($P,"")}function wh(t,e,n){if(e=s0(e),s0(t)!==e&&n)throw Error(Q(425))}function vd(){}var Og=null,Dg=null;function Ng(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lg=typeof setTimeout=="function"?setTimeout:void 0,zP=typeof clearTimeout=="function"?clearTimeout:void 0,o0=typeof Promise=="function"?Promise:void 0,BP=typeof queueMicrotask=="function"?queueMicrotask:typeof o0<"u"?function(t){return o0.resolve(null).then(t).catch(HP)}:Lg;function HP(t){setTimeout(function(){throw t})}function Pp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xu(e)}function Vs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function a0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Al=Math.random().toString(36).slice(2),ai="__reactFiber$"+Al,nc="__reactProps$"+Al,Ui="__reactContainer$"+Al,Mg="__reactEvents$"+Al,qP="__reactListeners$"+Al,WP="__reactHandles$"+Al;function Lo(t){var e=t[ai];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ui]||n[ai]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=a0(t);t!==null;){if(n=t[ai])return n;t=a0(t)}return e}t=n,n=t.parentNode}return null}function Sc(t){return t=t[ai]||t[Ui],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function lf(t){return t[nc]||null}var jg=[],qa=-1;function ro(t){return{current:t}}function st(t){0>qa||(t.current=jg[qa],jg[qa]=null,qa--)}function nt(t,e){qa++,jg[qa]=t.current,t.current=e}var Ys={},fn=ro(Ys),Ln=ro(!1),qo=Ys;function ll(t,e){var n=t.type.contextTypes;if(!n)return Ys;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mn(t){return t=t.childContextTypes,t!=null}function yd(){st(Ln),st(fn)}function l0(t,e,n){if(fn.current!==Ys)throw Error(Q(168));nt(fn,e),nt(Ln,n)}function tT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,Rk(t)||"Unknown",i));return dt({},n,r)}function _d(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ys,qo=fn.current,nt(fn,t),nt(Ln,Ln.current),!0}function u0(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=tT(t,e,qo),r.__reactInternalMemoizedMergedChildContext=t,st(Ln),st(fn),nt(fn,t)):st(Ln),nt(Ln,n)}var Ri=null,uf=!1,Rp=!1;function nT(t){Ri===null?Ri=[t]:Ri.push(t)}function KP(t){uf=!0,nT(t)}function io(){if(!Rp&&Ri!==null){Rp=!0;var t=0,e=Be;try{var n=Ri;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ri=null,uf=!1}catch(i){throw Ri!==null&&(Ri=Ri.slice(t+1)),A1(Zm,io),i}finally{Be=e,Rp=!1}}return null}var Wa=[],Ka=0,wd=null,Ed=0,mr=[],vr=0,Wo=null,Oi=1,Di="";function Oo(t,e){Wa[Ka++]=Ed,Wa[Ka++]=wd,wd=t,Ed=e}function rT(t,e,n){mr[vr++]=Oi,mr[vr++]=Di,mr[vr++]=Wo,Wo=t;var r=Oi;t=Di;var i=32-Ur(r)-1;r&=~(1<<i),n+=1;var s=32-Ur(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Oi=1<<32-Ur(e)+i|n<<i|r,Di=s+t}else Oi=1<<s|n<<i|r,Di=t}function lv(t){t.return!==null&&(Oo(t,1),rT(t,1,0))}function uv(t){for(;t===wd;)wd=Wa[--Ka],Wa[Ka]=null,Ed=Wa[--Ka],Wa[Ka]=null;for(;t===Wo;)Wo=mr[--vr],mr[vr]=null,Di=mr[--vr],mr[vr]=null,Oi=mr[--vr],mr[vr]=null}var Yn=null,Qn=null,ot=!1,Vr=null;function iT(t,e){var n=_r(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yn=t,Qn=Vs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yn=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wo!==null?{id:Oi,overflow:Di}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_r(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yn=t,Qn=null,!0):!1;default:return!1}}function Vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fg(t){if(ot){var e=Qn;if(e){var n=e;if(!c0(t,e)){if(Vg(t))throw Error(Q(418));e=Vs(n.nextSibling);var r=Yn;e&&c0(t,e)?iT(r,n):(t.flags=t.flags&-4097|2,ot=!1,Yn=t)}}else{if(Vg(t))throw Error(Q(418));t.flags=t.flags&-4097|2,ot=!1,Yn=t}}}function h0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yn=t}function Eh(t){if(t!==Yn)return!1;if(!ot)return h0(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ng(t.type,t.memoizedProps)),e&&(e=Qn)){if(Vg(t))throw sT(),Error(Q(418));for(;e;)iT(t,e),e=Vs(e.nextSibling)}if(h0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=Vs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=Yn?Vs(t.stateNode.nextSibling):null;return!0}function sT(){for(var t=Qn;t;)t=Vs(t.nextSibling)}function ul(){Qn=Yn=null,ot=!1}function cv(t){Vr===null?Vr=[t]:Vr.push(t)}var GP=Gi.ReactCurrentBatchConfig;function cu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Th(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d0(t){var e=t._init;return e(t._payload)}function oT(t){function e(b,I){if(t){var A=b.deletions;A===null?(b.deletions=[I],b.flags|=16):A.push(I)}}function n(b,I){if(!t)return null;for(;I!==null;)e(b,I),I=I.sibling;return null}function r(b,I){for(b=new Map;I!==null;)I.key!==null?b.set(I.key,I):b.set(I.index,I),I=I.sibling;return b}function i(b,I){return b=zs(b,I),b.index=0,b.sibling=null,b}function s(b,I,A){return b.index=A,t?(A=b.alternate,A!==null?(A=A.index,A<I?(b.flags|=2,I):A):(b.flags|=2,I)):(b.flags|=1048576,I)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,I,A,V){return I===null||I.tag!==6?(I=jp(A,b.mode,V),I.return=b,I):(I=i(I,A),I.return=b,I)}function u(b,I,A,V){var H=A.type;return H===Ua?f(b,I,A.props.children,V,A.key):I!==null&&(I.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Ts&&d0(H)===I.type)?(V=i(I,A.props),V.ref=cu(b,I,A),V.return=b,V):(V=Gh(A.type,A.key,A.props,null,b.mode,V),V.ref=cu(b,I,A),V.return=b,V)}function h(b,I,A,V){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=Vp(A,b.mode,V),I.return=b,I):(I=i(I,A.children||[]),I.return=b,I)}function f(b,I,A,V,H){return I===null||I.tag!==7?(I=zo(A,b.mode,V,H),I.return=b,I):(I=i(I,A),I.return=b,I)}function g(b,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=jp(""+I,b.mode,A),I.return=b,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hh:return A=Gh(I.type,I.key,I.props,null,b.mode,A),A.ref=cu(b,null,I),A.return=b,A;case Fa:return I=Vp(I,b.mode,A),I.return=b,I;case Ts:var V=I._init;return g(b,V(I._payload),A)}if(vu(I)||su(I))return I=zo(I,b.mode,A,null),I.return=b,I;Th(b,I)}return null}function v(b,I,A,V){var H=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return H!==null?null:a(b,I,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case hh:return A.key===H?u(b,I,A,V):null;case Fa:return A.key===H?h(b,I,A,V):null;case Ts:return H=A._init,v(b,I,H(A._payload),V)}if(vu(A)||su(A))return H!==null?null:f(b,I,A,V,null);Th(b,A)}return null}function w(b,I,A,V,H){if(typeof V=="string"&&V!==""||typeof V=="number")return b=b.get(A)||null,a(I,b,""+V,H);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case hh:return b=b.get(V.key===null?A:V.key)||null,u(I,b,V,H);case Fa:return b=b.get(V.key===null?A:V.key)||null,h(I,b,V,H);case Ts:var W=V._init;return w(b,I,A,W(V._payload),H)}if(vu(V)||su(V))return b=b.get(A)||null,f(I,b,V,H,null);Th(I,V)}return null}function S(b,I,A,V){for(var H=null,W=null,R=I,E=I=0,P=null;R!==null&&E<A.length;E++){R.index>E?(P=R,R=null):P=R.sibling;var x=v(b,R,A[E],V);if(x===null){R===null&&(R=P);break}t&&R&&x.alternate===null&&e(b,R),I=s(x,I,E),W===null?H=x:W.sibling=x,W=x,R=P}if(E===A.length)return n(b,R),ot&&Oo(b,E),H;if(R===null){for(;E<A.length;E++)R=g(b,A[E],V),R!==null&&(I=s(R,I,E),W===null?H=R:W.sibling=R,W=R);return ot&&Oo(b,E),H}for(R=r(b,R);E<A.length;E++)P=w(R,b,E,A[E],V),P!==null&&(t&&P.alternate!==null&&R.delete(P.key===null?E:P.key),I=s(P,I,E),W===null?H=P:W.sibling=P,W=P);return t&&R.forEach(function(N){return e(b,N)}),ot&&Oo(b,E),H}function k(b,I,A,V){var H=su(A);if(typeof H!="function")throw Error(Q(150));if(A=H.call(A),A==null)throw Error(Q(151));for(var W=H=null,R=I,E=I=0,P=null,x=A.next();R!==null&&!x.done;E++,x=A.next()){R.index>E?(P=R,R=null):P=R.sibling;var N=v(b,R,x.value,V);if(N===null){R===null&&(R=P);break}t&&R&&N.alternate===null&&e(b,R),I=s(N,I,E),W===null?H=N:W.sibling=N,W=N,R=P}if(x.done)return n(b,R),ot&&Oo(b,E),H;if(R===null){for(;!x.done;E++,x=A.next())x=g(b,x.value,V),x!==null&&(I=s(x,I,E),W===null?H=x:W.sibling=x,W=x);return ot&&Oo(b,E),H}for(R=r(b,R);!x.done;E++,x=A.next())x=w(R,b,E,x.value,V),x!==null&&(t&&x.alternate!==null&&R.delete(x.key===null?E:x.key),I=s(x,I,E),W===null?H=x:W.sibling=x,W=x);return t&&R.forEach(function(L){return e(b,L)}),ot&&Oo(b,E),H}function D(b,I,A,V){if(typeof A=="object"&&A!==null&&A.type===Ua&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case hh:e:{for(var H=A.key,W=I;W!==null;){if(W.key===H){if(H=A.type,H===Ua){if(W.tag===7){n(b,W.sibling),I=i(W,A.props.children),I.return=b,b=I;break e}}else if(W.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Ts&&d0(H)===W.type){n(b,W.sibling),I=i(W,A.props),I.ref=cu(b,W,A),I.return=b,b=I;break e}n(b,W);break}else e(b,W);W=W.sibling}A.type===Ua?(I=zo(A.props.children,b.mode,V,A.key),I.return=b,b=I):(V=Gh(A.type,A.key,A.props,null,b.mode,V),V.ref=cu(b,I,A),V.return=b,b=V)}return o(b);case Fa:e:{for(W=A.key;I!==null;){if(I.key===W)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){n(b,I.sibling),I=i(I,A.children||[]),I.return=b,b=I;break e}else{n(b,I);break}else e(b,I);I=I.sibling}I=Vp(A,b.mode,V),I.return=b,b=I}return o(b);case Ts:return W=A._init,D(b,I,W(A._payload),V)}if(vu(A))return S(b,I,A,V);if(su(A))return k(b,I,A,V);Th(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(n(b,I.sibling),I=i(I,A),I.return=b,b=I):(n(b,I),I=jp(A,b.mode,V),I.return=b,b=I),o(b)):n(b,I)}return D}var cl=oT(!0),aT=oT(!1),Td=ro(null),Id=null,Ga=null,hv=null;function dv(){hv=Ga=Id=null}function fv(t){var e=Td.current;st(Td),t._currentValue=e}function Ug(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tl(t,e){Id=t,hv=Ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nn=!0),t.firstContext=null)}function Ir(t){var e=t._currentValue;if(hv!==t)if(t={context:t,memoizedValue:e,next:null},Ga===null){if(Id===null)throw Error(Q(308));Ga=t,Id.dependencies={lanes:0,firstContext:t}}else Ga=Ga.next=t;return e}var Mo=null;function pv(t){Mo===null?Mo=[t]:Mo.push(t)}function lT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,pv(e)):(n.next=i.next,i.next=n),e.interleaved=n,$i(t,r)}function $i(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Is=!1;function gv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,$i(t,n)}return i=r.interleaved,i===null?(e.next=e,pv(r)):(e.next=i.next,i.next=e),r.interleaved=e,$i(t,n)}function zh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ev(t,n)}}function f0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sd(t,e,n,r){var i=t.updateQueue;Is=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=h:a.next=h,f.lastBaseUpdate=u))}if(s!==null){var g=i.baseState;o=0,f=h=u=null,a=s;do{var v=a.lane,w=a.eventTime;if((r&v)===v){f!==null&&(f=f.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,k=a;switch(v=e,w=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){g=S.call(w,g,v);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,v=typeof S=="function"?S.call(w,g,v):S,v==null)break e;g=dt({},g,v);break e;case 2:Is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,v=i.effects,v===null?i.effects=[a]:v.push(a))}else w={eventTime:w,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(h=f=w,u=g):f=f.next=w,o|=v;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;v=a,a=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(f===null&&(u=g),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Go|=o,t.lanes=o,t.memoizedState=g}}function p0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var Cc={},ci=ro(Cc),rc=ro(Cc),ic=ro(Cc);function jo(t){if(t===Cc)throw Error(Q(174));return t}function mv(t,e){switch(nt(ic,e),nt(rc,t),nt(ci,Cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wg(e,t)}st(ci),nt(ci,e)}function hl(){st(ci),st(rc),st(ic)}function cT(t){jo(ic.current);var e=jo(ci.current),n=wg(e,t.type);e!==n&&(nt(rc,t),nt(ci,n))}function vv(t){rc.current===t&&(st(ci),st(rc))}var ct=ro(0);function Cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xp=[];function yv(){for(var t=0;t<xp.length;t++)xp[t]._workInProgressVersionPrimary=null;xp.length=0}var Bh=Gi.ReactCurrentDispatcher,Op=Gi.ReactCurrentBatchConfig,Ko=0,ht=null,Nt=null,Ht=null,bd=!1,Du=!1,sc=0,QP=0;function on(){throw Error(Q(321))}function _v(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qr(t[n],e[n]))return!1;return!0}function wv(t,e,n,r,i,s){if(Ko=s,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bh.current=t===null||t.memoizedState===null?ZP:eR,t=n(r,i),Du){s=0;do{if(Du=!1,sc=0,25<=s)throw Error(Q(301));s+=1,Ht=Nt=null,e.updateQueue=null,Bh.current=tR,t=n(r,i)}while(Du)}if(Bh.current=Ad,e=Nt!==null&&Nt.next!==null,Ko=0,Ht=Nt=ht=null,bd=!1,e)throw Error(Q(300));return t}function Ev(){var t=sc!==0;return sc=0,t}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?ht.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Sr(){if(Nt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ht===null?ht.memoizedState:Ht.next;if(e!==null)Ht=e,Nt=t;else{if(t===null)throw Error(Q(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ht===null?ht.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function oc(t,e){return typeof e=="function"?e(t):e}function Dp(t){var e=Sr(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=Nt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,h=s;do{var f=h.lane;if((Ko&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var g={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=g,o=r):u=u.next=g,ht.lanes|=f,Go|=f}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=a,qr(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ht.lanes|=s,Go|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Np(t){var e=Sr(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);qr(s,e.memoizedState)||(Nn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hT(){}function dT(t,e){var n=ht,r=Sr(),i=e(),s=!qr(r.memoizedState,i);if(s&&(r.memoizedState=i,Nn=!0),r=r.queue,Tv(gT.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ht!==null&&Ht.memoizedState.tag&1){if(n.flags|=2048,ac(9,pT.bind(null,n,r,i,e),void 0,null),qt===null)throw Error(Q(349));Ko&30||fT(n,e,i)}return i}function fT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pT(t,e,n,r){e.value=n,e.getSnapshot=r,mT(e)&&vT(t)}function gT(t,e,n){return n(function(){mT(e)&&vT(t)})}function mT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qr(t,n)}catch{return!0}}function vT(t){var e=$i(t,1);e!==null&&$r(e,t,1,-1)}function g0(t){var e=oi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:t},e.queue=t,t=t.dispatch=JP.bind(null,ht,t),[e.memoizedState,t]}function ac(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yT(){return Sr().memoizedState}function Hh(t,e,n,r){var i=oi();ht.flags|=t,i.memoizedState=ac(1|e,n,void 0,r===void 0?null:r)}function cf(t,e,n,r){var i=Sr();r=r===void 0?null:r;var s=void 0;if(Nt!==null){var o=Nt.memoizedState;if(s=o.destroy,r!==null&&_v(r,o.deps)){i.memoizedState=ac(e,n,s,r);return}}ht.flags|=t,i.memoizedState=ac(1|e,n,s,r)}function m0(t,e){return Hh(8390656,8,t,e)}function Tv(t,e){return cf(2048,8,t,e)}function _T(t,e){return cf(4,2,t,e)}function wT(t,e){return cf(4,4,t,e)}function ET(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TT(t,e,n){return n=n!=null?n.concat([t]):null,cf(4,4,ET.bind(null,e,t),n)}function Iv(){}function IT(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_v(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ST(t,e){var n=Sr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_v(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function CT(t,e,n){return Ko&21?(qr(n,e)||(n=R1(),ht.lanes|=n,Go|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nn=!0),t.memoizedState=n)}function YP(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=Op.transition;Op.transition={};try{t(!1),e()}finally{Be=n,Op.transition=r}}function bT(){return Sr().memoizedState}function XP(t,e,n){var r=$s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},AT(t))kT(e,n);else if(n=lT(t,e,n,r),n!==null){var i=En();$r(n,t,r,i),PT(n,e,r)}}function JP(t,e,n){var r=$s(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(AT(t))kT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,qr(a,o)){var u=e.interleaved;u===null?(i.next=i,pv(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=lT(t,e,i,r),n!==null&&(i=En(),$r(n,t,r,i),PT(n,e,r))}}function AT(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function kT(t,e){Du=bd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ev(t,n)}}var Ad={readContext:Ir,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},ZP={readContext:Ir,useCallback:function(t,e){return oi().memoizedState=[t,e===void 0?null:e],t},useContext:Ir,useEffect:m0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4194308,4,ET.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Hh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Hh(4,2,t,e)},useMemo:function(t,e){var n=oi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=XP.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=oi();return t={current:t},e.memoizedState=t},useState:g0,useDebugValue:Iv,useDeferredValue:function(t){return oi().memoizedState=t},useTransition:function(){var t=g0(!1),e=t[0];return t=YP.bind(null,t[1]),oi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,i=oi();if(ot){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),qt===null)throw Error(Q(349));Ko&30||fT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,m0(gT.bind(null,r,s,t),[t]),r.flags|=2048,ac(9,pT.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=oi(),e=qt.identifierPrefix;if(ot){var n=Di,r=Oi;n=(r&~(1<<32-Ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eR={readContext:Ir,useCallback:IT,useContext:Ir,useEffect:Tv,useImperativeHandle:TT,useInsertionEffect:_T,useLayoutEffect:wT,useMemo:ST,useReducer:Dp,useRef:yT,useState:function(){return Dp(oc)},useDebugValue:Iv,useDeferredValue:function(t){var e=Sr();return CT(e,Nt.memoizedState,t)},useTransition:function(){var t=Dp(oc)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:hT,useSyncExternalStore:dT,useId:bT,unstable_isNewReconciler:!1},tR={readContext:Ir,useCallback:IT,useContext:Ir,useEffect:Tv,useImperativeHandle:TT,useInsertionEffect:_T,useLayoutEffect:wT,useMemo:ST,useReducer:Np,useRef:yT,useState:function(){return Np(oc)},useDebugValue:Iv,useDeferredValue:function(t){var e=Sr();return Nt===null?e.memoizedState=t:CT(e,Nt.memoizedState,t)},useTransition:function(){var t=Np(oc)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:hT,useSyncExternalStore:dT,useId:bT,unstable_isNewReconciler:!1};function Mr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $g(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hf={isMounted:function(t){return(t=t._reactInternals)?ia(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=En(),i=$s(t),s=ji(r,i);s.payload=e,n!=null&&(s.callback=n),e=Fs(t,s,i),e!==null&&($r(e,t,i,r),zh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=En(),i=$s(t),s=ji(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Fs(t,s,i),e!==null&&($r(e,t,i,r),zh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=En(),r=$s(t),i=ji(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fs(t,i,r),e!==null&&($r(e,t,r,n),zh(e,t,r))}};function v0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zu(n,r)||!Zu(i,s):!0}function RT(t,e,n){var r=!1,i=Ys,s=e.contextType;return typeof s=="object"&&s!==null?s=Ir(s):(i=Mn(e)?qo:fn.current,r=e.contextTypes,s=(r=r!=null)?ll(t,i):Ys),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function y0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hf.enqueueReplaceState(e,e.state,null)}function zg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ir(s):(s=Mn(e)?qo:fn.current,i.context=ll(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($g(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hf.enqueueReplaceState(i,i.state,null),Sd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dl(t,e){try{var n="",r=e;do n+=Pk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Lp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nR=typeof WeakMap=="function"?WeakMap:Map;function xT(t,e,n){n=ji(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pd||(Pd=!0,Zg=r),Bg(t,e)},n}function OT(t,e,n){n=ji(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Bg(t,e),typeof r!="function"&&(Us===null?Us=new Set([this]):Us.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new nR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=mR.bind(null,t,e,n),e.then(t,t))}function w0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function E0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ji(-1,1),e.tag=2,Fs(n,e,1))),n.lanes|=1),t)}var rR=Gi.ReactCurrentOwner,Nn=!1;function wn(t,e,n,r){e.child=t===null?aT(e,null,n,r):cl(e,t.child,n,r)}function T0(t,e,n,r,i){n=n.render;var s=e.ref;return tl(e,i),r=wv(t,e,n,r,s,i),n=Ev(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(ot&&n&&lv(e),e.flags|=1,wn(t,e,r,i),e.child)}function I0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!xv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,DT(t,e,s,r,i)):(t=Gh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zu,n(o,r)&&t.ref===e.ref)return zi(t,e,i)}return e.flags|=1,t=zs(s,r),t.ref=e.ref,t.return=e,e.child=t}function DT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zu(s,r)&&t.ref===e.ref)if(Nn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Nn=!0);else return e.lanes=t.lanes,zi(t,e,i)}return Hg(t,e,n,r,i)}function NT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ya,Kn),Kn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Ya,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nt(Ya,Kn),Kn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,nt(Ya,Kn),Kn|=r;return wn(t,e,i,n),e.child}function LT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hg(t,e,n,r,i){var s=Mn(n)?qo:fn.current;return s=ll(e,s),tl(e,i),n=wv(t,e,n,r,s,i),r=Ev(),t!==null&&!Nn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,zi(t,e,i)):(ot&&r&&lv(e),e.flags|=1,wn(t,e,n,i),e.child)}function S0(t,e,n,r,i){if(Mn(n)){var s=!0;_d(e)}else s=!1;if(tl(e,i),e.stateNode===null)qh(t,e),RT(e,n,r),zg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ir(h):(h=Mn(n)?qo:fn.current,h=ll(e,h));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==h)&&y0(e,o,r,h),Is=!1;var v=e.memoizedState;o.state=v,Sd(e,r,o,i),u=e.memoizedState,a!==r||v!==u||Ln.current||Is?(typeof f=="function"&&($g(e,n,f,r),u=e.memoizedState),(a=Is||v0(e,n,a,r,v,u,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uT(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:Mr(e.type,a),o.props=h,g=e.pendingProps,v=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ir(u):(u=Mn(n)?qo:fn.current,u=ll(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||v!==u)&&y0(e,o,r,u),Is=!1,v=e.memoizedState,o.state=v,Sd(e,r,o,i);var S=e.memoizedState;a!==g||v!==S||Ln.current||Is?(typeof w=="function"&&($g(e,n,w,r),S=e.memoizedState),(h=Is||v0(e,n,h,r,v,S,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),r=!1)}return qg(t,e,n,r,s,i)}function qg(t,e,n,r,i,s){LT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&u0(e,n,!1),zi(t,e,s);r=e.stateNode,rR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cl(e,t.child,null,s),e.child=cl(e,null,a,s)):wn(t,e,a,s),e.memoizedState=r.state,i&&u0(e,n,!0),e.child}function MT(t){var e=t.stateNode;e.pendingContext?l0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&l0(t,e.context,!1),mv(t,e.containerInfo)}function C0(t,e,n,r,i){return ul(),cv(i),e.flags|=256,wn(t,e,n,r),e.child}var Wg={dehydrated:null,treeContext:null,retryLane:0};function Kg(t){return{baseLanes:t,cachePool:null,transitions:null}}function jT(t,e,n){var r=e.pendingProps,i=ct.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(ct,i&1),t===null)return Fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pf(o,r,0,null),t=zo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kg(n),e.memoizedState=Wg,t):Sv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return iR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=zs(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=zs(a,s):(s=zo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Kg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Wg,r}return s=t.child,t=s.sibling,r=zs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sv(t,e){return e=pf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ih(t,e,n,r){return r!==null&&cv(r),cl(e,t.child,null,n),t=Sv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Lp(Error(Q(422))),Ih(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pf({mode:"visible",children:r.children},i,0,null),s=zo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cl(e,t.child,null,o),e.child.memoizedState=Kg(o),e.memoizedState=Wg,s);if(!(e.mode&1))return Ih(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=Lp(s,r,void 0),Ih(t,e,o,r)}if(a=(o&t.childLanes)!==0,Nn||a){if(r=qt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,$i(t,i),$r(r,t,i,-1))}return Rv(),r=Lp(Error(Q(421))),Ih(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=vR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qn=Vs(i.nextSibling),Yn=e,ot=!0,Vr=null,t!==null&&(mr[vr++]=Oi,mr[vr++]=Di,mr[vr++]=Wo,Oi=t.id,Di=t.overflow,Wo=e),e=Sv(e,r.children),e.flags|=4096,e)}function b0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ug(t.return,e,n)}function Mp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function VT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wn(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b0(t,n,e);else if(t.tag===19)b0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mp(e,!0,n,null,s);break;case"together":Mp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function qh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function zi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Go|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=zs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sR(t,e,n){switch(e.tag){case 3:MT(e),ul();break;case 5:cT(e);break;case 1:Mn(e.type)&&_d(e);break;case 4:mv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nt(Td,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?jT(t,e,n):(nt(ct,ct.current&1),t=zi(t,e,n),t!==null?t.sibling:null);nt(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return VT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,NT(t,e,n)}return zi(t,e,n)}var FT,Gg,UT,$T;FT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gg=function(){};UT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,jo(ci.current);var s=null;switch(n){case"input":i=mg(t,i),r=mg(t,r),s=[];break;case"select":i=dt({},i,{value:void 0}),r=dt({},r,{value:void 0}),s=[];break;case"textarea":i=_g(t,i),r=_g(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=vd)}Eg(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var a=i[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Wu.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(a=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Wu.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&it("scroll",t),s||a===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};$T=function(t,e,n,r){n!==r&&(e.flags|=4)};function hu(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oR(t,e,n){var r=e.pendingProps;switch(uv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return Mn(e.type)&&yd(),an(e),null;case 3:return r=e.stateNode,hl(),st(Ln),st(fn),yv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Eh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vr!==null&&(nm(Vr),Vr=null))),Gg(t,e),an(e),null;case 5:vv(e);var i=jo(ic.current);if(n=e.type,t!==null&&e.stateNode!=null)UT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return an(e),null}if(t=jo(ci.current),Eh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ai]=e,r[nc]=s,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(i=0;i<_u.length;i++)it(_u[i],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":L_(r,s),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},it("invalid",r);break;case"textarea":j_(r,s),it("invalid",r)}Eg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wh(r.textContent,a,t),i=["children",""+a]):Wu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":dh(r),M_(r,s,!0);break;case"textarea":dh(r),V_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=vd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=g1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ai]=e,t[nc]=r,FT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tg(n,r),n){case"dialog":it("cancel",t),it("close",t),i=r;break;case"iframe":case"object":case"embed":it("load",t),i=r;break;case"video":case"audio":for(i=0;i<_u.length;i++)it(_u[i],t);i=r;break;case"source":it("error",t),i=r;break;case"img":case"image":case"link":it("error",t),it("load",t),i=r;break;case"details":it("toggle",t),i=r;break;case"input":L_(t,r),i=mg(t,r),it("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dt({},r,{value:void 0}),it("invalid",t);break;case"textarea":j_(t,r),i=_g(t,r),it("invalid",t);break;default:i=r}Eg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?y1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&m1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ku(t,u):typeof u=="number"&&Ku(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wu.hasOwnProperty(s)?u!=null&&s==="onScroll"&&it("scroll",t):u!=null&&Gm(t,s,u,o))}switch(n){case"input":dh(t),M_(t,r,!1);break;case"textarea":dh(t),V_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=vd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)$T(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=jo(ic.current),jo(ci.current),Eh(e)){if(r=e.stateNode,n=e.memoizedProps,r[ai]=e,(s=r.nodeValue!==n)&&(t=Yn,t!==null))switch(t.tag){case 3:wh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ai]=e,e.stateNode=r}return an(e),null;case 13:if(st(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Qn!==null&&e.mode&1&&!(e.flags&128))sT(),ul(),e.flags|=98560,s=!1;else if(s=Eh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[ai]=e}else ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),s=!1}else Vr!==null&&(nm(Vr),Vr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Mt===0&&(Mt=3):Rv())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return hl(),Gg(t,e),t===null&&ec(e.stateNode.containerInfo),an(e),null;case 10:return fv(e.type._context),an(e),null;case 17:return Mn(e.type)&&yd(),an(e),null;case 19:if(st(ct),s=e.memoizedState,s===null)return an(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)hu(s,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cd(t),o!==null){for(e.flags|=128,hu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(ct,ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&Tt()>fl&&(e.flags|=128,r=!0,hu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),hu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return an(e),null}else 2*Tt()-s.renderingStartTime>fl&&n!==1073741824&&(e.flags|=128,r=!0,hu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Tt(),e.sibling=null,n=ct.current,nt(ct,r?n&1|2:n&1),e):(an(e),null);case 22:case 23:return Pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function aR(t,e){switch(uv(e),e.tag){case 1:return Mn(e.type)&&yd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hl(),st(Ln),st(fn),yv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return vv(e),null;case 13:if(st(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(ct),null;case 4:return hl(),null;case 10:return fv(e.type._context),null;case 22:case 23:return Pv(),null;case 24:return null;default:return null}}var Sh=!1,hn=!1,lR=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Qa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function Qg(t,e,n){try{n()}catch(r){mt(t,e,r)}}var A0=!1;function uR(t,e){if(Og=pd,t=W1(),av(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,f=0,g=t,v=null;t:for(;;){for(var w;g!==n||i!==0&&g.nodeType!==3||(a=o+i),g!==s||r!==0&&g.nodeType!==3||(u=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(w=g.firstChild)!==null;)v=g,g=w;for(;;){if(g===t)break t;if(v===n&&++h===i&&(a=o),v===s&&++f===r&&(u=o),(w=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=w}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dg={focusedElem:t,selectionRange:n},pd=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,D=S.memoizedState,b=e.stateNode,I=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:Mr(e.type,k),D);b.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(V){mt(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return S=A0,A0=!1,S}function Nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Qg(e,n,s)}i=i.next}while(i!==r)}}function df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zT(t){var e=t.alternate;e!==null&&(t.alternate=null,zT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ai],delete e[nc],delete e[Mg],delete e[qP],delete e[WP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BT(t){return t.tag===5||t.tag===3||t.tag===4}function k0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vd));else if(r!==4&&(t=t.child,t!==null))for(Xg(t,e,n),t=t.sibling;t!==null;)Xg(t,e,n),t=t.sibling}function Jg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Jg(t,e,n),t=t.sibling;t!==null;)Jg(t,e,n),t=t.sibling}var Kt=null,jr=!1;function ys(t,e,n){for(n=n.child;n!==null;)HT(t,e,n),n=n.sibling}function HT(t,e,n){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(rf,n)}catch{}switch(n.tag){case 5:hn||Qa(n,e);case 6:var r=Kt,i=jr;Kt=null,ys(t,e,n),Kt=r,jr=i,Kt!==null&&(jr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(jr?(t=Kt,n=n.stateNode,t.nodeType===8?Pp(t.parentNode,n):t.nodeType===1&&Pp(t,n),Xu(t)):Pp(Kt,n.stateNode));break;case 4:r=Kt,i=jr,Kt=n.stateNode.containerInfo,jr=!0,ys(t,e,n),Kt=r,jr=i;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Qg(n,e,o),i=i.next}while(i!==r)}ys(t,e,n);break;case 1:if(!hn&&(Qa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){mt(n,e,a)}ys(t,e,n);break;case 21:ys(t,e,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,ys(t,e,n),hn=r):ys(t,e,n);break;default:ys(t,e,n)}}function P0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lR),e.forEach(function(r){var i=yR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,jr=!1;break e;case 3:Kt=a.stateNode.containerInfo,jr=!0;break e;case 4:Kt=a.stateNode.containerInfo,jr=!0;break e}a=a.return}if(Kt===null)throw Error(Q(160));HT(s,o,i),Kt=null,jr=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){mt(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qT(e,t),e=e.sibling}function qT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lr(e,t),si(t),r&4){try{Nu(3,t,t.return),df(3,t)}catch(k){mt(t,t.return,k)}try{Nu(5,t,t.return)}catch(k){mt(t,t.return,k)}}break;case 1:Lr(e,t),si(t),r&512&&n!==null&&Qa(n,n.return);break;case 5:if(Lr(e,t),si(t),r&512&&n!==null&&Qa(n,n.return),t.flags&32){var i=t.stateNode;try{Ku(i,"")}catch(k){mt(t,t.return,k)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&f1(i,s),Tg(a,o);var h=Tg(a,s);for(o=0;o<u.length;o+=2){var f=u[o],g=u[o+1];f==="style"?y1(i,g):f==="dangerouslySetInnerHTML"?m1(i,g):f==="children"?Ku(i,g):Gm(i,f,g,h)}switch(a){case"input":vg(i,s);break;case"textarea":p1(i,s);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Xa(i,!!s.multiple,w,!1):v!==!!s.multiple&&(s.defaultValue!=null?Xa(i,!!s.multiple,s.defaultValue,!0):Xa(i,!!s.multiple,s.multiple?[]:"",!1))}i[nc]=s}catch(k){mt(t,t.return,k)}}break;case 6:if(Lr(e,t),si(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(k){mt(t,t.return,k)}}break;case 3:if(Lr(e,t),si(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xu(e.containerInfo)}catch(k){mt(t,t.return,k)}break;case 4:Lr(e,t),si(t);break;case 13:Lr(e,t),si(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Av=Tt())),r&4&&P0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(h=hn)||f,Lr(e,t),hn=h):Lr(e,t),si(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(ne=t,f=t.child;f!==null;){for(g=ne=f;ne!==null;){switch(v=ne,w=v.child,v.tag){case 0:case 11:case 14:case 15:Nu(4,v,v.return);break;case 1:Qa(v,v.return);var S=v.stateNode;if(typeof S.componentWillUnmount=="function"){r=v,n=v.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(k){mt(r,n,k)}}break;case 5:Qa(v,v.return);break;case 22:if(v.memoizedState!==null){x0(g);continue}}w!==null?(w.return=v,ne=w):x0(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{i=g.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=g.stateNode,u=g.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=v1("display",o))}catch(k){mt(t,t.return,k)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(k){mt(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Lr(e,t),si(t),r&4&&P0(t);break;case 21:break;default:Lr(e,t),si(t)}}function si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BT(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ku(i,""),r.flags&=-33);var s=k0(t);Jg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=k0(t);Xg(t,a,o);break;default:throw Error(Q(161))}}catch(u){mt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cR(t,e,n){ne=t,WT(t)}function WT(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sh;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||hn;a=Sh;var h=hn;if(Sh=o,(hn=u)&&!h)for(ne=i;ne!==null;)o=ne,u=o.child,o.tag===22&&o.memoizedState!==null?O0(i):u!==null?(u.return=o,ne=u):O0(i);for(;s!==null;)ne=s,WT(s),s=s.sibling;ne=i,Sh=a,hn=h}R0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):R0(t)}}function R0(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||df(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&p0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}p0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Xu(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}hn||e.flags&512&&Yg(e)}catch(v){mt(e,e.return,v)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function x0(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function O0(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{df(4,e)}catch(u){mt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){mt(e,i,u)}}var s=e.return;try{Yg(e)}catch(u){mt(e,s,u)}break;case 5:var o=e.return;try{Yg(e)}catch(u){mt(e,o,u)}}}catch(u){mt(e,e.return,u)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var hR=Math.ceil,kd=Gi.ReactCurrentDispatcher,Cv=Gi.ReactCurrentOwner,Er=Gi.ReactCurrentBatchConfig,De=0,qt=null,At=null,Jt=0,Kn=0,Ya=ro(0),Mt=0,lc=null,Go=0,ff=0,bv=0,Lu=null,Dn=null,Av=0,fl=1/0,Pi=null,Pd=!1,Zg=null,Us=null,Ch=!1,Os=null,Rd=0,Mu=0,em=null,Wh=-1,Kh=0;function En(){return De&6?Tt():Wh!==-1?Wh:Wh=Tt()}function $s(t){return t.mode&1?De&2&&Jt!==0?Jt&-Jt:GP.transition!==null?(Kh===0&&(Kh=R1()),Kh):(t=Be,t!==0||(t=window.event,t=t===void 0?16:j1(t.type)),t):1}function $r(t,e,n,r){if(50<Mu)throw Mu=0,em=null,Error(Q(185));Tc(t,n,r),(!(De&2)||t!==qt)&&(t===qt&&(!(De&2)&&(ff|=n),Mt===4&&bs(t,Jt)),jn(t,r),n===1&&De===0&&!(e.mode&1)&&(fl=Tt()+500,uf&&io()))}function jn(t,e){var n=t.callbackNode;Gk(t,e);var r=fd(t,t===qt?Jt:0);if(r===0)n!==null&&$_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$_(n),e===1)t.tag===0?KP(D0.bind(null,t)):nT(D0.bind(null,t)),BP(function(){!(De&6)&&io()}),n=null;else{switch(x1(r)){case 1:n=Zm;break;case 4:n=k1;break;case 16:n=dd;break;case 536870912:n=P1;break;default:n=dd}n=eI(n,KT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function KT(t,e){if(Wh=-1,Kh=0,De&6)throw Error(Q(327));var n=t.callbackNode;if(nl()&&t.callbackNode!==n)return null;var r=fd(t,t===qt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xd(t,r);else{e=r;var i=De;De|=2;var s=QT();(qt!==t||Jt!==e)&&(Pi=null,fl=Tt()+500,$o(t,e));do try{pR();break}catch(a){GT(t,a)}while(!0);dv(),kd.current=s,De=i,At!==null?e=0:(qt=null,Jt=0,e=Mt)}if(e!==0){if(e===2&&(i=Ag(t),i!==0&&(r=i,e=tm(t,i))),e===1)throw n=lc,$o(t,0),bs(t,r),jn(t,Tt()),n;if(e===6)bs(t,r);else{if(i=t.current.alternate,!(r&30)&&!dR(i)&&(e=xd(t,r),e===2&&(s=Ag(t),s!==0&&(r=s,e=tm(t,s))),e===1))throw n=lc,$o(t,0),bs(t,r),jn(t,Tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Do(t,Dn,Pi);break;case 3:if(bs(t,r),(r&130023424)===r&&(e=Av+500-Tt(),10<e)){if(fd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){En(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lg(Do.bind(null,t,Dn,Pi),e);break}Do(t,Dn,Pi);break;case 4:if(bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ur(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hR(r/1960))-r,10<r){t.timeoutHandle=Lg(Do.bind(null,t,Dn,Pi),r);break}Do(t,Dn,Pi);break;case 5:Do(t,Dn,Pi);break;default:throw Error(Q(329))}}}return jn(t,Tt()),t.callbackNode===n?KT.bind(null,t):null}function tm(t,e){var n=Lu;return t.current.memoizedState.isDehydrated&&($o(t,e).flags|=256),t=xd(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&nm(e)),t}function nm(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function dR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~bv,e&=~ff,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ur(e),r=1<<n;t[n]=-1,e&=~r}}function D0(t){if(De&6)throw Error(Q(327));nl();var e=fd(t,0);if(!(e&1))return jn(t,Tt()),null;var n=xd(t,e);if(t.tag!==0&&n===2){var r=Ag(t);r!==0&&(e=r,n=tm(t,r))}if(n===1)throw n=lc,$o(t,0),bs(t,e),jn(t,Tt()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Do(t,Dn,Pi),jn(t,Tt()),null}function kv(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(fl=Tt()+500,uf&&io())}}function Qo(t){Os!==null&&Os.tag===0&&!(De&6)&&nl();var e=De;De|=1;var n=Er.transition,r=Be;try{if(Er.transition=null,Be=1,t)return t()}finally{Be=r,Er.transition=n,De=e,!(De&6)&&io()}}function Pv(){Kn=Ya.current,st(Ya)}function $o(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zP(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(uv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yd();break;case 3:hl(),st(Ln),st(fn),yv();break;case 5:vv(r);break;case 4:hl();break;case 13:st(ct);break;case 19:st(ct);break;case 10:fv(r.type._context);break;case 22:case 23:Pv()}n=n.return}if(qt=t,At=t=zs(t.current,null),Jt=Kn=e,Mt=0,lc=null,bv=ff=Go=0,Dn=Lu=null,Mo!==null){for(e=0;e<Mo.length;e++)if(n=Mo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mo=null}return t}function GT(t,e){do{var n=At;try{if(dv(),Bh.current=Ad,bd){for(var r=ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}bd=!1}if(Ko=0,Ht=Nt=ht=null,Du=!1,sc=0,Cv.current=null,n===null||n.return===null){Mt=1,lc=e,At=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=Jt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=a,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var v=f.alternate;v?(f.updateQueue=v.updateQueue,f.memoizedState=v.memoizedState,f.lanes=v.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=w0(o);if(w!==null){w.flags&=-257,E0(w,o,a,s,e),w.mode&1&&_0(s,h,e),e=w,u=h;var S=e.updateQueue;if(S===null){var k=new Set;k.add(u),e.updateQueue=k}else S.add(u);break e}else{if(!(e&1)){_0(s,h,e),Rv();break e}u=Error(Q(426))}}else if(ot&&a.mode&1){var D=w0(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),E0(D,o,a,s,e),cv(dl(u,a));break e}}s=u=dl(u,a),Mt!==4&&(Mt=2),Lu===null?Lu=[s]:Lu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=xT(s,u,e);f0(s,b);break e;case 1:a=u;var I=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Us===null||!Us.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=OT(s,a,e);f0(s,V);break e}}s=s.return}while(s!==null)}XT(n)}catch(H){e=H,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function QT(){var t=kd.current;return kd.current=Ad,t===null?Ad:t}function Rv(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),qt===null||!(Go&268435455)&&!(ff&268435455)||bs(qt,Jt)}function xd(t,e){var n=De;De|=2;var r=QT();(qt!==t||Jt!==e)&&(Pi=null,$o(t,e));do try{fR();break}catch(i){GT(t,i)}while(!0);if(dv(),De=n,kd.current=r,At!==null)throw Error(Q(261));return qt=null,Jt=0,Mt}function fR(){for(;At!==null;)YT(At)}function pR(){for(;At!==null&&!Fk();)YT(At)}function YT(t){var e=ZT(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?XT(t):At=e,Cv.current=null}function XT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aR(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,At=null;return}}else if(n=oR(n,e,Kn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Mt===0&&(Mt=5)}function Do(t,e,n){var r=Be,i=Er.transition;try{Er.transition=null,Be=1,gR(t,e,n,r)}finally{Er.transition=i,Be=r}return null}function gR(t,e,n,r){do nl();while(Os!==null);if(De&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Qk(t,s),t===qt&&(At=qt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ch||(Ch=!0,eI(dd,function(){return nl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Er.transition,Er.transition=null;var o=Be;Be=1;var a=De;De|=4,Cv.current=null,uR(t,n),qT(n,t),LP(Dg),pd=!!Og,Dg=Og=null,t.current=n,cR(n),Uk(),De=a,Be=o,Er.transition=s}else t.current=n;if(Ch&&(Ch=!1,Os=t,Rd=i),s=t.pendingLanes,s===0&&(Us=null),Bk(n.stateNode),jn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pd)throw Pd=!1,t=Zg,Zg=null,t;return Rd&1&&t.tag!==0&&nl(),s=t.pendingLanes,s&1?t===em?Mu++:(Mu=0,em=t):Mu=0,io(),null}function nl(){if(Os!==null){var t=x1(Rd),e=Er.transition,n=Be;try{if(Er.transition=null,Be=16>t?16:t,Os===null)var r=!1;else{if(t=Os,Os=null,Rd=0,De&6)throw Error(Q(331));var i=De;for(De|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(ne=h;ne!==null;){var f=ne;switch(f.tag){case 0:case 11:case 15:Nu(8,f,s)}var g=f.child;if(g!==null)g.return=f,ne=g;else for(;ne!==null;){f=ne;var v=f.sibling,w=f.return;if(zT(f),f===h){ne=null;break}if(v!==null){v.return=w,ne=v;break}ne=w}}}var S=s.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var D=k.sibling;k.sibling=null,k=D}while(k!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nu(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ne=b;break e}ne=s.return}}var I=t.current;for(ne=I;ne!==null;){o=ne;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,ne=A;else e:for(o=I;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:df(9,a)}}catch(H){mt(a,a.return,H)}if(a===o){ne=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,ne=V;break e}ne=a.return}}if(De=i,io(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(rf,t)}catch{}r=!0}return r}finally{Be=n,Er.transition=e}}return!1}function N0(t,e,n){e=dl(n,e),e=xT(t,e,1),t=Fs(t,e,1),e=En(),t!==null&&(Tc(t,1,e),jn(t,e))}function mt(t,e,n){if(t.tag===3)N0(t,t,n);else for(;e!==null;){if(e.tag===3){N0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Us===null||!Us.has(r))){t=dl(n,t),t=OT(e,t,1),e=Fs(e,t,1),t=En(),e!==null&&(Tc(e,1,t),jn(e,t));break}}e=e.return}}function mR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(Jt&n)===n&&(Mt===4||Mt===3&&(Jt&130023424)===Jt&&500>Tt()-Av?$o(t,0):bv|=n),jn(t,e)}function JT(t,e){e===0&&(t.mode&1?(e=gh,gh<<=1,!(gh&130023424)&&(gh=4194304)):e=1);var n=En();t=$i(t,e),t!==null&&(Tc(t,e,n),jn(t,n))}function vR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),JT(t,n)}function yR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),JT(t,n)}var ZT;ZT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)Nn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nn=!1,sR(t,e,n);Nn=!!(t.flags&131072)}else Nn=!1,ot&&e.flags&1048576&&rT(e,Ed,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;qh(t,e),t=e.pendingProps;var i=ll(e,fn.current);tl(e,n),i=wv(null,e,r,t,i,n);var s=Ev();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(r)?(s=!0,_d(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gv(e),i.updater=hf,e.stateNode=i,i._reactInternals=e,zg(e,r,t,n),e=qg(null,e,r,!0,s,n)):(e.tag=0,ot&&s&&lv(e),wn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(qh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wR(r),t=Mr(r,t),i){case 0:e=Hg(null,e,r,t,n);break e;case 1:e=S0(null,e,r,t,n);break e;case 11:e=T0(null,e,r,t,n);break e;case 14:e=I0(null,e,r,Mr(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),Hg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),S0(t,e,r,i,n);case 3:e:{if(MT(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uT(t,e),Sd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=dl(Error(Q(423)),e),e=C0(t,e,r,n,i);break e}else if(r!==i){i=dl(Error(Q(424)),e),e=C0(t,e,r,n,i);break e}else for(Qn=Vs(e.stateNode.containerInfo.firstChild),Yn=e,ot=!0,Vr=null,n=aT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ul(),r===i){e=zi(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return cT(e),t===null&&Fg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ng(r,i)?o=null:s!==null&&Ng(r,s)&&(e.flags|=32),LT(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&Fg(e),null;case 13:return jT(t,e,n);case 4:return mv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cl(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),T0(t,e,r,i,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,nt(Td,r._currentValue),r._currentValue=o,s!==null)if(qr(s.value,o)){if(s.children===i.children&&!Ln.current){e=zi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=ji(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ug(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ug(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,tl(e,n),i=Ir(i),r=r(i),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,i=Mr(r,e.pendingProps),i=Mr(r.type,i),I0(t,e,r,i,n);case 15:return DT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),qh(t,e),e.tag=1,Mn(r)?(t=!0,_d(e)):t=!1,tl(e,n),RT(e,r,i),zg(e,r,i,n),qg(null,e,r,!0,t,n);case 19:return VT(t,e,n);case 22:return NT(t,e,n)}throw Error(Q(156,e.tag))};function eI(t,e){return A1(t,e)}function _R(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(t,e,n,r){return new _R(t,e,n,r)}function xv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wR(t){if(typeof t=="function")return xv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ym)return 11;if(t===Xm)return 14}return 2}function zs(t,e){var n=t.alternate;return n===null?(n=_r(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")xv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ua:return zo(n.children,i,s,e);case Qm:o=8,i|=8;break;case dg:return t=_r(12,n,e,i|2),t.elementType=dg,t.lanes=s,t;case fg:return t=_r(13,n,e,i),t.elementType=fg,t.lanes=s,t;case pg:return t=_r(19,n,e,i),t.elementType=pg,t.lanes=s,t;case c1:return pf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:o=10;break e;case u1:o=9;break e;case Ym:o=11;break e;case Xm:o=14;break e;case Ts:o=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=_r(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zo(t,e,n,r){return t=_r(7,t,r,e),t.lanes=n,t}function pf(t,e,n,r){return t=_r(22,t,r,e),t.elementType=c1,t.lanes=n,t.stateNode={isHidden:!1},t}function jp(t,e,n){return t=_r(6,t,null,e),t.lanes=n,t}function Vp(t,e,n){return e=_r(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ER(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yp(0),this.expirationTimes=yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ov(t,e,n,r,i,s,o,a,u){return t=new ER(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_r(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gv(s),t}function TR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tI(t){if(!t)return Ys;t=t._reactInternals;e:{if(ia(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Mn(n))return tT(t,n,e)}return e}function nI(t,e,n,r,i,s,o,a,u){return t=Ov(n,r,!0,t,i,s,o,a,u),t.context=tI(null),n=t.current,r=En(),i=$s(n),s=ji(r,i),s.callback=e??null,Fs(n,s,i),t.current.lanes=i,Tc(t,i,r),jn(t,r),t}function gf(t,e,n,r){var i=e.current,s=En(),o=$s(i);return n=tI(n),e.context===null?e.context=n:e.pendingContext=n,e=ji(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fs(i,e,o),t!==null&&($r(t,i,o,s),zh(t,i,o)),o}function Od(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function L0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Dv(t,e){L0(t,e),(t=t.alternate)&&L0(t,e)}function IR(){return null}var rI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nv(t){this._internalRoot=t}mf.prototype.render=Nv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));gf(t,e,null,null)};mf.prototype.unmount=Nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qo(function(){gf(null,t,null,null)}),e[Ui]=null}};function mf(t){this._internalRoot=t}mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=N1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cs.length&&e!==0&&e<Cs[n].priority;n++);Cs.splice(n,0,t),n===0&&M1(t)}};function Lv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M0(){}function SR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=Od(o);s.call(h)}}var o=nI(e,r,t,0,null,!1,!1,"",M0);return t._reactRootContainer=o,t[Ui]=o.current,ec(t.nodeType===8?t.parentNode:t),Qo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var h=Od(u);a.call(h)}}var u=Ov(t,0,!1,null,null,!1,!1,"",M0);return t._reactRootContainer=u,t[Ui]=u.current,ec(t.nodeType===8?t.parentNode:t),Qo(function(){gf(e,u,n,r)}),u}function yf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Od(o);a.call(u)}}gf(e,o,t,i)}else o=SR(n,e,t,i,r);return Od(o)}O1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=yu(e.pendingLanes);n!==0&&(ev(e,n|1),jn(e,Tt()),!(De&6)&&(fl=Tt()+500,io()))}break;case 13:Qo(function(){var r=$i(t,1);if(r!==null){var i=En();$r(r,t,1,i)}}),Dv(t,1)}};tv=function(t){if(t.tag===13){var e=$i(t,134217728);if(e!==null){var n=En();$r(e,t,134217728,n)}Dv(t,134217728)}};D1=function(t){if(t.tag===13){var e=$s(t),n=$i(t,e);if(n!==null){var r=En();$r(n,t,e,r)}Dv(t,e)}};N1=function(){return Be};L1=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Sg=function(t,e,n){switch(e){case"input":if(vg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lf(r);if(!i)throw Error(Q(90));d1(r),vg(r,i)}}}break;case"textarea":p1(t,n);break;case"select":e=n.value,e!=null&&Xa(t,!!n.multiple,e,!1)}};E1=kv;T1=Qo;var CR={usingClientEntryPoint:!1,Events:[Sc,Ha,lf,_1,w1,kv]},du={findFiberByHostInstance:Lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bR={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C1(t),t===null?null:t.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||IR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{rf=bh.inject(bR),ui=bh}catch{}}er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CR;er.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lv(e))throw Error(Q(200));return TR(t,e,null,n)};er.createRoot=function(t,e){if(!Lv(t))throw Error(Q(299));var n=!1,r="",i=rI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ov(t,1,!1,null,null,n,!1,r,i),t[Ui]=e.current,ec(t.nodeType===8?t.parentNode:t),new Nv(e)};er.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=C1(e),t=t===null?null:t.stateNode,t};er.flushSync=function(t){return Qo(t)};er.hydrate=function(t,e,n){if(!vf(e))throw Error(Q(200));return yf(null,t,e,!0,n)};er.hydrateRoot=function(t,e,n){if(!Lv(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nI(e,null,t,1,n??null,i,!1,s,o),t[Ui]=e.current,ec(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mf(e)};er.render=function(t,e,n){if(!vf(e))throw Error(Q(200));return yf(null,t,e,!1,n)};er.unmountComponentAtNode=function(t){if(!vf(t))throw Error(Q(40));return t._reactRootContainer?(Qo(function(){yf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ui]=null})}),!0):!1};er.unstable_batchedUpdates=kv;er.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vf(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return yf(t,e,n,!1,r)};er.version="18.3.1-next-f1338f8080-20240426";function iI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iI)}catch(t){console.error(t)}}iI(),i1.exports=er;var AR=i1.exports,sI,j0=AR;sI=j0.createRoot,j0.hydrateRoot;var kR={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(ZA,function(){const n=new Map,r={set(_,c,p){n.has(_)||n.set(_,new Map);const T=n.get(_);T.has(c)||T.size===0?T.set(c,p):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(T.keys())[0]}.`)},get:(_,c)=>n.has(_)&&n.get(_).get(c)||null,remove(_,c){if(!n.has(_))return;const p=n.get(_);p.delete(c),p.size===0&&n.delete(_)}},i="transitionend",s=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(c,p)=>`#${CSS.escape(p)}`)),_),o=_=>{_.dispatchEvent(new Event(i))},a=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),u=_=>a(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(s(_)):null,h=_=>{if(!a(_)||_.getClientRects().length===0)return!1;const c=getComputedStyle(_).getPropertyValue("visibility")==="visible",p=_.closest("details:not([open])");if(!p)return c;if(p!==_){const T=_.closest("summary");if(T&&T.parentNode!==p||T===null)return!1}return c},f=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),g=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const c=_.getRootNode();return c instanceof ShadowRoot?c:null}return _ instanceof ShadowRoot?_:_.parentNode?g(_.parentNode):null},v=()=>{},w=_=>{_.offsetHeight},S=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,k=[],D=()=>document.documentElement.dir==="rtl",b=_=>{var c;c=()=>{const p=S();if(p){const T=_.NAME,j=p.fn[T];p.fn[T]=_.jQueryInterface,p.fn[T].Constructor=_,p.fn[T].noConflict=()=>(p.fn[T]=j,_.jQueryInterface)}},document.readyState==="loading"?(k.length||document.addEventListener("DOMContentLoaded",()=>{for(const p of k)p()}),k.push(c)):c()},I=(_,c=[],p=_)=>typeof _=="function"?_(...c):p,A=(_,c,p=!0)=>{if(!p)return void I(_);const T=(B=>{if(!B)return 0;let{transitionDuration:K,transitionDelay:X}=window.getComputedStyle(B);const te=Number.parseFloat(K),ie=Number.parseFloat(X);return te||ie?(K=K.split(",")[0],X=X.split(",")[0],1e3*(Number.parseFloat(K)+Number.parseFloat(X))):0})(c)+5;let j=!1;const F=({target:B})=>{B===c&&(j=!0,c.removeEventListener(i,F),I(_))};c.addEventListener(i,F),setTimeout(()=>{j||o(c)},T)},V=(_,c,p,T)=>{const j=_.length;let F=_.indexOf(c);return F===-1?!p&&T?_[j-1]:_[0]:(F+=p?1:-1,T&&(F=(F+j)%j),_[Math.max(0,Math.min(F,j-1))])},H=/[^.]*(?=\..*)\.|.*/,W=/\..*/,R=/::\d+$/,E={};let P=1;const x={mouseenter:"mouseover",mouseleave:"mouseout"},N=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function L(_,c){return c&&`${c}::${P++}`||_.uidEvent||P++}function O(_){const c=L(_);return _.uidEvent=c,E[c]=E[c]||{},E[c]}function Je(_,c,p=null){return Object.values(_).find(T=>T.callable===c&&T.delegationSelector===p)}function lt(_,c,p){const T=typeof c=="string",j=T?p:c||p;let F=oe(_);return N.has(F)||(F=_),[T,j,F]}function vt(_,c,p,T,j){if(typeof c!="string"||!_)return;let[F,B,K]=lt(c,p,T);c in x&&(B=(ge=>function(de){if(!de.relatedTarget||de.relatedTarget!==de.delegateTarget&&!de.delegateTarget.contains(de.relatedTarget))return ge.call(this,de)})(B));const X=O(_),te=X[K]||(X[K]={}),ie=Je(te,B,F?p:null);if(ie)return void(ie.oneOff=ie.oneOff&&j);const Z=L(B,c.replace(H,"")),we=F?function(le,ge,de){return function me(We){const tt=le.querySelectorAll(ge);for(let{target:Ie}=We;Ie&&Ie!==this;Ie=Ie.parentNode)for(const Me of tt)if(Me===Ie)return Ae(We,{delegateTarget:Ie}),me.oneOff&&$.off(le,We.type,ge,de),de.apply(Ie,[We])}}(_,p,B):function(le,ge){return function de(me){return Ae(me,{delegateTarget:le}),de.oneOff&&$.off(le,me.type,ge),ge.apply(le,[me])}}(_,B);we.delegationSelector=F?p:null,we.callable=B,we.oneOff=j,we.uidEvent=Z,te[Z]=we,_.addEventListener(K,we,F)}function Qe(_,c,p,T,j){const F=Je(c[p],T,j);F&&(_.removeEventListener(p,F,!!j),delete c[p][F.uidEvent])}function J(_,c,p,T){const j=c[p]||{};for(const[F,B]of Object.entries(j))F.includes(T)&&Qe(_,c,p,B.callable,B.delegationSelector)}function oe(_){return _=_.replace(W,""),x[_]||_}const $={on(_,c,p,T){vt(_,c,p,T,!1)},one(_,c,p,T){vt(_,c,p,T,!0)},off(_,c,p,T){if(typeof c!="string"||!_)return;const[j,F,B]=lt(c,p,T),K=B!==c,X=O(_),te=X[B]||{},ie=c.startsWith(".");if(F===void 0){if(ie)for(const Z of Object.keys(X))J(_,X,Z,c.slice(1));for(const[Z,we]of Object.entries(te)){const le=Z.replace(R,"");K&&!c.includes(le)||Qe(_,X,B,we.callable,we.delegationSelector)}}else{if(!Object.keys(te).length)return;Qe(_,X,B,F,j?p:null)}},trigger(_,c,p){if(typeof c!="string"||!_)return null;const T=S();let j=null,F=!0,B=!0,K=!1;c!==oe(c)&&T&&(j=T.Event(c,p),T(_).trigger(j),F=!j.isPropagationStopped(),B=!j.isImmediatePropagationStopped(),K=j.isDefaultPrevented());const X=Ae(new Event(c,{bubbles:F,cancelable:!0}),p);return K&&X.preventDefault(),B&&_.dispatchEvent(X),X.defaultPrevented&&j&&j.preventDefault(),X}};function Ae(_,c={}){for(const[p,T]of Object.entries(c))try{_[p]=T}catch{Object.defineProperty(_,p,{configurable:!0,get:()=>T})}return _}function Re(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function Ve(_){return _.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}const rt={setDataAttribute(_,c,p){_.setAttribute(`data-bs-${Ve(c)}`,p)},removeDataAttribute(_,c){_.removeAttribute(`data-bs-${Ve(c)}`)},getDataAttributes(_){if(!_)return{};const c={},p=Object.keys(_.dataset).filter(T=>T.startsWith("bs")&&!T.startsWith("bsConfig"));for(const T of p){let j=T.replace(/^bs/,"");j=j.charAt(0).toLowerCase()+j.slice(1,j.length),c[j]=Re(_.dataset[T])}return c},getDataAttribute:(_,c)=>Re(_.getAttribute(`data-bs-${Ve(c)}`))};class Pt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,p){const T=a(p)?rt.getDataAttribute(p,"config"):{};return{...this.constructor.Default,...typeof T=="object"?T:{},...a(p)?rt.getDataAttributes(p):{},...typeof c=="object"?c:{}}}_typeCheckConfig(c,p=this.constructor.DefaultType){for(const[j,F]of Object.entries(p)){const B=c[j],K=a(B)?"element":(T=B)==null?`${T}`:Object.prototype.toString.call(T).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(F).test(K))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${j}" provided type "${K}" but expected type "${F}".`)}var T}}class Ye extends Pt{constructor(c,p){super(),(c=u(c))&&(this._element=c,this._config=this._getConfig(p),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,p,T=!0){A(c,p,T)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return r.get(u(c),this.DATA_KEY)}static getOrCreateInstance(c,p={}){return this.getInstance(c)||new this(c,typeof p=="object"?p:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}const ue=_=>{let c=_.getAttribute("data-bs-target");if(!c||c==="#"){let p=_.getAttribute("href");if(!p||!p.includes("#")&&!p.startsWith("."))return null;p.includes("#")&&!p.startsWith("#")&&(p=`#${p.split("#")[1]}`),c=p&&p!=="#"?p.trim():null}return c?c.split(",").map(p=>s(p)).join(","):null},re={find:(_,c=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(c,_)),findOne:(_,c=document.documentElement)=>Element.prototype.querySelector.call(c,_),children:(_,c)=>[].concat(..._.children).filter(p=>p.matches(c)),parents(_,c){const p=[];let T=_.parentNode.closest(c);for(;T;)p.push(T),T=T.parentNode.closest(c);return p},prev(_,c){let p=_.previousElementSibling;for(;p;){if(p.matches(c))return[p];p=p.previousElementSibling}return[]},next(_,c){let p=_.nextElementSibling;for(;p;){if(p.matches(c))return[p];p=p.nextElementSibling}return[]},focusableChildren(_){const c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(p=>`${p}:not([tabindex^="-"])`).join(",");return this.find(c,_).filter(p=>!f(p)&&h(p))},getSelectorFromElement(_){const c=ue(_);return c&&re.findOne(c)?c:null},getElementFromSelector(_){const c=ue(_);return c?re.findOne(c):null},getMultipleElementsFromSelector(_){const c=ue(_);return c?re.find(c):[]}},Fn=(_,c="hide")=>{const p=`click.dismiss${_.EVENT_KEY}`,T=_.NAME;$.on(document,p,`[data-bs-dismiss="${T}"]`,function(j){if(["A","AREA"].includes(this.tagName)&&j.preventDefault(),f(this))return;const F=re.getElementFromSelector(this)||this.closest(`.${T}`);_.getOrCreateInstance(F)[c]()})},Un=".bs.alert",yt=`close${Un}`,Ft=`closed${Un}`;class Cn extends Ye{static get NAME(){return"alert"}close(){if($.trigger(this._element,yt).defaultPrevented)return;this._element.classList.remove("show");const c=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,c)}_destroyElement(){this._element.remove(),$.trigger(this._element,Ft),this.dispose()}static jQueryInterface(c){return this.each(function(){const p=Cn.getOrCreateInstance(this);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c](this)}})}}Fn(Cn,"close"),b(Cn);const Ji='[data-bs-toggle="button"]';class $n extends Ye{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(c){return this.each(function(){const p=$n.getOrCreateInstance(this);c==="toggle"&&p[c]()})}}$.on(document,"click.bs.button.data-api",Ji,_=>{_.preventDefault();const c=_.target.closest(Ji);$n.getOrCreateInstance(c).toggle()}),b($n);const tn=".bs.swipe",jl=`touchstart${tn}`,ho=`touchmove${tn}`,da=`touchend${tn}`,Zi=`pointerdown${tn}`,fa=`pointerup${tn}`,fo={endCallback:null,leftCallback:null,rightCallback:null},es={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class nr extends Pt{constructor(c,p){super(),this._element=c,c&&nr.isSupported()&&(this._config=this._getConfig(p),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return fo}static get DefaultType(){return es}static get NAME(){return"swipe"}dispose(){$.off(this._element,tn)}_start(c){this._supportPointerEvents?this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX):this._deltaX=c.touches[0].clientX}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),I(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){const c=Math.abs(this._deltaX);if(c<=40)return;const p=c/this._deltaX;this._deltaX=0,p&&I(p>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,Zi,c=>this._start(c)),$.on(this._element,fa,c=>this._end(c)),this._element.classList.add("pointer-event")):($.on(this._element,jl,c=>this._start(c)),$.on(this._element,ho,c=>this._move(c)),$.on(this._element,da,c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&(c.pointerType==="pen"||c.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const St=".bs.carousel",ut=".data-api",Ze="next",zn="prev",br="left",vi="right",ts=`slide${St}`,Bn=`slid${St}`,pa=`keydown${St}`,yi=`mouseenter${St}`,Gr=`mouseleave${St}`,Vl=`dragstart${St}`,Fl=`load${St}${ut}`,po=`click${St}${ut}`,go="carousel",Ar="active",Qr=".active",ns=".carousel-item",mo=Qr+ns,kr={ArrowLeft:vi,ArrowRight:br},rs={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},is={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class bn extends Ye{constructor(c,p){super(c,p),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===go&&this.cycle()}static get Default(){return rs}static get DefaultType(){return is}static get NAME(){return"carousel"}next(){this._slide(Ze)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(zn)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?$.one(this._element,Bn,()=>this.cycle()):this.cycle())}to(c){const p=this._getItems();if(c>p.length-1||c<0)return;if(this._isSliding)return void $.one(this._element,Bn,()=>this.to(c));const T=this._getItemIndex(this._getActive());if(T===c)return;const j=c>T?Ze:zn;this._slide(j,p[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&$.on(this._element,pa,c=>this._keydown(c)),this._config.pause==="hover"&&($.on(this._element,yi,()=>this.pause()),$.on(this._element,Gr,()=>this._maybeEnableCycle())),this._config.touch&&nr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const p of re.find(".carousel-item img",this._element))$.on(p,Vl,T=>T.preventDefault());const c={leftCallback:()=>this._slide(this._directionToOrder(br)),rightCallback:()=>this._slide(this._directionToOrder(vi)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new nr(this._element,c)}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;const p=kr[c.key];p&&(c.preventDefault(),this._slide(this._directionToOrder(p)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;const p=re.findOne(Qr,this._indicatorsElement);p.classList.remove(Ar),p.removeAttribute("aria-current");const T=re.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);T&&(T.classList.add(Ar),T.setAttribute("aria-current","true"))}_updateInterval(){const c=this._activeElement||this._getActive();if(!c)return;const p=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=p||this._config.defaultInterval}_slide(c,p=null){if(this._isSliding)return;const T=this._getActive(),j=c===Ze,F=p||V(this._getItems(),T,j,this._config.wrap);if(F===T)return;const B=this._getItemIndex(F),K=Z=>$.trigger(this._element,Z,{relatedTarget:F,direction:this._orderToDirection(c),from:this._getItemIndex(T),to:B});if(K(ts).defaultPrevented||!T||!F)return;const X=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(B),this._activeElement=F;const te=j?"carousel-item-start":"carousel-item-end",ie=j?"carousel-item-next":"carousel-item-prev";F.classList.add(ie),w(F),T.classList.add(te),F.classList.add(te),this._queueCallback(()=>{F.classList.remove(te,ie),F.classList.add(Ar),T.classList.remove(Ar,ie,te),this._isSliding=!1,K(Bn)},T,this._isAnimated()),X&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return re.findOne(mo,this._element)}_getItems(){return re.find(ns,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return D()?c===br?zn:Ze:c===br?Ze:zn}_orderToDirection(c){return D()?c===zn?br:vi:c===zn?vi:br}static jQueryInterface(c){return this.each(function(){const p=bn.getOrCreateInstance(this,c);if(typeof c!="number"){if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c]()}}else p.to(c)})}}$.on(document,po,"[data-bs-slide], [data-bs-slide-to]",function(_){const c=re.getElementFromSelector(this);if(!c||!c.classList.contains(go))return;_.preventDefault();const p=bn.getOrCreateInstance(c),T=this.getAttribute("data-bs-slide-to");return T?(p.to(T),void p._maybeEnableCycle()):rt.getDataAttribute(this,"slide")==="next"?(p.next(),void p._maybeEnableCycle()):(p.prev(),void p._maybeEnableCycle())}),$.on(window,Fl,()=>{const _=re.find('[data-bs-ride="carousel"]');for(const c of _)bn.getOrCreateInstance(c)}),b(bn);const gn=".bs.collapse",ga=`show${gn}`,Rt=`shown${gn}`,ma=`hide${gn}`,_i=`hidden${gn}`,Ne=`click${gn}.data-api`,He="show",_t="collapse",Fe="collapsing",rr=`:scope .${_t} .${_t}`,Wt='[data-bs-toggle="collapse"]',ss={parent:null,toggle:!0},jc={parent:"(null|element)",toggle:"boolean"};class Yr extends Ye{constructor(c,p){super(c,p),this._isTransitioning=!1,this._triggerArray=[];const T=re.find(Wt);for(const j of T){const F=re.getSelectorFromElement(j),B=re.find(F).filter(K=>K===this._element);F!==null&&B.length&&this._triggerArray.push(j)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ss}static get DefaultType(){return jc}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(j=>j!==this._element).map(j=>Yr.getOrCreateInstance(j,{toggle:!1}))),c.length&&c[0]._isTransitioning||$.trigger(this._element,ga).defaultPrevented)return;for(const j of c)j.hide();const p=this._getDimension();this._element.classList.remove(_t),this._element.classList.add(Fe),this._element.style[p]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const T=`scroll${p[0].toUpperCase()+p.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fe),this._element.classList.add(_t,He),this._element.style[p]="",$.trigger(this._element,Rt)},this._element,!0),this._element.style[p]=`${this._element[T]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,ma).defaultPrevented)return;const c=this._getDimension();this._element.style[c]=`${this._element.getBoundingClientRect()[c]}px`,w(this._element),this._element.classList.add(Fe),this._element.classList.remove(_t,He);for(const p of this._triggerArray){const T=re.getElementFromSelector(p);T&&!this._isShown(T)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0,this._element.style[c]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Fe),this._element.classList.add(_t),$.trigger(this._element,_i)},this._element,!0)}_isShown(c=this._element){return c.classList.contains(He)}_configAfterMerge(c){return c.toggle=!!c.toggle,c.parent=u(c.parent),c}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const c=this._getFirstLevelChildren(Wt);for(const p of c){const T=re.getElementFromSelector(p);T&&this._addAriaAndCollapsedClass([p],this._isShown(T))}}_getFirstLevelChildren(c){const p=re.find(rr,this._config.parent);return re.find(c,this._config.parent).filter(T=>!p.includes(T))}_addAriaAndCollapsedClass(c,p){if(c.length)for(const T of c)T.classList.toggle("collapsed",!p),T.setAttribute("aria-expanded",p)}static jQueryInterface(c){const p={};return typeof c=="string"&&/show|hide/.test(c)&&(p.toggle=!1),this.each(function(){const T=Yr.getOrCreateInstance(this,p);if(typeof c=="string"){if(T[c]===void 0)throw new TypeError(`No method named "${c}"`);T[c]()}})}}$.on(document,Ne,Wt,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();for(const c of re.getMultipleElementsFromSelector(this))Yr.getOrCreateInstance(c,{toggle:!1}).toggle()}),b(Yr);var Ct="top",pt="bottom",nn="right",Ut="left",os="auto",Xr=[Ct,pt,nn,Ut],Jr="start",wi="end",Vc="clippingParents",as="viewport",Ei="popper",va="reference",Ti=Xr.reduce(function(_,c){return _.concat([c+"-"+Jr,c+"-"+wi])},[]),Pr=[].concat(Xr,[os]).reduce(function(_,c){return _.concat([c,c+"-"+Jr,c+"-"+wi])},[]),ya="beforeRead",Fc="read",Ul="afterRead",$l="beforeMain",zl="main",_a="afterMain",wa="beforeWrite",Bl="write",Hl="afterWrite",Uc=[ya,Fc,Ul,$l,zl,_a,wa,Bl,Hl];function ir(_){return _?(_.nodeName||"").toLowerCase():null}function rn(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var c=_.ownerDocument;return c&&c.defaultView||window}return _}function Zr(_){return _ instanceof rn(_).Element||_ instanceof Element}function An(_){return _ instanceof rn(_).HTMLElement||_ instanceof HTMLElement}function Rr(_){return typeof ShadowRoot<"u"&&(_ instanceof rn(_).ShadowRoot||_ instanceof ShadowRoot)}const Hn={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var c=_.state;Object.keys(c.elements).forEach(function(p){var T=c.styles[p]||{},j=c.attributes[p]||{},F=c.elements[p];An(F)&&ir(F)&&(Object.assign(F.style,T),Object.keys(j).forEach(function(B){var K=j[B];K===!1?F.removeAttribute(B):F.setAttribute(B,K===!0?"":K)}))})},effect:function(_){var c=_.state,p={popper:{position:c.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(c.elements.popper.style,p.popper),c.styles=p,c.elements.arrow&&Object.assign(c.elements.arrow.style,p.arrow),function(){Object.keys(c.elements).forEach(function(T){var j=c.elements[T],F=c.attributes[T]||{},B=Object.keys(c.styles.hasOwnProperty(T)?c.styles[T]:p[T]).reduce(function(K,X){return K[X]="",K},{});An(j)&&ir(j)&&(Object.assign(j.style,B),Object.keys(F).forEach(function(K){j.removeAttribute(K)}))})}},requires:["computeStyles"]};function mn(_){return _.split("-")[0]}var sr=Math.max,vo=Math.min,Le=Math.round;function ls(){var _=navigator.userAgentData;return _!=null&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(c){return c.brand+"/"+c.version}).join(" "):navigator.userAgent}function us(){return!/^((?!chrome|android).)*safari/i.test(ls())}function or(_,c,p){c===void 0&&(c=!1),p===void 0&&(p=!1);var T=_.getBoundingClientRect(),j=1,F=1;c&&An(_)&&(j=_.offsetWidth>0&&Le(T.width)/_.offsetWidth||1,F=_.offsetHeight>0&&Le(T.height)/_.offsetHeight||1);var B=(Zr(_)?rn(_):window).visualViewport,K=!us()&&p,X=(T.left+(K&&B?B.offsetLeft:0))/j,te=(T.top+(K&&B?B.offsetTop:0))/F,ie=T.width/j,Z=T.height/F;return{width:ie,height:Z,top:te,right:X+ie,bottom:te+Z,left:X,x:X,y:te}}function ql(_){var c=or(_),p=_.offsetWidth,T=_.offsetHeight;return Math.abs(c.width-p)<=1&&(p=c.width),Math.abs(c.height-T)<=1&&(T=c.height),{x:_.offsetLeft,y:_.offsetTop,width:p,height:T}}function Wl(_,c){var p=c.getRootNode&&c.getRootNode();if(_.contains(c))return!0;if(p&&Rr(p)){var T=c;do{if(T&&_.isSameNode(T))return!0;T=T.parentNode||T.host}while(T)}return!1}function xr(_){return rn(_).getComputedStyle(_)}function Jf(_){return["table","td","th"].indexOf(ir(_))>=0}function ei(_){return((Zr(_)?_.ownerDocument:_.document)||window.document).documentElement}function Ea(_){return ir(_)==="html"?_:_.assignedSlot||_.parentNode||(Rr(_)?_.host:null)||ei(_)}function cs(_){return An(_)&&xr(_).position!=="fixed"?_.offsetParent:null}function kn(_){for(var c=rn(_),p=cs(_);p&&Jf(p)&&xr(p).position==="static";)p=cs(p);return p&&(ir(p)==="html"||ir(p)==="body"&&xr(p).position==="static")?c:p||function(T){var j=/firefox/i.test(ls());if(/Trident/i.test(ls())&&An(T)&&xr(T).position==="fixed")return null;var F=Ea(T);for(Rr(F)&&(F=F.host);An(F)&&["html","body"].indexOf(ir(F))<0;){var B=xr(F);if(B.transform!=="none"||B.perspective!=="none"||B.contain==="paint"||["transform","perspective"].indexOf(B.willChange)!==-1||j&&B.willChange==="filter"||j&&B.filter&&B.filter!=="none")return F;F=F.parentNode}return null}(_)||c}function Ta(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function hs(_,c,p){return sr(_,vo(c,p))}function Kl(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function Ii(_,c){return c.reduce(function(p,T){return p[T]=_,p},{})}const $c={name:"arrow",enabled:!0,phase:"main",fn:function(_){var c,p=_.state,T=_.name,j=_.options,F=p.elements.arrow,B=p.modifiersData.popperOffsets,K=mn(p.placement),X=Ta(K),te=[Ut,nn].indexOf(K)>=0?"height":"width";if(F&&B){var ie=function(Ke,ze){return Kl(typeof(Ke=typeof Ke=="function"?Ke(Object.assign({},ze.rects,{placement:ze.placement})):Ke)!="number"?Ke:Ii(Ke,Xr))}(j.padding,p),Z=ql(F),we=X==="y"?Ct:Ut,le=X==="y"?pt:nn,ge=p.rects.reference[te]+p.rects.reference[X]-B[X]-p.rects.popper[te],de=B[X]-p.rects.reference[X],me=kn(F),We=me?X==="y"?me.clientHeight||0:me.clientWidth||0:0,tt=ge/2-de/2,Ie=ie[we],Me=We-Z[te]-ie[le],Ee=We/2-Z[te]/2+tt,ke=hs(Ie,Ee,Me),$e=X;p.modifiersData[T]=((c={})[$e]=ke,c.centerOffset=ke-Ee,c)}},effect:function(_){var c=_.state,p=_.options.element,T=p===void 0?"[data-popper-arrow]":p;T!=null&&(typeof T!="string"||(T=c.elements.popper.querySelector(T)))&&Wl(c.elements.popper,T)&&(c.elements.arrow=T)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ds(_){return _.split("-")[1]}var Zf={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Or(_){var c,p=_.popper,T=_.popperRect,j=_.placement,F=_.variation,B=_.offsets,K=_.position,X=_.gpuAcceleration,te=_.adaptive,ie=_.roundOffsets,Z=_.isFixed,we=B.x,le=we===void 0?0:we,ge=B.y,de=ge===void 0?0:ge,me=typeof ie=="function"?ie({x:le,y:de}):{x:le,y:de};le=me.x,de=me.y;var We=B.hasOwnProperty("x"),tt=B.hasOwnProperty("y"),Ie=Ut,Me=Ct,Ee=window;if(te){var ke=kn(p),$e="clientHeight",Ke="clientWidth";ke===rn(p)&&xr(ke=ei(p)).position!=="static"&&K==="absolute"&&($e="scrollHeight",Ke="scrollWidth"),(j===Ct||(j===Ut||j===nn)&&F===wi)&&(Me=pt,de-=(Z&&ke===Ee&&Ee.visualViewport?Ee.visualViewport.height:ke[$e])-T.height,de*=X?1:-1),j!==Ut&&(j!==Ct&&j!==pt||F!==wi)||(Ie=nn,le-=(Z&&ke===Ee&&Ee.visualViewport?Ee.visualViewport.width:ke[Ke])-T.width,le*=X?1:-1)}var ze,wt=Object.assign({position:K},te&&Zf),qn=ie===!0?function(Nr,vn){var cr=Nr.x,hr=Nr.y,gt=vn.devicePixelRatio||1;return{x:Le(cr*gt)/gt||0,y:Le(hr*gt)/gt||0}}({x:le,y:de},rn(p)):{x:le,y:de};return le=qn.x,de=qn.y,X?Object.assign({},wt,((ze={})[Me]=tt?"0":"",ze[Ie]=We?"0":"",ze.transform=(Ee.devicePixelRatio||1)<=1?"translate("+le+"px, "+de+"px)":"translate3d("+le+"px, "+de+"px, 0)",ze)):Object.assign({},wt,((c={})[Me]=tt?de+"px":"",c[Ie]=We?le+"px":"",c.transform="",c))}const Gl={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var c=_.state,p=_.options,T=p.gpuAcceleration,j=T===void 0||T,F=p.adaptive,B=F===void 0||F,K=p.roundOffsets,X=K===void 0||K,te={placement:mn(c.placement),variation:ds(c.placement),popper:c.elements.popper,popperRect:c.rects.popper,gpuAcceleration:j,isFixed:c.options.strategy==="fixed"};c.modifiersData.popperOffsets!=null&&(c.styles.popper=Object.assign({},c.styles.popper,Or(Object.assign({},te,{offsets:c.modifiersData.popperOffsets,position:c.options.strategy,adaptive:B,roundOffsets:X})))),c.modifiersData.arrow!=null&&(c.styles.arrow=Object.assign({},c.styles.arrow,Or(Object.assign({},te,{offsets:c.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:X})))),c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-placement":c.placement})},data:{}};var Ia={passive:!0};const fs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var c=_.state,p=_.instance,T=_.options,j=T.scroll,F=j===void 0||j,B=T.resize,K=B===void 0||B,X=rn(c.elements.popper),te=[].concat(c.scrollParents.reference,c.scrollParents.popper);return F&&te.forEach(function(ie){ie.addEventListener("scroll",p.update,Ia)}),K&&X.addEventListener("resize",p.update,Ia),function(){F&&te.forEach(function(ie){ie.removeEventListener("scroll",p.update,Ia)}),K&&X.removeEventListener("resize",p.update,Ia)}},data:{}};var Sa={left:"right",right:"left",bottom:"top",top:"bottom"};function yo(_){return _.replace(/left|right|bottom|top/g,function(c){return Sa[c]})}var _o={start:"end",end:"start"};function ps(_){return _.replace(/start|end/g,function(c){return _o[c]})}function Ca(_){var c=rn(_);return{scrollLeft:c.pageXOffset,scrollTop:c.pageYOffset}}function wo(_){return or(ei(_)).left+Ca(_).scrollLeft}function et(_){var c=xr(_),p=c.overflow,T=c.overflowX,j=c.overflowY;return/auto|scroll|overlay|hidden/.test(p+j+T)}function zc(_){return["html","body","#document"].indexOf(ir(_))>=0?_.ownerDocument.body:An(_)&&et(_)?_:zc(Ea(_))}function Eo(_,c){var p;c===void 0&&(c=[]);var T=zc(_),j=T===((p=_.ownerDocument)==null?void 0:p.body),F=rn(T),B=j?[F].concat(F.visualViewport||[],et(T)?T:[]):T,K=c.concat(B);return j?K:K.concat(Eo(Ea(B)))}function ba(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function Ql(_,c,p){return c===as?ba(function(T,j){var F=rn(T),B=ei(T),K=F.visualViewport,X=B.clientWidth,te=B.clientHeight,ie=0,Z=0;if(K){X=K.width,te=K.height;var we=us();(we||!we&&j==="fixed")&&(ie=K.offsetLeft,Z=K.offsetTop)}return{width:X,height:te,x:ie+wo(T),y:Z}}(_,p)):Zr(c)?function(T,j){var F=or(T,!1,j==="fixed");return F.top=F.top+T.clientTop,F.left=F.left+T.clientLeft,F.bottom=F.top+T.clientHeight,F.right=F.left+T.clientWidth,F.width=T.clientWidth,F.height=T.clientHeight,F.x=F.left,F.y=F.top,F}(c,p):ba(function(T){var j,F=ei(T),B=Ca(T),K=(j=T.ownerDocument)==null?void 0:j.body,X=sr(F.scrollWidth,F.clientWidth,K?K.scrollWidth:0,K?K.clientWidth:0),te=sr(F.scrollHeight,F.clientHeight,K?K.scrollHeight:0,K?K.clientHeight:0),ie=-B.scrollLeft+wo(T),Z=-B.scrollTop;return xr(K||F).direction==="rtl"&&(ie+=sr(F.clientWidth,K?K.clientWidth:0)-X),{width:X,height:te,x:ie,y:Z}}(ei(_)))}function Yl(_){var c,p=_.reference,T=_.element,j=_.placement,F=j?mn(j):null,B=j?ds(j):null,K=p.x+p.width/2-T.width/2,X=p.y+p.height/2-T.height/2;switch(F){case Ct:c={x:K,y:p.y-T.height};break;case pt:c={x:K,y:p.y+p.height};break;case nn:c={x:p.x+p.width,y:X};break;case Ut:c={x:p.x-T.width,y:X};break;default:c={x:p.x,y:p.y}}var te=F?Ta(F):null;if(te!=null){var ie=te==="y"?"height":"width";switch(B){case Jr:c[te]=c[te]-(p[ie]/2-T[ie]/2);break;case wi:c[te]=c[te]+(p[ie]/2-T[ie]/2)}}return c}function Dr(_,c){c===void 0&&(c={});var p=c,T=p.placement,j=T===void 0?_.placement:T,F=p.strategy,B=F===void 0?_.strategy:F,K=p.boundary,X=K===void 0?Vc:K,te=p.rootBoundary,ie=te===void 0?as:te,Z=p.elementContext,we=Z===void 0?Ei:Z,le=p.altBoundary,ge=le!==void 0&&le,de=p.padding,me=de===void 0?0:de,We=Kl(typeof me!="number"?me:Ii(me,Xr)),tt=we===Ei?va:Ei,Ie=_.rects.popper,Me=_.elements[ge?tt:we],Ee=function(vn,cr,hr,gt){var ri=cr==="clippingParents"?function(Xe){var yn=Eo(Ea(Xe)),dr=["absolute","fixed"].indexOf(xr(Xe).position)>=0&&An(Xe)?kn(Xe):Xe;return Zr(dr)?yn.filter(function(vs){return Zr(vs)&&Wl(vs,dr)&&ir(vs)!=="body"}):[]}(vn):[].concat(cr),ii=[].concat(ri,[hr]),Oa=ii[0],$t=ii.reduce(function(Xe,yn){var dr=Ql(vn,yn,gt);return Xe.top=sr(dr.top,Xe.top),Xe.right=vo(dr.right,Xe.right),Xe.bottom=vo(dr.bottom,Xe.bottom),Xe.left=sr(dr.left,Xe.left),Xe},Ql(vn,Oa,gt));return $t.width=$t.right-$t.left,$t.height=$t.bottom-$t.top,$t.x=$t.left,$t.y=$t.top,$t}(Zr(Me)?Me:Me.contextElement||ei(_.elements.popper),X,ie,B),ke=or(_.elements.reference),$e=Yl({reference:ke,element:Ie,placement:j}),Ke=ba(Object.assign({},Ie,$e)),ze=we===Ei?Ke:ke,wt={top:Ee.top-ze.top+We.top,bottom:ze.bottom-Ee.bottom+We.bottom,left:Ee.left-ze.left+We.left,right:ze.right-Ee.right+We.right},qn=_.modifiersData.offset;if(we===Ei&&qn){var Nr=qn[j];Object.keys(wt).forEach(function(vn){var cr=[nn,pt].indexOf(vn)>=0?1:-1,hr=[Ct,pt].indexOf(vn)>=0?"y":"x";wt[vn]+=Nr[hr]*cr})}return wt}function Bc(_,c){c===void 0&&(c={});var p=c,T=p.placement,j=p.boundary,F=p.rootBoundary,B=p.padding,K=p.flipVariations,X=p.allowedAutoPlacements,te=X===void 0?Pr:X,ie=ds(T),Z=ie?K?Ti:Ti.filter(function(ge){return ds(ge)===ie}):Xr,we=Z.filter(function(ge){return te.indexOf(ge)>=0});we.length===0&&(we=Z);var le=we.reduce(function(ge,de){return ge[de]=Dr(_,{placement:de,boundary:j,rootBoundary:F,padding:B})[mn(de)],ge},{});return Object.keys(le).sort(function(ge,de){return le[ge]-le[de]})}const ar={name:"flip",enabled:!0,phase:"main",fn:function(_){var c=_.state,p=_.options,T=_.name;if(!c.modifiersData[T]._skip){for(var j=p.mainAxis,F=j===void 0||j,B=p.altAxis,K=B===void 0||B,X=p.fallbackPlacements,te=p.padding,ie=p.boundary,Z=p.rootBoundary,we=p.altBoundary,le=p.flipVariations,ge=le===void 0||le,de=p.allowedAutoPlacements,me=c.options.placement,We=mn(me),tt=X||(We!==me&&ge?function(Xe){if(mn(Xe)===os)return[];var yn=yo(Xe);return[ps(Xe),yn,ps(yn)]}(me):[yo(me)]),Ie=[me].concat(tt).reduce(function(Xe,yn){return Xe.concat(mn(yn)===os?Bc(c,{placement:yn,boundary:ie,rootBoundary:Z,padding:te,flipVariations:ge,allowedAutoPlacements:de}):yn)},[]),Me=c.rects.reference,Ee=c.rects.popper,ke=new Map,$e=!0,Ke=Ie[0],ze=0;ze<Ie.length;ze++){var wt=Ie[ze],qn=mn(wt),Nr=ds(wt)===Jr,vn=[Ct,pt].indexOf(qn)>=0,cr=vn?"width":"height",hr=Dr(c,{placement:wt,boundary:ie,rootBoundary:Z,altBoundary:we,padding:te}),gt=vn?Nr?nn:Ut:Nr?pt:Ct;Me[cr]>Ee[cr]&&(gt=yo(gt));var ri=yo(gt),ii=[];if(F&&ii.push(hr[qn]<=0),K&&ii.push(hr[gt]<=0,hr[ri]<=0),ii.every(function(Xe){return Xe})){Ke=wt,$e=!1;break}ke.set(wt,ii)}if($e)for(var Oa=function(Xe){var yn=Ie.find(function(dr){var vs=ke.get(dr);if(vs)return vs.slice(0,Xe).every(function(ah){return ah})});if(yn)return Ke=yn,"break"},$t=ge?3:1;$t>0&&Oa($t)!=="break";$t--);c.placement!==Ke&&(c.modifiersData[T]._skip=!0,c.placement=Ke,c.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Xl(_,c,p){return p===void 0&&(p={x:0,y:0}),{top:_.top-c.height-p.y,right:_.right-c.width+p.x,bottom:_.bottom-c.height+p.y,left:_.left-c.width-p.x}}function Hc(_){return[Ct,nn,pt,Ut].some(function(c){return _[c]>=0})}const gs={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var c=_.state,p=_.name,T=c.rects.reference,j=c.rects.popper,F=c.modifiersData.preventOverflow,B=Dr(c,{elementContext:"reference"}),K=Dr(c,{altBoundary:!0}),X=Xl(B,T),te=Xl(K,j,F),ie=Hc(X),Z=Hc(te);c.modifiersData[p]={referenceClippingOffsets:X,popperEscapeOffsets:te,isReferenceHidden:ie,hasPopperEscaped:Z},c.attributes.popper=Object.assign({},c.attributes.popper,{"data-popper-reference-hidden":ie,"data-popper-escaped":Z})}},Jl={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var c=_.state,p=_.options,T=_.name,j=p.offset,F=j===void 0?[0,0]:j,B=Pr.reduce(function(ie,Z){return ie[Z]=function(we,le,ge){var de=mn(we),me=[Ut,Ct].indexOf(de)>=0?-1:1,We=typeof ge=="function"?ge(Object.assign({},le,{placement:we})):ge,tt=We[0],Ie=We[1];return tt=tt||0,Ie=(Ie||0)*me,[Ut,nn].indexOf(de)>=0?{x:Ie,y:tt}:{x:tt,y:Ie}}(Z,c.rects,F),ie},{}),K=B[c.placement],X=K.x,te=K.y;c.modifiersData.popperOffsets!=null&&(c.modifiersData.popperOffsets.x+=X,c.modifiersData.popperOffsets.y+=te),c.modifiersData[T]=B}},To={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var c=_.state,p=_.name;c.modifiersData[p]=Yl({reference:c.rects.reference,element:c.rects.popper,placement:c.placement})},data:{}},Io={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var c=_.state,p=_.options,T=_.name,j=p.mainAxis,F=j===void 0||j,B=p.altAxis,K=B!==void 0&&B,X=p.boundary,te=p.rootBoundary,ie=p.altBoundary,Z=p.padding,we=p.tether,le=we===void 0||we,ge=p.tetherOffset,de=ge===void 0?0:ge,me=Dr(c,{boundary:X,rootBoundary:te,padding:Z,altBoundary:ie}),We=mn(c.placement),tt=ds(c.placement),Ie=!tt,Me=Ta(We),Ee=Me==="x"?"y":"x",ke=c.modifiersData.popperOffsets,$e=c.rects.reference,Ke=c.rects.popper,ze=typeof de=="function"?de(Object.assign({},c.rects,{placement:c.placement})):de,wt=typeof ze=="number"?{mainAxis:ze,altAxis:ze}:Object.assign({mainAxis:0,altAxis:0},ze),qn=c.modifiersData.offset?c.modifiersData.offset[c.placement]:null,Nr={x:0,y:0};if(ke){if(F){var vn,cr=Me==="y"?Ct:Ut,hr=Me==="y"?pt:nn,gt=Me==="y"?"height":"width",ri=ke[Me],ii=ri+me[cr],Oa=ri-me[hr],$t=le?-Ke[gt]/2:0,Xe=tt===Jr?$e[gt]:Ke[gt],yn=tt===Jr?-Ke[gt]:-$e[gt],dr=c.elements.arrow,vs=le&&dr?ql(dr):{width:0,height:0},ah=c.modifiersData["arrow#persistent"]?c.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},v_=ah[cr],y_=ah[hr],lh=hs(0,$e[gt],vs[gt]),zA=Ie?$e[gt]/2-$t-lh-v_-wt.mainAxis:Xe-lh-v_-wt.mainAxis,BA=Ie?-$e[gt]/2+$t+lh+y_+wt.mainAxis:yn+lh+y_+wt.mainAxis,cp=c.elements.arrow&&kn(c.elements.arrow),HA=cp?Me==="y"?cp.clientTop||0:cp.clientLeft||0:0,__=(vn=qn==null?void 0:qn[Me])!=null?vn:0,qA=ri+BA-__,w_=hs(le?vo(ii,ri+zA-__-HA):ii,ri,le?sr(Oa,qA):Oa);ke[Me]=w_,Nr[Me]=w_-ri}if(K){var E_,WA=Me==="x"?Ct:Ut,KA=Me==="x"?pt:nn,xo=ke[Ee],uh=Ee==="y"?"height":"width",T_=xo+me[WA],I_=xo-me[KA],hp=[Ct,Ut].indexOf(We)!==-1,S_=(E_=qn==null?void 0:qn[Ee])!=null?E_:0,C_=hp?T_:xo-$e[uh]-Ke[uh]-S_+wt.altAxis,b_=hp?xo+$e[uh]+Ke[uh]-S_-wt.altAxis:I_,A_=le&&hp?function(GA,QA,dp){var k_=hs(GA,QA,dp);return k_>dp?dp:k_}(C_,xo,b_):hs(le?C_:T_,xo,le?b_:I_);ke[Ee]=A_,Nr[Ee]=A_-xo}c.modifiersData[T]=Nr}},requiresIfExists:["offset"]};function qc(_,c,p){p===void 0&&(p=!1);var T,j,F=An(c),B=An(c)&&function(Z){var we=Z.getBoundingClientRect(),le=Le(we.width)/Z.offsetWidth||1,ge=Le(we.height)/Z.offsetHeight||1;return le!==1||ge!==1}(c),K=ei(c),X=or(_,B,p),te={scrollLeft:0,scrollTop:0},ie={x:0,y:0};return(F||!F&&!p)&&((ir(c)!=="body"||et(K))&&(te=(T=c)!==rn(T)&&An(T)?{scrollLeft:(j=T).scrollLeft,scrollTop:j.scrollTop}:Ca(T)),An(c)?((ie=or(c,!0)).x+=c.clientLeft,ie.y+=c.clientTop):K&&(ie.x=wo(K))),{x:X.left+te.scrollLeft-ie.x,y:X.top+te.scrollTop-ie.y,width:X.width,height:X.height}}function Aa(_){var c=new Map,p=new Set,T=[];function j(F){p.add(F.name),[].concat(F.requires||[],F.requiresIfExists||[]).forEach(function(B){if(!p.has(B)){var K=c.get(B);K&&j(K)}}),T.push(F)}return _.forEach(function(F){c.set(F.name,F)}),_.forEach(function(F){p.has(F.name)||j(F)}),T}var Wc={placement:"bottom",modifiers:[],strategy:"absolute"};function Zl(){for(var _=arguments.length,c=new Array(_),p=0;p<_;p++)c[p]=arguments[p];return!c.some(function(T){return!(T&&typeof T.getBoundingClientRect=="function")})}function ti(_){_===void 0&&(_={});var c=_,p=c.defaultModifiers,T=p===void 0?[]:p,j=c.defaultOptions,F=j===void 0?Wc:j;return function(B,K,X){X===void 0&&(X=F);var te,ie,Z={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wc,F),modifiersData:{},elements:{reference:B,popper:K},attributes:{},styles:{}},we=[],le=!1,ge={state:Z,setOptions:function(me){var We=typeof me=="function"?me(Z.options):me;de(),Z.options=Object.assign({},F,Z.options,We),Z.scrollParents={reference:Zr(B)?Eo(B):B.contextElement?Eo(B.contextElement):[],popper:Eo(K)};var tt,Ie,Me=function(Ee){var ke=Aa(Ee);return Uc.reduce(function($e,Ke){return $e.concat(ke.filter(function(ze){return ze.phase===Ke}))},[])}((tt=[].concat(T,Z.options.modifiers),Ie=tt.reduce(function(Ee,ke){var $e=Ee[ke.name];return Ee[ke.name]=$e?Object.assign({},$e,ke,{options:Object.assign({},$e.options,ke.options),data:Object.assign({},$e.data,ke.data)}):ke,Ee},{}),Object.keys(Ie).map(function(Ee){return Ie[Ee]})));return Z.orderedModifiers=Me.filter(function(Ee){return Ee.enabled}),Z.orderedModifiers.forEach(function(Ee){var ke=Ee.name,$e=Ee.options,Ke=$e===void 0?{}:$e,ze=Ee.effect;if(typeof ze=="function"){var wt=ze({state:Z,name:ke,instance:ge,options:Ke});we.push(wt||function(){})}}),ge.update()},forceUpdate:function(){if(!le){var me=Z.elements,We=me.reference,tt=me.popper;if(Zl(We,tt)){Z.rects={reference:qc(We,kn(tt),Z.options.strategy==="fixed"),popper:ql(tt)},Z.reset=!1,Z.placement=Z.options.placement,Z.orderedModifiers.forEach(function(ze){return Z.modifiersData[ze.name]=Object.assign({},ze.data)});for(var Ie=0;Ie<Z.orderedModifiers.length;Ie++)if(Z.reset!==!0){var Me=Z.orderedModifiers[Ie],Ee=Me.fn,ke=Me.options,$e=ke===void 0?{}:ke,Ke=Me.name;typeof Ee=="function"&&(Z=Ee({state:Z,options:$e,name:Ke,instance:ge})||Z)}else Z.reset=!1,Ie=-1}}},update:(te=function(){return new Promise(function(me){ge.forceUpdate(),me(Z)})},function(){return ie||(ie=new Promise(function(me){Promise.resolve().then(function(){ie=void 0,me(te())})})),ie}),destroy:function(){de(),le=!0}};if(!Zl(B,K))return ge;function de(){we.forEach(function(me){return me()}),we=[]}return ge.setOptions(X).then(function(me){!le&&X.onFirstUpdate&&X.onFirstUpdate(me)}),ge}}var Kc=ti(),Gc=ti({defaultModifiers:[fs,To,Gl,Hn]}),So=ti({defaultModifiers:[fs,To,Gl,Hn,Jl,ar,Io,$c,gs]});const ka=Object.freeze(Object.defineProperty({__proto__:null,afterMain:_a,afterRead:Ul,afterWrite:Hl,applyStyles:Hn,arrow:$c,auto:os,basePlacements:Xr,beforeMain:$l,beforeRead:ya,beforeWrite:wa,bottom:pt,clippingParents:Vc,computeStyles:Gl,createPopper:So,createPopperBase:Kc,createPopperLite:Gc,detectOverflow:Dr,end:wi,eventListeners:fs,flip:ar,hide:gs,left:Ut,main:zl,modifierPhases:Uc,offset:Jl,placements:Pr,popper:Ei,popperGenerator:ti,popperOffsets:To,preventOverflow:Io,read:Fc,reference:va,right:nn,start:Jr,top:Ct,variationPlacements:Ti,viewport:as,write:Bl},Symbol.toStringTag,{value:"Module"})),eu="dropdown",lr=".bs.dropdown",Pa=".data-api",Qc="ArrowUp",ni="ArrowDown",Yc=`hide${lr}`,Xc=`hidden${lr}`,Jc=`show${lr}`,Zc=`shown${lr}`,Co=`click${lr}${Pa}`,sn=`keydown${lr}${Pa}`,eh=`keyup${lr}${Pa}`,Si="show",Pn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',l=`${Pn}.${Si}`,d=".dropdown-menu",m=D()?"top-end":"top-start",C=D()?"top-start":"top-end",U=D()?"bottom-end":"bottom-start",z=D()?"bottom-start":"bottom-end",Y=D()?"left-start":"right-start",Ue=D()?"right-start":"left-start",xt={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},xe={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class qe extends Ye{constructor(c,p){super(c,p),this._popper=null,this._parent=this._element.parentNode,this._menu=re.next(this._element,d)[0]||re.prev(this._element,d)[0]||re.findOne(d,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return xt}static get DefaultType(){return xe}static get NAME(){return eu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(f(this._element)||this._isShown())return;const c={relatedTarget:this._element};if(!$.trigger(this._element,Jc,c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const p of[].concat(...document.body.children))$.on(p,"mouseover",v);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Si),this._element.classList.add(Si),$.trigger(this._element,Zc,c)}}hide(){if(f(this._element)||!this._isShown())return;const c={relatedTarget:this._element};this._completeHide(c)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!$.trigger(this._element,Yc,c).defaultPrevented){if("ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))$.off(p,"mouseover",v);this._popper&&this._popper.destroy(),this._menu.classList.remove(Si),this._element.classList.remove(Si),this._element.setAttribute("aria-expanded","false"),rt.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,Xc,c)}}_getConfig(c){if(typeof(c=super._getConfig(c)).reference=="object"&&!a(c.reference)&&typeof c.reference.getBoundingClientRect!="function")throw new TypeError(`${eu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(ka===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let c=this._element;this._config.reference==="parent"?c=this._parent:a(this._config.reference)?c=u(this._config.reference):typeof this._config.reference=="object"&&(c=this._config.reference);const p=this._getPopperConfig();this._popper=So(c,this._menu,p)}_isShown(){return this._menu.classList.contains(Si)}_getPlacement(){const c=this._parent;if(c.classList.contains("dropend"))return Y;if(c.classList.contains("dropstart"))return Ue;if(c.classList.contains("dropup-center"))return"top";if(c.classList.contains("dropdown-center"))return"bottom";const p=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return c.classList.contains("dropup")?p?C:m:p?z:U}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(p=>Number.parseInt(p,10)):typeof c=="function"?p=>c(p,this._element):c}_getPopperConfig(){const c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(rt.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),{...c,...I(this._config.popperConfig,[c])}}_selectMenuItem({key:c,target:p}){const T=re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(j=>h(j));T.length&&V(T,p,c===ni,!T.includes(p)).focus()}static jQueryInterface(c){return this.each(function(){const p=qe.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c]()}})}static clearMenus(c){if(c.button===2||c.type==="keyup"&&c.key!=="Tab")return;const p=re.find(l);for(const T of p){const j=qe.getInstance(T);if(!j||j._config.autoClose===!1)continue;const F=c.composedPath(),B=F.includes(j._menu);if(F.includes(j._element)||j._config.autoClose==="inside"&&!B||j._config.autoClose==="outside"&&B||j._menu.contains(c.target)&&(c.type==="keyup"&&c.key==="Tab"||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;const K={relatedTarget:j._element};c.type==="click"&&(K.clickEvent=c),j._completeHide(K)}}static dataApiKeydownHandler(c){const p=/input|textarea/i.test(c.target.tagName),T=c.key==="Escape",j=[Qc,ni].includes(c.key);if(!j&&!T||p&&!T)return;c.preventDefault();const F=this.matches(Pn)?this:re.prev(this,Pn)[0]||re.next(this,Pn)[0]||re.findOne(Pn,c.delegateTarget.parentNode),B=qe.getOrCreateInstance(F);if(j)return c.stopPropagation(),B.show(),void B._selectMenuItem(c);B._isShown()&&(c.stopPropagation(),B.hide(),F.focus())}}$.on(document,sn,Pn,qe.dataApiKeydownHandler),$.on(document,sn,d,qe.dataApiKeydownHandler),$.on(document,Co,qe.clearMenus),$.on(document,eh,qe.clearMenus),$.on(document,Co,Pn,function(_){_.preventDefault(),qe.getOrCreateInstance(this).toggle()}),b(qe);const Ot="backdrop",Ci="show",Rn=`mousedown.bs.${Ot}`,Ra={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},tu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class zy extends Pt{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return Ra}static get DefaultType(){return tu}static get NAME(){return Ot}show(c){if(!this._config.isVisible)return void I(c);this._append();const p=this._getElement();this._config.isAnimated&&w(p),p.classList.add(Ci),this._emulateAnimation(()=>{I(c)})}hide(c){this._config.isVisible?(this._getElement().classList.remove(Ci),this._emulateAnimation(()=>{this.dispose(),I(c)})):I(c)}dispose(){this._isAppended&&($.off(this._element,Rn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add("fade"),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=u(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),$.on(c,Rn,()=>{I(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){A(c,this._getElement(),this._config.isAnimated)}}const th=".bs.focustrap",Lb=`focusin${th}`,Mb=`keydown.tab${th}`,By="backward",jb={autofocus:!0,trapElement:null},Vb={autofocus:"boolean",trapElement:"element"};class Hy extends Pt{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return jb}static get DefaultType(){return Vb}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,th),$.on(document,Lb,c=>this._handleFocusin(c)),$.on(document,Mb,c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,th))}_handleFocusin(c){const{trapElement:p}=this._config;if(c.target===document||c.target===p||p.contains(c.target))return;const T=re.focusableChildren(p);T.length===0?p.focus():this._lastTabNavDirection===By?T[T.length-1].focus():T[0].focus()}_handleKeydown(c){c.key==="Tab"&&(this._lastTabNavDirection=c.shiftKey?By:"forward")}}const qy=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Wy=".sticky-top",nh="padding-right",Ky="margin-right";class ep{constructor(){this._element=document.body}getWidth(){const c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){const c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,nh,p=>p+c),this._setElementAttributes(qy,nh,p=>p+c),this._setElementAttributes(Wy,Ky,p=>p-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,nh),this._resetElementAttributes(qy,nh),this._resetElementAttributes(Wy,Ky)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,p,T){const j=this.getWidth();this._applyManipulationCallback(c,F=>{if(F!==this._element&&window.innerWidth>F.clientWidth+j)return;this._saveInitialAttribute(F,p);const B=window.getComputedStyle(F).getPropertyValue(p);F.style.setProperty(p,`${T(Number.parseFloat(B))}px`)})}_saveInitialAttribute(c,p){const T=c.style.getPropertyValue(p);T&&rt.setDataAttribute(c,p,T)}_resetElementAttributes(c,p){this._applyManipulationCallback(c,T=>{const j=rt.getDataAttribute(T,p);j!==null?(rt.removeDataAttribute(T,p),T.style.setProperty(p,j)):T.style.removeProperty(p)})}_applyManipulationCallback(c,p){if(a(c))p(c);else for(const T of re.find(c,this._element))p(T)}}const ur=".bs.modal",Fb=`hide${ur}`,Ub=`hidePrevented${ur}`,Gy=`hidden${ur}`,Qy=`show${ur}`,$b=`shown${ur}`,zb=`resize${ur}`,Bb=`click.dismiss${ur}`,Hb=`mousedown.dismiss${ur}`,qb=`keydown.dismiss${ur}`,Wb=`click${ur}.data-api`,Yy="modal-open",Xy="show",tp="modal-static",Kb={backdrop:!0,focus:!0,keyboard:!0},Gb={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class bo extends Ye{constructor(c,p){super(c,p),this._dialog=re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ep,this._addEventListeners()}static get Default(){return Kb}static get DefaultType(){return Gb}static get NAME(){return"modal"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||$.trigger(this._element,Qy,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Yy),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){this._isShown&&!this._isTransitioning&&($.trigger(this._element,Fb).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Xy),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){$.off(window,ur),$.off(this._dialog,ur),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new zy({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Hy({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const p=re.findOne(".modal-body",this._dialog);p&&(p.scrollTop=0),w(this._element),this._element.classList.add(Xy),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,$b,{relatedTarget:c})},this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,qb,c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),$.on(window,zb,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,Hb,c=>{$.one(this._element,Bb,p=>{this._element===c.target&&this._element===p.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Yy),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,Gy)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if($.trigger(this._element,Ub).defaultPrevented)return;const c=this._element.scrollHeight>document.documentElement.clientHeight,p=this._element.style.overflowY;p==="hidden"||this._element.classList.contains(tp)||(c||(this._element.style.overflowY="hidden"),this._element.classList.add(tp),this._queueCallback(()=>{this._element.classList.remove(tp),this._queueCallback(()=>{this._element.style.overflowY=p},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const c=this._element.scrollHeight>document.documentElement.clientHeight,p=this._scrollBar.getWidth(),T=p>0;if(T&&!c){const j=D()?"paddingLeft":"paddingRight";this._element.style[j]=`${p}px`}if(!T&&c){const j=D()?"paddingRight":"paddingLeft";this._element.style[j]=`${p}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,p){return this.each(function(){const T=bo.getOrCreateInstance(this,c);if(typeof c=="string"){if(T[c]===void 0)throw new TypeError(`No method named "${c}"`);T[c](p)}})}}$.on(document,Wb,'[data-bs-toggle="modal"]',function(_){const c=re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),$.one(c,Qy,T=>{T.defaultPrevented||$.one(c,Gy,()=>{h(this)&&this.focus()})});const p=re.findOne(".modal.show");p&&bo.getInstance(p).hide(),bo.getOrCreateInstance(c).toggle(this)}),Fn(bo),b(bo);const bi=".bs.offcanvas",Jy=".data-api",Qb=`load${bi}${Jy}`,Zy="show",e_="showing",t_="hiding",n_=".offcanvas.show",Yb=`show${bi}`,Xb=`shown${bi}`,Jb=`hide${bi}`,r_=`hidePrevented${bi}`,i_=`hidden${bi}`,Zb=`resize${bi}`,eA=`click${bi}${Jy}`,tA=`keydown.dismiss${bi}`,nA={backdrop:!0,keyboard:!0,scroll:!1},rA={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ai extends Ye{constructor(c,p){super(c,p),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return nA}static get DefaultType(){return rA}static get NAME(){return"offcanvas"}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||$.trigger(this._element,Yb,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ep().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(e_),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Zy),this._element.classList.remove(e_),$.trigger(this._element,Xb,{relatedTarget:c})},this._element,!0))}hide(){this._isShown&&($.trigger(this._element,Jb).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(t_),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Zy,t_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ep().reset(),$.trigger(this._element,i_)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const c=!!this._config.backdrop;return new zy({className:"offcanvas-backdrop",isVisible:c,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:c?()=>{this._config.backdrop!=="static"?this.hide():$.trigger(this._element,r_)}:null})}_initializeFocusTrap(){return new Hy({trapElement:this._element})}_addEventListeners(){$.on(this._element,tA,c=>{c.key==="Escape"&&(this._config.keyboard?this.hide():$.trigger(this._element,r_))})}static jQueryInterface(c){return this.each(function(){const p=Ai.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c](this)}})}}$.on(document,eA,'[data-bs-toggle="offcanvas"]',function(_){const c=re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),f(this))return;$.one(c,i_,()=>{h(this)&&this.focus()});const p=re.findOne(n_);p&&p!==c&&Ai.getInstance(p).hide(),Ai.getOrCreateInstance(c).toggle(this)}),$.on(window,Qb,()=>{for(const _ of re.find(n_))Ai.getOrCreateInstance(_).show()}),$.on(window,Zb,()=>{for(const _ of re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&Ai.getOrCreateInstance(_).hide()}),Fn(Ai),b(Ai);const s_={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},iA=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),sA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,oA=(_,c)=>{const p=_.nodeName.toLowerCase();return c.includes(p)?!iA.has(p)||!!sA.test(_.nodeValue):c.filter(T=>T instanceof RegExp).some(T=>T.test(p))},aA={allowList:s_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},lA={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},uA={entry:"(string|element|function|null)",selector:"(string|element)"};class cA extends Pt{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return aA}static get DefaultType(){return lA}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content={...this._config.content,...c},this}toHtml(){const c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(const[j,F]of Object.entries(this._config.content))this._setContent(c,F,j);const p=c.children[0],T=this._resolvePossibleFunction(this._config.extraClass);return T&&p.classList.add(...T.split(" ")),p}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(const[p,T]of Object.entries(c))super._typeCheckConfig({selector:p,entry:T},uA)}_setContent(c,p,T){const j=re.findOne(T,c);j&&((p=this._resolvePossibleFunction(p))?a(p)?this._putElementInTemplate(u(p),j):this._config.html?j.innerHTML=this._maybeSanitize(p):j.textContent=p:j.remove())}_maybeSanitize(c){return this._config.sanitize?function(p,T,j){if(!p.length)return p;if(j&&typeof j=="function")return j(p);const F=new window.DOMParser().parseFromString(p,"text/html"),B=[].concat(...F.body.querySelectorAll("*"));for(const K of B){const X=K.nodeName.toLowerCase();if(!Object.keys(T).includes(X)){K.remove();continue}const te=[].concat(...K.attributes),ie=[].concat(T["*"]||[],T[X]||[]);for(const Z of te)oA(Z,ie)||K.removeAttribute(Z.nodeName)}return F.body.innerHTML}(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return I(c,[this])}_putElementInTemplate(c,p){if(this._config.html)return p.innerHTML="",void p.append(c);p.textContent=c.textContent}}const hA=new Set(["sanitize","allowList","sanitizeFn"]),np="fade",rh="show",o_=".modal",a_="hide.bs.modal",nu="hover",rp="focus",dA={AUTO:"auto",TOP:"top",RIGHT:D()?"left":"right",BOTTOM:"bottom",LEFT:D()?"right":"left"},fA={allowList:s_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},pA={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ao extends Ye{constructor(c,p){if(ka===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(c,p),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return fA}static get DefaultType(){return pA}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(o_),a_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const c=$.trigger(this._element,this.constructor.eventName("show")),p=(g(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!p)return;this._disposePopper();const T=this._getTipElement();this._element.setAttribute("aria-describedby",T.getAttribute("id"));const{container:j}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(j.append(T),$.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(T),T.classList.add(rh),"ontouchstart"in document.documentElement)for(const F of[].concat(...document.body.children))$.on(F,"mouseover",v);this._queueCallback(()=>{$.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!$.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(rh),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))$.off(c,"mouseover",v);this._activeTrigger.click=!1,this._activeTrigger[rp]=!1,this._activeTrigger[nu]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){const p=this._getTemplateFactory(c).toHtml();if(!p)return null;p.classList.remove(np,rh),p.classList.add(`bs-${this.constructor.NAME}-auto`);const T=(j=>{do j+=Math.floor(1e6*Math.random());while(document.getElementById(j));return j})(this.constructor.NAME).toString();return p.setAttribute("id",T),this._isAnimated()&&p.classList.add(np),p}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new cA({...this._config,content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(np)}_isShown(){return this.tip&&this.tip.classList.contains(rh)}_createPopper(c){const p=I(this._config.placement,[this,c,this._element]),T=dA[p.toUpperCase()];return So(this._element,c,this._getPopperConfig(T))}_getOffset(){const{offset:c}=this._config;return typeof c=="string"?c.split(",").map(p=>Number.parseInt(p,10)):typeof c=="function"?p=>c(p,this._element):c}_resolvePossibleFunction(c){return I(c,[this._element])}_getPopperConfig(c){const p={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:T=>{this._getTipElement().setAttribute("data-popper-placement",T.state.placement)}}]};return{...p,...I(this._config.popperConfig,[p])}}_setListeners(){const c=this._config.trigger.split(" ");for(const p of c)if(p==="click")$.on(this._element,this.constructor.eventName("click"),this._config.selector,T=>{this._initializeOnDelegatedTarget(T).toggle()});else if(p!=="manual"){const T=p===nu?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),j=p===nu?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");$.on(this._element,T,this._config.selector,F=>{const B=this._initializeOnDelegatedTarget(F);B._activeTrigger[F.type==="focusin"?rp:nu]=!0,B._enter()}),$.on(this._element,j,this._config.selector,F=>{const B=this._initializeOnDelegatedTarget(F);B._activeTrigger[F.type==="focusout"?rp:nu]=B._element.contains(F.relatedTarget),B._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(o_),a_,this._hideModalHandler)}_fixTitle(){const c=this._element.getAttribute("title");c&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,p){clearTimeout(this._timeout),this._timeout=setTimeout(c,p)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){const p=rt.getDataAttributes(this._element);for(const T of Object.keys(p))hA.has(T)&&delete p[T];return c={...p,...typeof c=="object"&&c?c:{}},c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=c.container===!1?document.body:u(c.container),typeof c.delay=="number"&&(c.delay={show:c.delay,hide:c.delay}),typeof c.title=="number"&&(c.title=c.title.toString()),typeof c.content=="number"&&(c.content=c.content.toString()),c}_getDelegateConfig(){const c={};for(const[p,T]of Object.entries(this._config))this.constructor.Default[p]!==T&&(c[p]=T);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(c){return this.each(function(){const p=Ao.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c]()}})}}b(Ao);const gA={...Ao.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},mA={...Ao.DefaultType,content:"(null|string|element|function)"};class ih extends Ao{static get Default(){return gA}static get DefaultType(){return mA}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){const p=ih.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c]()}})}}b(ih);const ip=".bs.scrollspy",vA=`activate${ip}`,l_=`click${ip}`,yA=`load${ip}.data-api`,xa="active",sp="[href]",u_=".nav-link",_A=`${u_}, .nav-item > ${u_}, .list-group-item`,wA={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},EA={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ru extends Ye{constructor(c,p){super(c,p),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return wA}static get DefaultType(){return EA}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=u(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,typeof c.threshold=="string"&&(c.threshold=c.threshold.split(",").map(p=>Number.parseFloat(p))),c}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,l_),$.on(this._config.target,l_,sp,c=>{const p=this._observableSections.get(c.target.hash);if(p){c.preventDefault();const T=this._rootElement||window,j=p.offsetTop-this._element.offsetTop;if(T.scrollTo)return void T.scrollTo({top:j,behavior:"smooth"});T.scrollTop=j}}))}_getNewObserver(){const c={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(p=>this._observerCallback(p),c)}_observerCallback(c){const p=B=>this._targetLinks.get(`#${B.target.id}`),T=B=>{this._previousScrollData.visibleEntryTop=B.target.offsetTop,this._process(p(B))},j=(this._rootElement||document.documentElement).scrollTop,F=j>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=j;for(const B of c){if(!B.isIntersecting){this._activeTarget=null,this._clearActiveClass(p(B));continue}const K=B.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(F&&K){if(T(B),!j)return}else F||K||T(B)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const c=re.find(sp,this._config.target);for(const p of c){if(!p.hash||f(p))continue;const T=re.findOne(decodeURI(p.hash),this._element);h(T)&&(this._targetLinks.set(decodeURI(p.hash),p),this._observableSections.set(p.hash,T))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(xa),this._activateParents(c),$.trigger(this._element,vA,{relatedTarget:c}))}_activateParents(c){if(c.classList.contains("dropdown-item"))re.findOne(".dropdown-toggle",c.closest(".dropdown")).classList.add(xa);else for(const p of re.parents(c,".nav, .list-group"))for(const T of re.prev(p,_A))T.classList.add(xa)}_clearActiveClass(c){c.classList.remove(xa);const p=re.find(`${sp}.${xa}`,c);for(const T of p)T.classList.remove(xa)}static jQueryInterface(c){return this.each(function(){const p=ru.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c]()}})}}$.on(window,yA,()=>{for(const _ of re.find('[data-bs-spy="scroll"]'))ru.getOrCreateInstance(_)}),b(ru);const ko=".bs.tab",TA=`hide${ko}`,IA=`hidden${ko}`,SA=`show${ko}`,CA=`shown${ko}`,bA=`click${ko}`,AA=`keydown${ko}`,kA=`load${ko}`,PA="ArrowLeft",c_="ArrowRight",RA="ArrowUp",h_="ArrowDown",op="Home",d_="End",Po="active",f_="fade",ap="show",p_=".dropdown-toggle",lp=`:not(${p_})`,g_='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',up=`.nav-link${lp}, .list-group-item${lp}, [role="tab"]${lp}, ${g_}`,xA=`.${Po}[data-bs-toggle="tab"], .${Po}[data-bs-toggle="pill"], .${Po}[data-bs-toggle="list"]`;class Ro extends Ye{constructor(c){super(c),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,AA,p=>this._keydown(p)))}static get NAME(){return"tab"}show(){const c=this._element;if(this._elemIsActive(c))return;const p=this._getActiveElem(),T=p?$.trigger(p,TA,{relatedTarget:c}):null;$.trigger(c,SA,{relatedTarget:p}).defaultPrevented||T&&T.defaultPrevented||(this._deactivate(p,c),this._activate(c,p))}_activate(c,p){c&&(c.classList.add(Po),this._activate(re.getElementFromSelector(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),$.trigger(c,CA,{relatedTarget:p})):c.classList.add(ap)},c,c.classList.contains(f_)))}_deactivate(c,p){c&&(c.classList.remove(Po),c.blur(),this._deactivate(re.getElementFromSelector(c)),this._queueCallback(()=>{c.getAttribute("role")==="tab"?(c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),$.trigger(c,IA,{relatedTarget:p})):c.classList.remove(ap)},c,c.classList.contains(f_)))}_keydown(c){if(![PA,c_,RA,h_,op,d_].includes(c.key))return;c.stopPropagation(),c.preventDefault();const p=this._getChildren().filter(j=>!f(j));let T;if([op,d_].includes(c.key))T=p[c.key===op?0:p.length-1];else{const j=[c_,h_].includes(c.key);T=V(p,c.target,j,!0)}T&&(T.focus({preventScroll:!0}),Ro.getOrCreateInstance(T).show())}_getChildren(){return re.find(up,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,p){this._setAttributeIfNotExists(c,"role","tablist");for(const T of p)this._setInitialAttributesOnChild(T)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);const p=this._elemIsActive(c),T=this._getOuterElement(c);c.setAttribute("aria-selected",p),T!==c&&this._setAttributeIfNotExists(T,"role","presentation"),p||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){const p=re.getElementFromSelector(c);p&&(this._setAttributeIfNotExists(p,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(p,"aria-labelledby",`${c.id}`))}_toggleDropDown(c,p){const T=this._getOuterElement(c);if(!T.classList.contains("dropdown"))return;const j=(F,B)=>{const K=re.findOne(F,T);K&&K.classList.toggle(B,p)};j(p_,Po),j(".dropdown-menu",ap),T.setAttribute("aria-expanded",p)}_setAttributeIfNotExists(c,p,T){c.hasAttribute(p)||c.setAttribute(p,T)}_elemIsActive(c){return c.classList.contains(Po)}_getInnerElement(c){return c.matches(up)?c:re.findOne(up,c)}_getOuterElement(c){return c.closest(".nav-item, .list-group-item")||c}static jQueryInterface(c){return this.each(function(){const p=Ro.getOrCreateInstance(this);if(typeof c=="string"){if(p[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);p[c]()}})}}$.on(document,bA,g_,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),f(this)||Ro.getOrCreateInstance(this).show()}),$.on(window,kA,()=>{for(const _ of re.find(xA))Ro.getOrCreateInstance(_)}),b(Ro);const ms=".bs.toast",OA=`mouseover${ms}`,DA=`mouseout${ms}`,NA=`focusin${ms}`,LA=`focusout${ms}`,MA=`hide${ms}`,jA=`hidden${ms}`,VA=`show${ms}`,FA=`shown${ms}`,m_="hide",sh="show",oh="showing",UA={animation:"boolean",autohide:"boolean",delay:"number"},$A={animation:!0,autohide:!0,delay:5e3};class iu extends Ye{constructor(c,p){super(c,p),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return $A}static get DefaultType(){return UA}static get NAME(){return"toast"}show(){$.trigger(this._element,VA).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(m_),w(this._element),this._element.classList.add(sh,oh),this._queueCallback(()=>{this._element.classList.remove(oh),$.trigger(this._element,FA),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&($.trigger(this._element,MA).defaultPrevented||(this._element.classList.add(oh),this._queueCallback(()=>{this._element.classList.add(m_),this._element.classList.remove(oh,sh),$.trigger(this._element,jA)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(sh),super.dispose()}isShown(){return this._element.classList.contains(sh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(c,p){switch(c.type){case"mouseover":case"mouseout":this._hasMouseInteraction=p;break;case"focusin":case"focusout":this._hasKeyboardInteraction=p}if(p)return void this._clearTimeout();const T=c.relatedTarget;this._element===T||this._element.contains(T)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,OA,c=>this._onInteraction(c,!0)),$.on(this._element,DA,c=>this._onInteraction(c,!1)),$.on(this._element,NA,c=>this._onInteraction(c,!0)),$.on(this._element,LA,c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){const p=iu.getOrCreateInstance(this,c);if(typeof c=="string"){if(p[c]===void 0)throw new TypeError(`No method named "${c}"`);p[c](this)}})}}return Fn(iu),b(iu),{Alert:Cn,Button:$n,Carousel:bn,Collapse:Yr,Dropdown:qe,Modal:bo,Offcanvas:Ai,Popover:ih,ScrollSpy:ru,Tab:Ro,Toast:iu,Tooltip:Ao}})})(kR);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uc(){return uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uc.apply(this,arguments)}var Ds;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ds||(Ds={}));const V0="popstate";function PR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return rm("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Dd(i)}return xR(e,n,null,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function oI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RR(){return Math.random().toString(36).substr(2,8)}function F0(t,e){return{usr:t.state,key:t.key,idx:e}}function rm(t,e,n,r){return n===void 0&&(n=null),uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?kl(e):e,{state:n,key:e&&e.key||r||RR()})}function Dd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function kl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ds.Pop,u=null,h=f();h==null&&(h=0,o.replaceState(uc({},o.state,{idx:h}),""));function f(){return(o.state||{idx:null}).idx}function g(){a=Ds.Pop;let D=f(),b=D==null?null:D-h;h=D,u&&u({action:a,location:k.location,delta:b})}function v(D,b){a=Ds.Push;let I=rm(k.location,D,b);h=f()+1;let A=F0(I,h),V=k.createHref(I);try{o.pushState(A,"",V)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;i.location.assign(V)}s&&u&&u({action:a,location:k.location,delta:1})}function w(D,b){a=Ds.Replace;let I=rm(k.location,D,b);h=f();let A=F0(I,h),V=k.createHref(I);o.replaceState(A,"",V),s&&u&&u({action:a,location:k.location,delta:0})}function S(D){let b=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof D=="string"?D:Dd(D);return I=I.replace(/ $/,"%20"),It(b,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,b)}let k={get action(){return a},get location(){return t(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(V0,g),u=D,()=>{i.removeEventListener(V0,g),u=null}},createHref(D){return e(i,D)},createURL:S,encodeLocation(D){let b=S(D);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:w,go(D){return o.go(D)}};return k}var U0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(U0||(U0={}));function OR(t,e,n){return n===void 0&&(n="/"),DR(t,e,n,!1)}function DR(t,e,n,r){let i=typeof e=="string"?kl(e):e,s=Mv(i.pathname||"/",n);if(s==null)return null;let o=aI(t);NR(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let h=qR(s);a=BR(o[u],h,r)}return a}function aI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(It(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let h=Bs([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(It(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),aI(s.children,e,f,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:$R(h,s.index),routesMeta:f})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of lI(s.path))i(s,o,u)}),e}function lI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=lI(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function NR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:zR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LR=/^:[\w-]+$/,MR=3,jR=2,VR=1,FR=10,UR=-2,$0=t=>t==="*";function $R(t,e){let n=t.split("/"),r=n.length;return n.some($0)&&(r+=UR),e&&(r+=jR),n.filter(i=>!$0(i)).reduce((i,s)=>i+(LR.test(s)?MR:s===""?VR:FR),r)}function zR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function BR(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],h=a===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",g=z0({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},f),v=u.route;if(!g&&h&&n&&!r[r.length-1].route.index&&(g=z0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),o.push({params:i,pathname:Bs([s,g.pathname]),pathnameBase:QR(Bs([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=Bs([s,g.pathnameBase]))}return o}function z0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=HR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((h,f,g)=>{let{paramName:v,isOptional:w}=f;if(v==="*"){let k=a[g]||"";o=s.slice(0,s.length-k.length).replace(/(.)\/+$/,"$1")}const S=a[g];return w&&!S?h[v]=void 0:h[v]=(S||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function HR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),oI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return oI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Mv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WR(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?kl(t):t;return{pathname:n?n.startsWith("/")?n:KR(n,e):e,search:YR(r),hash:XR(i)}}function KR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function jv(t,e){let n=GR(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vv(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=kl(t):(i=uc({},t),It(!i.pathname||!i.pathname.includes("?"),Fp("?","pathname","search",i)),It(!i.pathname||!i.pathname.includes("#"),Fp("#","pathname","hash",i)),It(!i.search||!i.search.includes("#"),Fp("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}a=g>=0?e[g]:"/"}let u=WR(i,a),h=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||f)&&(u.pathname+="/"),u}const Bs=t=>t.join("/").replace(/\/\/+/g,"/"),QR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uI=["post","put","patch","delete"];new Set(uI);const ZR=["get",...uI];new Set(ZR);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cc.apply(this,arguments)}const Fv=M.createContext(null),ex=M.createContext(null),so=M.createContext(null),_f=M.createContext(null),Qi=M.createContext({outlet:null,matches:[],isDataRoute:!1}),cI=M.createContext(null);function tx(t,e){let{relative:n}=e===void 0?{}:e;Pl()||It(!1);let{basename:r,navigator:i}=M.useContext(so),{hash:s,pathname:o,search:a}=dI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Bs([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Pl(){return M.useContext(_f)!=null}function sa(){return Pl()||It(!1),M.useContext(_f).location}function hI(t){M.useContext(so).static||M.useLayoutEffect(t)}function oa(){let{isDataRoute:t}=M.useContext(Qi);return t?gx():nx()}function nx(){Pl()||It(!1);let t=M.useContext(Fv),{basename:e,future:n,navigator:r}=M.useContext(so),{matches:i}=M.useContext(Qi),{pathname:s}=sa(),o=JSON.stringify(jv(i,n.v7_relativeSplatPath)),a=M.useRef(!1);return hI(()=>{a.current=!0}),M.useCallback(function(h,f){if(f===void 0&&(f={}),!a.current)return;if(typeof h=="number"){r.go(h);return}let g=Vv(h,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Bs([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,s,t])}function rx(){let{matches:t}=M.useContext(Qi),e=t[t.length-1];return e?e.params:{}}function dI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(so),{matches:i}=M.useContext(Qi),{pathname:s}=sa(),o=JSON.stringify(jv(i,r.v7_relativeSplatPath));return M.useMemo(()=>Vv(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function ix(t,e){return sx(t,e)}function sx(t,e,n,r){Pl()||It(!1);let{navigator:i}=M.useContext(so),{matches:s}=M.useContext(Qi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let h=sa(),f;if(e){var g;let D=typeof e=="string"?kl(e):e;u==="/"||(g=D.pathname)!=null&&g.startsWith(u)||It(!1),f=D}else f=h;let v=f.pathname||"/",w=v;if(u!=="/"){let D=u.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(D.length).join("/")}let S=OR(t,{pathname:w}),k=cx(S&&S.map(D=>Object.assign({},D,{params:Object.assign({},a,D.params),pathname:Bs([u,i.encodeLocation?i.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?u:Bs([u,i.encodeLocation?i.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),s,n,r);return e&&k?M.createElement(_f.Provider,{value:{location:cc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Ds.Pop}},k):k}function ox(){let t=px(),e=JR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const ax=M.createElement(ox,null);class lx extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Qi.Provider,{value:this.props.routeContext},M.createElement(cI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ux(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(Fv);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Qi.Provider,{value:e},r)}function cx(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let f=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);f>=0||It(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:v,errors:w}=n,S=g.route.loader&&v[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((f,g,v)=>{let w,S=!1,k=null,D=null;n&&(w=a&&g.route.id?a[g.route.id]:void 0,k=g.route.errorElement||ax,u&&(h<0&&v===0?(S=!0,D=null):h===v&&(S=!0,D=g.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,v+1)),I=()=>{let A;return w?A=k:S?A=D:g.route.Component?A=M.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=f,M.createElement(ux,{match:g,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:A})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?M.createElement(lx,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:I(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):I()},null)}var fI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fI||{}),Nd=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Nd||{});function hx(t){let e=M.useContext(Fv);return e||It(!1),e}function dx(t){let e=M.useContext(ex);return e||It(!1),e}function fx(t){let e=M.useContext(Qi);return e||It(!1),e}function pI(t){let e=fx(),n=e.matches[e.matches.length-1];return n.route.id||It(!1),n.route.id}function px(){var t;let e=M.useContext(cI),n=dx(Nd.UseRouteError),r=pI(Nd.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function gx(){let{router:t}=hx(fI.UseNavigateStable),e=pI(Nd.UseNavigateStable),n=M.useRef(!1);return hI(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,cc({fromRouteId:e},s)))},[t,e])}const B0={};function mx(t,e){B0[e]||(B0[e]=!0,console.warn(e))}const H0=(t,e,n)=>mx(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function vx(t,e){t!=null&&t.v7_startTransition||H0("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&H0("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function gI(t){let{to:e,replace:n,state:r,relative:i}=t;Pl()||It(!1);let{future:s,static:o}=M.useContext(so),{matches:a}=M.useContext(Qi),{pathname:u}=sa(),h=oa(),f=Vv(e,jv(a,s.v7_relativeSplatPath),u,i==="path"),g=JSON.stringify(f);return M.useEffect(()=>h(JSON.parse(g),{replace:n,state:r,relative:i}),[h,g,i,n,r]),null}function _n(t){It(!1)}function yx(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ds.Pop,navigator:s,static:o=!1,future:a}=t;Pl()&&It(!1);let u=e.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:s,static:o,future:cc({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=kl(r));let{pathname:f="/",search:g="",hash:v="",state:w=null,key:S="default"}=r,k=M.useMemo(()=>{let D=Mv(f,u);return D==null?null:{location:{pathname:D,search:g,hash:v,state:w,key:S},navigationType:i}},[u,f,g,v,w,S,i]);return k==null?null:M.createElement(so.Provider,{value:h},M.createElement(_f.Provider,{children:n,value:k}))}function _x(t){let{children:e,location:n}=t;return ix(im(e),n)}new Promise(()=>{});function im(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,im(r.props.children,s));return}r.type!==_n&&It(!1),!r.props.index||!r.props.children||It(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=im(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sm(){return sm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sm.apply(this,arguments)}function wx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ex(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Tx(t,e){return t.button===0&&(!e||e==="_self")&&!Ex(t)}const Ix=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Sx="6";try{window.__reactRouterVersion=Sx}catch{}const Cx="startTransition",q0=mk[Cx];function bx(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=PR({window:i,v5Compat:!0}));let o=s.current,[a,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:h}=r||{},f=M.useCallback(g=>{h&&q0?q0(()=>u(g)):u(g)},[u,h]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.useEffect(()=>vx(r),[r]),M.createElement(yx,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Ax=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:h,preventScrollReset:f,viewTransition:g}=e,v=wx(e,Ix),{basename:w}=M.useContext(so),S,k=!1;if(typeof h=="string"&&kx.test(h)&&(S=h,Ax))try{let A=new URL(window.location.href),V=h.startsWith("//")?new URL(A.protocol+h):new URL(h),H=Mv(V.pathname,w);V.origin===A.origin&&H!=null?h=H+V.search+V.hash:k=!0}catch{}let D=tx(h,{relative:i}),b=Px(h,{replace:o,state:a,target:u,preventScrollReset:f,relative:i,viewTransition:g});function I(A){r&&r(A),A.defaultPrevented||b(A)}return M.createElement("a",sm({},v,{href:S||D,onClick:k||s?r:I,ref:n,target:u}))});var W0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(W0||(W0={}));var K0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(K0||(K0={}));function Px(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,u=oa(),h=sa(),f=dI(t,{relative:o});return M.useCallback(g=>{if(Tx(g,n)){g.preventDefault();let v=r!==void 0?r:Dd(h)===Dd(f);u(t,{replace:v,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[h,u,f,r,i,n,t,s,o,a])}var G0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Rx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,f=s>>2,g=(s&3)<<4|a>>4;let v=(a&15)<<2|h>>6,w=h&63;u||(w=64,o||(v=64)),r.push(n[f],n[g],n[v],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||h==null||g==null)throw new xx;const v=s<<2|a>>4;if(r.push(v),h!==64){const w=a<<4&240|h>>2;if(r.push(w),g!==64){const S=h<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ox=function(t){const e=mI(t);return vI.encodeByteArray(e,!0)},Ld=function(t){return Ox(t).replace(/\./g,"")},yI=function(t){try{return vI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=()=>Dx().__FIREBASE_DEFAULTS__,Lx=()=>{if(typeof process>"u"||typeof G0>"u")return;const t=G0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Mx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yI(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return Nx()||Lx()||Mx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_I=t=>{var e,n;return(n=(e=wf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jx=t=>{const e=_I(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wI=()=>{var t;return(t=wf())===null||t===void 0?void 0:t.config},EI=t=>{var e;return(e=wf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ld(JSON.stringify(n)),Ld(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ux(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function $x(){var t;const e=(t=wf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Bx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hx(){const t=pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qx(){return!$x()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function II(){try{return typeof indexedDB=="object"}catch{return!1}}function SI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Wx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="FirebaseError";class Kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Kx,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Gx(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kr(i,a,r)}}function Gx(t,e){return t.replace(Qx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Qx=/\{\$([^}]+)}/g;function Yx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Q0(s)&&Q0(o)){if(!pl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Q0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Eu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Xx(t,e){const n=new Jx(t,e);return n.subscribe.bind(n)}class Jx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Zx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Up),i.error===void 0&&(i.error=Up),i.complete===void 0&&(i.complete=Up);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Zx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=1e3,tO=2,nO=4*60*60*1e3,rO=.5;function Y0(t,e=eO,n=tO){const r=e*Math.pow(n,t),i=Math.round(rO*r*(Math.random()-.5)*2);return Math.min(nO,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oO(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sO(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sO(t){return t===No?void 0:t}function oO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const lO={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},uO=Ce.INFO,cO={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},hO=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=cO[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ef{constructor(e){this.name=e,this._logLevel=uO,this._logHandler=hO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const dO=(t,e)=>e.some(n=>t instanceof n);let X0,J0;function fO(){return X0||(X0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pO(){return J0||(J0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const CI=new WeakMap,om=new WeakMap,bI=new WeakMap,$p=new WeakMap,Uv=new WeakMap;function gO(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&CI.set(n,t)}).catch(()=>{}),Uv.set(e,t),e}function mO(t){if(om.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});om.set(t,e)}let am={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return om.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vO(t){am=t(am)}function yO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zp(this),e,...n);return bI.set(r,e.sort?e.sort():[e]),Hs(r)}:pO().includes(t)?function(...e){return t.apply(zp(this),e),Hs(CI.get(this))}:function(...e){return Hs(t.apply(zp(this),e))}}function _O(t){return typeof t=="function"?yO(t):(t instanceof IDBTransaction&&mO(t),dO(t,fO())?new Proxy(t,am):t)}function Hs(t){if(t instanceof IDBRequest)return gO(t);if($p.has(t))return $p.get(t);const e=_O(t);return e!==t&&($p.set(t,e),Uv.set(e,t)),e}const zp=t=>Uv.get(t);function AI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hs(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Hs(o.result),u.oldVersion,u.newVersion,Hs(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const wO=["get","getKey","getAll","getAllKeys","count"],EO=["put","add","delete","clear"],Bp=new Map;function Z0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=EO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||wO.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(a.shift())),(await Promise.all([h[n](...a),i&&u.done]))[0]};return Bp.set(e,s),s}vO(t=>({...t,get:(e,n,r)=>Z0(e,n)||t.get(e,n,r),has:(e,n)=>!!Z0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IO(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function IO(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lm="@firebase/app",ew="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Ef("@firebase/app"),SO="@firebase/app-compat",CO="@firebase/analytics-compat",bO="@firebase/analytics",AO="@firebase/app-check-compat",kO="@firebase/app-check",PO="@firebase/auth",RO="@firebase/auth-compat",xO="@firebase/database",OO="@firebase/data-connect",DO="@firebase/database-compat",NO="@firebase/functions",LO="@firebase/functions-compat",MO="@firebase/installations",jO="@firebase/installations-compat",VO="@firebase/messaging",FO="@firebase/messaging-compat",UO="@firebase/performance",$O="@firebase/performance-compat",zO="@firebase/remote-config",BO="@firebase/remote-config-compat",HO="@firebase/storage",qO="@firebase/storage-compat",WO="@firebase/firestore",KO="@firebase/vertexai",GO="@firebase/firestore-compat",QO="firebase",YO="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="[DEFAULT]",XO={[lm]:"fire-core",[SO]:"fire-core-compat",[bO]:"fire-analytics",[CO]:"fire-analytics-compat",[kO]:"fire-app-check",[AO]:"fire-app-check-compat",[PO]:"fire-auth",[RO]:"fire-auth-compat",[xO]:"fire-rtdb",[OO]:"fire-data-connect",[DO]:"fire-rtdb-compat",[NO]:"fire-fn",[LO]:"fire-fn-compat",[MO]:"fire-iid",[jO]:"fire-iid-compat",[VO]:"fire-fcm",[FO]:"fire-fcm-compat",[UO]:"fire-perf",[$O]:"fire-perf-compat",[zO]:"fire-rc",[BO]:"fire-rc-compat",[HO]:"fire-gcs",[qO]:"fire-gcs-compat",[WO]:"fire-fst",[GO]:"fire-fst-compat",[KO]:"fire-vertex","fire-js":"fire-js",[QO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,JO=new Map,cm=new Map;function tw(t,e){try{t.container.addComponent(e)}catch(n){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pi(t){const e=t.name;if(cm.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,t);for(const n of Md.values())tw(n,t);for(const n of JO.values())tw(n,t);return!0}function la(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new aa("app","Firebase",ZO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=YO;function kI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:um,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qs.create("bad-app-name",{appName:String(i)});if(n||(n=wI()),!n)throw qs.create("no-options");const s=Md.get(i);if(s){if(pl(n,s.options)&&pl(r,s.config))return s;throw qs.create("duplicate-app",{appName:i})}const o=new aO(i);for(const u of cm.values())o.addComponent(u);const a=new e2(n,r,o);return Md.set(i,a),a}function $v(t=um){const e=Md.get(t);if(!e&&t===um&&wI())return kI();if(!e)throw qs.create("no-app",{appName:t});return e}function Tr(t,e,n){var r;let i=(r=XO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(a.join(" "));return}pi(new Wr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="firebase-heartbeat-database",n2=1,hc="firebase-heartbeat-store";let Hp=null;function PI(){return Hp||(Hp=AI(t2,n2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw qs.create("idb-open",{originalErrorMessage:t.message})})),Hp}async function r2(t){try{const n=(await PI()).transaction(hc),r=await n.objectStore(hc).get(RI(t));return await n.done,r}catch(e){if(e instanceof Kr)Bi.warn(e.message);else{const n=qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(n.message)}}}async function nw(t,e){try{const r=(await PI()).transaction(hc,"readwrite");await r.objectStore(hc).put(e,RI(t)),await r.done}catch(n){if(n instanceof Kr)Bi.warn(n.message);else{const r=qs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bi.warn(r.message)}}}function RI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1024,s2=30*24*60*60*1e3;class o2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=s2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rw(),{heartbeatsToSend:r,unsentEntries:i}=a2(this._heartbeatsCache.heartbeats),s=Ld(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Bi.warn(n),""}}}function rw(){return new Date().toISOString().substring(0,10)}function a2(t,e=i2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class l2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return II()?SI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await r2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function iw(t){return Ld(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){pi(new Wr("platform-logger",e=>new TO(e),"PRIVATE")),pi(new Wr("heartbeat",e=>new o2(e),"PRIVATE")),Tr(lm,ew,t),Tr(lm,ew,"esm2017"),Tr("fire-js","")}u2("");function zv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const c2=xI,OI=new aa("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new Ef("@firebase/auth");function h2(t,...e){jd.logLevel<=Ce.WARN&&jd.warn(`Auth (${Rl}): ${t}`,...e)}function Qh(t,...e){jd.logLevel<=Ce.ERROR&&jd.error(`Auth (${Rl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,...e){throw Hv(t,...e)}function zr(t,...e){return Hv(t,...e)}function Bv(t,e,n){const r=Object.assign(Object.assign({},c2()),{[e]:n});return new aa("auth","Firebase",r).create(e,{appName:t.name})}function Vi(t){return Bv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function d2(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cr(t,"argument-error"),Bv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OI.create(t,...e)}function ce(t,e,...n){if(!t)throw Hv(e,...n)}function Ni(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qh(e),new Error(e)}function Hi(t,e){t||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function f2(){return sw()==="http:"||sw()==="https:"}function sw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f2()||TI()||"connection"in navigator)?navigator.onLine:!0}function g2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hi(n>e,"Short delay should be less than long delay!"),this.isMobile=Ux()||Bx()}get(){return p2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){Hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Ac(3e4,6e4);function oo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yi(t,e,n,r,i={}){return NI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=bc(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return zx()||(h.referrerPolicy="no-referrer"),DI.fetch()(LI(t,t.config.apiHost,n,a),h)})}async function NI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},m2),e);try{const i=new _2(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ah(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,h]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ah(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ah(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Bv(t,f,h);Cr(t,f)}}catch(i){if(i instanceof Kr)throw i;Cr(t,"network-request-failed",{message:String(i)})}}async function kc(t,e,n,r,i={}){const s=await Yi(t,e,n,r,i);return"mfaPendingCredential"in s&&Cr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function LI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?qv(t.config,i):`${t.config.apiScheme}://${i}`}function y2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zr(this.auth,"network-request-failed")),v2.get())})}}function Ah(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zr(t,e,r);return i.customData._tokenResponse=n,i}function ow(t){return t!==void 0&&t.enterprise!==void 0}class w2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return y2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E2(t,e){return Yi(t,"GET","/v2/recaptchaConfig",oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(t,e){return Yi(t,"POST","/v1/accounts:delete",e)}async function MI(t,e){return Yi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function I2(t,e=!1){const n=kt(t),r=await n.getIdToken(e),i=Wv(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ju(qp(i.auth_time)),issuedAtTime:ju(qp(i.iat)),expirationTime:ju(qp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qp(t){return Number(t)*1e3}function Wv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qh("JWT malformed, contained fewer than 3 sections"),null;try{const i=yI(n);return i?JSON.parse(i):(Qh("Failed to decode base64 JWT payload"),null)}catch(i){return Qh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function aw(t){const e=Wv(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Kr&&S2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function S2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await gl(t,MI(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jI(s.providerUserInfo):[],a=A2(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dm(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function b2(t){const e=kt(t);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jI(t){return t.map(e=>{var{providerId:n}=e,r=zv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(t,e){const n=await NI(t,{},async()=>{const r=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=LI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",DI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function P2(t,e){return Yi(t,"POST","/v2/accounts:revokeToken",oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=aw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await k2(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rl;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rl,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Li{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=zv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await gl(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return I2(this,e)}reload(){return b2(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fr(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await gl(this,T2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,h,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,D=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(h=n.createdAt)!==null&&h!==void 0?h:void 0,I=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:A,emailVerified:V,isAnonymous:H,providerData:W,stsTokenManager:R}=n;ce(A&&R,e,"internal-error");const E=rl.fromJSON(this.name,R);ce(typeof A=="string",e,"internal-error"),_s(g,e.name),_s(v,e.name),ce(typeof V=="boolean",e,"internal-error"),ce(typeof H=="boolean",e,"internal-error"),_s(w,e.name),_s(S,e.name),_s(k,e.name),_s(D,e.name),_s(b,e.name),_s(I,e.name);const P=new Li({uid:A,auth:e,email:v,emailVerified:V,displayName:g,isAnonymous:H,photoURL:S,phoneNumber:w,tenantId:k,stsTokenManager:E,createdAt:b,lastLoginAt:I});return W&&Array.isArray(W)&&(P.providerData=W.map(x=>Object.assign({},x))),D&&(P._redirectEventId=D),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new rl;i.updateFromServerResponse(n);const s=new Li({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Vd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new rl;a.updateFromIdToken(r);const u=new Li({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;function Mi(t){Hi(t instanceof Function,"Expected a class definition");let e=lw.get(t);return e?(Hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,lw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}VI.type="NONE";const uw=VI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Yh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new il(Mi(uw),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Mi(uw);const o=Yh(r,e.config.apiKey,e.name);let a=null;for(const h of n)try{const f=await h._get(o);if(f){const g=Li._fromJSON(e,f);h!==s&&(a=g),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new il(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new il(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HI(e))return"Blackberry";if(qI(e))return"Webos";if(UI(e))return"Safari";if((e.includes("chrome/")||$I(e))&&!e.includes("edge/"))return"Chrome";if(BI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FI(t=pn()){return/firefox\//i.test(t)}function UI(t=pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $I(t=pn()){return/crios\//i.test(t)}function zI(t=pn()){return/iemobile/i.test(t)}function BI(t=pn()){return/android/i.test(t)}function HI(t=pn()){return/blackberry/i.test(t)}function qI(t=pn()){return/webos/i.test(t)}function Kv(t=pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function R2(t=pn()){var e;return Kv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function x2(){return Hx()&&document.documentMode===10}function WI(t=pn()){return Kv(t)||BI(t)||qI(t)||HI(t)||/windows phone/i.test(t)||zI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(t,e=[]){let n;switch(t){case"Browser":n=cw(pn());break;case"Worker":n=`${cw(pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e={}){return Yi(t,"GET","/v2/passwordPolicy",oo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=6;class L2{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:N2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hw(this),this.idTokenSubscription=new hw(this),this.beforeStateQueue=new O2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await MI(this,{idToken:e}),r=await Li._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Fr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fr(this.app))return Promise.reject(Vi(this));const n=e?kt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fr(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fr(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D2(this),n=new L2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new aa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await P2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&h2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ao(t){return kt(t)}class hw{constructor(e){this.auth=e,this.observer=null,this.addObserver=Xx(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function j2(t){Tf=t}function GI(t){return Tf.loadJS(t)}function V2(){return Tf.recaptchaEnterpriseScript}function F2(){return Tf.gapiScript}function U2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class $2{constructor(){this.enterprise=new z2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class z2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const B2="recaptcha-enterprise",QI="NO_RECAPTCHA";class H2{constructor(e){this.type=B2,this.auth=ao(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{E2(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new w2(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;ow(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(QI)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $2().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&ow(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=V2();u.length!==0&&(u+=a),GI(u).then(()=>{i(a,s,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function dw(t,e,n,r=!1,i=!1){const s=new H2(t);let o;if(i)o=QI;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,h=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function fm(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await dw(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await dw(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(t,e){const n=la(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(pl(s,e??{}))return i;Cr(i,"already-initialized")}return n.initialize({options:e})}function W2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function K2(t,e,n){const r=ao(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=YI(e),{host:o,port:a}=G2(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Q2()}function YI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function G2(t){const e=YI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:fw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:fw(o)}}}function fw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Q2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,n){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}async function Y2(t,e){return Yi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t,e){return kc(t,"POST","/v1/accounts:signInWithPassword",oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t,e){return kc(t,"POST","/v1/accounts:signInWithEmailLink",oo(t,e))}async function Z2(t,e){return kc(t,"POST","/v1/accounts:signInWithEmailLink",oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Gv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new dc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new dc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,n,"signInWithPassword",X2);case"emailLink":return J2(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fm(e,r,"signUpPassword",Y2);case"emailLink":return Z2(e,{idToken:n,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e){return kc(t,"POST","/v1/accounts:signInWithIdp",oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="http://localhost";class Yo extends Gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=zv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Yo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sl(e,n)}buildRequest(){const e={requestUri:eD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nD(t){const e=wu(Eu(t)).link,n=e?wu(Eu(e)).deep_link_id:null,r=wu(Eu(t)).deep_link_id;return(r?wu(Eu(r)).link:null)||r||n||e||t}class Qv{constructor(e){var n,r,i,s,o,a;const u=wu(Eu(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,g=tD((i=u.mode)!==null&&i!==void 0?i:null);ce(h&&f&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=f,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=nD(e);try{return new Qv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.providerId=xl.PROVIDER_ID}static credential(e,n){return dc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Qv.parseLink(n);return ce(r,"argument-error"),dc._fromEmailAndCode(e,r.code,r.tenantId)}}xl.PROVIDER_ID="password";xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Pc{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return As.credential(e.oauthAccessToken)}catch{return null}}}As.FACEBOOK_SIGN_IN_METHOD="facebook.com";As.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yo._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return li.credential(n,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Pc{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Pc{constructor(){super("twitter.com")}static credential(e,n){return Yo._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){return kc(t,"POST","/v1/accounts:signUp",oo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Li._fromIdTokenResponse(e,r,i),o=pw(r);return new Xo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=pw(r);return new Xo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function pw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd extends Kr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Fd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Fd(e,n,r,i)}}function XI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fd._fromErrorAndOperation(t,s,e,r):s})}async function iD(t,e,n=!1){const r=await gl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e,n=!1){const{auth:r}=t;if(Fr(r.app))return Promise.reject(Vi(r));const i="reauthenticate";try{const s=await gl(t,XI(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=Wv(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Xo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Cr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(t,e,n=!1){if(Fr(t.app))return Promise.reject(Vi(t));const r="signIn",i=await XI(t,r,e),s=await Xo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function oD(t,e){return JI(ao(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t){const e=ao(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aD(t,e,n){if(Fr(t.app))return Promise.reject(Vi(t));const r=ao(t),o=await fm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ZI(t),u}),a=await Xo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function lD(t,e,n){return Fr(t.app)?Promise.reject(Vi(t)):oD(kt(t),xl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ZI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){return Yi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=kt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await gl(r,uD(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function cD(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function hD(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function tS(t,e,n,r){return kt(t).onAuthStateChanged(e,n,r)}function nS(t){return kt(t).signOut()}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=1e3,fD=10;class iS extends rS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);x2()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}iS.type="LOCAL";const pD=iS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends rS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sS.type="SESSION";const oS=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new If(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async h=>h(n.origin,s)),u=await gD(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}If.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const h=Xv("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(g){const v=g;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function vD(t){hi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function yD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _D(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wD(){return aS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebaseLocalStorageDb",ED=1,$d="firebaseLocalStorage",uS="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sf(t,e){return t.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function TD(){const t=indexedDB.deleteDatabase(lS);return new Rc(t).toPromise()}function pm(){const t=indexedDB.open(lS,ED);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($d,{keyPath:uS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($d)?e(r):(r.close(),await TD(),e(await pm()))})})}async function gw(t,e,n){const r=Sf(t,!0).put({[uS]:e,value:n});return new Rc(r).toPromise()}async function ID(t,e){const n=Sf(t,!1).get(e),r=await new Rc(n).toPromise();return r===void 0?null:r.value}function mw(t,e){const n=Sf(t,!0).delete(e);return new Rc(n).toPromise()}const SD=800,CD=3;class cS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=If._getInstance(wD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await yD(),!this.activeServiceWorker)return;this.sender=new mD(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_D()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pm();return await gw(e,Ud,"1"),await mw(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ID(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Sf(i,!1).getAll();return new Rc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cS.type="LOCAL";const bD=cS;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){return e?Mi(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv extends Gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AD(t){return JI(t.auth,new Jv(t),t.bypassAuthState)}function kD(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),sD(n,new Jv(t),t.bypassAuthState)}async function PD(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),iD(n,new Jv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AD;case"linkViaPopup":case"linkViaRedirect":return PD;case"reauthViaPopup":case"reauthViaRedirect":return kD;default:Cr(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new Ac(2e3,1e4);async function fS(t,e,n){if(Fr(t.app))return Promise.reject(zr(t,"operation-not-supported-in-this-environment"));const r=ao(t);d2(t,e,Yv);const i=hS(r,n);return new Vo(r,"signInViaPopup",e,i).executeNotNull()}class Vo extends dS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const e=Xv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RD.get())};e()}}Vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="pendingRedirect",Xh=new Map;class OD extends dS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xh.get(this.auth._key());if(!e){try{const r=await DD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xh.set(this.auth._key(),e)}return this.bypassAuthState||Xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DD(t,e){const n=MD(e),r=LD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ND(t,e){Xh.set(t._key(),e)}function LD(t){return Mi(t._redirectPersistence)}function MD(t){return Yh(xD,t.config.apiKey,t.name)}async function jD(t,e,n=!1){if(Fr(t.app))return Promise.reject(Vi(t));const r=ao(t),i=hS(r,e),o=await new OD(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=10*60*1e3;class FD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VD&&this.cachedEventUids.clear(),this.cachedEventUids.has(vw(e))}saveEventToCache(e){this.cachedEventUids.add(vw(e)),this.lastProcessedEventTime=Date.now()}}function vw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function pS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function UD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e={}){return Yi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BD=/^https?/;async function HD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $D(t);for(const n of e)try{if(qD(n))return}catch{}Cr(t,"unauthorized-domain")}function qD(t){const e=hm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BD.test(n))return!1;if(zD.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=new Ac(3e4,6e4);function yw(){const t=hi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function KD(t){return new Promise((e,n)=>{var r,i,s;function o(){yw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yw(),n(zr(t,"network-request-failed"))},timeout:WD.get()})}if(!((i=(r=hi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hi().gapi)===null||s===void 0)&&s.load)o();else{const a=U2("iframefcb");return hi()[a]=()=>{gapi.load?o():n(zr(t,"network-request-failed"))},GI(`${F2()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function GD(t){return Jh=Jh||KD(t),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=new Ac(5e3,15e3),YD="__/auth/iframe",XD="emulator/auth/iframe",JD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eN(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qv(e,XD):`https://${t.config.authDomain}/${YD}`,r={apiKey:e.apiKey,appName:t.name,v:Rl},i=ZD.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${bc(r).slice(1)}`}async function tN(t){const e=await GD(t),n=hi().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:eN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JD,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=zr(t,"network-request-failed"),a=hi().setTimeout(()=>{s(o)},QD.get());function u(){hi().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rN=500,iN=600,sN="_blank",oN="http://localhost";class _w{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aN(t,e,n,r=rN,i=iN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},nN),{width:r.toString(),height:i.toString(),top:s,left:o}),h=pn().toLowerCase();n&&(a=$I(h)?sN:n),FI(h)&&(e=e||oN,u.scrollbars="yes");const f=Object.entries(u).reduce((v,[w,S])=>`${v}${w}=${S},`,"");if(R2(h)&&a!=="_self")return lN(e||"",a),new _w(null);const g=window.open(e||"",a,f);ce(g,t,"popup-blocked");try{g.focus()}catch{}return new _w(g)}function lN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="__/auth/handler",cN="emulator/auth/handler",hN=encodeURIComponent("fac");async function ww(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rl,eventId:i};if(e instanceof Yv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yx(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof Pc){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const u=await t._getAppCheckToken(),h=u?`#${hN}=${encodeURIComponent(u)}`:"";return`${dN(t)}?${bc(a).slice(1)}${h}`}function dN({config:t}){return t.emulator?qv(t,cN):`https://${t.authDomain}/${uN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="webStorageSupport";class fN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oS,this._completeRedirectFn=jD,this._overrideRedirectResult=ND}async _openPopup(e,n,r,i){var s;Hi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ww(e,n,r,hm(),i);return aN(e,o,Xv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await ww(e,n,r,hm(),i);return vD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await tN(e),r=new FD(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wp,{type:Wp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Wp];o!==void 0&&n(!!o),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WI()||UI()||Kv()}}const pN=fN;var Ew="@firebase/auth",Tw="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vN(t){pi(new Wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KI(t)},h=new M2(r,i,s,u);return W2(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pi(new Wr("auth-internal",e=>{const n=ao(e.getProvider("auth").getImmediate());return(r=>new gN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(Ew,Tw,mN(t)),Tr(Ew,Tw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=5*60,_N=EI("authIdTokenMaxAge")||yN;let Iw=null;const wN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_N)return;const i=n==null?void 0:n.token;Iw!==i&&(Iw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function EN(t=$v()){const e=la(t,"auth");if(e.isInitialized())return e.getImmediate();const n=q2(t,{popupRedirectResolver:pN,persistence:[bD,pD,oS]}),r=EI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=wN(s.toString());hD(n,o,()=>o(n.currentUser)),cD(n,a=>o(a))}}const i=_I("auth");return i&&K2(n,`http://${i}`),n}function TN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}j2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",TN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vN("Browser");var IN="firebase",SN="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(IN,SN,"app");var Sw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bo,gS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,E){function P(){}P.prototype=E.prototype,R.D=E.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(x,N,L){for(var O=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)O[Je-2]=arguments[Je];return E.prototype[N].apply(x,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,E,P){P||(P=0);var x=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)x[N]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(N=0;16>N;++N)x[N]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=R.g[0],P=R.g[1],N=R.g[2];var L=R.g[3],O=E+(L^P&(N^L))+x[0]+3614090360&4294967295;E=P+(O<<7&4294967295|O>>>25),O=L+(N^E&(P^N))+x[1]+3905402710&4294967295,L=E+(O<<12&4294967295|O>>>20),O=N+(P^L&(E^P))+x[2]+606105819&4294967295,N=L+(O<<17&4294967295|O>>>15),O=P+(E^N&(L^E))+x[3]+3250441966&4294967295,P=N+(O<<22&4294967295|O>>>10),O=E+(L^P&(N^L))+x[4]+4118548399&4294967295,E=P+(O<<7&4294967295|O>>>25),O=L+(N^E&(P^N))+x[5]+1200080426&4294967295,L=E+(O<<12&4294967295|O>>>20),O=N+(P^L&(E^P))+x[6]+2821735955&4294967295,N=L+(O<<17&4294967295|O>>>15),O=P+(E^N&(L^E))+x[7]+4249261313&4294967295,P=N+(O<<22&4294967295|O>>>10),O=E+(L^P&(N^L))+x[8]+1770035416&4294967295,E=P+(O<<7&4294967295|O>>>25),O=L+(N^E&(P^N))+x[9]+2336552879&4294967295,L=E+(O<<12&4294967295|O>>>20),O=N+(P^L&(E^P))+x[10]+4294925233&4294967295,N=L+(O<<17&4294967295|O>>>15),O=P+(E^N&(L^E))+x[11]+2304563134&4294967295,P=N+(O<<22&4294967295|O>>>10),O=E+(L^P&(N^L))+x[12]+1804603682&4294967295,E=P+(O<<7&4294967295|O>>>25),O=L+(N^E&(P^N))+x[13]+4254626195&4294967295,L=E+(O<<12&4294967295|O>>>20),O=N+(P^L&(E^P))+x[14]+2792965006&4294967295,N=L+(O<<17&4294967295|O>>>15),O=P+(E^N&(L^E))+x[15]+1236535329&4294967295,P=N+(O<<22&4294967295|O>>>10),O=E+(N^L&(P^N))+x[1]+4129170786&4294967295,E=P+(O<<5&4294967295|O>>>27),O=L+(P^N&(E^P))+x[6]+3225465664&4294967295,L=E+(O<<9&4294967295|O>>>23),O=N+(E^P&(L^E))+x[11]+643717713&4294967295,N=L+(O<<14&4294967295|O>>>18),O=P+(L^E&(N^L))+x[0]+3921069994&4294967295,P=N+(O<<20&4294967295|O>>>12),O=E+(N^L&(P^N))+x[5]+3593408605&4294967295,E=P+(O<<5&4294967295|O>>>27),O=L+(P^N&(E^P))+x[10]+38016083&4294967295,L=E+(O<<9&4294967295|O>>>23),O=N+(E^P&(L^E))+x[15]+3634488961&4294967295,N=L+(O<<14&4294967295|O>>>18),O=P+(L^E&(N^L))+x[4]+3889429448&4294967295,P=N+(O<<20&4294967295|O>>>12),O=E+(N^L&(P^N))+x[9]+568446438&4294967295,E=P+(O<<5&4294967295|O>>>27),O=L+(P^N&(E^P))+x[14]+3275163606&4294967295,L=E+(O<<9&4294967295|O>>>23),O=N+(E^P&(L^E))+x[3]+4107603335&4294967295,N=L+(O<<14&4294967295|O>>>18),O=P+(L^E&(N^L))+x[8]+1163531501&4294967295,P=N+(O<<20&4294967295|O>>>12),O=E+(N^L&(P^N))+x[13]+2850285829&4294967295,E=P+(O<<5&4294967295|O>>>27),O=L+(P^N&(E^P))+x[2]+4243563512&4294967295,L=E+(O<<9&4294967295|O>>>23),O=N+(E^P&(L^E))+x[7]+1735328473&4294967295,N=L+(O<<14&4294967295|O>>>18),O=P+(L^E&(N^L))+x[12]+2368359562&4294967295,P=N+(O<<20&4294967295|O>>>12),O=E+(P^N^L)+x[5]+4294588738&4294967295,E=P+(O<<4&4294967295|O>>>28),O=L+(E^P^N)+x[8]+2272392833&4294967295,L=E+(O<<11&4294967295|O>>>21),O=N+(L^E^P)+x[11]+1839030562&4294967295,N=L+(O<<16&4294967295|O>>>16),O=P+(N^L^E)+x[14]+4259657740&4294967295,P=N+(O<<23&4294967295|O>>>9),O=E+(P^N^L)+x[1]+2763975236&4294967295,E=P+(O<<4&4294967295|O>>>28),O=L+(E^P^N)+x[4]+1272893353&4294967295,L=E+(O<<11&4294967295|O>>>21),O=N+(L^E^P)+x[7]+4139469664&4294967295,N=L+(O<<16&4294967295|O>>>16),O=P+(N^L^E)+x[10]+3200236656&4294967295,P=N+(O<<23&4294967295|O>>>9),O=E+(P^N^L)+x[13]+681279174&4294967295,E=P+(O<<4&4294967295|O>>>28),O=L+(E^P^N)+x[0]+3936430074&4294967295,L=E+(O<<11&4294967295|O>>>21),O=N+(L^E^P)+x[3]+3572445317&4294967295,N=L+(O<<16&4294967295|O>>>16),O=P+(N^L^E)+x[6]+76029189&4294967295,P=N+(O<<23&4294967295|O>>>9),O=E+(P^N^L)+x[9]+3654602809&4294967295,E=P+(O<<4&4294967295|O>>>28),O=L+(E^P^N)+x[12]+3873151461&4294967295,L=E+(O<<11&4294967295|O>>>21),O=N+(L^E^P)+x[15]+530742520&4294967295,N=L+(O<<16&4294967295|O>>>16),O=P+(N^L^E)+x[2]+3299628645&4294967295,P=N+(O<<23&4294967295|O>>>9),O=E+(N^(P|~L))+x[0]+4096336452&4294967295,E=P+(O<<6&4294967295|O>>>26),O=L+(P^(E|~N))+x[7]+1126891415&4294967295,L=E+(O<<10&4294967295|O>>>22),O=N+(E^(L|~P))+x[14]+2878612391&4294967295,N=L+(O<<15&4294967295|O>>>17),O=P+(L^(N|~E))+x[5]+4237533241&4294967295,P=N+(O<<21&4294967295|O>>>11),O=E+(N^(P|~L))+x[12]+1700485571&4294967295,E=P+(O<<6&4294967295|O>>>26),O=L+(P^(E|~N))+x[3]+2399980690&4294967295,L=E+(O<<10&4294967295|O>>>22),O=N+(E^(L|~P))+x[10]+4293915773&4294967295,N=L+(O<<15&4294967295|O>>>17),O=P+(L^(N|~E))+x[1]+2240044497&4294967295,P=N+(O<<21&4294967295|O>>>11),O=E+(N^(P|~L))+x[8]+1873313359&4294967295,E=P+(O<<6&4294967295|O>>>26),O=L+(P^(E|~N))+x[15]+4264355552&4294967295,L=E+(O<<10&4294967295|O>>>22),O=N+(E^(L|~P))+x[6]+2734768916&4294967295,N=L+(O<<15&4294967295|O>>>17),O=P+(L^(N|~E))+x[13]+1309151649&4294967295,P=N+(O<<21&4294967295|O>>>11),O=E+(N^(P|~L))+x[4]+4149444226&4294967295,E=P+(O<<6&4294967295|O>>>26),O=L+(P^(E|~N))+x[11]+3174756917&4294967295,L=E+(O<<10&4294967295|O>>>22),O=N+(E^(L|~P))+x[2]+718787259&4294967295,N=L+(O<<15&4294967295|O>>>17),O=P+(L^(N|~E))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+L&4294967295}r.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var P=E-this.blockSize,x=this.B,N=this.h,L=0;L<E;){if(N==0)for(;L<=P;)i(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<E;)if(x[N++]=R.charCodeAt(L++),N==this.blockSize){i(this,x),N=0;break}}else for(;L<E;)if(x[N++]=R[L++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=E},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var P=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=P&255,P/=256;for(this.u(R),R=Array(16),E=P=0;4>E;++E)for(var x=0;32>x;x+=8)R[P++]=this.g[E]>>>x&255;return R};function s(R,E){var P=a;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=E(R)}function o(R,E){this.h=E;for(var P=[],x=!0,N=R.length-1;0<=N;N--){var L=R[N]|0;x&&L==E||(P[N]=L,x=!1)}this.g=P}var a={};function u(R){return-128<=R&&128>R?s(R,function(E){return new o([E|0],0>E?-1:0)}):new o([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return g;if(0>R)return D(h(-R));for(var E=[],P=1,x=0;R>=P;x++)E[x]=R/P|0,P*=4294967296;return new o(E,0)}function f(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return D(f(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=h(Math.pow(E,8)),x=g,N=0;N<R.length;N+=8){var L=Math.min(8,R.length-N),O=parseInt(R.substring(N,N+L),E);8>L?(L=h(Math.pow(E,L)),x=x.j(L).add(h(O))):(x=x.j(P),x=x.add(h(O)))}return x}var g=u(0),v=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-D(this).m();for(var R=0,E=1,P=0;P<this.g.length;P++){var x=this.i(P);R+=(0<=x?x:4294967296+x)*E,E*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(S(this))return"0";if(k(this))return"-"+D(this).toString(R);for(var E=h(Math.pow(R,6)),P=this,x="";;){var N=V(P,E).g;P=b(P,N.j(E));var L=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=N,S(P))return L+x;for(;6>L.length;)L="0"+L;x=L+x}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function S(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function k(R){return R.h==-1}t.l=function(R){return R=b(this,R),k(R)?-1:S(R)?0:1};function D(R){for(var E=R.g.length,P=[],x=0;x<E;x++)P[x]=~R.g[x];return new o(P,~R.h).add(v)}t.abs=function(){return k(this)?D(this):this},t.add=function(R){for(var E=Math.max(this.g.length,R.g.length),P=[],x=0,N=0;N<=E;N++){var L=x+(this.i(N)&65535)+(R.i(N)&65535),O=(L>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);x=O>>>16,L&=65535,O&=65535,P[N]=O<<16|L}return new o(P,P[P.length-1]&-2147483648?-1:0)};function b(R,E){return R.add(D(E))}t.j=function(R){if(S(this)||S(R))return g;if(k(this))return k(R)?D(this).j(D(R)):D(D(this).j(R));if(k(R))return D(this.j(D(R)));if(0>this.l(w)&&0>R.l(w))return h(this.m()*R.m());for(var E=this.g.length+R.g.length,P=[],x=0;x<2*E;x++)P[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<R.g.length;N++){var L=this.i(x)>>>16,O=this.i(x)&65535,Je=R.i(N)>>>16,lt=R.i(N)&65535;P[2*x+2*N]+=O*lt,I(P,2*x+2*N),P[2*x+2*N+1]+=L*lt,I(P,2*x+2*N+1),P[2*x+2*N+1]+=O*Je,I(P,2*x+2*N+1),P[2*x+2*N+2]+=L*Je,I(P,2*x+2*N+2)}for(x=0;x<E;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=E;x<2*E;x++)P[x]=0;return new o(P,0)};function I(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function A(R,E){this.g=R,this.h=E}function V(R,E){if(S(E))throw Error("division by zero");if(S(R))return new A(g,g);if(k(R))return E=V(D(R),E),new A(D(E.g),D(E.h));if(k(E))return E=V(R,D(E)),new A(D(E.g),E.h);if(30<R.g.length){if(k(R)||k(E))throw Error("slowDivide_ only works with positive integers.");for(var P=v,x=E;0>=x.l(R);)P=H(P),x=H(x);var N=W(P,1),L=W(x,1);for(x=W(x,2),P=W(P,2);!S(x);){var O=L.add(x);0>=O.l(R)&&(N=N.add(P),L=O),x=W(x,1),P=W(P,1)}return E=b(R,N.j(E)),new A(N,E)}for(N=g;0<=R.l(E);){for(P=Math.max(1,Math.floor(R.m()/E.m())),x=Math.ceil(Math.log(P)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),L=h(P),O=L.j(E);k(O)||0<O.l(R);)P-=x,L=h(P),O=L.j(E);S(L)&&(L=v),N=N.add(L),R=b(R,O)}return new A(N,R)}t.A=function(R){return V(this,R).h},t.and=function(R){for(var E=Math.max(this.g.length,R.g.length),P=[],x=0;x<E;x++)P[x]=this.i(x)&R.i(x);return new o(P,this.h&R.h)},t.or=function(R){for(var E=Math.max(this.g.length,R.g.length),P=[],x=0;x<E;x++)P[x]=this.i(x)|R.i(x);return new o(P,this.h|R.h)},t.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),P=[],x=0;x<E;x++)P[x]=this.i(x)^R.i(x);return new o(P,this.h^R.h)};function H(R){for(var E=R.g.length+1,P=[],x=0;x<E;x++)P[x]=R.i(x)<<1|R.i(x-1)>>>31;return new o(P,R.h)}function W(R,E){var P=E>>5;E%=32;for(var x=R.g.length-P,N=[],L=0;L<x;L++)N[L]=0<E?R.i(L+P)>>>E|R.i(L+P+1)<<32-E:R.i(L+P);return new o(N,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Bo=o}).apply(typeof Sw<"u"?Sw:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mS,Tu,vS,Zh,gm,yS,_S,wS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(l,d){if(d)e:{var m=r;l=l.split(".");for(var C=0;C<l.length-1;C++){var U=l[C];if(!(U in m))break e;m=m[U]}l=l[l.length-1],C=m[l],d=d(C),d!=C&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var m=0,C=!1,U={next:function(){if(!C&&m<l.length){var z=m++;return{value:d(z,l[z]),done:!1}}return C=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(l){return l||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function h(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function f(l,d,m){return l.call.apply(l.bind,arguments)}function g(l,d,m){if(!l)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,C),l.apply(d,U)}}return function(){return l.apply(d,arguments)}}function v(l,d,m){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,v.apply(null,arguments)}function w(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var C=m.slice();return C.push.apply(C,arguments),l.apply(this,C)}}function S(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(C,U,z){for(var Y=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Y[Ue-2]=arguments[Ue];return d.prototype[U].apply(C,Y)}}function k(l){const d=l.length;if(0<d){const m=Array(d);for(let C=0;C<d;C++)m[C]=l[C];return m}return[]}function D(l,d){for(let m=1;m<arguments.length;m++){const C=arguments[m];if(u(C)){const U=l.length||0,z=C.length||0;l.length=U+z;for(let Y=0;Y<z;Y++)l[U+Y]=C[Y]}else l.push(C)}}class b{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function I(l){return/^[\s\xa0]*$/.test(l)}function A(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function V(l){return V[" "](l),l}V[" "]=function(){};var H=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function W(l,d,m){for(const C in l)d.call(m,l[C],C,l)}function R(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function E(l){const d={};for(const m in l)d[m]=l[m];return d}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(l,d){let m,C;for(let U=1;U<arguments.length;U++){C=arguments[U];for(m in C)l[m]=C[m];for(let z=0;z<P.length;z++)m=P[z],Object.prototype.hasOwnProperty.call(C,m)&&(l[m]=C[m])}}function N(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function L(l){a.setTimeout(()=>{throw l},0)}function O(){var l=oe;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Je{constructor(){this.h=this.g=null}add(d,m){const C=lt.get();C.set(d,m),this.h?this.h.next=C:this.g=C,this.h=C}}var lt=new b(()=>new vt,l=>l.reset());class vt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,J=!1,oe=new Je,$=()=>{const l=a.Promise.resolve(void 0);Qe=()=>{l.then(Ae)}};var Ae=()=>{for(var l;l=O();){try{l.h.call(l.g)}catch(m){L(m)}var d=lt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}J=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var rt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return l}();function Pt(l,d){if(Ve.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,C=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(H){e:{try{V(d.nodeName);var U=!0;break e}catch{}U=!1}U||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ye[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Pt.aa.h.call(this)}}S(Pt,Ve);var Ye={2:"touch",3:"pen",4:"mouse"};Pt.prototype.h=function(){Pt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),re=0;function Fn(l,d,m,C,U){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!C,this.ha=U,this.key=++re,this.da=this.fa=!1}function Un(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function yt(l){this.src=l,this.g={},this.h=0}yt.prototype.add=function(l,d,m,C,U){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var Y=Cn(l,d,C,U);return-1<Y?(d=l[Y],m||(d.fa=!1)):(d=new Fn(d,this.src,z,!!C,U),d.fa=m,l.push(d)),d};function Ft(l,d){var m=d.type;if(m in l.g){var C=l.g[m],U=Array.prototype.indexOf.call(C,d,void 0),z;(z=0<=U)&&Array.prototype.splice.call(C,U,1),z&&(Un(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Cn(l,d,m,C){for(var U=0;U<l.length;++U){var z=l[U];if(!z.da&&z.listener==d&&z.capture==!!m&&z.ha==C)return U}return-1}var Ji="closure_lm_"+(1e6*Math.random()|0),$n={};function tn(l,d,m,C,U){if(Array.isArray(d)){for(var z=0;z<d.length;z++)tn(l,d[z],m,C,U);return null}return m=St(m),l&&l[ue]?l.K(d,m,h(C)?!!C.capture:!!C,U):jl(l,d,m,!1,C,U)}function jl(l,d,m,C,U,z){if(!d)throw Error("Invalid event type");var Y=h(U)?!!U.capture:!!U,Ue=es(l);if(Ue||(l[Ji]=Ue=new yt(l)),m=Ue.add(d,m,C,Y,z),m.proxy)return m;if(C=ho(),m.proxy=C,C.src=l,C.listener=m,l.addEventListener)rt||(U=Y),U===void 0&&(U=!1),l.addEventListener(d.toString(),C,U);else if(l.attachEvent)l.attachEvent(fa(d.toString()),C);else if(l.addListener&&l.removeListener)l.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ho(){function l(m){return d.call(l.src,l.listener,m)}const d=fo;return l}function da(l,d,m,C,U){if(Array.isArray(d))for(var z=0;z<d.length;z++)da(l,d[z],m,C,U);else C=h(C)?!!C.capture:!!C,m=St(m),l&&l[ue]?(l=l.i,d=String(d).toString(),d in l.g&&(z=l.g[d],m=Cn(z,m,C,U),-1<m&&(Un(z[m]),Array.prototype.splice.call(z,m,1),z.length==0&&(delete l.g[d],l.h--)))):l&&(l=es(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Cn(d,m,C,U)),(m=-1<l?d[l]:null)&&Zi(m))}function Zi(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[ue])Ft(d.i,l);else{var m=l.type,C=l.proxy;d.removeEventListener?d.removeEventListener(m,C,l.capture):d.detachEvent?d.detachEvent(fa(m),C):d.addListener&&d.removeListener&&d.removeListener(C),(m=es(d))?(Ft(m,l),m.h==0&&(m.src=null,d[Ji]=null)):Un(l)}}}function fa(l){return l in $n?$n[l]:$n[l]="on"+l}function fo(l,d){if(l.da)l=!0;else{d=new Pt(d,this);var m=l.listener,C=l.ha||l.src;l.fa&&Zi(l),l=m.call(C,d)}return l}function es(l){return l=l[Ji],l instanceof yt?l:null}var nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(l){return typeof l=="function"?l:(l[nr]||(l[nr]=function(d){return l.handleEvent(d)}),l[nr])}function ut(){Re.call(this),this.i=new yt(this),this.M=this,this.F=null}S(ut,Re),ut.prototype[ue]=!0,ut.prototype.removeEventListener=function(l,d,m,C){da(this,l,d,m,C)};function Ze(l,d){var m,C=l.F;if(C)for(m=[];C;C=C.F)m.push(C);if(l=l.M,C=d.type||d,typeof d=="string")d=new Ve(d,l);else if(d instanceof Ve)d.target=d.target||l;else{var U=d;d=new Ve(C,l),x(d,U)}if(U=!0,m)for(var z=m.length-1;0<=z;z--){var Y=d.g=m[z];U=zn(Y,C,!0,d)&&U}if(Y=d.g=l,U=zn(Y,C,!0,d)&&U,U=zn(Y,C,!1,d)&&U,m)for(z=0;z<m.length;z++)Y=d.g=m[z],U=zn(Y,C,!1,d)&&U}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],C=0;C<m.length;C++)Un(m[C]);delete l.g[d],l.h--}}this.F=null},ut.prototype.K=function(l,d,m,C){return this.i.add(String(l),d,!1,m,C)},ut.prototype.L=function(l,d,m,C){return this.i.add(String(l),d,!0,m,C)};function zn(l,d,m,C){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var U=!0,z=0;z<d.length;++z){var Y=d[z];if(Y&&!Y.da&&Y.capture==m){var Ue=Y.listener,xt=Y.ha||Y.src;Y.fa&&Ft(l.i,Y),U=Ue.call(xt,C)!==!1&&U}}return U&&!C.defaultPrevented}function br(l,d,m){if(typeof l=="function")m&&(l=v(l,m));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function vi(l){l.g=br(()=>{l.g=null,l.i&&(l.i=!1,vi(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ts extends Re{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:vi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(l){Re.call(this),this.h=l,this.g={}}S(Bn,Re);var pa=[];function yi(l){W(l.g,function(d,m){this.g.hasOwnProperty(m)&&Zi(d)},l),l.g={}}Bn.prototype.N=function(){Bn.aa.N.call(this),yi(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gr=a.JSON.stringify,Vl=a.JSON.parse,Fl=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function po(){}po.prototype.h=null;function go(l){return l.h||(l.h=l.i())}function Ar(){}var Qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ns(){Ve.call(this,"d")}S(ns,Ve);function mo(){Ve.call(this,"c")}S(mo,Ve);var kr={},rs=null;function is(){return rs=rs||new ut}kr.La="serverreachability";function bn(l){Ve.call(this,kr.La,l)}S(bn,Ve);function gn(l){const d=is();Ze(d,new bn(d))}kr.STAT_EVENT="statevent";function ga(l,d){Ve.call(this,kr.STAT_EVENT,l),this.stat=d}S(ga,Ve);function Rt(l){const d=is();Ze(d,new ga(d,l))}kr.Ma="timingevent";function ma(l,d){Ve.call(this,kr.Ma,l),this.size=d}S(ma,Ve);function _i(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function Ne(){this.g=!0}Ne.prototype.xa=function(){this.g=!1};function He(l,d,m,C,U,z){l.info(function(){if(l.g)if(z)for(var Y="",Ue=z.split("&"),xt=0;xt<Ue.length;xt++){var xe=Ue[xt].split("=");if(1<xe.length){var qe=xe[0];xe=xe[1];var Ot=qe.split("_");Y=2<=Ot.length&&Ot[1]=="type"?Y+(qe+"="+xe+"&"):Y+(qe+"=redacted&")}}else Y=null;else Y=z;return"XMLHTTP REQ ("+C+") [attempt "+U+"]: "+d+`
`+m+`
`+Y})}function _t(l,d,m,C,U,z,Y){l.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+U+"]: "+d+`
`+m+`
`+z+" "+Y})}function Fe(l,d,m,C){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Wt(l,m)+(C?" "+C:"")})}function rr(l,d){l.info(function(){return"TIMEOUT: "+d})}Ne.prototype.info=function(){};function Wt(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var C=m[l];if(!(2>C.length)){var U=C[1];if(Array.isArray(U)&&!(1>U.length)){var z=U[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Y=1;Y<U.length;Y++)U[Y]=""}}}}return Gr(m)}catch{return d}}var ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yr;function Ct(){}S(Ct,po),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},Yr=new Ct;function pt(l,d,m,C){this.j=l,this.i=d,this.l=m,this.R=C||1,this.U=new Bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nn}function nn(){this.i=null,this.g="",this.h=!1}var Ut={},os={};function Xr(l,d,m){l.L=1,l.v=ls(Hn(d)),l.m=m,l.P=!0,Jr(l,null)}function Jr(l,d){l.F=Date.now(),as(l),l.A=Hn(l.v);var m=l.A,C=l.R;Array.isArray(C)||(C=[String(C)]),Kl(m.i,"t",C),l.C=0,m=l.j.J,l.h=new nn,l.g=Jc(l.j,m?d:null,!l.m),0<l.O&&(l.M=new ts(v(l.Y,l,l.g),l.O)),d=l.U,m=l.g,C=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(pa[0]=U.toString()),U=pa);for(var z=0;z<U.length;z++){var Y=tn(m,U[z],C||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),gn(),He(l.i,l.u,l.A,l.l,l.R,l.m)}pt.prototype.ca=function(l){l=l.target;const d=this.M;d&&ar(l)==3?d.j():this.Y(l)},pt.prototype.Y=function(l){try{if(l==this.g)e:{const Ot=ar(this.g);var d=this.g.Ba();const Ci=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Xl(this.g)))){this.J||Ot!=4||d==7||(d==8||0>=Ci?gn(3):gn(2)),va(this);var m=this.g.Z();this.X=m;t:if(wi(this)){var C=Xl(this.g);l="";var U=C.length,z=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),Ti(this);var Y="";break t}this.h.i=new a.TextDecoder}for(d=0;d<U;d++)this.h.h=!0,l+=this.h.i.decode(C[d],{stream:!(z&&d==U-1)});C.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,_t(this.i,this.u,this.A,this.l,this.R,Ot,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,xt=this.g;if((Ue=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Ue)){var xe=Ue;break t}}xe=null}if(m=xe)Fe(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ya(this,m);else{this.o=!1,this.s=3,Rt(12),Pr(this),Ti(this);break e}}if(this.P){m=!0;let Rn;for(;!this.J&&this.C<Y.length;)if(Rn=Vc(this,Y),Rn==os){Ot==4&&(this.s=4,Rt(14),m=!1),Fe(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Ut){this.s=4,Rt(15),Fe(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else Fe(this.i,this.l,Rn,null),ya(this,Rn);if(wi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||Y.length!=0||this.h.h||(this.s=1,Rt(16),m=!1),this.o=this.o&&m,!m)Fe(this.i,this.l,Y,"[Invalid Chunked Response]"),Pr(this),Ti(this);else if(0<Y.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),ka(qe),qe.M=!0,Rt(11))}}else Fe(this.i,this.l,Y,null),ya(this,Y);Ot==4&&Pr(this),this.o&&!this.J&&(Ot==4?Pa(this.j,this):(this.o=!1,as(this)))}else Hc(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Pr(this),Ti(this)}}}catch{}finally{}};function wi(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Vc(l,d){var m=l.C,C=d.indexOf(`
`,m);return C==-1?os:(m=Number(d.substring(m,C)),isNaN(m)?Ut:(C+=1,C+m>d.length?os:(d=d.slice(C,C+m),l.C=C+m,d)))}pt.prototype.cancel=function(){this.J=!0,Pr(this)};function as(l){l.S=Date.now()+l.I,Ei(l,l.I)}function Ei(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_i(v(l.ba,l),d)}function va(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(rr(this.i,this.A),this.L!=2&&(gn(),Rt(17)),Pr(this),this.s=2,Ti(this)):Ei(this,this.S-l)};function Ti(l){l.j.G==0||l.J||Pa(l.j,l)}function Pr(l){va(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,yi(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function ya(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||_a(m.h,l))){if(!l.K&&_a(m.h,l)&&m.G==3){try{var C=m.Da.g.parse(d)}catch{C=null}if(Array.isArray(C)&&C.length==3){var U=C;if(U[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)lr(m),Io(m);else break e;So(m),Rt(18)}}else m.za=U[1],0<m.za-m.T&&37500>U[2]&&m.F&&m.v==0&&!m.C&&(m.C=_i(v(m.Za,m),6e3));if(1>=zl(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ni(m,11)}else if((l.K||m.g==l)&&lr(m),!I(d))for(U=m.Da.g.parse(d),d=0;d<U.length;d++){let xe=U[d];if(m.T=xe[0],xe=xe[1],m.G==2)if(xe[0]=="c"){m.K=xe[1],m.ia=xe[2];const qe=xe[3];qe!=null&&(m.la=qe,m.j.info("VER="+m.la));const Ot=xe[4];Ot!=null&&(m.Aa=Ot,m.j.info("SVER="+m.Aa));const Ci=xe[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(C=1.5*Ci,m.L=C,m.j.info("backChannelRequestTimeoutMs_="+C)),C=m;const Rn=l.g;if(Rn){const Ra=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var z=C.h;z.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(wa(z,z.h),z.h=null))}if(C.D){const tu=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;tu&&(C.ya=tu,Le(C.I,C.D,tu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),C=m;var Y=l;if(C.qa=Xc(C,C.J?C.ia:null,C.W),Y.K){Bl(C.h,Y);var Ue=Y,xt=C.L;xt&&(Ue.I=xt),Ue.B&&(va(Ue),as(Ue)),C.g=Y}else Gc(C);0<m.i.length&&Aa(m)}else xe[0]!="stop"&&xe[0]!="close"||ni(m,7);else m.G==3&&(xe[0]=="stop"||xe[0]=="close"?xe[0]=="stop"?ni(m,7):To(m):xe[0]!="noop"&&m.l&&m.l.ta(xe),m.v=0)}}gn(4)}catch{}}var Fc=class{constructor(l,d){this.g=l,this.map=d}};function Ul(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $l(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function zl(l){return l.h?1:l.g?l.g.size:0}function _a(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function wa(l,d){l.g?l.g.add(d):l.h=d}function Bl(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Ul.prototype.cancel=function(){if(this.i=Hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Hl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return k(l.i)}function Uc(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],m=l.length,C=0;C<m;C++)d.push(l[C]);return d}d=[],m=0;for(C in l)d[m++]=l[C];return d}function ir(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const C in l)d[m++]=C;return d}}}function rn(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=ir(l),C=Uc(l),U=C.length,z=0;z<U;z++)d.call(void 0,C[z],m&&m[z],l)}var Zr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function An(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var C=l[m].indexOf("="),U=null;if(0<=C){var z=l[m].substring(0,C);U=l[m].substring(C+1)}else z=l[m];d(z,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Rr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Rr){this.h=l.h,mn(this,l.j),this.o=l.o,this.g=l.g,sr(this,l.s),this.l=l.l;var d=l.i,m=new cs;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),vo(this,m),this.m=l.m}else l&&(d=String(l).match(Zr))?(this.h=!1,mn(this,d[1]||"",!0),this.o=us(d[2]||""),this.g=us(d[3]||"",!0),sr(this,d[4]),this.l=us(d[5]||"",!0),vo(this,d[6]||"",!0),this.m=us(d[7]||"")):(this.h=!1,this.i=new cs(null,this.h))}Rr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(or(d,Wl,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(or(d,Wl,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(or(m,m.charAt(0)=="/"?Jf:xr,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",or(m,Ea)),l.join("")};function Hn(l){return new Rr(l)}function mn(l,d,m){l.j=m?us(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function sr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function vo(l,d,m){d instanceof cs?(l.i=d,$c(l.i,l.h)):(m||(d=or(d,ei)),l.i=new cs(d,l.h))}function Le(l,d,m){l.i.set(d,m)}function ls(l){return Le(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function us(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function or(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,ql),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ql(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wl=/[#\/\?@]/g,xr=/[#\?:]/g,Jf=/[#\?]/g,ei=/[#\?@]/g,Ea=/#/g;function cs(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function kn(l){l.g||(l.g=new Map,l.h=0,l.i&&An(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=cs.prototype,t.add=function(l,d){kn(this),this.i=null,l=Ii(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function Ta(l,d){kn(l),d=Ii(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function hs(l,d){return kn(l),d=Ii(l,d),l.g.has(d)}t.forEach=function(l,d){kn(this),this.g.forEach(function(m,C){m.forEach(function(U){l.call(d,U,C,this)},this)},this)},t.na=function(){kn(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let C=0;C<d.length;C++){const U=l[C];for(let z=0;z<U.length;z++)m.push(d[C])}return m},t.V=function(l){kn(this);let d=[];if(typeof l=="string")hs(this,l)&&(d=d.concat(this.g.get(Ii(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},t.set=function(l,d){return kn(this),this.i=null,l=Ii(this,l),hs(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Kl(l,d,m){Ta(l,d),0<m.length&&(l.i=null,l.g.set(Ii(l,d),k(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var C=d[m];const z=encodeURIComponent(String(C)),Y=this.V(C);for(C=0;C<Y.length;C++){var U=z;Y[C]!==""&&(U+="="+encodeURIComponent(String(Y[C]))),l.push(U)}}return this.i=l.join("&")};function Ii(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function $c(l,d){d&&!l.j&&(kn(l),l.i=null,l.g.forEach(function(m,C){var U=C.toLowerCase();C!=U&&(Ta(this,C),Kl(this,U,m))},l)),l.j=d}function ds(l,d){const m=new Ne;if(a.Image){const C=new Image;C.onload=w(Or,m,"TestLoadImage: loaded",!0,d,C),C.onerror=w(Or,m,"TestLoadImage: error",!1,d,C),C.onabort=w(Or,m,"TestLoadImage: abort",!1,d,C),C.ontimeout=w(Or,m,"TestLoadImage: timeout",!1,d,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=l}else d(!1)}function Zf(l,d){const m=new Ne,C=new AbortController,U=setTimeout(()=>{C.abort(),Or(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:C.signal}).then(z=>{clearTimeout(U),z.ok?Or(m,"TestPingServer: ok",!0,d):Or(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(U),Or(m,"TestPingServer: error",!1,d)})}function Or(l,d,m,C,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),C(m)}catch{}}function Gl(){this.g=new Fl}function Ia(l,d,m){const C=m||"";try{rn(l,function(U,z){let Y=U;h(U)&&(Y=Gr(U)),d.push(C+z+"="+encodeURIComponent(Y))})}catch(U){throw d.push(C+"type="+encodeURIComponent("_badmap")),U}}function fs(l){this.l=l.Ub||null,this.j=l.eb||!1}S(fs,po),fs.prototype.g=function(){return new Sa(this.l,this.j)},fs.prototype.i=function(l){return function(){return l}}({});function Sa(l,d){ut.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Sa,ut),t=Sa.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,ps(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ps(this)),this.g&&(this.readyState=3,ps(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yo(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yo(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?_o(this):ps(this),this.readyState==3&&yo(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,_o(this))},t.Qa=function(l){this.g&&(this.response=l,_o(this))},t.ga=function(){this.g&&_o(this)};function _o(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ps(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function ps(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ca(l){let d="";return W(l,function(m,C){d+=C,d+=":",d+=m,d+=`\r
`}),d}function wo(l,d,m){e:{for(C in m){var C=!1;break e}C=!0}C||(m=Ca(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):Le(l,d,m))}function et(l){ut.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(et,ut);var zc=/^https?$/i,Eo=["POST","PUT"];t=et.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,m,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yr.g(),this.v=this.o?go(this.o):go(Yr),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(z){ba(this,z);return}if(l=m||"",m=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var U in C)m.set(U,C[U]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const z of C.keys())m.set(z,C.get(z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(m.keys()).find(z=>z.toLowerCase()=="content-type"),U=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Eo,d,void 0))||C||U||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Y]of m)this.g.setRequestHeader(z,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bc(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){ba(this,z)}};function ba(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Ql(l),Dr(l)}function Ql(l){l.A||(l.A=!0,Ze(l,"complete"),Ze(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ze(this,"complete"),Ze(this,"abort"),Dr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yl(this):this.bb())},t.bb=function(){Yl(this)};function Yl(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ar(l)!=4||l.Z()!=2)){if(l.u&&ar(l)==4)br(l.Ea,0,l);else if(Ze(l,"readystatechange"),ar(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var C;if(C=Y===0){var U=String(l.D).match(Zr)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),C=!zc.test(U?U.toLowerCase():"")}m=C}if(m)Ze(l,"complete"),Ze(l,"success");else{l.m=6;try{var z=2<ar(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Ql(l)}}finally{Dr(l)}}}}function Dr(l,d){if(l.g){Bc(l);const m=l.g,C=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||Ze(l,"ready");try{m.onreadystatechange=C}catch{}}}function Bc(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function ar(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Vl(d)}};function Xl(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Hc(l){const d={};l=(l.g&&2<=ar(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<l.length;C++){if(I(l[C]))continue;var m=N(l[C]);const U=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const z=d[U]||[];d[U]=z,z.push(m)}R(d,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function Jl(l){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,l),this.cb=gs("retryDelaySeedMs",1e4,l),this.Wa=gs("forwardChannelMaxRetries",2,l),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ul(l&&l.concurrentRequestLimit),this.Da=new Gl,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jl.prototype,t.la=8,t.G=1,t.connect=function(l,d,m,C){Rt(0),this.W=l,this.H=d||{},m&&C!==void 0&&(this.H.OSID=m,this.H.OAID=C),this.F=this.X,this.I=Xc(this,null,this.W),Aa(this)};function To(l){if(qc(l),l.G==3){var d=l.U++,m=Hn(l.I);if(Le(m,"SID",l.K),Le(m,"RID",d),Le(m,"TYPE","terminate"),ti(l,m),d=new pt(l,l.j,d),d.L=2,d.v=ls(Hn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=Jc(d.j,null),d.g.ea(d.v)),d.F=Date.now(),as(d)}Yc(l)}function Io(l){l.g&&(ka(l),l.g.cancel(),l.g=null)}function qc(l){Io(l),l.u&&(a.clearTimeout(l.u),l.u=null),lr(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Aa(l){if(!$l(l.h)&&!l.s){l.s=!0;var d=l.Ga;Qe||$(),J||(Qe(),J=!0),oe.add(d,l),l.B=0}}function Wc(l,d){return zl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_i(v(l.Ga,l,d),Qc(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new pt(this,this.j,l);let z=this.o;if(this.S&&(z?(z=E(z),x(z,this.S)):z=this.S),this.m!==null||this.O||(U.H=z,z=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var C=this.i[m];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(d+=C,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Kc(this,U,d),m=Hn(this.I),Le(m,"RID",l),Le(m,"CVER",22),this.D&&Le(m,"X-HTTP-Session-Id",this.D),ti(this,m),z&&(this.O?d="headers="+encodeURIComponent(String(Ca(z)))+"&"+d:this.m&&wo(m,this.m,z)),wa(this.h,U),this.Ua&&Le(m,"TYPE","init"),this.P?(Le(m,"$req",d),Le(m,"SID","null"),U.T=!0,Xr(U,m,null)):Xr(U,m,d),this.G=2}}else this.G==3&&(l?Zl(this,l):this.i.length==0||$l(this.h)||Zl(this))};function Zl(l,d){var m;d?m=d.l:m=l.U++;const C=Hn(l.I);Le(C,"SID",l.K),Le(C,"RID",m),Le(C,"AID",l.T),ti(l,C),l.m&&l.o&&wo(C,l.m,l.o),m=new pt(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Kc(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),wa(l.h,m),Xr(m,C,d)}function ti(l,d){l.H&&W(l.H,function(m,C){Le(d,C,m)}),l.l&&rn({},function(m,C){Le(d,C,m)})}function Kc(l,d,m){m=Math.min(l.i.length,m);var C=l.l?v(l.l.Na,l.l,l):null;e:{var U=l.i;let z=-1;for(;;){const Y=["count="+m];z==-1?0<m?(z=U[0].g,Y.push("ofs="+z)):z=0:Y.push("ofs="+z);let Ue=!0;for(let xt=0;xt<m;xt++){let xe=U[xt].g;const qe=U[xt].map;if(xe-=z,0>xe)z=Math.max(0,U[xt].g-100),Ue=!1;else try{Ia(qe,Y,"req"+xe+"_")}catch{C&&C(qe)}}if(Ue){C=Y.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,C}function Gc(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Qe||$(),J||(Qe(),J=!0),oe.add(d,l),l.v=0}}function So(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_i(v(l.Fa,l),Qc(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_i(v(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),Io(this),eu(this))};function ka(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function eu(l){l.g=new pt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Hn(l.qa);Le(d,"RID","rpc"),Le(d,"SID",l.K),Le(d,"AID",l.T),Le(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&Le(d,"TO",l.ja),Le(d,"TYPE","xmlhttp"),ti(l,d),l.m&&l.o&&wo(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=ls(Hn(d)),m.m=null,m.P=!0,Jr(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Io(this),So(this),Rt(19))};function lr(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Pa(l,d){var m=null;if(l.g==d){lr(l),ka(l),l.g=null;var C=2}else if(_a(l.h,d))m=d.D,Bl(l.h,d),C=1;else return;if(l.G!=0){if(d.o)if(C==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var U=l.B;C=is(),Ze(C,new ma(C,m)),Aa(l)}else Gc(l);else if(U=d.s,U==3||U==0&&0<d.X||!(C==1&&Wc(l,d)||C==2&&So(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),U){case 1:ni(l,5);break;case 4:ni(l,10);break;case 3:ni(l,6);break;default:ni(l,2)}}}function Qc(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function ni(l,d){if(l.j.info("Error code "+d),d==2){var m=v(l.fb,l),C=l.Xa;const U=!C;C=new Rr(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mn(C,"https"),ls(C),U?ds(C.toString(),m):Zf(C.toString(),m)}else Rt(2);l.G=0,l.l&&l.l.sa(d),Yc(l),qc(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Yc(l){if(l.G=0,l.ka=[],l.l){const d=Hl(l.h);(d.length!=0||l.i.length!=0)&&(D(l.ka,d),D(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Xc(l,d,m){var C=m instanceof Rr?Hn(m):new Rr(m);if(C.g!="")d&&(C.g=d+"."+C.g),sr(C,C.s);else{var U=a.location;C=U.protocol,d=d?d+"."+U.hostname:U.hostname,U=+U.port;var z=new Rr(null);C&&mn(z,C),d&&(z.g=d),U&&sr(z,U),m&&(z.l=m),C=z}return m=l.D,d=l.ya,m&&d&&Le(C,m,d),Le(C,"VER",l.la),ti(l,C),C}function Jc(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new et(new fs({eb:m})):new et(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zc(){}t=Zc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Co(){}Co.prototype.g=function(l,d){return new sn(l,d)};function sn(l,d){ut.call(this),this.g=new Jl(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!I(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!I(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Pn(this)}S(sn,ut),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){To(this.g)},sn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Gr(l),l=m);d.i.push(new Fc(d.Ya++,l)),d.G==3&&Aa(d)},sn.prototype.N=function(){this.g.l=null,delete this.j,To(this.g),delete this.g,sn.aa.N.call(this)};function eh(l){ns.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}S(eh,ns);function Si(){mo.call(this),this.status=1}S(Si,mo);function Pn(l){this.g=l}S(Pn,Zc),Pn.prototype.ua=function(){Ze(this.g,"a")},Pn.prototype.ta=function(l){Ze(this.g,new eh(l))},Pn.prototype.sa=function(l){Ze(this.g,new Si)},Pn.prototype.ra=function(){Ze(this.g,"b")},Co.prototype.createWebChannel=Co.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,wS=function(){return new Co},_S=function(){return is()},yS=kr,gm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,Zh=ss,jc.COMPLETE="complete",vS=jc,Ar.EventType=Qr,Qr.OPEN="a",Qr.CLOSE="b",Qr.ERROR="c",Qr.MESSAGE="d",ut.prototype.listen=ut.prototype.K,Tu=Ar,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,mS=et}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});const Cw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Ef("@firebase/firestore");function La(){return Jo.logLevel}function ee(t,...e){if(Jo.logLevel<=Ce.DEBUG){const n=e.map(Zv);Jo.debug(`Firestore (${Ol}): ${t}`,...n)}}function qi(t,...e){if(Jo.logLevel<=Ce.ERROR){const n=e.map(Zv);Jo.error(`Firestore (${Ol}): ${t}`,...n)}}function ml(t,...e){if(Jo.logLevel<=Ce.WARN){const n=e.map(Zv);Jo.warn(`Firestore (${Ol}): ${t}`,...n)}}function Zv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(t="Unexpected state"){const e=`FIRESTORE (${Ol}) INTERNAL ASSERTION FAILED: `+t;throw qi(e),new Error(e)}function je(t,e){t||he()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(cn.UNAUTHENTICATED))}shutdown(){}}class bN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AN{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ws,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ws)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new ES(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new cn(e)}}class kN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class PN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new kN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){je(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string"),this.R=n.token,new RN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=ON(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{static fromTimestamp(e){return new pe(e)}static min(){return new pe(new jt(0,0))}static max(){return new pe(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r){n===void 0?n=0:n>e.length&&he(),r===void 0?r=e.length-n:r>e.length-n&&he(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class at extends fc{construct(e,n,r){return new at(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new at(n)}static emptyPath(){return new at([])}}const DN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends fc{construct(e,n,r){return new Xt(e,n,r)}static isValidIdentifier(e){return DN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new se(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new se(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new se(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(at.fromString(e))}static fromName(e){return new ae(at.fromString(e).popFirst(5))}static empty(){return new ae(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new at(e.slice()))}}function NN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=pe.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Xs(i,ae.empty(),e)}function LN(t){return new Xs(t.readTime,t.key,-1)}class Xs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xs(pe.min(),ae.empty(),-1)}static max(){return new Xs(pe.max(),ae.empty(),-1)}}function MN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class VN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==jN)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(f=>{o[h]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function FN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Cf.oe=-1;function bf(t){return t==null}function zd(t){return t===0&&1/t==-1/0}function UN(t){return typeof t=="number"&&Number.isInteger(t)&&!zd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bw(e)),e=zN(t.get(n),e);return bw(e)}function zN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function bw(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function lo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=i??Gt.EMPTY,this.right=s??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Gt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Gt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();const e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kw(this.data.getIterator())}getIteratorFrom(e){return new kw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class kw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new wr([])}unionWith(e){let n=new Vt(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SS("Invalid base64 string: "+s):s}}(e);return new en(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const BN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(t){if(je(!!t),typeof t=="string"){let e=0;const n=BN.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zs(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Af(t){const e=t.mapValue.fields.__previous_value__;return ey(e)?Af(e):e}function pc(t){const e=Js(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n,r,i,s,o,a,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=h}}class gc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ey(t)?4:WN(t)?9007199254740991:qN(t)?10:11:he()}function gi(t,e){if(t===e)return!0;const n=eo(t);if(n!==eo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pc(t).isEqual(pc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Js(i.timestampValue),a=Js(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zs(i.bytesValue).isEqual(Zs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?zd(o)===zd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vl(t.arrayValue.values||[],e.arrayValue.values||[],gi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Aw(o)!==Aw(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!gi(o[u],a[u])))return!1;return!0}(t,e);default:return he()}}function mc(t,e){return(t.values||[]).find(n=>gi(n,e))!==void 0}function yl(t,e){if(t===e)return 0;const n=eo(t),r=eo(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Et(s.integerValue||s.doubleValue),u=Et(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Pw(t.timestampValue,e.timestampValue);case 4:return Pw(pc(t),pc(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zs(s),u=Zs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let h=0;h<a.length&&h<u.length;h++){const f=Pe(a[h],u[h]);if(f!==0)return f}return Pe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Pe(Et(s.latitude),Et(o.latitude));return a!==0?a:Pe(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Rw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,h,f;const g=s.fields||{},v=o.fields||{},w=(a=g.value)===null||a===void 0?void 0:a.arrayValue,S=(u=v.value)===null||u===void 0?void 0:u.arrayValue,k=Pe(((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:Rw(w,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Rh.mapValue&&o===Rh.mapValue)return 0;if(s===Rh.mapValue)return 1;if(o===Rh.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),h=o.fields||{},f=Object.keys(h);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const v=Pe(u[g],f[g]);if(v!==0)return v;const w=yl(a[u[g]],h[f[g]]);if(w!==0)return w}return Pe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw he()}}function Pw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Js(t),r=Js(e),i=Pe(n.seconds,r.seconds);return i!==0?i:Pe(n.nanos,r.nanos)}function Rw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=yl(n[i],r[i]);if(s)return s}return Pe(n.length,r.length)}function _l(t){return mm(t)}function mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Js(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=mm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${mm(n.fields[o])}`;return i+"}"}(t.mapValue):he()}function ed(t){switch(eo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Af(t);return e?16+ed(e):16;case 5:return 2*t.stringValue.length;case 6:return Zs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+ed(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return lo(r.fields,(s,o)=>{i+=s.length+ed(o)}),i}(t.mapValue);default:throw he()}}function vm(t){return!!t&&"integerValue"in t}function ty(t){return!!t&&"arrayValue"in t}function xw(t){return!!t&&"nullValue"in t}function Ow(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function td(t){return!!t&&"mapValue"in t}function qN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Vu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return lo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Vu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Vu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!td(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(n)}setAll(e){let n=Xt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Vu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());td(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];td(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){lo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Gn(Vu(this.value))}}function CS(t){const e=[];return lo(t.fields,(n,r)=>{const i=new Xt([n]);if(td(r)){const s=CS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new wr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dn(e,0,pe.min(),pe.min(),pe.min(),Gn.empty(),0)}static newFoundDocument(e,n,r,i){return new dn(e,1,n,pe.min(),r,i,0)}static newNoDocument(e,n){return new dn(e,2,n,pe.min(),pe.min(),Gn.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,pe.min(),pe.min(),Gn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.position=e,this.inclusive=n}}function Dw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=yl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n="asc"){this.field=e,this.dir=n}}function KN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{}class Lt extends bS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new QN(e,n,r):n==="array-contains"?new JN(e,r):n==="in"?new ZN(e,r):n==="not-in"?new eL(e,r):n==="array-contains-any"?new tL(e,r):new Lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new YN(e,r):new XN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yl(n,this.value)):n!==null&&eo(this.value)===eo(n)&&this.matchesComparison(yl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends bS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new mi(e,n)}matches(e){return AS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function AS(t){return t.op==="and"}function kS(t){return GN(t)&&AS(t)}function GN(t){for(const e of t.filters)if(e instanceof mi)return!1;return!0}function ym(t){if(t instanceof Lt)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(kS(t))return t.filters.map(e=>ym(e)).join(",");{const e=t.filters.map(n=>ym(n)).join(",");return`${t.op}(${e})`}}function PS(t,e){return t instanceof Lt?function(r,i){return i instanceof Lt&&r.op===i.op&&r.field.isEqual(i.field)&&gi(r.value,i.value)}(t,e):t instanceof mi?function(r,i){return i instanceof mi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&PS(o,i.filters[a]),!0):!1}(t,e):void he()}function RS(t){return t instanceof Lt?function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`}(t):t instanceof mi?function(n){return n.op.toString()+" {"+n.getFilters().map(RS).join(" ,")+"}"}(t):"Filter"}class QN extends Lt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class YN extends Lt{constructor(e,n){super(e,"in",n),this.keys=xS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XN extends Lt{constructor(e,n){super(e,"not-in",n),this.keys=xS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class JN extends Lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ty(n)&&mc(n.arrayValue,this.value)}}class ZN extends Lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mc(this.value.arrayValue,n)}}class eL extends Lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mc(this.value.arrayValue,n)}}class tL extends Lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ty(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Lw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new nL(t,e,n,r,i,s,o)}function ny(t){const e=ve(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ym(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),e.ue=n}return e.ue}function ry(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nw(t.startAt,e.startAt)&&Nw(t.endAt,e.endAt)}function _m(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rL(t,e,n,r,i,s,o,a){return new kf(t,e,n,r,i,s,o,a)}function Pf(t){return new kf(t)}function Mw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function iL(t){return t.collectionGroup!==null}function Fu(t){const e=ve(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vt(Xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Hd(s,r))}),n.has(Xt.keyField().canonicalString())||e.ce.push(new Hd(Xt.keyField(),r))}return e.ce}function di(t){const e=ve(t);return e.le||(e.le=sL(e,Fu(t))),e.le}function sL(t,e){if(t.limitType==="F")return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hd(i.field,s)});const n=t.endAt?new Bd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bd(t.startAt.position,t.startAt.inclusive):null;return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wm(t,e,n){return new kf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rf(t,e){return ry(di(t),di(e))&&t.limitType===e.limitType}function OS(t){return`${ny(di(t))}|lt:${t.limitType}`}function Ma(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RS(i)).join(", ")}]`),bf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_l(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_l(i)).join(",")),`Target(${r})`}(di(t))}; limitType=${t.limitType})`}function xf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Fu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const h=Dw(o,a,u);return o.inclusive?h<=0:h<0}(r.startAt,Fu(r),i)||r.endAt&&!function(o,a,u){const h=Dw(o,a,u);return o.inclusive?h>=0:h>0}(r.endAt,Fu(r),i))}(t,e)}function oL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DS(t){return(e,n)=>{let r=!1;for(const i of Fu(t)){const s=aL(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aL(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),h=a.data.field(s);return u!==null&&h!==null?yl(u,h):he()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return IS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new ft(ae.comparator);function Wi(){return lL}const NS=new ft(ae.comparator);function Iu(...t){let e=NS;for(const n of t)e=e.insert(n.key,n);return e}function LS(t){let e=NS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fo(){return Uu()}function MS(){return Uu()}function Uu(){return new ua(t=>t.toString(),(t,e)=>t.isEqual(e))}const uL=new ft(ae.comparator),cL=new Vt(ae.comparator);function be(...t){let e=cL;for(const n of t)e=e.add(n);return e}const hL=new Vt(Pe);function dL(){return hL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zd(e)?"-0":e}}function jS(t){return{integerValue:""+t}}function fL(t,e){return UN(e)?jS(e):iy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function pL(t,e,n){return t instanceof vc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ey(s)&&(s=Af(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof wl?FS(t,e):t instanceof yc?US(t,e):function(i,s){const o=VS(i,s),a=jw(o)+jw(i.Pe);return vm(o)&&vm(i.Pe)?jS(a):iy(i.serializer,a)}(t,e)}function gL(t,e,n){return t instanceof wl?FS(t,e):t instanceof yc?US(t,e):n}function VS(t,e){return t instanceof qd?function(r){return vm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class vc extends Of{}class wl extends Of{constructor(e){super(),this.elements=e}}function FS(t,e){const n=$S(e);for(const r of t.elements)n.some(i=>gi(i,r))||n.push(r);return{arrayValue:{values:n}}}class yc extends Of{constructor(e){super(),this.elements=e}}function US(t,e){let n=$S(e);for(const r of t.elements)n=n.filter(i=>!gi(i,r));return{arrayValue:{values:n}}}class qd extends Of{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jw(t){return Et(t.integerValue||t.doubleValue)}function $S(t){return ty(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n){this.field=e,this.transform=n}}function mL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof wl&&i instanceof wl||r instanceof yc&&i instanceof yc?vl(r.elements,i.elements,gi):r instanceof qd&&i instanceof qd?gi(r.Pe,i.Pe):r instanceof vc&&i instanceof vc}(t.transform,e.transform)}class vL{constructor(e,n){this.version=e,this.transformResults=n}}class Br{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Br}static exists(e){return new Br(void 0,e)}static updateTime(e){return new Br(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function BS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qS(t.key,Br.none()):new xc(t.key,t.data,Br.none());{const n=t.data,r=Gn.empty();let i=new Vt(Xt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new uo(t.key,r,new wr(i.toArray()),Br.none())}}function yL(t,e,n){t instanceof xc?function(i,s,o){const a=i.value.clone(),u=Fw(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof uo?function(i,s,o){if(!nd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Fw(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(HS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function $u(t,e,n,r){return t instanceof xc?function(s,o,a,u){if(!nd(s.precondition,o))return a;const h=s.value.clone(),f=Uw(s.fieldTransforms,u,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof uo?function(s,o,a,u){if(!nd(s.precondition,o))return a;const h=Uw(s.fieldTransforms,u,o),f=o.data;return f.setAll(HS(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(s,o,a){return nd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function _L(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=VS(r.transform,i||null);s!=null&&(n===null&&(n=Gn.empty()),n.set(r.field,s))}return n||null}function Vw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vl(r,i,(s,o)=>mL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xc extends Df{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uo extends Df{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fw(t,e,n){const r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,gL(o,a,n[i]))}return r}function Uw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,pL(s,o,e))}return r}class qS extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wL extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=$u(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=$u(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=MS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=BS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(n,r)=>Vw(n,r))&&vl(this.baseMutations,e.baseMutations,(n,r)=>Vw(n,r))}}class sy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return uL}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Oe;function SL(t){switch(t){default:return he();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function WS(t){if(t===void 0)return qi("GRPC error has no .code"),G.UNKNOWN;switch(t){case bt.OK:return G.OK;case bt.CANCELLED:return G.CANCELLED;case bt.UNKNOWN:return G.UNKNOWN;case bt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case bt.INTERNAL:return G.INTERNAL;case bt.UNAVAILABLE:return G.UNAVAILABLE;case bt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case bt.NOT_FOUND:return G.NOT_FOUND;case bt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case bt.ABORTED:return G.ABORTED;case bt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case bt.DATA_LOSS:return G.DATA_LOSS;default:return he()}}(Oe=bt||(bt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=new Bo([4294967295,4294967295],0);function $w(t){const e=CL().encode(t),n=new gS;return n.update(e),new Uint8Array(n.digest())}function zw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bo([n,r],0),new Bo([i,s],0)]}class oy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Su(`Invalid padding: ${n}`);if(r<0)throw new Su(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Su(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Su(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Bo.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(Bo.fromNumber(r)));return i.compare(bL)===1&&(i=new Bo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=$w(e),[r,i]=zw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new oy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=$w(e),[r,i]=zw(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Su extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Oc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nf(pe.min(),i,new ft(Pe),Wi(),be())}}class Oc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Oc(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class KS{constructor(e,n){this.targetId=e,this.me=n}}class GS{constructor(e,n,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Bw{constructor(){this.fe=0,this.ge=Hw(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),n=be(),r=be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:he()}}),new Oc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Hw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AL{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wi(),this.qe=xh(),this.Qe=xh(),this.Ke=new ft(Pe)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(_m(s))if(r===0){const o=new ae(s.path);this.We(n,o,dn.newNoDocument(o,pe.min()))}else je(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),u=a?this.et(a,e,o):1;if(u!==0){this.He(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zs(r).toUint8Array()}catch(u){if(u instanceof SS)return ml("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new oy(o,i,s)}catch(u){return ml(u instanceof Su?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&_m(a.target)){const u=new ae(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,dn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=be();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const h=this.Ye(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Nf(e,n,this.Ke,this.ke,r);return this.ke=Wi(),this.qe=xh(),this.Qe=xh(),this.Ke=new ft(Pe),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Bw,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Vt(Pe),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Vt(Pe),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Bw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function xh(){return new ft(ae.comparator)}function Hw(){return new ft(ae.comparator)}const kL={asc:"ASCENDING",desc:"DESCENDING"},PL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RL={and:"AND",or:"OR"};class xL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Em(t,e){return t.useProto3Json||bf(e)?e:{value:e}}function Wd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OL(t,e){return Wd(t,e.toTimestamp())}function fi(t){return je(!!t),pe.fromTimestamp(function(n){const r=Js(n);return new jt(r.seconds,r.nanos)}(t))}function ay(t,e){return Tm(t,e).canonicalString()}function Tm(t,e){const n=function(i){return new at(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function YS(t){const e=at.fromString(t);return je(tC(e)),e}function Im(t,e){return ay(t.databaseId,e.path)}function Kp(t,e){const n=YS(e);if(n.get(1)!==t.databaseId.projectId)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(JS(n))}function XS(t,e){return ay(t.databaseId,e)}function DL(t){const e=YS(t);return e.length===4?at.emptyPath():JS(e)}function Sm(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JS(t){return je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function qw(t,e,n){return{name:Im(t,e),fields:n.value.mapValue.fields}}function NL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(je(f===void 0||typeof f=="string"),en.fromBase64String(f||"")):(je(f===void 0||f instanceof Buffer||f instanceof Uint8Array),en.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const f=h.code===void 0?G.UNKNOWN:WS(h.code);return new se(f,h.message||"")}(o);n=new GS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kp(t,r.document.name),s=fi(r.document.updateTime),o=r.document.createTime?fi(r.document.createTime):pe.min(),a=new Gn({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,s,o,a),h=r.targetIds||[],f=r.removedTargetIds||[];n=new rd(h,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Kp(t,r.document),s=r.readTime?fi(r.readTime):pe.min(),o=dn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Kp(t,r.document),s=r.removedTargetIds||[];n=new rd([],s,i,null)}else{if(!("filter"in e))return he();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new IL(i,s),a=r.targetId;n=new KS(a,o)}}return n}function LL(t,e){let n;if(e instanceof xc)n={update:qw(t,e.key,e.value)};else if(e instanceof qS)n={delete:Im(t,e.key)};else if(e instanceof uo)n={update:qw(t,e.key,e.data),updateMask:HL(e.fieldMask)};else{if(!(e instanceof wL))return he();n={verify:Im(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof vc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw he()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:OL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:he()}(t,e.precondition)),n}function ML(t,e){return t&&t.length>0?(je(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?fi(i.updateTime):fi(s);return o.isEqual(pe.min())&&(o=fi(s)),new vL(o,i.transformResults||[])}(n,e))):[]}function jL(t,e){return{documents:[XS(t,e.path)]}}function VL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=XS(t,i);const s=function(h){if(h.length!==0)return eC(mi.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(v){return{field:ja(v.field),direction:$L(v.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Em(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ct:n,parent:i}}function FL(t){let e=DL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(g){const v=ZS(g);return v instanceof mi&&kS(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(v=>function(S){return new Hd(Va(S.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(n.orderBy));let a=null;n.limit&&(a=function(g){let v;return v=typeof g=="object"?g.value:g,bf(v)?null:v}(n.limit));let u=null;n.startAt&&(u=function(g){const v=!!g.before,w=g.values||[];return new Bd(w,v)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const v=!g.before,w=g.values||[];return new Bd(w,v)}(n.endAt)),rL(e,i,o,s,a,"F",u,h)}function UL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ZS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Va(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Va(n.unaryFilter.field);return Lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Va(n.unaryFilter.field);return Lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Va(n.unaryFilter.field);return Lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return Lt.create(Va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mi.create(n.compositeFilter.filters.map(r=>ZS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function $L(t){return kL[t]}function zL(t){return PL[t]}function BL(t){return RL[t]}function ja(t){return{fieldPath:t.canonicalString()}}function Va(t){return Xt.fromServerFormat(t.fieldPath)}function eC(t){return t instanceof Lt?function(n){if(n.op==="=="){if(Ow(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(xw(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ow(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(xw(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:zL(n.op),value:n.value}}}(t):t instanceof mi?function(n){const r=n.getFilters().map(i=>eC(i));return r.length===1?r[0]:{compositeFilter:{op:BL(n.op),filters:r}}}(t):he()}function HL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,r,i,s=pe.min(),o=pe.min(),a=en.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.ht=e}}function WL(t){const e=FL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.ln=new GL}addToCollectionParentIndex(e,n){return this.ln.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Xs.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Xs.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class GL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Vt(at.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class On{static withCacheSize(e){return new On(e,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.DEFAULT_COLLECTION_PERCENTILE=10,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,On.DEFAULT=new On(41943040,On.DEFAULT_COLLECTION_PERCENTILE,On.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),On.DISABLED=new On(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new El(0)}static Qn(){return new El(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw([t,e],[n,r]){const i=Pe(t,n);return i===0?Pe(e,r):i}class QL{constructor(e){this.Gn=e,this.buffer=new Vt(Kw),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class YL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nl(n)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Dl(n)}await this.Yn(3e5)})}}class XL{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Cf.oe);const r=new QL(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Ww)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ww):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,u,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,o=Date.now(),this.nthSequenceNumber(e,i))).next(g=>(r=g,a=Date.now(),this.removeTargets(e,r,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(h=Date.now(),La()<=Ce.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-f}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:g})))}}function JL(t,e){return new XL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(){this.changes=new ua(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&$u(r.mutation,i,wr.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const i=Fo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Iu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wi();const o=Uu(),a=function(){return Uu()}();return n.forEach((u,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof uo)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),$u(f.mutation,h,f.mutation.getFieldMask(),jt.now())):o.set(h.key,wr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,f)=>o.set(h,f)),n.forEach((h,f)=>{var g;return a.set(h,new eM(f,(g=o.get(h))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Uu();let i=new ft((o,a)=>o-a),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let f=r.get(u)||wr.empty();f=a.applyToLocalView(h,f),r.set(u,f);const g=(i.get(a.batchId)||be()).add(u);i=i.insert(a.batchId,g)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),h=u.key,f=u.value,g=MS();f.forEach(v=>{if(!s.has(v)){const w=BS(n.get(v),r.get(v));w!==null&&g.set(v,w),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,g))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):iL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Fo());let a=-1,u=s;return o.next(h=>q.forEach(h,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),s.get(f)?q.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{u=u.insert(f,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,be())).next(f=>({batchId:a,changes:LS(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Iu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Iu();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,u=>{const h=function(g,v){return new kf(v,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((g,v)=>{o=o.insert(g,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,dn.newInvalidDocument(f)))});let a=Iu();return o.forEach((u,h)=>{const f=s.get(u);f!==void 0&&$u(f.mutation,h,wr.empty(),jt.now()),xf(n,h)&&(a=a.insert(u,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return q.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fi(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:WL(i.bundledQuery),readTime:fi(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(){this.overlays=new ft(ae.comparator),this.Er=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fo();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Fo(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ft((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Fo(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const a=Fo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,f)=>a.set(h,f)),!(a.size()>=i)););return q.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new TL(n,r));let s=this.Er.get(n);s===void 0&&(s=be(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.dr=new Vt(Bt.Ar),this.Rr=new Vt(Bt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Bt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new ae(new at([])),r=new Bt(n,e),i=new Bt(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ae(new at([])),r=new Bt(n,e),i=new Bt(n,e+1);let s=be();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Bt(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ae.comparator(e.key,n.key)||Pe(e.br,n.br)}static Vr(e,n){return Pe(e.br,n.br)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Vt(Bt.Ar)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Bt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),i=new Bt(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(Pe);return n.forEach(i=>{const s=new Bt(i,0),o=new Bt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),q.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new Bt(new ae(s),0);let a=new Vt(Pe);return this.vr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(u.br)),!0)},o),q.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){je(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return q.forEach(n.mutations,i=>{const s=new Bt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Bt(n,0),i=this.vr.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.Nr=e,this.docs=function(){return new ft(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=Wi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wi();const o=n.path,a=new ae(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:f}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||MN(LN(f),r)<=0||(i.has(f.key)||xf(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){he()}Lr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aM(this)}getSize(e){return q.resolve(this.size)}}class aM extends ZL{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.persistence=e,this.Br=new ua(n=>ny(n),ry),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.kr=0,this.qr=new ly,this.targetCount=0,this.Qr=El.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),q.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new El(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Un(n),q.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Cf(0),this.Ur=!1,this.Ur=!0,this.Wr=new iM,this.referenceDelegate=e(this),this.Gr=new lM(this),this.indexManager=new KL,this.remoteDocumentCache=function(i){return new oM(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new qL(n),this.jr=new nM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new sM(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new uM(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return q.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class uM extends VN{constructor(e){super(),this.currentSequenceNumber=e}}class uy{constructor(e){this.persistence=e,this.Zr=new ly,this.Xr=null}static ei(e){return new uy(e)}get ti(){if(this.Xr)return this.Xr;throw he()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),q.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ti,r=>{const i=ae.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,pe.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return q.or([()=>q.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Kd{constructor(e,n){this.persistence=e,this.ri=new ua(r=>$N(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=JL(this,n)}static ei(e,n){return new Kd(e,n)}Hr(){}Jr(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return q.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,pe.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),q.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ed(e.data.value)),n}ir(e,n,r){return q.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=be(),i=be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return qx()?8:FN(pn())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cM;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(La()<=Ce.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ma(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),q.resolve()):(La()<=Ce.DEBUG&&ee("QueryEngine","Query:",Ma(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(La()<=Ce.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ma(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):q.resolve())}Xi(e,n){if(Mw(n))return q.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wm(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=be(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.rs(n,a);return this.ss(n,h,o,u.readTime)?this.Xi(e,wm(n,null,"F")):this.os(e,h,n,u)}))})))}es(e,n,r,i){return Mw(n)||i.isEqual(pe.min())?q.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?q.resolve(null):(La()<=Ce.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ma(n)),this.os(e,o,n,NN(i,-1)).next(a=>a))})}rs(e,n){let r=new Vt(DS(e));return n.forEach((i,s)=>{xf(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return La()<=Ce.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ma(n)),this.Zi.getDocumentsMatchingQuery(e,n,Xs.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new ft(Pe),this.cs=new ua(s=>ny(s),ry),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tM(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function fM(t,e,n,r){return new dM(t,e,n,r)}async function rC(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=be();for(const h of i){o.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}for(const h of s){a.push(h.batchId);for(const f of h.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ts:h,removedBatchIds:o,addedBatchIds:a}))})})}function pM(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,h,f){const g=h.batch,v=g.keys();let w=q.resolve();return v.forEach(S=>{w=w.next(()=>f.getEntry(u,S)).next(k=>{const D=h.docVersions.get(S);je(D!==null),k.version.compareTo(D)<0&&(g.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),f.addEntry(k)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(u,g))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=be();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(u=u.add(a.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iC(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function gM(t,e){const n=ve(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((f,g)=>{const v=i.get(g);if(!v)return;a.push(n.Gr.removeMatchingKeys(s,f.removedDocuments,g).next(()=>n.Gr.addMatchingKeys(s,f.addedDocuments,g)));let w=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(en.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),i=i.insert(g,w),function(k,D,b){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(v,w,f)&&a.push(n.Gr.updateTargetData(s,w))});let u=Wi(),h=be();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(mM(s,o,e.documentUpdates).next(f=>{u=f.Is,h=f.Es})),!r.isEqual(pe.min())){const f=n.Gr.getLastRemoteSnapshotVersion(s).next(g=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.us=i,s))}function mM(t,e,n){let r=be(),i=be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wi();return n.forEach((a,u)=>{const h=s.get(a);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(pe.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",u.version)}),{Is:o,Es:i}})}function vM(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yM(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Ns(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Cm(t,e,n){const r=ve(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Nl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Gw(t,e,n){const r=ve(t);let i=pe.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,f){const g=ve(u),v=g.cs.get(f);return v!==void 0?q.resolve(g.us.get(v)):g.Gr.getTargetData(h,f)}(r,o,di(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:pe.min(),n?s:be())).next(a=>(_M(r,oL(e),a),{documents:a,ds:s})))}function _M(t,e,n){let r=t.ls.get(e)||pe.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class Qw{constructor(){this.activeTargetIds=dL()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wM{constructor(){this._o=new Qw,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh=null;function Gp(){return Oh===null?Oh=function(){return 268435456+Math.round(2147483648*Math.random())}():Oh++,"0x"+Oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class SM extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=Gp(),u=this.No(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(h,s,o),this.Bo(n,u,h,i).then(f=>(ee("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw ml("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ol}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=TM[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=Gp();return new Promise((o,a)=>{const u=new mS;u.setWithCredentials(!0),u.listenOnce(vS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zh.NO_ERROR:const f=u.getResponseJson();ee(ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Zh.TIMEOUT:ee(ln,`RPC '${e}' ${s} timed out`),a(new se(G.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const g=u.getStatus();if(ee(ln,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const S=function(D){const b=D.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(b)>=0?b:G.UNKNOWN}(w.status);a(new se(S,w.message))}else a(new se(G.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new se(G.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{ee(ln,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);ee(ln,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",h,r,15)})}qo(e,n,r){const i=Gp(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wS(),a=_S(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ee(ln,`Creating RPC '${e}' stream ${i}: ${f}`,u);const g=o.createWebChannel(f,u);let v=!1,w=!1;const S=new IM({Eo:D=>{w?ee(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(v||(ee(ln,`Opening RPC '${e}' stream ${i} transport.`),g.open(),v=!0),ee(ln,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},Ao:()=>g.close()}),k=(D,b,I)=>{D.listen(b,A=>{try{I(A)}catch(V){setTimeout(()=>{throw V},0)}})};return k(g,Tu.EventType.OPEN,()=>{w||(ee(ln,`RPC '${e}' stream ${i} transport opened.`),S.So())}),k(g,Tu.EventType.CLOSE,()=>{w||(w=!0,ee(ln,`RPC '${e}' stream ${i} transport closed`),S.Do())}),k(g,Tu.EventType.ERROR,D=>{w||(w=!0,ml(ln,`RPC '${e}' stream ${i} transport errored:`,D),S.Do(new se(G.UNAVAILABLE,"The operation could not be completed")))}),k(g,Tu.EventType.MESSAGE,D=>{var b;if(!w){const I=D.data[0];je(!!I);const A=I,V=(A==null?void 0:A.error)||((b=A[0])===null||b===void 0?void 0:b.error);if(V){ee(ln,`RPC '${e}' stream ${i} received error:`,V);const H=V.status;let W=function(P){const x=bt[P];if(x!==void 0)return WS(x)}(H),R=V.message;W===void 0&&(W=G.INTERNAL,R="Unknown error status: "+H+" with message "+V.message),w=!0,S.Do(new se(W,R)),g.close()}else ee(ln,`RPC '${e}' stream ${i} received:`,I),S.vo(I)}}),k(a,yS.STAT_EVENT,D=>{D.stat===gm.PROXY?ee(ln,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===gm.NOPROXY&&ee(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.bo()},0),S}}function Qp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t){return new xL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r,i,s,o,a,u){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new sC(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(qi(n.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new se(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CM extends oC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=NL(this.serializer,e),r=function(s){if(!("targetChange"in s))return pe.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?fi(o.readTime):pe.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Sm(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=_m(u)?{documents:jL(s,u)}:{query:VL(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QS(s,o.resumeToken);const h=Em(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=Wd(s,o.snapshotVersion.toTimestamp());const h=Em(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const r=UL(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Sm(this.serializer),n.removeTarget=e,this.c_(n)}}class bM extends oC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return je(!!e.streamToken),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=ML(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Sm(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LL(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Tm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(G.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Tm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(G.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class kM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(qi(n),this.C_=!1):ee("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{ca(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ve(u);h.k_.add(4),await Dc(h),h.K_.set("Unknown"),h.k_.delete(4),await Mf(h)}(this))})}),this.K_=new kM(r,i)}}async function Mf(t){if(ca(t))for(const e of t.q_)await e(!0)}async function Dc(t){for(const e of t.q_)await e(!1)}function aC(t,e){const n=ve(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),py(n)?fy(n):Ll(n).s_()&&dy(n,e))}function hy(t,e){const n=ve(t),r=Ll(n);n.B_.delete(e),r.s_()&&lC(n,e),n.B_.size===0&&(r.s_()?r.a_():ca(n)&&n.K_.set("Unknown"))}function dy(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).V_(e)}function lC(t,e){t.U_.xe(e),Ll(t).m_(e)}function fy(t){t.U_=new AL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.K_.F_()}function py(t){return ca(t)&&!Ll(t).i_()&&t.B_.size>0}function ca(t){return ve(t).k_.size===0}function uC(t){t.U_=void 0}async function RM(t){t.K_.set("Online")}async function xM(t){t.B_.forEach((e,n)=>{dy(t,e)})}async function OM(t,e){uC(t),py(t)?(t.K_.O_(e),fy(t)):t.K_.set("Unknown")}async function DM(t,e,n){if(t.K_.set("Online"),e instanceof GS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gd(t,r)}else if(e instanceof rd?t.U_.$e(e):e instanceof KS?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(pe.min()))try{const r=await iC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.B_.get(h);f&&s.B_.set(h,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,h)=>{const f=s.B_.get(u);if(!f)return;s.B_.set(u,f.withResumeToken(en.EMPTY_BYTE_STRING,f.snapshotVersion)),lC(s,u);const g=new Ns(f.target,u,h,f.sequenceNumber);dy(s,g)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Gd(t,r)}}async function Gd(t,e,n){if(!Nl(e))throw e;t.k_.add(1),await Dc(t),t.K_.set("Offline"),n||(n=()=>iC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Mf(t)})}function cC(t,e){return e().catch(n=>Gd(t,n,e))}async function jf(t){const e=ve(t),n=to(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;NM(e);)try{const i=await vM(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,LM(e,i)}catch(i){await Gd(e,i)}hC(e)&&dC(e)}function NM(t){return ca(t)&&t.L_.length<10}function LM(t,e){t.L_.push(e);const n=to(t);n.s_()&&n.f_&&n.g_(e.mutations)}function hC(t){return ca(t)&&!to(t).i_()&&t.L_.length>0}function dC(t){to(t).start()}async function MM(t){to(t).w_()}async function jM(t){const e=to(t);for(const n of t.L_)e.g_(n.mutations)}async function VM(t,e,n){const r=t.L_.shift(),i=sy.from(r,e,n);await cC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jf(t)}async function FM(t,e){e&&to(t).f_&&await async function(r,i){if(function(o){return SL(o)&&o!==G.ABORTED}(i.code)){const s=r.L_.shift();to(r).__(),await cC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await jf(r)}}(t,e),hC(t)&&dC(t)}async function Xw(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ca(n);n.k_.add(3),await Dc(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Mf(n)}async function UM(t,e){const n=ve(t);e?(n.k_.delete(2),await Mf(n)):e||(n.k_.add(2),await Dc(n),n.K_.set("Unknown"))}function Ll(t){return t.W_||(t.W_=function(n,r,i){const s=ve(n);return s.b_(),new CM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:RM.bind(null,t),mo:xM.bind(null,t),po:OM.bind(null,t),R_:DM.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),py(t)?fy(t):t.K_.set("Unknown")):(await t.W_.stop(),uC(t))})),t.W_}function to(t){return t.G_||(t.G_=function(n,r,i){const s=ve(n);return s.b_(),new bM(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:MM.bind(null,t),po:FM.bind(null,t),p_:jM.bind(null,t),y_:VM.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await jf(t)):(await t.G_.stop(),t.L_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(t,e){if(qi("AsyncQueue",`${e}: ${t}`),Nl(t))return new se(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{static emptySet(e){return new ol(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Iu(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.z_=new ft(ae.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):he():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tl{constructor(e,n,r,i,s,o,a,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Tl(e,n,ol.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class zM{constructor(){this.queries=Zw(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=ve(n),s=i.queries;i.queries=Zw(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new se(G.ABORTED,"Firestore shutting down"))}}function Zw(){return new ua(t=>OS(t),Rf)}async function fC(t,e){const n=ve(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new $M,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=my(o,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&vy(n)}async function pC(t,e){const n=ve(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BM(t,e){const n=ve(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&vy(n)}function HM(t,e,n){const r=ve(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function vy(t){t.X_.forEach(e=>{e.next()})}var bm,eE;(eE=bm||(bm={})).na="default",eE.Cache="cache";class gC{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==bm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.key=e}}class vC{constructor(e){this.key=e}}class qM{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=be(),this.mutatedKeys=be(),this.Va=DS(e),this.ma=new ol(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new Jw,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,g)=>{const v=i.get(f),w=xf(this.query,g)?g:null,S=!!v&&this.mutatedKeys.has(v.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;v&&w?v.data.isEqual(w.data)?S!==k&&(r.track({type:3,doc:w}),D=!0):this.ya(v,w)||(r.track({type:2,doc:w}),D=!0,(u&&this.Va(w,u)>0||h&&this.Va(w,h)<0)&&(a=!0)):!v&&w?(r.track({type:0,doc:w}),D=!0):v&&!w&&(r.track({type:1,doc:v}),D=!0,(u||h)&&(a=!0)),D&&(w?(o=o.add(w),s=k?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((f,g)=>function(w,S){const k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return k(w)-k(S)}(f.type,g.type)||this.Va(f.doc,g.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,h=u!==this.Aa;return this.Aa=u,o.length!==0||h?{snapshot:new Tl(this.query,e.ma,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Jw,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=be(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new vC(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new mC(r))}),n}va(e){this.da=e.ds,this.Ra=be();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Tl.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class WM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class KM{constructor(e){this.key=e,this.Fa=!1}}class GM{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new ua(a=>OS(a),Rf),this.Oa=new Map,this.Na=new Set,this.La=new ft(ae.comparator),this.Ba=new Map,this.ka=new ly,this.qa={},this.Qa=new Map,this.Ka=El.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function QM(t,e,n=!0){const r=IC(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await yC(r,e,n,!0),i}async function YM(t,e){const n=IC(t);await yC(n,e,!0,!1)}async function yC(t,e,n,r){const i=await yM(t.localStore,di(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await XM(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&aC(t.remoteStore,i),a}async function XM(t,e,n,r,i){t.Ua=(g,v,w)=>async function(k,D,b,I){let A=D.view.ga(b);A.ss&&(A=await Gw(k.localStore,D.query,!1).then(({documents:R})=>D.view.ga(R,A)));const V=I&&I.targetChanges.get(D.targetId),H=I&&I.targetMismatches.get(D.targetId)!=null,W=D.view.applyChanges(A,k.isPrimaryClient,V,H);return nE(k,D.targetId,W.ba),W.snapshot}(t,g,v,w);const s=await Gw(t.localStore,e,!0),o=new qM(e,s.ds),a=o.ga(s.documents),u=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(a,t.isPrimaryClient,u);nE(t,n,h.ba);const f=new WM(e,n,o);return t.xa.set(e,f),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),h.snapshot}async function JM(t,e,n){const r=ve(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Rf(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hy(r.remoteStore,i.targetId),Am(r,i.targetId)}).catch(Dl)):(Am(r,i.targetId),await Cm(r.localStore,i.targetId,!0))}async function ZM(t,e){const n=ve(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hy(n.remoteStore,r.targetId))}async function e5(t,e,n){const r=a5(t);try{const i=await function(o,a){const u=ve(o),h=jt.now(),f=a.reduce((w,S)=>w.add(S.key),be());let g,v;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=Wi(),k=be();return u.hs.getEntries(w,f).next(D=>{S=D,S.forEach((b,I)=>{I.isValidDocument()||(k=k.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(D=>{g=D;const b=[];for(const I of a){const A=_L(I,g.get(I.key).overlayedDocument);A!=null&&b.push(new uo(I.key,A,CS(A.value.mapValue),Br.exists(!0)))}return u.mutationQueue.addMutationBatch(w,h,b,a)}).next(D=>{v=D;const b=D.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(w,D.batchId,b)})}).then(()=>({batchId:v.batchId,changes:LS(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let h=o.qa[o.currentUser.toKey()];h||(h=new ft(Pe)),h=h.insert(a,u),o.qa[o.currentUser.toKey()]=h}(r,i.batchId,n),await Nc(r,i.changes),await jf(r.remoteStore)}catch(i){const s=my(i,"Failed to persist write");n.reject(s)}}async function _C(t,e){const n=ve(t);try{const r=await gM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?je(o.Fa):i.removedDocuments.size>0&&(je(o.Fa),o.Fa=!1))}),await Nc(n,r,e)}catch(r){await Dl(r)}}function tE(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=ve(o);u.onlineState=a;let h=!1;u.queries.forEach((f,g)=>{for(const v of g.J_)v.ea(a)&&(h=!0)}),h&&vy(u)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function t5(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new ft(ae.comparator);o=o.insert(s,dn.newNoDocument(s,pe.min()));const a=be().add(s),u=new Nf(pe.min(),new Map,new ft(Pe),o,a);await _C(r,u),r.La=r.La.remove(s),r.Ba.delete(e),yy(r)}else await Cm(r.localStore,e,!1).then(()=>Am(r,e,n)).catch(Dl)}async function n5(t,e){const n=ve(t),r=e.batch.batchId;try{const i=await pM(n.localStore,e);EC(n,r,null),wC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nc(n,i)}catch(i){await Dl(i)}}async function r5(t,e,n){const r=ve(t);try{const i=await function(o,a){const u=ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return u.mutationQueue.lookupMutationBatch(h,a).next(g=>(je(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>u.localDocuments.getDocuments(h,f))})}(r.localStore,e);EC(r,e,n),wC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nc(r,i)}catch(i){await Dl(i)}}function wC(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function EC(t,e,n){const r=ve(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||TC(t,r)})}function TC(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(hy(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),yy(t))}function nE(t,e,n){for(const r of n)r instanceof mC?(t.ka.addReference(r.key,e),i5(t,r)):r instanceof vC?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||TC(t,r.key)):he()}function i5(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.Na.add(r),yy(t))}function yy(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new ae(at.fromString(e)),r=t.Ka.next();t.Ba.set(r,new KM(n)),t.La=t.La.insert(n,r),aC(t.remoteStore,new Ns(di(Pf(n.path)),r,"TargetPurposeLimboResolution",Cf.oe))}}async function Nc(t,e,n){const r=ve(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,e,n).then(h=>{var f;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){i.push(h);const g=cy.zi(u.targetId,h);s.push(g)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,h){const f=ve(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>q.forEach(h,v=>q.forEach(v.Wi,w=>f.persistence.referenceDelegate.addReference(g,v.targetId,w)).next(()=>q.forEach(v.Gi,w=>f.persistence.referenceDelegate.removeReference(g,v.targetId,w)))))}catch(g){if(!Nl(g))throw g;ee("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const v=g.targetId;if(!g.fromCache){const w=f.us.get(v),S=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(S);f.us=f.us.insert(v,k)}}}(r.localStore,s))}async function s5(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await rC(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new se(G.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nc(n,r.Ts)}}function o5(t,e){const n=ve(t),r=n.Ba.get(e);if(r&&r.Fa)return be().add(r.key);{let i=be();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function IC(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_C.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t5.bind(null,e),e.Ma.R_=BM.bind(null,e.eventManager),e.Ma.Wa=HM.bind(null,e.eventManager),e}function a5(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r5.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return fM(this.persistence,new hM,e.initialUser,this.serializer)}ja(e){return new nC(uy.ei,this.serializer)}za(e){return new wM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class l5 extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){je(this.persistence.referenceDelegate instanceof Kd);const r=this.persistence.referenceDelegate.garbageCollector;return new YL(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?On.withCacheSize(this.cacheSizeBytes):On.DEFAULT;return new nC(r=>Kd.ei(r,n),this.serializer)}}class km{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=s5.bind(null,this.syncEngine),await UM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zM}()}createDatastore(e){const n=Lf(e.databaseInfo.databaseId),r=function(s){return new SM(s)}(e.databaseInfo);return function(s,o,a,u){return new AM(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new PM(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tE(this.syncEngine,n,0),function(){return Yw.p()?new Yw:new EM}())}createSyncEngine(e,n){return function(i,s,o,a,u,h,f){const g=new GM(i,s,o,a,u,h);return f&&(g.$a=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ve(i);ee("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Dc(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}km.provider={build:()=>new km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cn.UNAUTHENTICATED,this.clientId=TS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=my(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yp(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await c5(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xw(e.remoteStore,i)),t._onlineComponents=e}async function c5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ml("Error using user provided cache. Falling back to memory cache: "+n),await Yp(t,new Qd)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Yp(t,new l5(void 0));return t._offlineComponents}async function CC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await rE(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await rE(t,new km))),t._onlineComponents}function h5(t){return CC(t).then(e=>e.syncEngine)}async function Pm(t){const e=await CC(t),n=e.eventManager;return n.onListen=QM.bind(null,e.syncEngine),n.onUnlisten=JM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZM.bind(null,e.syncEngine),n}function d5(t,e,n={}){const r=new Ws;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,h){const f=new SC({next:v=>{f.eu(),o.enqueueAndForget(()=>pC(s,g));const w=v.docs.has(a);!w&&v.fromCache?h.reject(new se(G.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&v.fromCache&&u&&u.source==="server"?h.reject(new se(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),g=new gC(Pf(a.path),f,{includeMetadataChanges:!0,ua:!0});return fC(s,g)}(await Pm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e,n){if(!n)throw new se(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function f5(t,e,n,r){if(e===!0&&r===!0)throw new se(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function sE(t){if(!ae.isDocumentKey(t))throw new se(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oE(t){if(ae.isDocumentKey(t))throw new se(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _y(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function Hr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_y(t);throw new se(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new se(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CN;switch(r.type){case"firstParty":return new PN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=iE.get(n);r&&(ee("ComponentProvider","Removing Datastore"),iE.delete(n),r.terminate())}(this),Promise.resolve()}}function p5(t,e,n,r={}){var i;const s=(t=Hr(t,Vf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ml("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=cn.MOCK_USER;else{a=Fx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new se(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new cn(h)}t._authCredentials=new bN(new ES(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ff(this.firestore,e,this._query)}}class Tn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class Ks extends Ff{constructor(e,n,r){super(e,n,Pf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new ae(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function g5(t,e,...n){if(t=kt(t),AC("collection","path",e),t instanceof Vf){const r=at.fromString(e,...n);return oE(r),new Ks(t,null,r)}{if(!(t instanceof Tn||t instanceof Ks))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return oE(r),new Ks(t.firestore,null,r)}}function Qt(t,e,...n){if(t=kt(t),arguments.length===1&&(e=TS.newId()),AC("doc","path",e),t instanceof Vf){const r=at.fromString(e,...n);return sE(r),new Tn(t,null,new ae(r))}{if(!(t instanceof Tn||t instanceof Ks))throw new se(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(at.fromString(e,...n));return sE(r),new Tn(t.firestore,t instanceof Ks?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new sC(this,"async_queue_retry"),this.fu=()=>{const r=Qp();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Qp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Qp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Ws;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Nl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw qi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=gy.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&he()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function uE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Zo extends Vf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new lE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lE(e),this._firestoreClient=void 0,await e}}}function m5(t,e){const n=typeof t=="object"?t:$v(),r=typeof t=="string"?t:"(default)",i=la(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=jx("firestore");s&&p5(i,...s)}return i}function wy(t){if(t._terminated)throw new se(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v5(t),t._firestoreClient}function v5(t){var e,n,r;const i=t._freezeSettings(),s=function(a,u,h,f){return new HN(a,u,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,bC(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new u5(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Il(en.fromBase64String(e))}catch(n){throw new se(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Il(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=/^__.*__$/;class _5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,n,this.fieldTransforms):new xc(e,this.data,n,this.fieldTransforms)}}class w5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new uo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}class $f{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new $f(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Yd(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(kC(this.Mu)&&y5.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class E5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lf(e)}$u(e,n,r,i=!1){return new $f({Mu:e,methodName:n,Ku:r,path:Xt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iy(t){const e=t._freezeSettings(),n=Lf(t._databaseId);return new E5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PC(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);Ay("Data must be an object, but it was:",o,r);const a=RC(r,o);let u,h;if(s.merge)u=new wr(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const g of s.mergeFields){const v=OC(e,g,n);if(!o.contains(v))throw new se(G.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);b5(f,v)||f.push(v)}u=new wr(f),h=o.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=o.fieldTransforms;return new _5(new Gn(a),u,h)}class Sy extends Lc{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sy}}function T5(t,e,n){return new $f({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cy extends Lc{_toFieldTransform(e){return new zS(e.path,new vc)}isEqual(e){return e instanceof Cy}}class by extends Lc{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=T5(this,e,!0),r=this.Uu.map(s=>zf(s,n)),i=new wl(r);return new zS(e.path,i)}isEqual(e){return e instanceof by&&pl(this.Uu,e.Uu)}}function I5(t,e,n,r){const i=t.$u(1,e,n);Ay("Data must be an object, but it was:",i,r);const s=[],o=Gn.empty();lo(r,(u,h)=>{const f=ky(e,u,n);h=kt(h);const g=i.Bu(f);if(h instanceof Sy)s.push(f);else{const v=zf(h,g);v!=null&&(s.push(f),o.set(f,v))}});const a=new wr(s);return new w5(o,a,i.fieldTransforms)}function S5(t,e,n,r,i,s){if(t.$u(1,e,n),OC(e,r,n),s.length%2!=0)throw new se(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`)}function zf(t,e){if(xC(t=kt(t)))return Ay("Unsupported field value:",e,t),RC(t,e);if(t instanceof Lc)return function(r,i){if(!kC(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=zf(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jt.fromDate(r);return{timestampValue:Wd(i.serializer,s)}}if(r instanceof jt){const s=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wd(i.serializer,s)}}if(r instanceof Ey)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Il)return{bytesValue:QS(i.serializer,r._byteString)};if(r instanceof Tn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ay(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ty)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return iy(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${_y(r)}`)}(t,e)}function RC(t,e){const n={};return IS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lo(t,(r,i)=>{const s=zf(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Ey||t instanceof Il||t instanceof Tn||t instanceof Lc||t instanceof Ty)}function Ay(t,e,n){if(!xC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=_y(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function OC(t,e,n){if((e=kt(e))instanceof Uf)return e._internalPath;if(typeof e=="string")return ky(t,e);throw Yd("Field path arguments must be of type string or ",t,!1,void 0,n)}const C5=new RegExp("[~\\*/\\[\\]]");function ky(t,e,n){if(e.search(C5)>=0)throw Yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uf(...e.split("."))._internalPath}catch{throw Yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new se(G.INVALID_ARGUMENT,a+t+u)}function b5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(NC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class A5 extends DC{data(){return super.data()}}function NC(t,e){return typeof e=="string"?ky(t,e):e instanceof Uf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P5{convertValue(e,n="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return lo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Et(o.doubleValue));return new Ty(s)}convertGeoPoint(e){return new Ey(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=Js(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=at.fromString(e);je(tC(r));const i=new gc(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||qi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class MC extends DC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new id(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(NC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class id extends MC{data(e={}){return super.data(e)}}class R5{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Cu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new id(this._firestore,this._userDataWriter,r.key,r,new Cu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new id(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new id(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:x5(a.type),doc:u,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function x5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){t=Hr(t,Tn);const e=Hr(t.firestore,Zo);return d5(wy(e),t._key).then(n=>VC(e,t,n))}class jC extends P5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function Xd(t,e,n){t=Hr(t,Tn);const r=Hr(t.firestore,Zo),i=LC(t.converter,e);return Py(r,[PC(Iy(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Br.none())])}function fu(t,e,n,...r){t=Hr(t,Tn);const i=Hr(t.firestore,Zo),s=Iy(i);let o;return o=typeof(e=kt(e))=="string"||e instanceof Uf?S5(s,"updateDoc",t._key,e,n,r):I5(s,"updateDoc",t._key,e),Py(i,[o.toMutation(t._key,Br.exists(!0))])}function O5(t,e){const n=Hr(t.firestore,Zo),r=Qt(t),i=LC(t.converter,e);return Py(n,[PC(Iy(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}function D5(t,...e){var n,r,i;t=kt(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||uE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uE(e[o])){const g=e[o];e[o]=(n=g.next)===null||n===void 0?void 0:n.bind(g),e[o+1]=(r=g.error)===null||r===void 0?void 0:r.bind(g),e[o+2]=(i=g.complete)===null||i===void 0?void 0:i.bind(g)}let u,h,f;if(t instanceof Tn)h=Hr(t.firestore,Zo),f=Pf(t._key.path),u={next:g=>{e[o]&&e[o](VC(h,t,g))},error:e[o+1],complete:e[o+2]};else{const g=Hr(t,Ff);h=Hr(g.firestore,Zo),f=g._query;const v=new jC(h);u={next:w=>{e[o]&&e[o](new R5(h,v,g,w))},error:e[o+1],complete:e[o+2]},k5(t._query)}return function(v,w,S,k){const D=new SC(k),b=new gC(w,D,S);return v.asyncQueue.enqueueAndForget(async()=>fC(await Pm(v),b)),()=>{D.eu(),v.asyncQueue.enqueueAndForget(async()=>pC(await Pm(v),b))}}(wy(h),f,a,u)}function Py(t,e){return function(r,i){const s=new Ws;return r.asyncQueue.enqueueAndForget(async()=>e5(await h5(r),i,s)),s.promise}(wy(t),e)}function VC(t,e,n){const r=n.docs.get(e._key),i=new jC(t);return new MC(t,i,e._key,r,new Cu(n.hasPendingWrites,n.fromCache),e.converter)}function N5(){return new Cy("serverTimestamp")}function L5(...t){return new by("arrayUnion",t)}(function(e,n=!0){(function(i){Ol=i})(Rl),pi(new Wr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zo(new AN(r.getProvider("auth-internal")),new xN(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new se(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Tr(Cw,"4.7.5",e),Tr(Cw,"4.7.5","esm2017")})();const FC="@firebase/installations",Ry="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=1e4,$C=`w:${Ry}`,zC="FIS_v2",M5="https://firebaseinstallations.googleapis.com/v1",j5=60*60*1e3,V5="installations",F5="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ea=new aa(V5,F5,U5);function BC(t){return t instanceof Kr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC({projectId:t}){return`${M5}/projects/${t}/installations`}function qC(t){return{token:t.token,requestStatus:2,expiresIn:z5(t.expiresIn),creationTime:Date.now()}}async function WC(t,e){const r=(await e.json()).error;return ea.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function KC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $5(t,{refreshToken:e}){const n=KC(t);return n.append("Authorization",B5(e)),n}async function GC(t){const e=await t();return e.status>=500&&e.status<600?t():e}function z5(t){return Number(t.replace("s","000"))}function B5(t){return`${zC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H5({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=HC(t),i=KC(t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:n,authVersion:zC,appId:t.appId,sdkVersion:$C},a={method:"POST",headers:i,body:JSON.stringify(o)},u=await GC(()=>fetch(r,a));if(u.ok){const h=await u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:qC(h.authToken)}}else throw await WC("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W5=/^[cdef][\w-]{21}$/,Rm="";function K5(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=G5(t);return W5.test(n)?n:Rm}catch{return Rm}}function G5(t){return q5(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new Map;function XC(t,e){const n=Bf(t);JC(n,e),Q5(n,e)}function JC(t,e){const n=YC.get(t);if(n)for(const r of n)r(e)}function Q5(t,e){const n=Y5();n&&n.postMessage({key:t,fid:e}),X5()}let Uo=null;function Y5(){return!Uo&&"BroadcastChannel"in self&&(Uo=new BroadcastChannel("[Firebase] FID Change"),Uo.onmessage=t=>{JC(t.data.key,t.data.fid)}),Uo}function X5(){YC.size===0&&Uo&&(Uo.close(),Uo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="firebase-installations-database",Z5=1,ta="firebase-installations-store";let Xp=null;function xy(){return Xp||(Xp=AI(J5,Z5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ta)}}})),Xp}async function Jd(t,e){const n=Bf(t),i=(await xy()).transaction(ta,"readwrite"),s=i.objectStore(ta),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&XC(t,e.fid),e}async function ZC(t){const e=Bf(t),r=(await xy()).transaction(ta,"readwrite");await r.objectStore(ta).delete(e),await r.done}async function Hf(t,e){const n=Bf(t),i=(await xy()).transaction(ta,"readwrite"),s=i.objectStore(ta),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&XC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy(t){let e;const n=await Hf(t.appConfig,r=>{const i=e3(r),s=t3(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Rm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function e3(t){const e=t||{fid:K5(),registrationStatus:0};return eb(e)}function t3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ea.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=n3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:r3(t)}:{installationEntry:e}}async function n3(t,e){try{const n=await H5(t,e);return Jd(t.appConfig,n)}catch(n){throw BC(n)&&n.customData.serverCode===409?await ZC(t.appConfig):await Jd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function r3(t){let e=await cE(t.appConfig);for(;e.registrationStatus===1;)await QC(100),e=await cE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Oy(t);return r||n}return e}function cE(t){return Hf(t,e=>{if(!e)throw ea.create("installation-not-found");return eb(e)})}function eb(t){return i3(t)?{fid:t.fid,registrationStatus:0}:t}function i3(t){return t.registrationStatus===1&&t.registrationTime+UC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3({appConfig:t,heartbeatServiceProvider:e},n){const r=o3(t,n),i=$5(t,n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:$C,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},u=await GC(()=>fetch(r,a));if(u.ok){const h=await u.json();return qC(h)}else throw await WC("Generate Auth Token",u)}function o3(t,{fid:e}){return`${HC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(t,e=!1){let n;const r=await Hf(t.appConfig,s=>{if(!tb(s))throw ea.create("not-registered");const o=s.authToken;if(!e&&u3(o))return s;if(o.requestStatus===1)return n=a3(t,e),s;{if(!navigator.onLine)throw ea.create("app-offline");const a=h3(s);return n=l3(t,a),a}});return n?await n:r.authToken}async function a3(t,e){let n=await hE(t.appConfig);for(;n.authToken.requestStatus===1;)await QC(100),n=await hE(t.appConfig);const r=n.authToken;return r.requestStatus===0?Dy(t,e):r}function hE(t){return Hf(t,e=>{if(!tb(e))throw ea.create("not-registered");const n=e.authToken;return d3(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function l3(t,e){try{const n=await s3(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Jd(t.appConfig,r),n}catch(n){if(BC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ZC(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Jd(t.appConfig,r)}throw n}}function tb(t){return t!==void 0&&t.registrationStatus===2}function u3(t){return t.requestStatus===2&&!c3(t)}function c3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+j5}function h3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function d3(t){return t.requestStatus===1&&t.requestTime+UC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f3(t){const e=t,{installationEntry:n,registrationPromise:r}=await Oy(e);return r?r.catch(console.error):Dy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p3(t,e=!1){const n=t;return await g3(n),(await Dy(n,e)).token}async function g3(t){const{registrationPromise:e}=await Oy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){if(!t||!t.options)throw Jp("App Configuration");if(!t.name)throw Jp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Jp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Jp(t){return ea.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="installations",v3="installations-internal",y3=t=>{const e=t.getProvider("app").getImmediate(),n=m3(e),r=la(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},_3=t=>{const e=t.getProvider("app").getImmediate(),n=la(e,nb).getImmediate();return{getId:()=>f3(n),getToken:i=>p3(n,i)}};function w3(){pi(new Wr(nb,y3,"PUBLIC")),pi(new Wr(v3,_3,"PRIVATE"))}w3();Tr(FC,Ry);Tr(FC,Ry,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="analytics",E3="firebase_id",T3="origin",I3=60*1e3,S3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ny="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new Ef("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jn=new aa("analytics","Analytics",C3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){if(!t.startsWith(Ny)){const e=Jn.create("invalid-gtag-resource",{gtagURL:t});return Vn.warn(e.message),""}return t}function rb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function A3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function k3(t,e){const n=A3("firebase-js-sdk-policy",{createScriptURL:b3}),r=document.createElement("script"),i=`${Ny}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function P3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function R3(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const u=(await rb(n)).find(h=>h.measurementId===i);u&&await e[u.appId]}}catch(a){Vn.error(a)}t("config",i,s)}async function x3(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await rb(n);for(const u of o){const h=a.find(g=>g.measurementId===u),f=h&&e[h.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Vn.error(s)}}function O3(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,u]=o;await x3(t,e,n,a,u)}else if(s==="config"){const[a,u]=o;await R3(t,e,n,r,a,u)}else if(s==="consent"){const[a,u]=o;t("consent",a,u)}else if(s==="get"){const[a,u,h]=o;t("get",a,u,h)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Vn.error(a)}}return i}function D3(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=O3(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function N3(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ny)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=30,M3=1e3;class j3{constructor(e={},n=M3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ib=new j3;function V3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function F3(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:V3(r)},s=S3.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Jn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function U3(t,e=ib,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Jn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Jn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new B3;return setTimeout(async()=>{a.abort()},I3),sb({appId:r,apiKey:i,measurementId:s},o,a,e)}async function sb(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ib){var s;const{appId:o,measurementId:a}=t;try{await $3(r,e)}catch(u){if(a)return Vn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw u}try{const u=await F3(t);return i.deleteThrottleMetadata(o),u}catch(u){const h=u;if(!z3(h)){if(i.deleteThrottleMetadata(o),a)return Vn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:a};throw u}const f=Number((s=h==null?void 0:h.customData)===null||s===void 0?void 0:s.httpStatus)===503?Y0(n,i.intervalMillis,L3):Y0(n,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return i.setThrottleMetadata(o,g),Vn.debug(`Calling attemptFetch again in ${f} millis`),sb(t,g,r,i)}}function $3(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function z3(t){if(!(t instanceof Kr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class B3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function H3(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(){if(II())try{await SI()}catch(t){return Vn.warn(Jn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Vn.warn(Jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function W3(t,e,n,r,i,s,o){var a;const u=U3(t);u.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&Vn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Vn.error(w)),e.push(u);const h=q3().then(w=>{if(w)return r.getId()}),[f,g]=await Promise.all([u,h]);N3(s)||k3(s,f.measurementId),i("js",new Date);const v=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return v[T3]="firebase",v.update=!0,g!=null&&(v[E3]=g),i("config",f.measurementId,v),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.app=e}_delete(){return delete zu[this.app.options.appId],Promise.resolve()}}let zu={},dE=[];const fE={};let Zp="dataLayer",G3="gtag",pE,ob,gE=!1;function Q3(){const t=[];if(TI()&&t.push("This is a browser extension environment."),Wx()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Jn.create("invalid-analytics-context",{errorInfo:e});Vn.warn(n.message)}}function Y3(t,e,n){Q3();const r=t.options.appId;if(!r)throw Jn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Vn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jn.create("no-api-key");if(zu[r]!=null)throw Jn.create("already-exists",{id:r});if(!gE){P3(Zp);const{wrappedGtag:s,gtagCore:o}=D3(zu,dE,fE,Zp,G3);ob=s,pE=o,gE=!0}return zu[r]=W3(t,dE,fE,e,pE,Zp,n),new K3(t)}function X3(t=$v()){t=kt(t);const e=la(t,Zd);return e.isInitialized()?e.getImmediate():J3(t)}function J3(t,e={}){const n=la(t,Zd);if(n.isInitialized()){const i=n.getImmediate();if(pl(e,n.getOptions()))return i;throw Jn.create("already-initialized")}return n.initialize({options:e})}function Z3(t,e,n,r){t=kt(t),H3(ob,zu[t.app.options.appId],e,n,r).catch(i=>Vn.error(i))}const mE="@firebase/analytics",vE="0.10.10";function ej(){pi(new Wr(Zd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Y3(r,i,n)},"PUBLIC")),pi(new Wr("analytics-internal",t,"PRIVATE")),Tr(mE,vE),Tr(mE,vE,"esm2017");function t(e){try{const n=e.getProvider(Zd).getImmediate();return{logEvent:(r,i,s)=>Z3(n,r,i,s)}}catch(n){throw Jn.create("interop-component-reg-failed",{reason:n})}}}ej();const tj={apiKey:"AIzaSyDcGX1V06Iox4rkwOm9BW2gfC1-jj8TiSs",authDomain:"chessmatch-b38ef.firebaseapp.com",projectId:"chessmatch-b38ef",storageBucket:"chessmatch-b38ef.firebasestorage.app",messagingSenderId:"293162008011",appId:"1:293162008011:web:e605313c7055f1ce784a4e",measurementId:"G-2V8DL9QX5J"},Ly=kI(tj),Ge=EN(Ly),Yt=m5(Ly);X3(Ly);function nj(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const _c="abcdefgh".split(""),sd={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},rj={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},ij={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},sj=[7,6,5,4,3,2,1,0],oj=[0,1,2,3,4,5,6,7],yE={wP:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),y.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),y.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),y.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),y.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),y.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[y.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),y.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),y.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),y.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[y.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),y.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),y.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),y.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),y.jsx("circle",{cx:"6",cy:"12",r:"2"}),y.jsx("circle",{cx:"14",cy:"9",r:"2"}),y.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),y.jsx("circle",{cx:"31",cy:"9",r:"2"}),y.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),y.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),y.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),y.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),y.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),y.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),y.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),y.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),y.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[y.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),y.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),y.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),y.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[y.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),y.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),y.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),y.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),y.jsx("circle",{cx:"6",cy:"12",r:"2"}),y.jsx("circle",{cx:"14",cy:"9",r:"2"}),y.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),y.jsx("circle",{cx:"31",cy:"9",r:"2"}),y.jsx("circle",{cx:"39",cy:"12",r:"2"}),y.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),y.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[y.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),y.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),y.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),y.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:y.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[y.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),y.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),y.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),y.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),y.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function xm(t,e,n){const r=e/8,i=t==="white"?rj:ij,s=t==="white"?sj:oj,o=i[n[0]]*r+r/2,a=s[parseInt(n[1],10)-1]*r+r/2;return{x:o,y:a}}function _E(t){let e=!1;return Object.keys(sd).forEach(n=>{t[n]!==sd[n]&&(e=!0)}),Object.keys(t).forEach(n=>{sd[n]!==t[n]&&(e=!0)}),e}function aj(t,e){const n={removed:{},added:{}};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n.removed[r]=t[r])}),Object.keys(e).forEach(r=>{t[r]!==e[r]&&(n.added[r]=e[r])}),n}function wE(t){return t==="start"?sd:typeof t=="string"?lj(t):t}function lj(t){if(!uj(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),n={};let r=8;for(let i=0;i<8;i++){const s=e[i].split("");let o=0;for(let a=0;a<s.length;a++)if(s[a].search(/[1-8]/)!==-1){const u=parseInt(s[a],10);o=o+u}else{const u=_c[o]+r;n[u]=hj(s[a]),o=o+1}r=r-1}return n}function uj(t){t=t.replace(/ .+$/,""),t=cj(t);const e=t.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function cj(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function hj(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const dj=(t,e=!0,n,r)=>{const[i,s]=M.useState([]),[o,a]=M.useState([]),[u,h]=M.useState();M.useEffect(()=>{Array.isArray(t)&&(f(),s(t==null?void 0:t.filter(S=>S[0]!==S[1])))},[t]),M.useEffect(()=>{n==null||n(o)},[o]);function f(){a([]),h(void 0)}const g=(S,k)=>{e&&h([S,k,r])},v=[...o,...i];return{arrows:v,newArrow:u,clearArrows:f,drawNewArrow:g,setArrows:a,onArrowDrawEnd:(S,k)=>{if(S===k||!e)return;let D;const b=[S,k,r];v.every(([A,V])=>!(A===S&&V===k))?D=[...o,b]:D=o.filter(([A,V])=>!(A===S&&V===k)),h(void 0),a(D)}}},ab=M.createContext({}),Xi=()=>M.useContext(ab),fj=M.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:r=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:o="white",boardWidth:a,children:u,clearPremovesOnRightClick:h=!0,customArrows:f,customArrowColor:g="rgb(255,170,0)",customBoardStyle:v,customNotationStyle:w,customDarkSquareStyle:S={backgroundColor:"#B58863"},customDropSquareStyle:k={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:D={backgroundColor:"#F0D9B5"},customPieces:b,customPremoveDarkSquareStyle:I={backgroundColor:"#A42323"},customPremoveLightSquareStyle:A={backgroundColor:"#BD2828"},customSquare:V="div",customSquareStyles:H,dropOffBoardAction:W="snapback",id:R=0,isDraggablePiece:E=()=>!0,getPositionObject:P=()=>{},onArrowsChange:x=()=>{},onDragOverSquare:N=()=>{},onMouseOutSquare:L=()=>{},onMouseOverSquare:O=()=>{},onPieceClick:Je=()=>{},onPieceDragBegin:lt=()=>{},onPieceDragEnd:vt=()=>{},onPieceDrop:Qe=()=>!0,onPieceDropOffBoard:J=()=>{},onPromotionCheck:oe=(yt,Ft,Cn)=>(Cn==="wP"&&yt[1]==="7"&&Ft[1]==="8"||Cn==="bP"&&yt[1]==="2"&&Ft[1]==="1")&&Math.abs(yt.charCodeAt(0)-Ft.charCodeAt(0))<=1,onPromotionPieceSelect:$=()=>!0,onSparePieceDrop:Ae=()=>!0,onSquareClick:Re=()=>{},onSquareRightClick:Ve=()=>{},position:rt="start",promotionDialogVariant:Pt="default",promotionToSquare:Ye=null,showBoardNotation:ue=!0,showPromotionDialog:re=!1,snapToCursor:Fn=!0},Un)=>{const[yt,Ft]=M.useState(wE(rt)),[Cn,Ji]=M.useState({removed:{},added:{}}),[$n,tn]=M.useState(void 0),[jl,ho]=M.useState(re&&!s),[da,Zi]=M.useState(null),[fa,fo]=M.useState(Ye),[es,nr]=M.useState([]),St=M.useRef(es),[ut,Ze]=M.useState(),[zn,br]=M.useState(Object.assign(Object.assign({},yE),b)),[vi,ts]=M.useState(!1),[Bn,pa]=M.useState(),[yi,Gr]=M.useState(!1),[Vl,Fl]=M.useState(null);M.useImperativeHandle(Un,()=>({clearPremoves(Ne=!0){bn(Ne)}})),M.useEffect(()=>{br(Object.assign(Object.assign({},yE),b))},[b]),M.useEffect(()=>{ho(re),fo(Ye)},[Ye,re]),M.useEffect(()=>{var Ne,He,_t;gn();const Fe=wE(rt),rr=aj(yt,Fe),Wt=((Ne=Object.keys(rr.added))===null||Ne===void 0?void 0:Ne.length)<=2?(_t=(He=Object.entries(rr.added))===null||He===void 0?void 0:He[0])===null||_t===void 0?void 0:_t[1][0]:void 0;if(yi)Ft(Fe),Gr(!1),i&&rs(Wt),Bn&&clearTimeout(Bn);else if(vi)Ft(Fe),Gr(!1),i&&rs(Wt);else{_E(Fe)&&$n!==void 0?tn(Wt):_E(Fe)?tn(void 0):tn("b"),Ji(rr),Gr(!0);const ss=setTimeout(()=>{Ft(Fe),Gr(!1),i&&rs(Wt)},e);pa(ss)}return ts(!1),P(Fe),Ar(),()=>{clearTimeout(Bn)}},[rt]);const{arrows:po,newArrow:go,clearArrows:Ar,drawNewArrow:Qr,onArrowDrawEnd:ns}=dj(f,n,x,g);function mo(Ne,He,_t,Fe){if(Ne===He)return;if(Ar(),i&&yi||i&&($n===_t[0]||St.current.filter(Wt=>Wt.piece[0]===_t[0]).length>0)){const Wt=[...St.current];Wt.push({sourceSq:Ne,targetSq:He,piece:_t}),St.current=Wt,nr([...Wt]),gn();return}if(!i&&yi)return;const rr=Object.assign({},yt);ts(!!Fe),tn(_t[0]),Qe.length?Qe(Ne,He,_t)||(bn(),ts(!1)):(delete rr[Ne],rr[He]=_t,Ft(rr)),gn(),P(rr)}function kr(Ne){const He=Object.assign({},yt);delete He[Ne],Ft(He),P(He)}function rs(Ne){if(St.current.length===0)return;const He=St.current[0];if(He.piece[0]!==void 0&&He.piece[0]!==Ne&&Qe.length)if(tn(He.piece[0]),ts(!0),Qe(He.sourceSq,He.targetSq,He.piece)){const Fe=[...St.current];Fe.shift(),St.current=Fe,nr([...Fe])}else bn()}function is(Ne,He){if(!Ae(Ne,He))return;const Fe=Object.assign({},yt);Fe[He]=Ne,Ft(Fe),P(Fe)}function bn(Ne=!0){Ne&&tn(void 0),St.current=[],nr([])}function gn(){Zi(null),fo(null),ho(!1)}function ga(Ne){Ze(Ne)}function Rt(Ne){if(ut){if(ut===Ne){Ze(void 0),h&&bn(!1),Ve(Ne);return}}else Ze(void 0)}function ma(){Ze(void 0)}const _i={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:i,arrows:po,autoPromoteToQueen:s,boardOrientation:o,boardWidth:a,chessPieces:zn,clearArrows:Ar,clearCurrentRightClickDown:ma,currentPosition:yt,currentRightClickDown:ut,customArrowColor:g,customBoardStyle:v,customDarkSquareStyle:S,customDropSquareStyle:k,customLightSquareStyle:D,customNotationStyle:w,customPremoveDarkSquareStyle:I,customPremoveLightSquareStyle:A,customSquare:V,customSquareStyles:H,deletePieceFromSquare:kr,drawNewArrow:Qr,dropOffBoardAction:W,handleSetPosition:mo,handleSparePieceDrop:is,id:R,isDraggablePiece:E,isWaitingForAnimation:yi,lastPieceColour:$n,lastSquareDraggedOver:Vl,newArrow:go,onArrowDrawEnd:ns,onDragOverSquare:N,onMouseOutSquare:L,onMouseOverSquare:O,onPieceClick:Je,onPieceDragBegin:lt,onPieceDragEnd:vt,onPieceDrop:Qe,onPieceDropOffBoard:J,onPromotionCheck:oe,onPromotionPieceSelect:$,onRightClickDown:ga,onRightClickUp:Rt,onSparePieceDrop:Ae,onSquareClick:Re,positionDifferences:Cn,premoves:es,promoteFromSquare:da,promoteToSquare:fa,promotionDialogVariant:Pt,setLastSquareDraggedOver:Fl,setPromoteFromSquare:Zi,setPromoteToSquare:fo,setShowPromoteDialog:ho,showBoardNotation:ue,showPromoteDialog:jl,snapToCursor:Fn};return y.jsx(ab.Provider,Object.assign({value:_i},{children:u}))});function pj({row:t,col:e}){const{boardOrientation:n,boardWidth:r,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:o}=Xi(),a=s.backgroundColor,u=i.backgroundColor,h=e===0,f=t===7,g=h&&f;function v(){return n==="white"?8-t:t+1}function w(){return n==="black"?_c[7-e]:_c[e]}function S(){return y.jsxs(y.Fragment,{children:[y.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),TE(r,o))},{children:v()})),y.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),EE(r,o))},{children:w()}))]})}function k(){return y.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?u:a}),EE(r,o))},{children:w()}))}function D(){return y.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:t%2===0?u:a}:{color:t%2===0?u:a}),TE(r,o))},{children:v()}))}return g?S():f?k():h?D():null}const EE=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),TE=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),lb=M.createContext({dragDropManager:void 0});function pr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var IE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),SE=function(){return Math.random().toString(36).substring(7).split("").join(".")},CE={INIT:"@@redux/INIT"+SE(),REPLACE:"@@redux/REPLACE"+SE()};function gj(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function ub(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(pr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(pr(1));return n(ub)(t,e)}if(typeof t!="function")throw new Error(pr(2));var i=t,s=e,o=[],a=o,u=!1;function h(){a===o&&(a=o.slice())}function f(){if(u)throw new Error(pr(3));return s}function g(k){if(typeof k!="function")throw new Error(pr(4));if(u)throw new Error(pr(5));var D=!0;return h(),a.push(k),function(){if(D){if(u)throw new Error(pr(6));D=!1,h();var I=a.indexOf(k);a.splice(I,1),o=null}}}function v(k){if(!gj(k))throw new Error(pr(7));if(typeof k.type>"u")throw new Error(pr(8));if(u)throw new Error(pr(9));try{u=!0,s=i(s,k)}finally{u=!1}for(var D=o=a,b=0;b<D.length;b++){var I=D[b];I()}return k}function w(k){if(typeof k!="function")throw new Error(pr(10));i=k,v({type:CE.REPLACE})}function S(){var k,D=g;return k={subscribe:function(I){if(typeof I!="object"||I===null)throw new Error(pr(11));function A(){I.next&&I.next(f())}A();var V=D(A);return{unsubscribe:V}}},k[IE]=function(){return this},k}return v({type:CE.INIT}),r={dispatch:v,subscribe:g,getState:f,replaceReducer:w},r[IE]=S,r}function ye(t,e,...n){if(mj()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function mj(){return typeof process<"u"&&!0}function vj(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function yj(t,e){return t.filter(n=>n!==e)}function cb(t){return typeof t=="object"}function _j(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function wj(t,e){return t.filter(n=>e.indexOf(n)>-1)}const My="dnd-core/INIT_COORDS",qf="dnd-core/BEGIN_DRAG",jy="dnd-core/PUBLISH_DRAG_SOURCE",Wf="dnd-core/HOVER",Kf="dnd-core/DROP",Gf="dnd-core/END_DRAG";function bE(t,e){return{type:My,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Ej={type:My,payload:{clientOffset:null,sourceClientOffset:null}};function Tj(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),u=t.getRegistry();t.dispatch(bE(s)),Ij(n,a,u);const h=bj(n,a);if(h==null){t.dispatch(Ej);return}let f=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");Sj(o),f=o(h)}t.dispatch(bE(s,f));const v=u.getSource(h).beginDrag(a,h);if(v==null)return;Cj(v),u.pinSource(h);const w=u.getSourceType(h);return{type:qf,payload:{itemType:w,item:v,sourceId:h,clientOffset:s||null,sourceClientOffset:f||null,isSourcePublic:!!i}}}}function Ij(t,e,n){ye(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){ye(n.getSource(r),"Expected sourceIds to be registered.")})}function Sj(t){ye(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Cj(t){ye(cb(t),"Item must be an object.")}function bj(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function Aj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Aj(t,i,n[i])})}return t}function Pj(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();Rj(r),Dj(r).forEach((o,a)=>{const u=xj(o,a,i,r),h={type:Kf,payload:{dropResult:kj({},n,u)}};t.dispatch(h)})}}function Rj(t){ye(t.isDragging(),"Cannot call drop while not dragging."),ye(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function xj(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return Oj(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function Oj(t){ye(typeof t>"u"||cb(t),"Drop result must either be an object or undefined.")}function Dj(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Nj(t){return function(){const n=t.getMonitor(),r=t.getRegistry();Lj(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Gf}}}function Lj(t){ye(t.isDragging(),"Cannot call endDrag while not dragging.")}function Om(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function Mj(t){return function(n,{clientOffset:r}={}){jj(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return Fj(i,o,a),Vj(i,s,o),Uj(i,s,o),{type:Wf,payload:{targetIds:i,clientOffset:r||null}}}}function jj(t){ye(Array.isArray(t),"Expected targetIds to be an array.")}function Vj(t,e,n){ye(e.isDragging(),"Cannot call hover while not dragging."),ye(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];ye(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);ye(s,"Expected targetIds to be registered.")}}function Fj(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);Om(s,n)||t.splice(r,1)}}function Uj(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function $j(t){return function(){if(t.getMonitor().isDragging())return{type:jy}}}function zj(t){return{beginDrag:Tj(t),publishDragSource:$j(t),hover:Mj(t),drop:Pj(t),endDrag:Nj(t)}}class Bj{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=zj(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function Hj(t,e){return{x:t.x+e.x,y:t.y+e.y}}function hb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qj(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:hb(Hj(e,r),n)}function Wj(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:hb(e,n)}const Bu=[],Vy=[];Bu.__IS_NONE__=!0;Vy.__IS_ALL__=!0;function Kj(t,e){return t===Bu?!1:t===Vy||typeof e>"u"?!0:wj(e,t).length>0}class Gj{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;ye(typeof e=="function","listener must be a function."),ye(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!Kj(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){ye(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return ye(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(ye(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return Om(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(ye(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!Om(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return qj(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Wj(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const AE=typeof global<"u"?global:self,db=AE.MutationObserver||AE.WebKitMutationObserver;function fb(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function Qj(t){let e=1;const n=new db(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const Yj=typeof db=="function"?Qj:fb;class Xj{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Yj(this.flush),this.requestErrorThrow=fb(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Jj{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Zj{create(e){const n=this.freeTasks,r=n.length?n.pop():new Jj(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const pb=new Xj,e4=new Zj(pb.registerPendingError);function t4(t){pb.enqueueTask(e4.create(t))}const Fy="dnd-core/ADD_SOURCE",Uy="dnd-core/ADD_TARGET",$y="dnd-core/REMOVE_SOURCE",Qf="dnd-core/REMOVE_TARGET";function n4(t){return{type:Fy,payload:{sourceId:t}}}function r4(t){return{type:Uy,payload:{targetId:t}}}function i4(t){return{type:$y,payload:{sourceId:t}}}function s4(t){return{type:Qf,payload:{targetId:t}}}function o4(t){ye(typeof t.canDrag=="function","Expected canDrag to be a function."),ye(typeof t.beginDrag=="function","Expected beginDrag to be a function."),ye(typeof t.endDrag=="function","Expected endDrag to be a function.")}function a4(t){ye(typeof t.canDrop=="function","Expected canDrop to be a function."),ye(typeof t.hover=="function","Expected hover to be a function."),ye(typeof t.drop=="function","Expected beginDrag to be a function.")}function Dm(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Dm(n,!1));return}ye(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var yr;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(yr||(yr={}));let l4=0;function u4(){return l4++}function c4(t){const e=u4().toString();switch(t){case yr.SOURCE:return`S${e}`;case yr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function kE(t){switch(t[0]){case"S":return yr.SOURCE;case"T":return yr.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function PE(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class h4{addSource(e,n){Dm(e),o4(n);const r=this.addHandler(yr.SOURCE,e,n);return this.store.dispatch(n4(r)),r}addTarget(e,n){Dm(e,!0),a4(n);const r=this.addHandler(yr.TARGET,e,n);return this.store.dispatch(r4(r)),r}containsHandler(e){return PE(this.dragSources,e)||PE(this.dropTargets,e)}getSource(e,n=!1){return ye(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return ye(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return ye(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return ye(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return kE(e)===yr.SOURCE}isTargetId(e){return kE(e)===yr.TARGET}removeSource(e){ye(this.getSource(e),"Expected an existing source."),this.store.dispatch(i4(e)),t4(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){ye(this.getTarget(e),"Expected an existing target."),this.store.dispatch(s4(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);ye(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){ye(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=c4(e);return this.types.set(i,n),e===yr.SOURCE?this.dragSources.set(i,r):e===yr.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const d4=(t,e)=>t===e;function f4(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function p4(t,e,n=d4){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function g4(t=Bu,e){switch(e.type){case Wf:break;case Fy:case Uy:case Qf:case $y:return Bu;case qf:case jy:case Gf:case Kf:default:return Vy}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=_j(n,r);if(!(i.length>0||!p4(n,r)))return Bu;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function m4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){m4(t,i,n[i])})}return t}const RE={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function y4(t=RE,e){const{payload:n}=e;switch(e.type){case My:case qf:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Wf:return f4(t.clientOffset,n.clientOffset)?t:v4({},t,{clientOffset:n.clientOffset});case Gf:case Kf:return RE;default:return t}}function _4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Na(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){_4(t,i,n[i])})}return t}const w4={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function E4(t=w4,e){const{payload:n}=e;switch(e.type){case qf:return Na({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case jy:return Na({},t,{isSourcePublic:!0});case Wf:return Na({},t,{targetIds:n.targetIds});case Qf:return t.targetIds.indexOf(n.targetId)===-1?t:Na({},t,{targetIds:yj(t.targetIds,n.targetId)});case Kf:return Na({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Gf:return Na({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function T4(t=0,e){switch(e.type){case Fy:case Uy:return t+1;case $y:case Qf:return t-1;default:return t}}function I4(t=0){return t+1}function S4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){S4(t,i,n[i])})}return t}function b4(t={},e){return{dirtyHandlerIds:g4(t.dirtyHandlerIds,{type:e.type,payload:C4({},e.payload,{prevTargetIds:vj(t,"dragOperation.targetIds",[])})}),dragOffset:y4(t.dragOffset,e),refCount:T4(t.refCount,e),dragOperation:E4(t.dragOperation,e),stateId:I4(t.stateId)}}function A4(t,e=void 0,n={},r=!1){const i=k4(r),s=new Gj(i,new h4(i)),o=new Bj(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function k4(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return ub(b4,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function P4(t,e){if(t==null)return{};var n=R4(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function R4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let xE=0;const od=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var x4=M.memo(function(e){var{children:n}=e,r=P4(e,["children"]);const[i,s]=O4(r);return M.useEffect(()=>{if(s){const o=gb();return++xE,()=>{--xE===0&&(o[od]=null)}}},[]),y.jsx(lb.Provider,{value:i,children:n})});function O4(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=D4(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function D4(t,e=gb(),n,r){const i=e;return i[od]||(i[od]={dragDropManager:A4(t,e,n,r)}),i[od]}function gb(){return typeof global<"u"?global:window}var N4=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const na=typeof window<"u"?M.useLayoutEffect:M.useEffect;function mb(t,e,n){const[r,i]=M.useState(()=>e(t)),s=M.useCallback(()=>{const o=e(t);N4(r,o)||(i(o),n&&n())},[r,t,n]);return na(s),[r,s]}function L4(t,e,n){const[r,i]=mb(t,e,n);return na(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function vb(t,e,n){return L4(e,t||(()=>({})),()=>n.reconnect())}function yb(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),M.useMemo(()=>typeof t=="function"?t():t,n)}function M4(t){return M.useMemo(()=>t.hooks.dragSource(),[t])}function j4(t){return M.useMemo(()=>t.hooks.dragPreview(),[t])}let eg=!1,tg=!1;class V4{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){ye(!eg,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return eg=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{eg=!1}}isDragging(){if(!this.sourceId)return!1;ye(!tg,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return tg=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{tg=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let ng=!1;class F4{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;ye(!ng,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return ng=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{ng=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function U4(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function $4(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function Nm(t,e,n,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<s.length;u++){const h=s[u];if(!a(h))return!1;const f=t[h],g=e[h];if(i=void 0,i===!1||i===void 0&&f!==g)return!1}return!0}function Lm(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function z4(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function B4(t){return(e=null,n=null)=>{if(!M.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return z4(r),H4(r,n?s=>t(s,n):t)}}function _b(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=B4(r);e[n]=()=>i}}),e}function OE(t,e){typeof t=="function"?t(e):t.current=e}function H4(t,e){const n=t.ref;return ye(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?M.cloneElement(t,{ref:r=>{OE(n,r),OE(e,r)}}):M.cloneElement(t,{ref:e})}class q4{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Nm(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Nm(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=_b({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Lm(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Lm(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class W4{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Nm(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=_b({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Lm(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function ha(){const{dragDropManager:t}=M.useContext(lb);return ye(t!=null,"Expected drag drop context"),t}function K4(t,e){const n=ha(),r=M.useMemo(()=>new q4(n.getBackend()),[n]);return na(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),na(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function G4(){const t=ha();return M.useMemo(()=>new V4(t),[t])}class Q4{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function Y4(t,e,n){const r=M.useMemo(()=>new Q4(t,e,n),[e,n]);return M.useEffect(()=>{r.spec=t},[t]),r}function X4(t){return M.useMemo(()=>{const e=t.type;return ye(e!=null,"spec.type must be defined"),e},[t])}function J4(t,e,n){const r=ha(),i=Y4(t,e,n),s=X4(t);na(function(){if(s!=null){const[a,u]=$4(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),u}},[r,e,n,i,s])}function Z4(t,e){const n=yb(t,e);ye(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=G4(),i=K4(n.options,n.previewOptions);return J4(n,r,i),[vb(n.collect,r,i),M4(i),j4(i)]}function eV(t){const n=ha().getMonitor(),[r,i]=mb(n,t);return M.useEffect(()=>n.subscribeToOffsetChange(i)),M.useEffect(()=>n.subscribeToStateChange(i)),r}function tV(t){return M.useMemo(()=>t.hooks.dropTarget(),[t])}function nV(t){const e=ha(),n=M.useMemo(()=>new W4(e.getBackend()),[e]);return na(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function rV(){const t=ha();return M.useMemo(()=>new F4(t),[t])}function iV(t){const{accept:e}=t;return M.useMemo(()=>(ye(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class sV{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function oV(t,e){const n=M.useMemo(()=>new sV(t,e),[e]);return M.useEffect(()=>{n.spec=t},[t]),n}function aV(t,e,n){const r=ha(),i=oV(t,e),s=iV(t);na(function(){const[a,u]=U4(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),u},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function lV(t,e){const n=yb(t,e),r=rV(),i=nV(n.options);return aV(n,r,i),[vb(n.collect,r,i),tV(i)]}function wb(t){let e=null;return()=>(e==null&&(e=t()),e)}function uV(t,e){return t.filter(n=>n!==e)}function cV(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class hV{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=cV(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=uV(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class dV{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Eb="__NATIVE_FILE__",Tb="__NATIVE_URL__",Ib="__NATIVE_TEXT__",Sb="__NATIVE_HTML__";var DE=Object.freeze({__proto__:null,FILE:Eb,HTML:Sb,TEXT:Ib,URL:Tb});function rg(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const Mm={[Eb]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Sb]:{exposeProperties:{html:(t,e)=>rg(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Tb]:{exposeProperties:{urls:(t,e)=>rg(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Ib]:{exposeProperties:{text:(t,e)=>rg(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function fV(t,e){const n=Mm[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new dV(n);return r.loadDataTransfer(e),r}function ig(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Mm).filter(n=>{const r=Mm[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const pV=wb(()=>/firefox/i.test(navigator.userAgent)),Cb=wb(()=>!!window.safari);class NE{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let u=0,h=o.length-1,f;for(;u<=h;){f=Math.floor(.5*(u+h));const w=n[f];if(w<e)u=f+1;else if(w>e)h=f-1;else return r[f]}a=Math.max(0,h);const g=e-n[a],v=g*g;return r[a]+i[a]*g+s[a]*v+o[a]*g*v}constructor(e,n){const{length:r}=e,i=[];for(let w=0;w<r;w++)i.push(w);i.sort((w,S)=>e[w]<e[S]?-1:1);const s=[],o=[];let a,u;for(let w=0;w<r-1;w++)a=e[w+1]-e[w],u=n[w+1]-n[w],s.push(a),o.push(u/a);const h=[o[0]];for(let w=0;w<s.length-1;w++){const S=o[w],k=o[w+1];if(S*k<=0)h.push(0);else{a=s[w];const D=s[w+1],b=a+D;h.push(3*b/((b+D)/S+(b+a)/k))}}h.push(o[o.length-1]);const f=[],g=[];let v;for(let w=0;w<h.length-1;w++){v=o[w];const S=h[w],k=1/s[w],D=S+h[w+1]-v-v;f.push((v-S-D)*k),g.push(D*k*k)}this.xs=e,this.ys=n,this.c1s=h,this.c2s=f,this.c3s=g}}const gV=1;function bb(t){const e=t.nodeType===gV?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function Dh(t){return{x:t.clientX,y:t.clientY}}function mV(t){var e;return t.nodeName==="IMG"&&(pV()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function vV(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return Cb()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function yV(t,e,n,r,i){const s=mV(e),a=bb(s?t:e),u={x:n.x-a.x,y:n.y-a.y},{offsetWidth:h,offsetHeight:f}=t,{anchorX:g,anchorY:v}=r,{dragPreviewWidth:w,dragPreviewHeight:S}=vV(s,e,h,f),k=()=>{let W=new NE([0,.5,1],[u.y,u.y/f*S,u.y+S-f]).interpolate(v);return Cb()&&s&&(W+=(window.devicePixelRatio-1)*S),W},D=()=>new NE([0,.5,1],[u.x,u.x/h*w,u.x+w-h]).interpolate(g),{offsetX:b,offsetY:I}=i,A=b===0||b,V=I===0||I;return{x:A?b:D(),y:V?I:k()}}let _V=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function wV(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){wV(t,i,n[i])})}return t}class EV{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return LE({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return LE({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(DE).some(n=>DE[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=fV(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&bb(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=Dh(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,u=ig(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const f=this.monitor.getSourceId(),g=this.sourceNodes.get(f),v=this.sourcePreviewNodes.get(f)||g;if(v){const{anchorX:w,anchorY:S,offsetX:k,offsetY:D}=this.getCurrentSourcePreviewNodeOptions(),A=yV(g,v,o,{anchorX:w,anchorY:S},{offsetX:k,offsetY:D});a.setDragImage(v,A.x,A.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:h}=this.getCurrentSourcePreviewNodeOptions();h?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,u=ig(a);u&&this.beginDragNativeItem(u,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:Dh(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Dh(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else ig(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:Dh(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new _V(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new hV(this.isNodeInDocument)}}let Nh;function TV(){return Nh||(Nh=new Image,Nh.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Nh}const IV=function(e,n,r){return new EV(e,n,r)};function ME({isPremovedPiece:t=!1,piece:e,square:n,squares:r}){const{animationDuration:i,arePiecesDraggable:s,boardWidth:o,boardOrientation:a,chessPieces:u,currentPosition:h,deletePieceFromSquare:f,dropOffBoardAction:g,id:v,isDraggablePiece:w,isWaitingForAnimation:S,onPieceClick:k,onPieceDragBegin:D,onPieceDragEnd:b,onPieceDropOffBoard:I,onPromotionCheck:A,positionDifferences:V}=Xi(),[H,W]=M.useState({opacity:1,zIndex:5,touchAction:"none",cursor:s&&w({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:R,isDragging:E},P,x]=Z4(()=>({type:"piece",item:()=>(D(e,n),{piece:e,square:n,id:v}),end:(L,O)=>{b(e,n),!O.didDrop()&&(g==="trash"&&f(n),I==null||I(n,e))},collect:L=>({canDrag:w({piece:e,sourceSquare:n}),isDragging:!!L.isDragging()})}),[e,n,h,v]);x(TV(),{captureDraggingState:!0}),M.useEffect(()=>{W(L=>Object.assign(Object.assign({},L),{opacity:E?0:1}))},[E]),M.useEffect(()=>{var L;const O=(L=V.removed)===null||L===void 0?void 0:L[n];if(!V.added||!O)return;const Je=Object.entries(V.added).find(([lt,vt])=>vt===O||A(n,lt,O));if(S&&O&&Je&&!t){const lt=n,vt=Je[0];if(lt&&vt){const Qe=o/8;W(J=>Object.assign(Object.assign({},J),{transform:`translate(${(a==="black"?-1:1)*(vt.charCodeAt(0)-lt.charCodeAt(0))*Qe}px, ${(a==="black"?-1:1)*(Number(lt[1])-Number(vt[1]))*Qe}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[V]),M.useEffect(()=>{const{sourceSq:L}=N();L&&W(O=>Object.assign(Object.assign({},O),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[h]),M.useEffect(()=>{W(L=>Object.assign(Object.assign({},L),{cursor:s&&w({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,h,s]);function N(){return{sourceSq:r[n]}}return y.jsx("div",Object.assign({ref:s&&R?P:null,onClick:()=>k(e,n),"data-piece":e,style:H},{children:typeof u[e]=="function"?u[e]({squareWidth:o/8,isDragging:E,square:n}):y.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:y.jsx("g",{children:u[e]})}))}))}function SV({square:t,squareColor:e,setSquares:n,squareHasPremove:r,children:i}){const s=M.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:u,clearArrows:h,currentPosition:f,currentRightClickDown:g,customBoardStyle:v,customDarkSquareStyle:w,customDropSquareStyle:S,customLightSquareStyle:k,customPremoveDarkSquareStyle:D,customPremoveLightSquareStyle:b,customSquare:I,customSquareStyles:A,drawNewArrow:V,handleSetPosition:H,handleSparePieceDrop:W,isWaitingForAnimation:R,lastPieceColour:E,lastSquareDraggedOver:P,onArrowDrawEnd:x,onDragOverSquare:N,onMouseOutSquare:L,onMouseOverSquare:O,onPieceDrop:Je,onPromotionCheck:lt,onRightClickDown:vt,onRightClickUp:Qe,onSquareClick:J,setLastSquareDraggedOver:oe,setPromoteFromSquare:$,setPromoteToSquare:Ae,setShowPromoteDialog:Re}=Xi(),[{isOver:Ve},rt]=lV(()=>({accept:"piece",drop:Pt,collect:ue=>({isOver:!!ue.isOver()})}),[t,f,Je,R,E]);function Pt(ue){if(ue.isSpare){W(ue.piece,t);return}lt(ue.square,t,ue.piece)?o?H(ue.square,t,ue.piece[0]==="w"?"wQ":"bQ"):($(ue.square),Ae(t),Re(!0)):H(ue.square,t,ue.piece,!0)}M.useEffect(()=>{if(s.current){const{x:ue,y:re}=s.current.getBoundingClientRect();n(Fn=>Object.assign(Object.assign({},Fn),{[t]:{x:ue,y:re}}))}},[a,u]);const Ye=Object.assign(Object.assign(Object.assign(Object.assign({},CV(t,u,v)),e==="black"?w:k),r&&(e==="black"?D:b)),Ve&&S);return y.jsx("div",Object.assign({ref:rt,style:Ye,"data-square-color":e,"data-square":t,onTouchMove:ue=>{var re;const Fn=ue.touches[0],Un=document.elementsFromPoint(Fn.clientX,Fn.clientY),yt=(re=Un==null?void 0:Un.find(Ft=>Ft.getAttribute("data-square")))===null||re===void 0?void 0:re.getAttribute("data-square");yt&&yt!==P&&(oe(yt),N(yt))},onMouseOver:ue=>{ue.buttons===2&&g&&V(g,t),!(ue.relatedTarget&&ue.currentTarget.contains(ue.relatedTarget))&&O(t)},onMouseOut:ue=>{ue.relatedTarget&&ue.currentTarget.contains(ue.relatedTarget)||L(t)},onMouseDown:ue=>{ue.button===2&&vt(t)},onMouseUp:ue=>{ue.button===2&&(g&&x(g,t),Qe(t))},onDragEnter:()=>N(t),onClick:()=>{const ue=f[t];J(t,ue),h()},onContextMenu:ue=>{ue.preventDefault()}},{children:typeof I=="string"?y.jsx(I,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},VE(a)),jE),!r&&(A==null?void 0:A[t]))},{children:i})):y.jsx(I,Object.assign({ref:s,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},VE(a)),jE),!r&&(A==null?void 0:A[t]))},{children:i}))}))}const jE={display:"flex",justifyContent:"center"},VE=t=>({width:t/8,height:t/8}),CV=(t,e,n)=>n!=null&&n.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function bV(){const[t,e]=M.useState({}),{arePremovesAllowed:n,boardOrientation:r,boardWidth:i,currentPosition:s,id:o,premoves:a,showBoardNotation:u}=Xi(),h=M.useMemo(()=>{const f=[];return n?(a.forEach((g,v)=>{const{sourceSq:w,targetSq:S,piece:k}=g,D=f.find(b=>{var I;return b.piece===k&&((I=b.premovesRoute.at(-1))===null||I===void 0?void 0:I.targetSq)===w});D?D.premovesRoute.push({sourceSq:w,targetSq:S,index:v}):f.push({piece:k,premovesRoute:[{sourceSq:w,targetSq:S,index:v}]})}),f):[]},[a]);return y.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((f,g)=>y.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((v,w)=>{const S=r==="black"?_c[7-w]+(g+1):_c[w]+(8-g),k=w%2===g%2?"white":"black",D=a.find(I=>I.sourceSq===S||I.targetSq===S),b=h.filter(({premovesRoute:I})=>{var A;return((A=I.at(-1))===null||A===void 0?void 0:A.targetSq)===S}).sort((I,A)=>{var V,H;return((V=A.premovesRoute.at(-1))===null||V===void 0?void 0:V.index)-((H=I.premovesRoute.at(-1))===null||H===void 0?void 0:H.index)}).at(0);return y.jsxs(SV,Object.assign({square:S,squareColor:k,setSquares:e,squareHasPremove:!!D},{children:[!D&&s[S]&&y.jsx(ME,{piece:s[S],square:S,squares:t}),b&&y.jsx(ME,{isPremovedPiece:!0,piece:b.piece,square:S,squares:t}),u&&y.jsx(pj,{row:g,col:w})]}),`${w}${g}`)})}),g.toString()))}))}const AV=()=>{const{arrows:t,newArrow:e,boardOrientation:n,boardWidth:r,customArrowColor:i}=Xi(),s=[...t,e].filter(Boolean);return y.jsx("svg",Object.assign({width:r,height:r,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((o,a)=>{const[u,h,f]=o;if(u===h)return null;const g=xm(n,r,u),v=xm(n,r,h);let w=r/32;const S=a===t.length;t.some(A=>A[0]!==u&&A[1]===h)&&!S&&(w=r/16);const k=v.x-g.x,D=v.y-g.y,b=Math.hypot(D,k),I={x:g.x+k*(b-w)/b,y:g.y+D*(b-w)/b};return y.jsxs(M.Fragment,{children:[y.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:y.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:f??i})})),y.jsx("line",{x1:g.x,y1:g.y,x2:I.x,y2:I.y,opacity:S?"0.5":"0.65",stroke:f??i,strokeWidth:S?.9*r/40:r/40,markerEnd:`url(#arrowhead-${a})`})]},`${u}-${h}${S?"-active":""}`)})}))};function kV({option:t}){const[e,n]=M.useState(!1),{boardWidth:r,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:u,promoteFromSquare:h,promoteToSquare:f,promotionDialogVariant:g}=Xi(),v=()=>{switch(t[1]){case"Q":return s.backgroundColor;case"R":return o.backgroundColor;case"N":return g==="default"?o.backgroundColor:s.backgroundColor;case"B":return g==="default"?s.backgroundColor:o.backgroundColor}};return y.jsx("div",Object.assign({onClick:()=>{u(t,h??void 0,f??void 0)&&a(h,f,t,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?v():`${v()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?y.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:r/8,isDragging:!1})})):y.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:r/8,height:r/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:y.jsx("g",{children:i[t]})}))}))}function PV(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:n,promoteToSquare:r}=Xi(),i=(r==null?void 0:r[1])==="1"?"b":"w",s=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=xm(t,e,r||"a8");return y.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[n]),title:"Choose promotion piece"},{children:s.map(u=>y.jsx(kV,{option:u},u))}))}const RV={whiteKing:y.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:y.jsx("g",{children:y.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function xV({children:t}){try{return y.jsx(y.Fragment,{children:t})}catch(e){return console.log(e),y.jsx(Ab,{showError:!0})}}function Ab({showError:t=!1}){return y.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[y.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:RV.whiteKing})),t&&y.jsx("h1",{children:"Something went wrong"})]}))}function OV(){const t=M.useRef(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:r,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:o}=Xi();return M.useEffect(()=>{function a(u){t.current&&!t.current.contains(u.target)&&n()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?y.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:y.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},DV(e)),o)},{children:[y.jsx(bV,{}),y.jsx(AV,{}),s&&y.jsxs(y.Fragment,{children:[y.jsx("div",{onClick:()=>{i(!1),r==null||r()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),y.jsx(PV,{})]})]}))})):y.jsx(Ab,{})}const DV=t=>({cursor:"default",height:t,width:t});var Gs;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(Gs||(Gs={}));class NV{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function LV(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function MV(t,e,n,r,i){if(!i)return!1;const s=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<i.length;++o){const a=i[o];if(a&&(a.start==null||s>=a.start)&&(a.end==null||s<=a.end))return!0}return!1}const jV={Left:1},VV={Left:0};function sg(t){return t.button===void 0||t.button===VV.Left}function FV(t){return t.buttons===void 0||(t.buttons&jV.Left)===0}function kb(t){return!!t.targetTouches}const UV=1;function $V(t){const e=t.nodeType===UV?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function zV(t,e){if(t.targetTouches.length===1)return ef(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return ef(t.touches[0])}function ef(t,e){return kb(t)?zV(t,e):{x:t.clientX,y:t.clientY}}const FE=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),pu={[Gs.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Gs.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Gs.keyboard]:{keydown:"keydown"}};class Hu{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(ye(!Hu.isSetUp,"Cannot have two Touch backends at the same time."),Hu.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Hu.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,i=!1){const s=FE?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=pu[o][n];a&&e.addEventListener(a,r,s)})}removeEventListener(e,n,r,i=!1){const s=FE?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=pu[o][n];a&&e.removeEventListener(a,r,s)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const i=s=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(s.type){case pu.mouse.move:o={x:s.clientX,y:s.clientY};break;case pu.touch.move:var a,u;o={x:((a=s.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((u=s.touches[0])===null||u===void 0?void 0:u.clientY)||0};break}const h=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,f=h&&n.contains(h);if(h===n||f)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&$V(s)},this.handleTopMoveStartCapture=i=>{sg(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!sg(i))return;const s=ef(i);s&&(kb(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!sg(i))return;const s=i.type===pu.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,u=ef(i,this.lastTargetTouchFallback);if(!u)return;if(this._isScrolling||!this.monitor.isDragging()&&MV(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&LV(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const h=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(h),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const f=(o||[]).map(S=>this.targetNodes.get(S)).filter(S=>!!S),g=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(u.x,u.y,f):this.document.elementsFromPoint(u.x,u.y),v=[];for(const S in g){if(!g.hasOwnProperty(S))continue;let k=g[S];for(k!=null&&v.push(k);k;)k=k.parentElement,k&&v.indexOf(k)===-1&&v.push(k)}const w=v.filter(S=>f.indexOf(S)>-1).map(S=>this._getDropTargetId(S)).filter(S=>!!S).filter((S,k,D)=>D.indexOf(S)===k);if(a)for(const S in this.targetNodes){const k=this.targetNodes.get(S);if(h&&k&&k.contains(h)&&w.indexOf(S)===-1){w.unshift(S);break}}w.reverse(),this.actions.hover(w,{clientOffset:u})},this._getDropTargetId=i=>{const s=this.targetNodes.keys();let o=s.next();for(;o.done===!1;){const a=o.value;if(i===this.targetNodes.get(a))return a;o=s.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!FV(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new NV(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Gs.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Gs.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Gs.keyboard)}}const BV=function(e,n={},r={}){return new Hu(e,n,r)},HV=M.createContext({isCustomDndProviderSet:!1}),qV=({children:t})=>y.jsx(y.Fragment,{children:t}),WV=({customDndBackend:t,customDndBackendOptions:e,children:n})=>{const[r,i]=M.useState(),[s,o]=M.useState(!1),[a,u]=M.useState(!1),{isCustomDndProviderSet:h}=M.useContext(HV);M.useEffect(()=>{u("ontouchstart"in window),o(!0),i(window)},[]);const f=h?qV:x4;return s?r?y.jsx(f,Object.assign({backend:t||(a?BV:IV),context:r,options:t?e:void 0},{children:n})):y.jsx(y.Fragment,{children:n}):null};function KV({boardContainer:t}){const{boardWidth:e,chessPieces:n,id:r,snapToCursor:i,allowDragOutsideBoard:s}=Xi(),o=eV(v=>({item:v.getItem(),clientOffset:v.getClientOffset(),sourceClientOffset:v.getSourceClientOffset(),isDragging:v.isDragging()})),{isDragging:a,item:u,clientOffset:h,sourceClientOffset:f}=o,g=M.useCallback((v,w)=>{if(!v||!w)return{display:"none"};let{x:S,y:k}=i?v:w;const D=e/8/2;if(i&&(S-=D,k-=D),!s){const{left:I,top:A}=t,V=I-D,H=A-D,W=I+e-D,R=A+e-D;S=Math.max(V,Math.min(S,W)),k=Math.max(H,Math.min(k,R))}const b=`translate(${S}px, ${k}px)`;return{transform:b,WebkitTransform:b,touchAction:"none"}},[e,s,i,t]);return a&&u.id===r?y.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:y.jsx("div",Object.assign({style:g(h,f)},{children:typeof n[u.piece]=="function"?n[u.piece]({squareWidth:e/8,isDragging:!0}):y.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:y.jsx("g",{children:n[u.piece]})}))}))})):null}const Pb=M.forwardRef((t,e)=>{const{customDndBackend:n,customDndBackendOptions:r,onBoardWidthChange:i}=t,s=nj(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=M.useState(t.boardWidth),u=M.useRef(null),h=M.useRef(null),[f,g]=M.useState({left:0,top:0}),v=M.useMemo(()=>{var w;return(w=u.current)===null||w===void 0?void 0:w.getBoundingClientRect()},[u.current]);return M.useEffect(()=>{o&&(i==null||i(o))},[o]),M.useEffect(()=>{g({left:v!=null&&v.left?v==null?void 0:v.left:0,top:v!=null&&v.top?v==null?void 0:v.top:0})},[v]),M.useEffect(()=>{var w;if(t.boardWidth===void 0&&(!((w=u.current)===null||w===void 0)&&w.offsetWidth)){const S=new ResizeObserver(()=>{var k;a((k=u.current)===null||k===void 0?void 0:k.offsetWidth)});return S.observe(u.current),()=>{S.disconnect()}}},[u.current]),y.jsx(xV,{children:y.jsxs("div",Object.assign({ref:h,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[y.jsx("div",{ref:u,style:{width:"100%"}}),y.jsx(WV,Object.assign({customDndBackend:n,customDndBackendOptions:r},{children:o&&y.jsxs(fj,Object.assign({boardWidth:o},s,{ref:e},{children:[y.jsx(KV,{boardContainer:f}),y.jsx(OV,{})]}))}))]}))})});/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const un="w",gr="b",zt="p",jm="n",ad="b",bu="r",Ss="q",Dt="k",og="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",xn=-1,GV={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},fe={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},_e={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ag={b:[16,32,17,15],w:[-16,-32,-17,-15]},UE={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},QV=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],YV=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],XV={p:1,n:2,b:4,r:8,q:16,k:32},JV="pnbrqkPNBRQK",$E=[jm,ad,bu,Ss],ZV=7,eF=6,tF=1,nF=0,Lh={[Dt]:fe.KSIDE_CASTLE,[Ss]:fe.QSIDE_CASTLE},ws={w:[{square:_e.a1,flag:fe.QSIDE_CASTLE},{square:_e.h1,flag:fe.KSIDE_CASTLE}],b:[{square:_e.a8,flag:fe.QSIDE_CASTLE},{square:_e.h8,flag:fe.KSIDE_CASTLE}]},rF={b:tF,w:eF},iF=["1-0","0-1","1/2-1/2","*"];function Ho(t){return t>>4}function wc(t){return t&15}function Rb(t){return"0123456789".indexOf(t)!==-1}function Wn(t){const e=wc(t),n=Ho(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function gu(t){return t===un?gr:un}function sF(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let a=0,u=!1;for(let h=0;h<i[o].length;h++)if(Rb(i[o][h])){if(u)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(i[o][h],10),u=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][h]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,u=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of s){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function oF(t,e){const n=t.from,r=t.to,i=t.piece;let s=0,o=0,a=0;for(let u=0,h=e.length;u<h;u++){const f=e[u].from,g=e[u].to,v=e[u].piece;i===v&&n!==f&&r===g&&(s++,Ho(n)===Ho(f)&&o++,wc(n)===wc(f)&&a++)}return s>0?o>0&&a>0?Wn(n):a>0?Wn(n).charAt(1):Wn(n).charAt(0):""}function Es(t,e,n,r,i,s=void 0,o=fe.NORMAL){const a=Ho(r);if(i===zt&&(a===ZV||a===nF))for(let u=0;u<$E.length;u++){const h=$E[u];t.push({color:e,from:n,to:r,piece:i,captured:s,promotion:h,flags:o|fe.PROMOTION})}else t.push({color:e,from:n,to:r,piece:i,captured:s,flags:o})}function zE(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:zt:(e=e.toLowerCase(),e==="o"?Dt:e)}function lg(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function ug(t){return t.split(" ").slice(0,4).join(" ")}class xi{constructor(e=og){fr(this,"_board",new Array(128));fr(this,"_turn",un);fr(this,"_header",{});fr(this,"_kings",{w:xn,b:xn});fr(this,"_epSquare",-1);fr(this,"_halfMoves",0);fr(this,"_moveNumber",0);fr(this,"_history",[]);fr(this,"_comments",{});fr(this,"_castling",{w:0,b:0});fr(this,"_positionCount",{});this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:xn,b:xn},this._turn=un,this._castling={w:0,b:0},this._epSquare=xn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const a=["-","-","0","1"];e=i.concat(a.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:a,error:u}=sF(e);if(!a)throw new Error(u)}const s=i[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<s.length;a++){const u=s.charAt(a);if(u==="/")o+=8;else if(Rb(u))o+=parseInt(u,10);else{const h=u<"a"?un:gr;this._put({type:u.toLowerCase(),color:h},Wn(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=fe.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=fe.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=fe.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=fe.QSIDE_CASTLE),this._epSquare=i[3]==="-"?xn:_e[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var s,o;let e=0,n="";for(let a=_e.a8;a<=_e.h1;a++){if(this._board[a]){e>0&&(n+=e,e=0);const{color:u,type:h}=this._board[a];n+=u===un?h.toUpperCase():h.toLowerCase()}else e++;a+1&136&&(e>0&&(n+=e),a!==_e.h1&&(n+="/"),e=0,a+=8)}let r="";this._castling[un]&fe.KSIDE_CASTLE&&(r+="K"),this._castling[un]&fe.QSIDE_CASTLE&&(r+="Q"),this._castling[gr]&fe.KSIDE_CASTLE&&(r+="k"),this._castling[gr]&fe.QSIDE_CASTLE&&(r+="q"),r=r||"-";let i="-";if(this._epSquare!==xn){const a=this._epSquare+(this._turn===un?16:-16),u=[a+1,a-1];for(const h of u){if(h&136)continue;const f=this._turn;if(((s=this._board[h])==null?void 0:s.color)===f&&((o=this._board[h])==null?void 0:o.type)===zt){this._makeMove({color:f,from:h,to:this._epSquare,piece:zt,captured:zt,flags:fe.EP_CAPTURE});const g=!this._isKingAttacked(f);if(this._undoMove(),g){i=Wn(this._epSquare);break}}}}return[n,this._turn,r,i,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==og?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(og)}get(e){return this._board[_e[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(JV.indexOf(e.toLowerCase())===-1||!(r in _e))return!1;const i=_e[r];if(e==Dt&&!(this._kings[n]==xn||this._kings[n]==i))return!1;const s=this._board[i];return s&&s.type===Dt&&(this._kings[s.color]=xn),this._board[i]={type:e,color:n},e===Dt&&(this._kings[n]=i),!0}remove(e){const n=this.get(e);return delete this._board[_e[e]],n&&n.type===Dt&&(this._kings[n.color]=xn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,i,s,o,a,u,h,f,g,v,w,S;const e=((r=this._board[_e.e1])==null?void 0:r.type)===Dt&&((i=this._board[_e.e1])==null?void 0:i.color)===un,n=((s=this._board[_e.e8])==null?void 0:s.type)===Dt&&((o=this._board[_e.e8])==null?void 0:o.color)===gr;(!e||((a=this._board[_e.a1])==null?void 0:a.type)!==bu||((u=this._board[_e.a1])==null?void 0:u.color)!==un)&&(this._castling.w&=~fe.QSIDE_CASTLE),(!e||((h=this._board[_e.h1])==null?void 0:h.type)!==bu||((f=this._board[_e.h1])==null?void 0:f.color)!==un)&&(this._castling.w&=~fe.KSIDE_CASTLE),(!n||((g=this._board[_e.a8])==null?void 0:g.type)!==bu||((v=this._board[_e.a8])==null?void 0:v.color)!==gr)&&(this._castling.b&=~fe.QSIDE_CASTLE),(!n||((w=this._board[_e.h8])==null?void 0:w.type)!==bu||((S=this._board[_e.h8])==null?void 0:S.color)!==gr)&&(this._castling.b&=~fe.KSIDE_CASTLE)}_updateEnPassantSquare(){var s,o;if(this._epSquare===xn)return;const e=this._epSquare+(this._turn===un?-16:16),n=this._epSquare+(this._turn===un?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((s=this._board[n])==null?void 0:s.color)!==gu(this._turn)||((o=this._board[n])==null?void 0:o.type)!==zt){this._epSquare=xn;return}const i=a=>{var u,h;return!(a&136)&&((u=this._board[a])==null?void 0:u.color)===this._turn&&((h=this._board[a])==null?void 0:h.type)===zt};r.some(i)||(this._epSquare=xn)}_attacked(e,n){for(let r=_e.a8;r<=_e.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const i=this._board[r],s=r-n;if(s===0)continue;const o=s+119;if(QV[o]&XV[i.type]){if(i.type===zt){if(s>0){if(i.color===un)return!0}else if(i.color===gr)return!0;continue}if(i.type==="n"||i.type==="k")return!0;const a=YV[o];let u=r+a,h=!1;for(;u!==n;){if(this._board[u]!=null){h=!0;break}u+=a}if(!h)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(gu(e),n)}isAttacked(e,n){return this._attacked(n,_e[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,i=0;for(let s=_e.a8;s<=_e.h1;s++){if(i=(i+1)%2,s&136){s+=7;continue}const o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===ad&&n.push(i),r++)}if(r===2)return!0;if(r===3&&(e[ad]===1||e[jm]===1))return!0;if(r===e[ad]+2){let s=0;const o=n.length;for(let a=0;a<o;a++)s+=n[a];if(s===0||s===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const i=this._moves({square:n,piece:r});return e?i.map(s=>this._makePretty(s)):i.map(s=>this._moveToSan(s,i))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var w;const i=r?r.toLowerCase():void 0,s=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,u=gu(a);let h=_e.a8,f=_e.h1,g=!1;if(i)if(i in _e)h=f=_e[i],g=!0;else return[];for(let S=h;S<=f;S++){if(S&136){S+=7;continue}if(!this._board[S]||this._board[S].color===u)continue;const{type:k}=this._board[S];let D;if(k===zt){if(s&&s!==k)continue;D=S+ag[a][0],this._board[D]||(Es(o,a,S,D,zt),D=S+ag[a][1],rF[a]===Ho(S)&&!this._board[D]&&Es(o,a,S,D,zt,void 0,fe.BIG_PAWN));for(let b=2;b<4;b++)D=S+ag[a][b],!(D&136)&&(((w=this._board[D])==null?void 0:w.color)===u?Es(o,a,S,D,zt,this._board[D].type,fe.CAPTURE):D===this._epSquare&&Es(o,a,S,D,zt,zt,fe.EP_CAPTURE))}else{if(s&&s!==k)continue;for(let b=0,I=UE[k].length;b<I;b++){const A=UE[k][b];for(D=S;D+=A,!(D&136);){if(!this._board[D])Es(o,a,S,D,k);else{if(this._board[D].color===a)break;Es(o,a,S,D,k,this._board[D].type,fe.CAPTURE);break}if(k===jm||k===Dt)break}}}}if((s===void 0||s===Dt)&&(!g||f===this._kings[a])){if(this._castling[a]&fe.KSIDE_CASTLE){const S=this._kings[a],k=S+2;!this._board[S+1]&&!this._board[k]&&!this._attacked(u,this._kings[a])&&!this._attacked(u,S+1)&&!this._attacked(u,k)&&Es(o,a,this._kings[a],k,Dt,void 0,fe.KSIDE_CASTLE)}if(this._castling[a]&fe.QSIDE_CASTLE){const S=this._kings[a],k=S-2;!this._board[S-1]&&!this._board[S-2]&&!this._board[S-3]&&!this._attacked(u,this._kings[a])&&!this._attacked(u,S-1)&&!this._attacked(u,k)&&Es(o,a,this._kings[a],k,Dt,void 0,fe.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const v=[];for(let S=0,k=o.length;S<k;S++)this._makeMove(o[S]),this._isKingAttacked(a)||v.push(o[S]),this._undoMove();return v}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const s=this._moves();for(let o=0,a=s.length;o<a;o++)if(e.from===Wn(s[o].from)&&e.to===Wn(s[o].to)&&(!("promotion"in s[o])||e.promotion===s[o].promotion)){r=s[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const i=this._makePretty(r);return this._makeMove(r),this._incPositionCount(i.after),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=gu(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&fe.EP_CAPTURE&&(this._turn===gr?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===Dt){if(this._kings[n]=e.to,e.flags&fe.KSIDE_CASTLE){const i=e.to-1,s=e.to+1;this._board[i]=this._board[s],delete this._board[s]}else if(e.flags&fe.QSIDE_CASTLE){const i=e.to+1,s=e.to-2;this._board[i]=this._board[s],delete this._board[s]}this._castling[n]=0}if(this._castling[n]){for(let i=0,s=ws[n].length;i<s;i++)if(e.from===ws[n][i].square&&this._castling[n]&ws[n][i].flag){this._castling[n]^=ws[n][i].flag;break}}if(this._castling[r]){for(let i=0,s=ws[r].length;i<s;i++)if(e.to===ws[r][i].square&&this._castling[r]&ws[r][i].flag){this._castling[r]^=ws[r][i].flag;break}}e.flags&fe.BIG_PAWN?n===gr?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=xn,e.piece===zt?this._halfMoves=0:e.flags&(fe.CAPTURE|fe.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===gr&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,i=gu(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&fe.EP_CAPTURE){let s;r===gr?s=n.to-16:s=n.to+16,this._board[s]={type:zt,color:i}}else this._board[n.to]={type:n.captured,color:i};if(n.flags&(fe.KSIDE_CASTLE|fe.QSIDE_CASTLE)){let s,o;n.flags&fe.KSIDE_CASTLE?(s=n.to+1,o=n.to-1):(s=n.to-2,o=n.to+1),this._board[s]=this._board[o],delete this._board[o]}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let i=!1;for(const v in this._header)r.push("["+v+' "'+this._header[v]+'"]'+e),i=!0;i&&this._history.length&&r.push(e);const s=v=>{const w=this._comments[this.fen()];if(typeof w<"u"){const S=v.length>0?" ":"";v=`${v}${S}{${w}}`}return v},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let u="";for(o.length===0&&a.push(s(""));o.length>0;){u=s(u);const v=o.pop();if(!v)break;if(!this._history.length&&v.color==="b"){const w=`${this._moveNumber}. ...`;u=u?`${u} ${w}`:w}else v.color==="w"&&(u.length&&a.push(u),u=this._moveNumber+".");u=u+" "+this._moveToSan(v,this._moves({legal:!0})),this._makeMove(v)}if(u.length&&a.push(s(u)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const h=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},f=function(v,w){for(const S of w.split(" "))if(S){if(v+S.length>n){for(;h();)v--;r.push(e),v=0}r.push(S),v+=S.length,r.push(" "),v++}return h()&&v--,v};let g=0;for(let v=0;v<a.length;v++){if(g+a[v].length>n&&a[v].includes("{")){g=f(g,a[v]);continue}g+a[v].length>n&&v!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),g=0):v!==0&&(r.push(" "),g++),r.push(a[v]),g+=a[v].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){function i(A){return A.replace(/\\/g,"\\")}function s(A){const V={},H=A.split(new RegExp(i(r)));let W="",R="";for(let E=0;E<H.length;E++){const P=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;W=H[E].replace(P,"$1"),R=H[E].replace(P,"$2"),W.trim().length>0&&(V[W]=R)}return V}e=e.trim();const a=new RegExp("^(\\[((?:"+i(r)+")|.)*\\])((?:\\s*"+i(r)+"){2}|(?:\\s*"+i(r)+")*$)").exec(e),u=a&&a.length>=2?a[1]:"";this.reset();const h=s(u);let f="";for(const A in h)A.toLowerCase()==="fen"&&(f=h[A]),this.header(A,h[A]);if(!n)f&&this.load(f,{preserveHeaders:!0});else if(h.SetUp==="1"){if(!("FEN"in h))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(h.FEN,{preserveHeaders:!0})}function g(A){return Array.from(A).map(function(V){return V.charCodeAt(0)<128?V.charCodeAt(0).toString(16):encodeURIComponent(V).replace(/%/g,"").toLowerCase()}).join("")}function v(A){return A.length==0?"":decodeURIComponent("%"+(A.match(/.{1,2}/g)||[]).join("%"))}const w=function(A){return A=A.replace(new RegExp(i(r),"g")," "),`{${g(A.slice(1,A.length-1))}}`},S=function(A){if(A.startsWith("{")&&A.endsWith("}"))return v(A.slice(1,A.length-1))};let k=e.replace(u,"").replace(new RegExp(`({[^}]*})+?|;([^${i(r)}]*)`,"g"),function(A,V,H){return V!==void 0?w(V):" "+w(`{${H.slice(1)}}`)}).replace(new RegExp(i(r),"g")," ");const D=/(\([^()]+\))+?/g;for(;D.test(k);)k=k.replace(D,"");k=k.replace(/\d+\.(\.\.)?/g,""),k=k.replace(/\.\.\./g,""),k=k.replace(/\$\d+/g,"");let b=k.trim().split(new RegExp(/\s+/));b=b.filter(A=>A!=="");let I="";for(let A=0;A<b.length;A++){const V=S(b[A]);if(V!==void 0){this._comments[this.fen()]=V;continue}const H=this._moveFromSan(b[A],n);if(H==null)if(iF.indexOf(b[A])>-1)I=b[A];else throw new Error(`Invalid move in PGN: ${b[A]}`);else I="",this._makeMove(H),this._incPositionCount(this.fen())}I&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",I)}_moveToSan(e,n){let r="";if(e.flags&fe.KSIDE_CASTLE)r="O-O";else if(e.flags&fe.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==zt){const i=oF(e,n);r+=e.piece.toUpperCase()+i}e.flags&(fe.CAPTURE|fe.EP_CAPTURE)&&(e.piece===zt&&(r+=Wn(e.from)[0]),r+="x"),r+=Wn(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=lg(e);let i=zE(r),s=this._moves({legal:!0,piece:i});for(let v=0,w=s.length;v<w;v++)if(r===lg(this._moveToSan(s[v],s)))return s[v];if(n)return null;let o,a,u,h,f,g=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],u=a[2],h=a[3],f=a[4],u.length==1&&(g=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],u=a[2],h=a[3],f=a[4],u.length==1&&(g=!0))),i=zE(r),s=this._moves({legal:!0,piece:o||i}),!h)return null;for(let v=0,w=s.length;v<w;v++)if(u){if((!o||o.toLowerCase()==s[v].piece)&&_e[u]==s[v].from&&_e[h]==s[v].to&&(!f||f.toLowerCase()==s[v].promotion))return s[v];if(g){const S=Wn(s[v].from);if((!o||o.toLowerCase()==s[v].piece)&&_e[h]==s[v].to&&(u==S[0]||u==S[1])&&(!f||f.toLowerCase()==s[v].promotion))return s[v]}}else if(r===lg(this._moveToSan(s[v],s)).replace("x",""))return s[v];return null}ascii(){let e=`   +------------------------+
`;for(let n=_e.a8;n<=_e.h1;n++){if(wc(n)===0&&(e+=" "+"87654321"[Ho(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===un?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const i=this._turn;for(let s=0,o=n.length;s<o;s++)this._makeMove(n[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:i,to:s,flags:o,captured:a,promotion:u}=e;let h="";for(const w in fe)fe[w]&o&&(h+=GV[w]);const f=Wn(i),g=Wn(s),v={color:n,piece:r,from:f,to:g,san:this._moveToSan(e,this._moves({legal:!0})),flags:h,lan:f+g,before:this.fen(),after:""};return this._makeMove(e),v.after=this.fen(),this._undoMove(),a&&(v.captured=a),u&&(v.promotion=u,v.lan+=u),v}turn(){return this._turn}board(){const e=[];let n=[];for(let r=_e.a8;r<=_e.h1;r++)this._board[r]==null?n.push(null):n.push({square:Wn(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in _e){const n=_e[e];return(Ho(n)+wc(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){const n=ug(e);return this._positionCount[n]||0}_incPositionCount(e){const n=ug(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=ug(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[Dt,Ss])n[i]!==void 0&&(n[i]?this._castling[e]|=Lh[i]:this._castling[e]&=~Lh[i]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[Dt]===void 0||n[Dt]===r[Dt])&&(n[Ss]===void 0||n[Ss]===r[Ss])}getCastlingRights(e){return{[Dt]:(this._castling[e]&Lh[Dt])!==0,[Ss]:(this._castling[e]&Lh[Ss])!==0}}moveNumber(){return this._moveNumber}}const tf=({timeInMinutes:t,increment:e,isActive:n,color:r,onTimeout:i,onTimeUpdate:s})=>{const[o,a]=M.useState(t*60),[u,h]=M.useState(null),f=M.useCallback(()=>{const v=Date.now();if(u){const w=(v-u)/1e3;a(S=>{const k=Math.max(0,S-w);return s==null||s(k),k})}h(v)},[u,s]);M.useEffect(()=>{let v;return n&&o>0?v=window.requestAnimationFrame(function w(){f(),v=window.requestAnimationFrame(w)}):!n&&u&&(a(w=>w+e),h(null)),o<=0&&i(),()=>{v&&window.cancelAnimationFrame(v)}},[n,o,e,f,i,u]);const g=v=>{if(v<10)return v.toFixed(1);const w=Math.floor(v/60),S=Math.floor(v%60);return`${w}:${S.toString().padStart(2,"0")}`};return y.jsx("div",{className:`chess-clock ${r} ${n?"active":""}`,children:g(o)})},Au=({isPuzzle:t=!1,timeControl:e})=>{const[n,r]=M.useState(null),[i,s]=M.useState(null),[o,a]=M.useState("Cargando puzzle..."),[u,h]=M.useState(0),[f,g]=M.useState("white");M.useEffect(()=>{let S=!0,k=!1;return t&&(async()=>{try{if(n||i||k)return;k=!0;const b=await fetch("https://lichess.org/api/puzzle/daily");if(!b.ok)throw new Error("Error al cargar el puzzle");const I=await b.json(),A=new xi;try{A.loadPgn(I.game.pgn);const V=A.history();console.log("Movimientos totales:",V.length),console.log("Initial Ply:",I.puzzle.initialPly),console.log("Moves:",V),A.reset();for(let R=0;R<I.puzzle.initialPly;R++)A.move(V[R]);const H=A.fen(),W=V[I.puzzle.initialPly];if(console.log("Siguiente movimiento:",W),!W){console.error("No se encontró el siguiente movimiento"),S&&a("Error al cargar el puzzle. Intenta recargar la página.");return}S&&(s({fen:H,moves:I.puzzle.solution,rating:I.puzzle.rating,themes:I.puzzle.themes}),r(new xi(H)),a("Observa el movimiento del oponente..."),setTimeout(()=>{if(!S)return;const R=new xi(H);try{if(console.log("Intentando mover:",W),!R.move(W))throw new Error(`Movimiento inválido: ${W}`);r(R),a("Tu turno - Encuentra el mejor movimiento")}catch(E){console.error("Error al realizar el movimiento:",E),a("Error al cargar el puzzle. Intenta recargar la página.")}},1e3))}catch(V){console.error("Error al procesar el puzzle:",V),S&&a("Error al cargar el puzzle. Intenta recargar la página.")}}catch(b){console.error("Error al obtener el puzzle:",b),S&&a("Error al cargar el puzzle. Intenta recargar la página.")}})(),()=>{S=!1}},[t]);function v(S){return S.includes("O-O-O")?{from:"e1",to:"c1"}:S.includes("O-O")?{from:"e1",to:"g1"}:{from:S.slice(0,2),to:S.slice(2,4),promotion:S.length===5?S[4]:void 0}}function w(S){if(!n||!i)return!1;try{const k=new xi(n.fen());if(k.move(S)){const b=i.moves[u],I=v(b),A=k.fen().split(" ")[0],V=new xi(n.fen()),W=V.move(I)?V.fen().split(" ")[0]:"";if(A===W)return r(k),u===i.moves.length-1?(a("¡Felicidades! 🎉 Has resuelto el puzzle correctamente."),!0):(h(u+1),setTimeout(()=>{if(u+1<i.moves.length){const R=i.moves[u+1],E=R.slice(0,2),P=R.slice(2,4);k.move({from:E,to:P,promotion:R.length===5?R[4]:void 0})&&(r(new xi(k.fen())),h(u+2),a("Tu turno"))}},500),!0)}return a("Movimiento incorrecto. Intenta de nuevo."),!1}catch(k){return console.error("Error en makeAMove:",k),!1}}return y.jsxs("div",{className:"board-container",children:[e&&y.jsx(tf,{timeInMinutes:e.time,increment:e.increment,isActive:f==="black",color:"black",onTimeout:()=>{}}),n&&y.jsx(Pb,{position:n.fen(),boardOrientation:"white",onPieceDrop:(S,k)=>{const D=w({from:S,to:k,promotion:"q"});return D&&g(n.turn()==="w"?"white":"black"),D}}),e&&y.jsx(tf,{timeInMinutes:e.time,increment:e.increment,isActive:f==="white",color:"white",onTimeout:()=>{}}),o&&y.jsx("div",{className:"puzzle-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:i&&u===i.moves.length-1?"#e6ffe6":"#fff",border:"1px solid #ccc",borderRadius:"4px"},children:o})]})},xb=M.createContext({currentUser:null,loading:!0}),aF=()=>M.useContext(xb),lF=({children:t})=>{const[e,n]=M.useState(null),[r,i]=M.useState(!0);M.useEffect(()=>Ge.onAuthStateChanged(a=>{n(a),i(!1)}),[]);const s={currentUser:e,loading:r};return y.jsx(xb.Provider,{value:s,children:!r&&t})},Ml=()=>{const{currentUser:t}=aF(),e=async()=>{try{await nS(Ge)}catch(n){console.error("Error al cerrar sesión:",n)}};return y.jsxs("header",{className:"main-header",children:[y.jsxs(Xn,{to:"/",className:"logo",children:[y.jsx("i",{className:"fas fa-chess-knight logo-icon"}),y.jsxs("div",{className:"logo-text",children:[y.jsx("span",{className:"logo-chess",children:"CHESS"}),y.jsx("span",{className:"logo-match",children:"MATCH"})]})]}),y.jsx("div",{className:"auth-buttons",children:t?y.jsxs("button",{onClick:e,className:"btn-logout",children:[y.jsx("i",{className:"fas fa-sign-out-alt"}),"Cerrar sesión"]}):y.jsxs(y.Fragment,{children:[y.jsx(Xn,{to:"/register",className:"btn-signup",children:"Registrarse"}),y.jsx(Xn,{to:"/login",className:"btn-login",children:"Iniciar sesión"})]})})]})},BE=()=>(M.useEffect(()=>{console.log("Home montado");const t=document.querySelectorAll(".game-button");console.log("Botones encontrados:",t.length)},[]),console.log("Renderizando componente Home"),console.log("Estilos cargados:",document.styleSheets),y.jsxs("div",{className:"page-container",children:[y.jsx(Ml,{}),y.jsx("div",{className:"home-container",children:y.jsxs("div",{className:"game-options",children:[y.jsx("h1",{children:"Play Chess Online on the #1 Site!"}),y.jsxs("div",{className:"stats",children:[y.jsx("span",{className:"games-today",children:"13,562,492 Games Today"}),y.jsx("span",{className:"playing-now",children:"118,172 Playing Now"})]}),y.jsxs("div",{className:"game-buttons",children:[y.jsxs(Xn,{to:"/play/online",className:"game-button primary",children:[y.jsx("span",{className:"icon",children:"👥"}),y.jsxs("div",{className:"button-content",children:[y.jsx("h3",{children:"Play Online"}),y.jsx("p",{children:"Play with someone at your level"})]})]}),y.jsxs(Xn,{to:"/play/computer",className:"game-button",children:[y.jsx("span",{className:"icon",children:"🖥️"}),y.jsxs("div",{className:"button-content",children:[y.jsx("h3",{children:"Play Computer"}),y.jsx("p",{children:"Play vs customizable training bots"})]})]})]}),y.jsxs("div",{className:"puzzle-section",children:[y.jsx("h2",{children:"Solve Chess Puzzles"}),y.jsx("div",{className:"mini-board",children:y.jsx(Au,{isPuzzle:!0})}),y.jsx("div",{className:"quote",children:y.jsxs("p",{children:['"En Ajedrez, el vencedor es quien hace la siguiente jugada al último error." ',y.jsx("br",{})," GM S. Tartakower"]})}),y.jsx("button",{className:"game-button",children:"Solve Puzzles"})]}),y.jsx("button",{className:"game-button chess-today",children:"Chess Today"})]})})]}));let uF={data:""},cF=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||uF,hF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dF=/\/\*[^]*?\*\/|  +/g,HE=/\n+/g,Rs=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Rs(o,s):s+"{"+Rs(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Rs(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,a):a?a+" "+u:u)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Rs.p?Rs.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},ki={},Ob=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Ob(t[n]);return e}return t},fF=(t,e,n,r,i)=>{let s=Ob(t),o=ki[s]||(ki[s]=(u=>{let h=0,f=11;for(;h<u.length;)f=101*f+u.charCodeAt(h++)>>>0;return"go"+f})(s));if(!ki[o]){let u=s!==t?t:(h=>{let f,g,v=[{}];for(;f=hF.exec(h.replace(dF,""));)f[4]?v.shift():f[3]?(g=f[3].replace(HE," ").trim(),v.unshift(v[0][g]=v[0][g]||{})):v[0][f[1]]=f[2].replace(HE," ").trim();return v[0]})(t);ki[o]=Rs(i?{["@keyframes "+o]:u}:u,n?"":"."+o)}let a=n&&ki.g?ki.g:null;return n&&(ki.g=ki[o]),((u,h,f,g)=>{g?h.data=h.data.replace(g,u):h.data.indexOf(u)===-1&&(h.data=f?u+h.data:h.data+u)})(ki[o],e,r,a),o},pF=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),u=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=u?"."+u:a&&typeof a=="object"?a.props?"":Rs(a,""):a===!1?"":a}return r+i+(o??"")},"");function Yf(t){let e=this||{},n=t.call?t(e.p):t;return fF(n.unshift?n.raw?pF(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,cF(e.target),e.g,e.o,e.k)}let Db,Vm,Fm;Yf.bind({g:1});let Ki=Yf.bind({k:1});function gF(t,e,n,r){Rs.p=e,Db=t,Vm=n,Fm=r}function co(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),u=a.className||i.className;n.p=Object.assign({theme:Vm&&Vm()},a),n.o=/ *go\d+/.test(u),a.className=Yf.apply(n,r)+(u?" "+u:"");let h=t;return t[0]&&(h=a.as||t,delete a.as),Fm&&h[0]&&Fm(a),Db(h,a)}return i}}var mF=t=>typeof t=="function",Um=(t,e)=>mF(t)?t(e):t,vF=(()=>{let t=0;return()=>(++t).toString()})(),yF=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),_F=20,ld=new Map,wF=1e3,qE=t=>{if(ld.has(t))return;let e=setTimeout(()=>{ld.delete(t),Xf({type:4,toastId:t})},wF);ld.set(t,e)},EF=t=>{let e=ld.get(t);e&&clearTimeout(e)},$m=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,_F)};case 1:return e.toast.id&&EF(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?$m(t,{type:1,toast:n}):$m(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?qE(r):t.toasts.forEach(s=>{qE(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},TF=[],cg={toasts:[],pausedAt:void 0},Xf=t=>{cg=$m(cg,t),TF.forEach(e=>{e(cg)})},IF=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||vF()}),Mc=t=>(e,n)=>{let r=IF(e,t,n);return Xf({type:2,toast:r}),r.id},Te=(t,e)=>Mc("blank")(t,e);Te.error=Mc("error");Te.success=Mc("success");Te.loading=Mc("loading");Te.custom=Mc("custom");Te.dismiss=t=>{Xf({type:3,toastId:t})};Te.remove=t=>Xf({type:4,toastId:t});Te.promise=(t,e,n)=>{let r=Te.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(Te.success(Um(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{Te.error(Um(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var SF=Ki`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,CF=Ki`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bF=Ki`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AF=co("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${SF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${CF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${bF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,kF=Ki`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,PF=co("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${kF} 1s linear infinite;
`,RF=Ki`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xF=Ki`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,OF=co("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,DF=co("div")`
  position: absolute;
`,NF=co("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,LF=Ki`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,MF=co("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${LF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jF=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?M.createElement(MF,null,e):e:n==="blank"?null:M.createElement(NF,null,M.createElement(PF,{...r}),n!=="loading"&&M.createElement(DF,null,n==="error"?M.createElement(AF,{...r}):M.createElement(OF,{...r})))},VF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,FF=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,UF="0%{opacity:0;} 100%{opacity:1;}",$F="0%{opacity:1;} 100%{opacity:0;}",zF=co("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,BF=co("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,HF=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=yF()?[UF,$F]:[VF(n),FF(n)];return{animation:e?`${Ki(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ki(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};M.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?HF(t.position||e||"top-center",t.visible):{opacity:0},s=M.createElement(jF,{toast:t}),o=M.createElement(BF,{...t.ariaProps},Um(t.message,t));return M.createElement(zF,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):M.createElement(M.Fragment,null,s,o))});gF(M.createElement);Yf`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const qF=()=>{var g;const t=oa(),n=((g=sa().state)==null?void 0:g.redirect)||"/lobby",[r,i]=M.useState(""),[s,o]=M.useState(""),[a,u]=M.useState(!1),h=async v=>{v.preventDefault();try{await lD(Ge,r,s),t(n)}catch(w){console.error("Error al iniciar sesión:",w),w.code==="auth/invalid-credential"?Te.error("Email o contraseña incorrectos"):w.code==="auth/user-not-found"?Te.error("Usuario no encontrado"):w.code==="auth/wrong-password"?Te.error("Contraseña incorrecta"):Te.error("Error al iniciar sesión")}},f=async()=>{const v=new li;try{const w=await fS(Ge,v);if(!(await Sl(Qt(Yt,"users",w.user.uid))).exists()){t("/complete-profile",{state:{uid:w.user.uid,email:w.user.email,photoURL:w.user.photoURL}});return}t(n)}catch(w){console.error("Error con Google login:",w),Te.error("Error al iniciar sesión con Google")}};return y.jsxs("div",{className:"page-container",children:[y.jsx(Ml,{}),y.jsx("div",{className:"auth-container",children:y.jsxs("div",{className:"auth-card",children:[y.jsx(Xn,{to:"/",className:"back-button",children:y.jsx("i",{className:"fas fa-arrow-left"})}),y.jsx("h2",{children:"Ingresa tu email y contraseña"}),y.jsx("p",{className:"auth-subtitle",children:"Esto te permite iniciar sesión en cualquier dispositivo"}),y.jsxs("form",{onSubmit:h,children:[y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-envelope"}),y.jsx("input",{type:"email",placeholder:"Email",value:r,onChange:v=>i(v.target.value),required:!0})]})}),y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-lock"}),y.jsx("input",{type:a?"text":"password",placeholder:"Contraseña",value:s,onChange:v=>o(v.target.value),required:!0}),y.jsx("button",{type:"button",className:"toggle-password",onClick:()=>u(!a),children:y.jsx("i",{className:`fas fa-eye${a?"-slash":""}`})})]})}),y.jsx("button",{type:"submit",className:"btn-continue",children:"Continuar"})]}),y.jsx("div",{className:"auth-divider",children:"O"}),y.jsxs("div",{className:"social-buttons",children:[y.jsxs("button",{className:"btn-social google",onClick:f,children:[y.jsx("i",{className:"fab fa-google"}),"Continuar con Google"]}),y.jsxs("button",{className:"btn-social apple",children:[y.jsx("i",{className:"fab fa-apple"}),"Continuar con Apple"]})]}),y.jsxs("div",{className:"auth-links",children:[y.jsx(Xn,{to:"/forgot-password",children:"¿Olvidaste tu contraseña?"}),y.jsx(Xn,{to:"/register",children:"¿No tienes una cuenta? Regístrate"})]})]})})]})},WF=()=>{const t=oa(),[e,n]=M.useState({username:"",email:"",password:""}),r=async a=>{if(!/^[a-zA-Z0-9_]{3,15}$/.test(a))return!1;const u=Qt(Yt,"usernames",a.toLowerCase());return!(await Sl(u)).exists()},i=async(a,u,h,f)=>{try{await Xd(Qt(Yt,"usernames",u.toLowerCase()),{uid:a}),await Xd(Qt(Yt,"users",a),{username:u,email:h,createdAt:new Date,rating:1200,photoURL:f||null}),await eS(Ge.currentUser,{displayName:u,photoURL:f||null})}catch(g){throw console.error("Error guardando datos de usuario:",g),g}},s=async a=>{a.preventDefault();try{if(!await r(e.username)){Te.error("Nombre de usuario no válido o ya está en uso");return}const h=await aD(Ge,e.email,e.password);await i(h.user.uid,e.username,e.email),Te.success("¡Cuenta creada exitosamente!"),t("/lobby")}catch(u){u.code==="auth/email-already-in-use"?Te.error("Este email ya está registrado"):Te.error("Error al crear la cuenta")}},o=async()=>{var a,u;try{const h=new li,f=await fS(Ge,h);let g=((a=f.user.email)==null?void 0:a.split("@")[0])||"",v=await r(g),w=1;for(;!v&&w<100;)g=`${(u=f.user.email)==null?void 0:u.split("@")[0]}_${w}`,v=await r(g),w++;if(!v){Te.error("No se pudo generar un nombre de usuario único");return}await i(f.user.uid,g,f.user.email,f.user.photoURL||void 0),Te.success("¡Cuenta creada exitosamente!"),t("/lobby")}catch(h){h.code==="auth/popup-closed-by-user"?Te.error("Registro cancelado"):Te.error("Error al registrarse con Google")}};return y.jsx("div",{className:"auth-container",children:y.jsxs("div",{className:"auth-card",children:[y.jsx(Xn,{to:"/",className:"back-button",children:y.jsx("i",{className:"fas fa-arrow-left"})}),y.jsxs(Xn,{to:"/",className:"logo",children:[y.jsx("i",{className:"fas fa-chess-knight logo-icon"}),y.jsxs("div",{className:"logo-text",children:[y.jsx("span",{className:"logo-chess",children:"CHESS"}),y.jsx("span",{className:"logo-match",children:"MATCH"})]})]}),y.jsx("h2",{children:"Crear cuenta"}),y.jsx("p",{className:"auth-subtitle",children:"Este es el nombre que verán tus amigos y otros jugadores"}),y.jsxs("form",{onSubmit:s,children:[y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-user"}),y.jsx("input",{type:"text",placeholder:"Nombre de usuario",value:e.username,onChange:a=>n({...e,username:a.target.value}),required:!0,minLength:3,maxLength:15,pattern:"^[a-zA-Z0-9_]+$",title:"El nombre de usuario debe tener entre 3 y 15 caracteres y solo puede contener letras, números y guiones bajos"})]})}),y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-envelope"}),y.jsx("input",{type:"email",placeholder:"Email",value:e.email,onChange:a=>n({...e,email:a.target.value}),required:!0})]})}),y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-lock"}),y.jsx("input",{type:"password",placeholder:"Contraseña",value:e.password,onChange:a=>n({...e,password:a.target.value}),required:!0})]})}),y.jsx("button",{type:"submit",className:"btn-continue",children:"Crear cuenta"})]}),y.jsx("div",{className:"auth-divider",children:"O"}),y.jsxs("div",{className:"social-buttons",children:[y.jsxs("button",{className:"btn-social google",onClick:o,children:[y.jsx("i",{className:"fab fa-google"}),"Continuar con Google"]}),y.jsxs("button",{className:"btn-social apple",children:[y.jsx("i",{className:"fab fa-apple"}),"Continuar con Apple"]})]}),y.jsx("div",{className:"auth-links",children:y.jsx(Xn,{to:"/login",children:"¿Ya tienes una cuenta? Inicia sesión"})})]})})},KF=()=>{const[t,e]=M.useState(""),[n,r]=M.useState(!1),i=s=>{s.preventDefault(),console.log("Recuperar contraseña para:",t),r(!0)};return y.jsxs("div",{className:"page-container",children:[y.jsx(Ml,{}),y.jsx("div",{className:"auth-container",children:y.jsxs("div",{className:"auth-card",children:[y.jsx(Xn,{to:"/login",className:"back-button",children:y.jsx("i",{className:"fas fa-arrow-left"})}),n?y.jsxs("div",{className:"success-message",children:[y.jsx("i",{className:"fas fa-check-circle"}),y.jsx("h2",{children:"¡Email enviado!"}),y.jsxs("p",{children:["Hemos enviado las instrucciones para restablecer tu contraseña a ",t]}),y.jsx("p",{className:"small",children:"Si no recibes el email en unos minutos, revisa tu carpeta de spam"}),y.jsx(Xn,{to:"/login",className:"btn-continue",children:"Volver al inicio de sesión"})]}):y.jsxs(y.Fragment,{children:[y.jsx("h2",{children:"Recuperar contraseña"}),y.jsx("p",{className:"auth-subtitle",children:"Ingresa tu email y te enviaremos instrucciones para restablecer tu contraseña"}),y.jsxs("form",{onSubmit:i,children:[y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-envelope"}),y.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:s=>e(s.target.value),required:!0})]})}),y.jsx("button",{type:"submit",className:"btn-continue",children:"Enviar instrucciones"})]})]})]})})]})},qu=[{name:"Bullet",time:1,increment:0},{name:"Bullet",time:1,increment:1},{name:"Blitz",time:3,increment:0},{name:"Blitz",time:3,increment:2},{name:"Blitz",time:5,increment:0},{name:"Blitz",time:5,increment:3},{name:"Rápida",time:10,increment:0},{name:"Rápida",time:15,increment:10},{name:"Clásica",time:30,increment:0}];qu.find(t=>t.time===3&&t.increment===2)||qu[0];const GF=({options:t,selected:e,onSelect:n})=>{const r=["Bullet","Blitz","Rápida","Clásica"];return y.jsxs("div",{className:"time-control",children:[y.jsx("h3",{children:"Control de Tiempo"}),y.jsx("div",{className:"time-options",children:r.map(i=>y.jsxs(n1.Fragment,{children:[y.jsx("div",{className:"time-category",children:i}),y.jsx("div",{className:"time-category-options",children:t.filter(s=>s.name===i).map((s,o)=>y.jsx("button",{className:`time-option ${e===s?"selected":""}`,onClick:()=>n(s),children:y.jsxs("span",{className:"time",children:[s.time,"+",s.increment]})},`${s.time}-${s.increment}-${o}`))})]},i))})]})},QF=({config:t,onChange:e})=>y.jsxs("div",{className:"match-settings",children:[y.jsxs("div",{className:"setting-group",children:[y.jsx("h3",{children:"Tipo de Match"}),y.jsxs("div",{className:"toggle-group",children:[y.jsx("button",{className:t.rated?"selected":"",onClick:()=>e({...t,rated:!0}),children:"Clasificatorio"}),y.jsx("button",{className:t.rated?"":"selected",onClick:()=>e({...t,rated:!1}),children:"Amistoso"})]})]}),y.jsxs("div",{className:"setting-group",children:[y.jsx("h3",{children:"Color de Piezas"}),y.jsxs("div",{className:"color-selector",children:[y.jsxs("button",{className:t.color==="random"?"selected":"",onClick:()=>e({...t,color:"random"}),children:[y.jsx("i",{className:"fas fa-random"}),"Aleatorio"]}),y.jsxs("button",{className:t.color==="white"?"selected":"",onClick:()=>e({...t,color:"white"}),children:[y.jsx("i",{className:"fas fa-chess-pawn"}),"Blancas"]}),y.jsxs("button",{className:t.color==="black"?"selected":"",onClick:()=>e({...t,color:"black"}),children:[y.jsx("i",{className:"fas fa-chess-pawn chess-piece-black"}),"Negras"]})]})]})]}),YF=()=>{const t=oa(),[e,n]=M.useState(null);M.useEffect(()=>{console.log("Iniciando efecto de autenticación en Lobby");const u=tS(Ge,f=>{console.log("Estado de autenticación cambiado:",!!f),f||(console.log("Usuario no autenticado, redirigiendo a login"),t("/login"))});return(async()=>{if(Ge.currentUser){const f=await Sl(Qt(Yt,"users",Ge.currentUser.uid));f.exists()&&n(f.data())}})(),()=>{console.log("Limpiando efecto de autenticación en Lobby"),u()}},[t]);const[r,i]=M.useState({timeControl:qu.find(u=>u.time===3&&u.increment===2)||qu[0],numberOfGames:3,rated:!0,color:"random"}),s=async()=>{try{if(!Ge.currentUser){Te.error("Debes iniciar sesión para crear un reto"),t("/login");return}if(!(e!=null&&e.username)){Te.error("Error: No se pudo obtener la información del usuario");return}const u=r.timeControl.time*60,h={createdBy:Ge.currentUser.uid,creatorUsername:e.username,createdAt:N5(),config:r,status:"waiting",currentGame:1,gameStarted:!1,timeLeft:{white:u,black:u},players:{white:null,black:null},currentTurn:"white",fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"};console.log("Intentando crear reto con datos:",h);const f=await O5(g5(Yt,"challenges"),h);console.log("Reto creado con ID:",f.id),Te.success("¡Reto creado! Redirigiendo..."),t(`/challenge/${f.id}`)}catch(u){console.error("Error detallado en handleCreateChallenge:",u),u.code==="permission-denied"?Te.error("Error de permisos. Por favor, verifica tu sesión"):Te.error("Error al crear el reto. Por favor, inténtalo de nuevo")}},o=async()=>{try{await nS(Ge),t("/")}catch(u){console.error("Error al cerrar sesión:",u)}},a=u=>{i(u)};return y.jsxs("div",{className:"page-container",children:[y.jsx(Ml,{}),y.jsx("div",{className:"lobby-content",children:y.jsxs("div",{className:"lobby-card",children:[y.jsx("h2",{children:"Crear Match Personalizado"}),y.jsx("button",{onClick:o,children:"Cerrar Sesión"}),y.jsx(GF,{options:qu,selected:r.timeControl,onSelect:u=>i({...r,timeControl:u})}),y.jsxs("div",{className:"game-count-section",children:[y.jsx("h3",{children:"Número de Partidas"}),y.jsx("div",{className:"game-count-options",children:[1,3,5,10,20].map(u=>y.jsx("button",{className:`game-count-button ${r.numberOfGames===u?"active":""}`,onClick:()=>i({...r,numberOfGames:u}),children:u===1?"1 partida":`${u} partidas`},u))})]}),y.jsx(QF,{config:r,onChange:a}),y.jsx("button",{className:"btn-create-challenge",onClick:s,children:"Crear Reto"})]})}),y.jsx("div",{className:"lobby-footer",children:y.jsxs("button",{className:"btn-puzzles",children:[y.jsx("i",{className:"fas fa-puzzle-piece"}),"Resolver puzzles"]})})]})},XF=()=>{var b,I,A,V,H,W,R;const[t,e]=M.useState(new xi),[n,r]=M.useState(!1),[i,s]=M.useState(null),[o,a]=M.useState(!0),[u,h]=M.useState({isCreator:!1,gameStarted:!1,timeWhite:0,timeBlack:0,currentGame:1,totalGames:1,challenge:null,isWhiteTurn:!0,isLoading:!0,error:null,players:{white:null,black:null,whiteUsername:null,blackUsername:null}}),{challengeId:f}=rx(),g=oa();if(M.useEffect(()=>{if(!f||!Ge.currentUser){a(!1);return}(async()=>{try{const P=Qt(Yt,"challenges",f);return D5(P,N=>{var Je,lt,vt,Qe;if(!N.exists()){Te.error("El reto no existe"),g("/lobby");return}const L=N.data();L.fen&&L.fen!==t.fen()&&e(new xi(L.fen)),Ge.currentUser&&(((Je=L.players)==null?void 0:Je.white)===Ge.currentUser.uid?s("white"):((lt=L.players)==null?void 0:lt.black)===Ge.currentUser.uid&&s("black"));const O=Ge.currentUser&&(L.currentTurn==="white"&&((vt=L.players)==null?void 0:vt.white)===Ge.currentUser.uid||L.currentTurn==="black"&&((Qe=L.players)==null?void 0:Qe.black)===Ge.currentUser.uid);r(O||!1),h(J=>{var oe,$,Ae;return{...J,gameStarted:L.gameStarted||!1,isCreator:L.createdBy===((oe=Ge.currentUser)==null?void 0:oe.uid),challenge:L,players:{...J.players,white:(($=L.players)==null?void 0:$.white)||null,black:((Ae=L.players)==null?void 0:Ae.black)||null}}}),a(!1)})}catch(P){console.error("Error loading challenge:",P),Te.error("Error al cargar el reto"),a(!1)}})()},[f]),M.useEffect(()=>{!u.gameStarted||u.challenge},[u.gameStarted,u.challenge]),M.useEffect(()=>{(async()=>{if(u.players.white){const P=await Sl(Qt(Yt,"users",u.players.white));P.exists()&&h(x=>({...x,players:{...x.players,whiteUsername:P.data().username}}))}if(u.players.black){const P=await Sl(Qt(Yt,"users",u.players.black));P.exists()&&h(x=>({...x,players:{...x.players,blackUsername:P.data().username}}))}})()},[u.players.white,u.players.black]),o)return y.jsx("div",{className:"loading",children:"Cargando reto..."});const v=(E,P,x)=>{if(!n||!f||!Ge.currentUser)return!1;try{const N=new xi(t.fen()),L=N.move({from:E,to:P,promotion:x[1]==="P"?"q":void 0});return L?(fu(Qt(Yt,"challenges",f),{fen:N.fen(),lastMove:{from:E,to:P,piece:x,color:i},currentTurn:i==="white"?"black":"white",moves:L5({from:E,to:P,piece:x,san:L.san,timestamp:Date.now()})}).catch(O=>{console.error("Error al realizar movimiento:",O),Te.error("Error al realizar el movimiento")}),e(N),r(!1),!0):!1}catch(N){return console.error("Error al realizar movimiento:",N),Te.error("Error al realizar el movimiento"),!1}},w=async()=>{if(!(!f||!Ge.currentUser))try{const E=Qt(Yt,"challenges",f);await fu(E,{drawOffer:{offeredBy:Ge.currentUser.uid,offeredAt:Date.now()}}),Te.success("Oferta de tablas enviada")}catch{Te.error("Error al ofrecer tablas")}},S=async()=>{if(!(!f||!Ge.currentUser))try{const E=Qt(Yt,"challenges",f);await fu(E,{status:"completed",winner:i==="white"?"black":"white",result:i==="white"?"0-1":"1-0",endReason:"resignation"}),Te.success("Has abandonado la partida")}catch{Te.error("Error al abandonar la partida")}},k=async(E,P)=>{if(f)try{const x=Qt(Yt,"challenges",f);await fu(x,{[`timeLeft.${E}`]:P})}catch(x){console.error("Error al actualizar el tiempo:",x)}},D=async E=>{if(f)try{const P=Qt(Yt,"challenges",f);await fu(P,{status:"completed",winner:E,result:E==="white"?"1-0":"0-1",endReason:"timeout"})}catch{Te.error("Error al finalizar la partida por tiempo")}};return y.jsxs("div",{className:"page-container",children:[y.jsx(Ml,{}),y.jsx("div",{className:"challenge-container",children:y.jsxs("div",{className:"game-layout",children:[y.jsxs("div",{className:"left-panel",children:[y.jsxs("div",{className:"player-box black",children:[y.jsx("div",{className:"player-avatar"}),y.jsxs("div",{className:"player-info",children:[y.jsx("span",{className:"player-name",children:u.players.blackUsername||"Esperando..."}),y.jsx("span",{className:"player-rating",children:"1500"})]}),y.jsx(tf,{timeInMinutes:((b=u.challenge)==null?void 0:b.config.timeControl.time)||0,increment:((I=u.challenge)==null?void 0:I.config.timeControl.increment)||0,isActive:t.turn()==="b",color:"black",onTimeout:async()=>await D("white"),onTimeUpdate:E=>k("black",E)})]}),y.jsx("div",{className:"board-container",children:y.jsx(Pb,{position:t.fen(),onPieceDrop:v,boardOrientation:i==="black"?"black":"white",customBoardStyle:{borderRadius:"4px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.3)"}})}),y.jsxs("div",{className:"player-box white",children:[y.jsx("div",{className:"player-avatar"}),y.jsx(tf,{timeInMinutes:((A=u.challenge)==null?void 0:A.config.timeControl.time)||0,increment:((V=u.challenge)==null?void 0:V.config.timeControl.increment)||0,isActive:t.turn()==="w",color:"white",onTimeout:async()=>await D("black"),onTimeUpdate:E=>k("white",E)}),y.jsxs("div",{className:"player-info",children:[y.jsx("span",{className:"player-name",children:u.players.whiteUsername||"Esperando..."}),y.jsx("span",{className:"player-rating",children:"1500"})]})]}),y.jsxs("div",{className:"game-actions",children:[y.jsxs("div",{className:"primary-actions",children:[y.jsx("button",{className:"action-btn draw-btn",onClick:w,disabled:!n,children:y.jsx("i",{className:"fas fa-handshake"})}),y.jsx("button",{className:"action-btn resign-btn",onClick:S,children:y.jsx("i",{className:"fas fa-flag"})})]}),y.jsxs("div",{className:"secondary-actions",children:[y.jsx("button",{className:"action-btn",children:y.jsx("i",{className:"fas fa-undo"})}),y.jsx("button",{className:"action-btn",children:y.jsx("i",{className:"fas fa-forward"})}),y.jsx("button",{className:"action-btn",children:y.jsx("i",{className:"fas fa-cog"})})]})]})]}),y.jsxs("div",{className:"right-panel",children:[y.jsxs("div",{className:"game-info-header",children:[y.jsxs("div",{className:"time-control",children:[y.jsx("i",{className:"fas fa-clock"}),y.jsx("span",{children:`${(H=u.challenge)==null?void 0:H.config.timeControl.time}+${(W=u.challenge)==null?void 0:W.config.timeControl.increment}`})]}),y.jsx("div",{className:"game-type",children:(R=u.challenge)!=null&&R.config.rated?y.jsx("i",{className:"fas fa-trophy",title:"Partida clasificatoria"}):y.jsx("i",{className:"fas fa-handshake",title:"Partida amistosa"})})]}),y.jsx("div",{className:"moves-history"})]})]})})]})},JF=()=>{const t=oa(),e=sa(),{uid:n,email:r,photoURL:i}=e.state||{},[s,o]=M.useState(""),a=async h=>{if(!/^[a-zA-Z0-9_]{3,15}$/.test(h))return!1;const f=Qt(Yt,"usernames",h.toLowerCase());return!(await Sl(f)).exists()},u=async h=>{h.preventDefault();try{if(!await a(s)){Te.error("Nombre de usuario no válido o ya está en uso");return}await Xd(Qt(Yt,"usernames",s.toLowerCase()),{uid:n}),await Xd(Qt(Yt,"users",n),{username:s,email:r,createdAt:new Date,rating:1200,photoURL:i||null}),Ge.currentUser&&await eS(Ge.currentUser,{displayName:s}),Te.success("¡Perfil completado!"),t("/lobby")}catch(f){console.error("Error al guardar el perfil:",f),Te.error("Error al guardar el perfil")}};return y.jsxs("div",{className:"page-container",children:[y.jsx(Ml,{}),y.jsx("div",{className:"auth-container",children:y.jsxs("div",{className:"auth-card",children:[y.jsx("h2",{children:"Completa tu perfil"}),y.jsx("p",{className:"auth-subtitle",children:"Solo necesitamos un nombre de usuario para continuar"}),y.jsxs("form",{onSubmit:u,children:[y.jsx("div",{className:"form-group",children:y.jsxs("div",{className:"input-icon",children:[y.jsx("i",{className:"fas fa-user"}),y.jsx("input",{type:"text",placeholder:"Nombre de usuario",value:s,onChange:h=>o(h.target.value),required:!0,minLength:3,maxLength:15,pattern:"^[a-zA-Z0-9_]+$",title:"El nombre de usuario debe tener entre 3 y 15 caracteres y solo puede contener letras, números y guiones bajos"})]})}),y.jsx("div",{className:"form-info",children:y.jsxs("p",{children:["Email: ",r]})}),y.jsx("button",{type:"submit",className:"btn-continue",children:"Completar perfil"})]})]})})]})},Mh=({children:t})=>{const[e,n]=M.useState(null);return M.useEffect(()=>{const r=tS(Ge,i=>{n(!!i)});return()=>r()},[]),e===null?y.jsx("div",{children:"Cargando..."}):e?y.jsx(y.Fragment,{children:t}):y.jsx(gI,{to:"/login",replace:!0})};function ZF(){return y.jsx(lF,{children:y.jsx(bx,{children:y.jsx("div",{className:"app-container",children:y.jsxs(_x,{children:[y.jsx(_n,{index:!0,element:y.jsx(BE,{})}),y.jsx(_n,{path:"/",element:y.jsx(BE,{})}),y.jsx(_n,{path:"/login",element:y.jsx(qF,{})}),y.jsx(_n,{path:"/register",element:y.jsx(WF,{})}),y.jsx(_n,{path:"/forgot-password",element:y.jsx(KF,{})}),y.jsx(_n,{path:"/lobby",element:y.jsx(Mh,{children:y.jsx(YF,{})})}),y.jsx(_n,{path:"/challenge/:challengeId",element:y.jsx(Mh,{children:y.jsx(XF,{})})}),y.jsxs(_n,{path:"/play",children:[y.jsx(_n,{path:"computer",element:y.jsx(Au,{})}),y.jsx(_n,{path:"online",element:y.jsx(Mh,{children:y.jsx(Au,{})})}),y.jsx(_n,{path:"friend",element:y.jsx(Mh,{children:y.jsx(Au,{})})}),y.jsx(_n,{path:"puzzle",element:y.jsx(Au,{isPuzzle:!0})})]}),y.jsx(_n,{path:"/complete-profile",element:y.jsx(JF,{})}),y.jsx(_n,{path:"*",element:y.jsx(gI,{to:"/",replace:!0})})]})})})})}console.log("Iniciando aplicación");const Nb=document.getElementById("root");console.log("Elemento root encontrado:",Nb);sI(Nb).render(y.jsx(M.StrictMode,{children:y.jsx(ZF,{})}));
