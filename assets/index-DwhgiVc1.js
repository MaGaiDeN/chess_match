var pP=Object.defineProperty;var mP=(t,e,n)=>e in t?pP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var br=(t,e,n)=>mP(t,typeof e!="symbol"?e+"":e,n);function gP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var vP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _P(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tT={exports:{}},Qf={},nT={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var th=Symbol.for("react.element"),yP=Symbol.for("react.portal"),wP=Symbol.for("react.fragment"),EP=Symbol.for("react.strict_mode"),TP=Symbol.for("react.profiler"),IP=Symbol.for("react.provider"),SP=Symbol.for("react.context"),bP=Symbol.for("react.forward_ref"),CP=Symbol.for("react.suspense"),xP=Symbol.for("react.memo"),AP=Symbol.for("react.lazy"),C0=Symbol.iterator;function PP(t){return t===null||typeof t!="object"?null:(t=C0&&t[C0]||t["@@iterator"],typeof t=="function"?t:null)}var rT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iT=Object.assign,sT={};function eu(t,e,n){this.props=t,this.context=e,this.refs=sT,this.updater=n||rT}eu.prototype.isReactComponent={};eu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oT(){}oT.prototype=eu.prototype;function Dv(t,e,n){this.props=t,this.context=e,this.refs=sT,this.updater=n||rT}var Ov=Dv.prototype=new oT;Ov.constructor=Dv;iT(Ov,eu.prototype);Ov.isPureReactComponent=!0;var x0=Array.isArray,aT=Object.prototype.hasOwnProperty,Nv={current:null},lT={key:!0,ref:!0,__self:!0,__source:!0};function uT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)aT.call(e,r)&&!lT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:th,type:t,key:s,ref:o,props:i,_owner:Nv.current}}function kP(t,e){return{$$typeof:th,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lv(t){return typeof t=="object"&&t!==null&&t.$$typeof===th}function RP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A0=/\/+/g;function tm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RP(""+t.key):e.toString(36)}function Sd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case th:case yP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+tm(o,0):r,x0(i)?(n="",t!=null&&(n=t.replace(A0,"$&/")+"/"),Sd(i,e,n,"",function(c){return c})):i!=null&&(Lv(i)&&(i=kP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(A0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",x0(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+tm(s,a);o+=Sd(s,e,n,l,i)}else if(l=PP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+tm(s,a++),o+=Sd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qh(t,e,n){if(t==null)return t;var r=[],i=0;return Sd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function DP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $n={current:null},bd={transition:null},OP={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:bd,ReactCurrentOwner:Nv};function cT(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:Qh,forEach:function(t,e,n){Qh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qh(t,function(){e++}),e},toArray:function(t){return Qh(t,function(e){return e})||[]},only:function(t){if(!Lv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=eu;De.Fragment=wP;De.Profiler=TP;De.PureComponent=Dv;De.StrictMode=EP;De.Suspense=CP;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OP;De.act=cT;De.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Nv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)aT.call(e,l)&&!lT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:th,type:t.type,key:i,ref:s,props:r,_owner:o}};De.createContext=function(t){return t={$$typeof:SP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IP,_context:t},t.Consumer=t};De.createElement=uT;De.createFactory=function(t){var e=uT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:bP,render:t}};De.isValidElement=Lv;De.lazy=function(t){return{$$typeof:AP,_payload:{_status:-1,_result:t},_init:DP}};De.memo=function(t,e){return{$$typeof:xP,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=bd.transition;bd.transition={};try{t()}finally{bd.transition=e}};De.unstable_act=cT;De.useCallback=function(t,e){return $n.current.useCallback(t,e)};De.useContext=function(t){return $n.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return $n.current.useDeferredValue(t)};De.useEffect=function(t,e){return $n.current.useEffect(t,e)};De.useId=function(){return $n.current.useId()};De.useImperativeHandle=function(t,e,n){return $n.current.useImperativeHandle(t,e,n)};De.useInsertionEffect=function(t,e){return $n.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return $n.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return $n.current.useMemo(t,e)};De.useReducer=function(t,e,n){return $n.current.useReducer(t,e,n)};De.useRef=function(t){return $n.current.useRef(t)};De.useState=function(t){return $n.current.useState(t)};De.useSyncExternalStore=function(t,e,n){return $n.current.useSyncExternalStore(t,e,n)};De.useTransition=function(){return $n.current.useTransition()};De.version="18.3.1";nT.exports=De;var N=nT.exports;const Mv=_P(N),NP=gP({__proto__:null,default:Mv},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LP=N,MP=Symbol.for("react.element"),VP=Symbol.for("react.fragment"),jP=Object.prototype.hasOwnProperty,FP=LP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UP={key:!0,ref:!0,__self:!0,__source:!0};function hT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)jP.call(e,r)&&!UP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MP,type:t,key:s,ref:o,props:i,_owner:FP.current}}Qf.Fragment=VP;Qf.jsx=hT;Qf.jsxs=hT;tT.exports=Qf;var v=tT.exports,dT={exports:{}},fr={},fT={exports:{}},pT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ce){var z=X.length;X.push(ce);e:for(;0<z;){var Ve=z-1>>>1,Re=X[Ve];if(0<i(Re,ce))X[Ve]=ce,X[z]=Re,z=Ve;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ce=X[0],z=X.pop();if(z!==ce){X[0]=z;e:for(var Ve=0,Re=X.length,ze=Re>>>1;Ve<ze;){var ot=2*(Ve+1)-1,kt=X[ot],Ge=ot+1,fe=X[Ge];if(0>i(kt,z))Ge<Re&&0>i(fe,kt)?(X[Ve]=fe,X[Ge]=z,Ve=Ge):(X[Ve]=kt,X[ot]=z,Ve=ot);else if(Ge<Re&&0>i(fe,z))X[Ve]=fe,X[Ge]=z,Ve=Ge;else break e}}return ce}function i(X,ce){var z=X.sortIndex-ce.sortIndex;return z!==0?z:X.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,g=3,w=!1,E=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(X){for(var ce=n(c);ce!==null;){if(ce.callback===null)r(c);else if(ce.startTime<=X)r(c),ce.sortIndex=ce.expirationTime,e(l,ce);else break;ce=n(c)}}function M(X){if(A=!1,I(X),!E)if(n(l)!==null)E=!0,Ut(B);else{var ce=n(c);ce!==null&&Xe(M,ce.startTime-X)}}function B(X,ce){E=!1,A&&(A=!1,x(C),C=-1),w=!0;var z=g;try{for(I(ce),p=n(l);p!==null&&(!(p.expirationTime>ce)||X&&!L());){var Ve=p.callback;if(typeof Ve=="function"){p.callback=null,g=p.priorityLevel;var Re=Ve(p.expirationTime<=ce);ce=t.unstable_now(),typeof Re=="function"?p.callback=Re:p===n(l)&&r(l),I(ce)}else r(l);p=n(l)}if(p!==null)var ze=!0;else{var ot=n(c);ot!==null&&Xe(M,ot.startTime-ce),ze=!1}return ze}finally{p=null,g=z,w=!1}}var W=!1,P=null,C=-1,k=5,O=-1;function L(){return!(t.unstable_now()-O<k)}function j(){if(P!==null){var X=t.unstable_now();O=X;var ce=!0;try{ce=P(!0,X)}finally{ce?D():(W=!1,P=null)}}else W=!1}var D;if(typeof T=="function")D=function(){T(j)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,St=vt.port2;vt.port1.onmessage=j,D=function(){St.postMessage(null)}}else D=function(){R(j,0)};function Ut(X){P=X,W||(W=!0,D())}function Xe(X,ce){C=R(function(){X(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){E||w||(E=!0,Ut(B))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var ce=3;break;default:ce=g}var z=g;g=ce;try{return X()}finally{g=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var z=g;g=X;try{return ce()}finally{g=z}},t.unstable_scheduleCallback=function(X,ce,z){var Ve=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Ve+z:Ve):z=Ve,X){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=z+Re,X={id:d++,callback:ce,priorityLevel:X,startTime:z,expirationTime:Re,sortIndex:-1},z>Ve?(X.sortIndex=z,e(c,X),n(l)===null&&X===n(c)&&(A?(x(C),C=-1):A=!0,Xe(M,z-Ve))):(X.sortIndex=Re,e(l,X),E||w||(E=!0,Ut(B))),X},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(X){var ce=g;return function(){var z=g;g=ce;try{return X.apply(this,arguments)}finally{g=z}}}})(pT);fT.exports=pT;var $P=fT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zP=N,hr=$P;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mT=new Set,Ic={};function Aa(t,e){Nl(t,e),Nl(t+"Capture",e)}function Nl(t,e){for(Ic[t]=e,t=0;t<e.length;t++)mT.add(e[t])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ym=Object.prototype.hasOwnProperty,BP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P0={},k0={};function qP(t){return Ym.call(k0,t)?!0:Ym.call(P0,t)?!1:BP.test(t)?k0[t]=!0:(P0[t]=!0,!1)}function HP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WP(t,e,n,r){if(e===null||typeof e>"u"||HP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vv=/[\-:]([a-z])/g;function jv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vv,jv);pn[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vv,jv);pn[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vv,jv);pn[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fv(t,e,n,r){var i=pn.hasOwnProperty(e)?pn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WP(e,n,i,r)&&(n=null),r||i===null?qP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var as=zP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yh=Symbol.for("react.element"),cl=Symbol.for("react.portal"),hl=Symbol.for("react.fragment"),Uv=Symbol.for("react.strict_mode"),Xm=Symbol.for("react.profiler"),gT=Symbol.for("react.provider"),vT=Symbol.for("react.context"),$v=Symbol.for("react.forward_ref"),Jm=Symbol.for("react.suspense"),Zm=Symbol.for("react.suspense_list"),zv=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),_T=Symbol.for("react.offscreen"),R0=Symbol.iterator;function Ru(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,nm;function Ku(t){if(nm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nm=e&&e[1]||""}return`
`+nm+t}var rm=!1;function im(t,e){if(!t||rm)return"";rm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{rm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ku(t):""}function KP(t){switch(t.tag){case 5:return Ku(t.type);case 16:return Ku("Lazy");case 13:return Ku("Suspense");case 19:return Ku("SuspenseList");case 0:case 2:case 15:return t=im(t.type,!1),t;case 11:return t=im(t.type.render,!1),t;case 1:return t=im(t.type,!0),t;default:return""}}function eg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hl:return"Fragment";case cl:return"Portal";case Xm:return"Profiler";case Uv:return"StrictMode";case Jm:return"Suspense";case Zm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vT:return(t.displayName||"Context")+".Consumer";case gT:return(t._context.displayName||"Context")+".Provider";case $v:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zv:return e=t.displayName||null,e!==null?e:eg(t.type)||"Memo";case js:e=t._payload,t=t._init;try{return eg(t(e))}catch{}}return null}function GP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eg(e);case 8:return e===Uv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function po(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QP(t){var e=yT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xh(t){t._valueTracker||(t._valueTracker=QP(t))}function wT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ef(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tg(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function D0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=po(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ET(t,e){e=e.checked,e!=null&&Fv(t,"checked",e,!1)}function ng(t,e){ET(t,e);var n=po(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rg(t,e.type,n):e.hasOwnProperty("defaultValue")&&rg(t,e.type,po(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function O0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rg(t,e,n){(e!=="number"||ef(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gu=Array.isArray;function Sl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+po(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ig(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Gu(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:po(n)}}function TT(t,e){var n=po(e.value),r=po(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function L0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jh,ST=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jh=Jh||document.createElement("div"),Jh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YP=["Webkit","ms","Moz","O"];Object.keys(oc).forEach(function(t){YP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oc[e]=oc[t]})});function bT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oc.hasOwnProperty(t)&&oc[t]?(""+e).trim():e+"px"}function CT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var XP=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function og(t,e){if(e){if(XP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function ag(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=null;function Bv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ug=null,bl=null,Cl=null;function M0(t){if(t=ih(t)){if(typeof ug!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=ep(e),ug(t.stateNode,t.type,e))}}function xT(t){bl?Cl?Cl.push(t):Cl=[t]:bl=t}function AT(){if(bl){var t=bl,e=Cl;if(Cl=bl=null,M0(t),e)for(t=0;t<e.length;t++)M0(e[t])}}function PT(t,e){return t(e)}function kT(){}var sm=!1;function RT(t,e,n){if(sm)return t(e,n);sm=!0;try{return PT(t,e,n)}finally{sm=!1,(bl!==null||Cl!==null)&&(kT(),AT())}}function bc(t,e){var n=t.stateNode;if(n===null)return null;var r=ep(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var cg=!1;if(Ji)try{var Du={};Object.defineProperty(Du,"passive",{get:function(){cg=!0}}),window.addEventListener("test",Du,Du),window.removeEventListener("test",Du,Du)}catch{cg=!1}function JP(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ac=!1,tf=null,nf=!1,hg=null,ZP={onError:function(t){ac=!0,tf=t}};function ek(t,e,n,r,i,s,o,a,l){ac=!1,tf=null,JP.apply(ZP,arguments)}function tk(t,e,n,r,i,s,o,a,l){if(ek.apply(this,arguments),ac){if(ac){var c=tf;ac=!1,tf=null}else throw Error(Y(198));nf||(nf=!0,hg=c)}}function Pa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(Pa(t)!==t)throw Error(Y(188))}function nk(t){var e=t.alternate;if(!e){if(e=Pa(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return V0(i),t;if(s===r)return V0(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function OT(t){return t=nk(t),t!==null?NT(t):null}function NT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NT(t);if(e!==null)return e;t=t.sibling}return null}var LT=hr.unstable_scheduleCallback,j0=hr.unstable_cancelCallback,rk=hr.unstable_shouldYield,ik=hr.unstable_requestPaint,jt=hr.unstable_now,sk=hr.unstable_getCurrentPriorityLevel,qv=hr.unstable_ImmediatePriority,MT=hr.unstable_UserBlockingPriority,rf=hr.unstable_NormalPriority,ok=hr.unstable_LowPriority,VT=hr.unstable_IdlePriority,Yf=null,Si=null;function ak(t){if(Si&&typeof Si.onCommitFiberRoot=="function")try{Si.onCommitFiberRoot(Yf,t,void 0,(t.current.flags&128)===128)}catch{}}var ti=Math.clz32?Math.clz32:ck,lk=Math.log,uk=Math.LN2;function ck(t){return t>>>=0,t===0?32:31-(lk(t)/uk|0)|0}var Zh=64,ed=4194304;function Qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qu(a):(s&=o,s!==0&&(r=Qu(s)))}else o=n&~i,o!==0?r=Qu(o):s!==0&&(r=Qu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ti(e),i=1<<n,r|=t[n],e&=~i;return r}function hk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ti(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=hk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function dg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jT(){var t=Zh;return Zh<<=1,!(Zh&4194240)&&(Zh=64),t}function om(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ti(e),t[e]=n}function fk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ti(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Hv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ti(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var it=0;function FT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UT,Wv,$T,zT,BT,fg=!1,td=[],Js=null,Zs=null,eo=null,Cc=new Map,xc=new Map,$s=[],pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function F0(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":eo=null;break;case"pointerover":case"pointerout":Cc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(e.pointerId)}}function Ou(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ih(e),e!==null&&Wv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mk(t,e,n,r,i){switch(e){case"focusin":return Js=Ou(Js,t,e,n,r,i),!0;case"dragenter":return Zs=Ou(Zs,t,e,n,r,i),!0;case"mouseover":return eo=Ou(eo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cc.set(s,Ou(Cc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xc.set(s,Ou(xc.get(s)||null,t,e,n,r,i)),!0}return!1}function qT(t){var e=ra(t.target);if(e!==null){var n=Pa(e);if(n!==null){if(e=n.tag,e===13){if(e=DT(n),e!==null){t.blockedOn=e,BT(t.priority,function(){$T(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lg=r,n.target.dispatchEvent(r),lg=null}else return e=ih(n),e!==null&&Wv(e),t.blockedOn=n,!1;e.shift()}return!0}function U0(t,e,n){Cd(t)&&n.delete(e)}function gk(){fg=!1,Js!==null&&Cd(Js)&&(Js=null),Zs!==null&&Cd(Zs)&&(Zs=null),eo!==null&&Cd(eo)&&(eo=null),Cc.forEach(U0),xc.forEach(U0)}function Nu(t,e){t.blockedOn===e&&(t.blockedOn=null,fg||(fg=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,gk)))}function Ac(t){function e(i){return Nu(i,t)}if(0<td.length){Nu(td[0],t);for(var n=1;n<td.length;n++){var r=td[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&Nu(Js,t),Zs!==null&&Nu(Zs,t),eo!==null&&Nu(eo,t),Cc.forEach(e),xc.forEach(e),n=0;n<$s.length;n++)r=$s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$s.length&&(n=$s[0],n.blockedOn===null);)qT(n),n.blockedOn===null&&$s.shift()}var xl=as.ReactCurrentBatchConfig,of=!0;function vk(t,e,n,r){var i=it,s=xl.transition;xl.transition=null;try{it=1,Kv(t,e,n,r)}finally{it=i,xl.transition=s}}function _k(t,e,n,r){var i=it,s=xl.transition;xl.transition=null;try{it=4,Kv(t,e,n,r)}finally{it=i,xl.transition=s}}function Kv(t,e,n,r){if(of){var i=pg(t,e,n,r);if(i===null)gm(t,e,r,af,n),F0(t,r);else if(mk(i,t,e,n,r))r.stopPropagation();else if(F0(t,r),e&4&&-1<pk.indexOf(t)){for(;i!==null;){var s=ih(i);if(s!==null&&UT(s),s=pg(t,e,n,r),s===null&&gm(t,e,r,af,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else gm(t,e,r,null,n)}}var af=null;function pg(t,e,n,r){if(af=null,t=Bv(r),t=ra(t),t!==null)if(e=Pa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return af=t,null}function HT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sk()){case qv:return 1;case MT:return 4;case rf:case ok:return 16;case VT:return 536870912;default:return 16}default:return 16}}var Gs=null,Gv=null,xd=null;function WT(){if(xd)return xd;var t,e=Gv,n=e.length,r,i="value"in Gs?Gs.value:Gs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xd=i.slice(t,1<r?1-r:void 0)}function Ad(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nd(){return!0}function $0(){return!1}function pr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nd:$0,this.isPropagationStopped=$0,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nd)},persist:function(){},isPersistent:nd}),e}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qv=pr(tu),rh=Pt({},tu,{view:0,detail:0}),yk=pr(rh),am,lm,Lu,Xf=Pt({},rh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lu&&(Lu&&t.type==="mousemove"?(am=t.screenX-Lu.screenX,lm=t.screenY-Lu.screenY):lm=am=0,Lu=t),am)},movementY:function(t){return"movementY"in t?t.movementY:lm}}),z0=pr(Xf),wk=Pt({},Xf,{dataTransfer:0}),Ek=pr(wk),Tk=Pt({},rh,{relatedTarget:0}),um=pr(Tk),Ik=Pt({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),Sk=pr(Ik),bk=Pt({},tu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ck=pr(bk),xk=Pt({},tu,{data:0}),B0=pr(xk),Ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kk[t])?!!e[t]:!1}function Yv(){return Rk}var Dk=Pt({},rh,{key:function(t){if(t.key){var e=Ak[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ad(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yv,charCode:function(t){return t.type==="keypress"?Ad(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ad(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ok=pr(Dk),Nk=Pt({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q0=pr(Nk),Lk=Pt({},rh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yv}),Mk=pr(Lk),Vk=Pt({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),jk=pr(Vk),Fk=Pt({},Xf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Uk=pr(Fk),$k=[9,13,27,32],Xv=Ji&&"CompositionEvent"in window,lc=null;Ji&&"documentMode"in document&&(lc=document.documentMode);var zk=Ji&&"TextEvent"in window&&!lc,KT=Ji&&(!Xv||lc&&8<lc&&11>=lc),H0=" ",W0=!1;function GT(t,e){switch(t){case"keyup":return $k.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dl=!1;function Bk(t,e){switch(t){case"compositionend":return QT(e);case"keypress":return e.which!==32?null:(W0=!0,H0);case"textInput":return t=e.data,t===H0&&W0?null:t;default:return null}}function qk(t,e){if(dl)return t==="compositionend"||!Xv&&GT(t,e)?(t=WT(),xd=Gv=Gs=null,dl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KT&&e.locale!=="ko"?null:e.data;default:return null}}var Hk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Hk[t.type]:e==="textarea"}function YT(t,e,n,r){xT(r),e=lf(e,"onChange"),0<e.length&&(n=new Qv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uc=null,Pc=null;function Wk(t){aI(t,0)}function Jf(t){var e=ml(t);if(wT(e))return t}function Kk(t,e){if(t==="change")return e}var XT=!1;if(Ji){var cm;if(Ji){var hm="oninput"in document;if(!hm){var G0=document.createElement("div");G0.setAttribute("oninput","return;"),hm=typeof G0.oninput=="function"}cm=hm}else cm=!1;XT=cm&&(!document.documentMode||9<document.documentMode)}function Q0(){uc&&(uc.detachEvent("onpropertychange",JT),Pc=uc=null)}function JT(t){if(t.propertyName==="value"&&Jf(Pc)){var e=[];YT(e,Pc,t,Bv(t)),RT(Wk,e)}}function Gk(t,e,n){t==="focusin"?(Q0(),uc=e,Pc=n,uc.attachEvent("onpropertychange",JT)):t==="focusout"&&Q0()}function Qk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jf(Pc)}function Yk(t,e){if(t==="click")return Jf(e)}function Xk(t,e){if(t==="input"||t==="change")return Jf(e)}function Jk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ii=typeof Object.is=="function"?Object.is:Jk;function kc(t,e){if(ii(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ym.call(e,i)||!ii(t[i],e[i]))return!1}return!0}function Y0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X0(t,e){var n=Y0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Y0(n)}}function ZT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eI(){for(var t=window,e=ef();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ef(t.document)}return e}function Jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zk(t){var e=eI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZT(n.ownerDocument.documentElement,n)){if(r!==null&&Jv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=X0(n,s);var o=X0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eR=Ji&&"documentMode"in document&&11>=document.documentMode,fl=null,mg=null,cc=null,gg=!1;function J0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gg||fl==null||fl!==ef(r)||(r=fl,"selectionStart"in r&&Jv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cc&&kc(cc,r)||(cc=r,r=lf(mg,"onSelect"),0<r.length&&(e=new Qv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fl)))}function rd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pl={animationend:rd("Animation","AnimationEnd"),animationiteration:rd("Animation","AnimationIteration"),animationstart:rd("Animation","AnimationStart"),transitionend:rd("Transition","TransitionEnd")},dm={},tI={};Ji&&(tI=document.createElement("div").style,"AnimationEvent"in window||(delete pl.animationend.animation,delete pl.animationiteration.animation,delete pl.animationstart.animation),"TransitionEvent"in window||delete pl.transitionend.transition);function Zf(t){if(dm[t])return dm[t];if(!pl[t])return t;var e=pl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tI)return dm[t]=e[n];return t}var nI=Zf("animationend"),rI=Zf("animationiteration"),iI=Zf("animationstart"),sI=Zf("transitionend"),oI=new Map,Z0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(t,e){oI.set(t,e),Aa(e,[t])}for(var fm=0;fm<Z0.length;fm++){var pm=Z0[fm],tR=pm.toLowerCase(),nR=pm[0].toUpperCase()+pm.slice(1);wo(tR,"on"+nR)}wo(nI,"onAnimationEnd");wo(rI,"onAnimationIteration");wo(iI,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo(sI,"onTransitionEnd");Nl("onMouseEnter",["mouseout","mouseover"]);Nl("onMouseLeave",["mouseout","mouseover"]);Nl("onPointerEnter",["pointerout","pointerover"]);Nl("onPointerLeave",["pointerout","pointerover"]);Aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yu));function ew(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tk(r,e,void 0,t),t.currentTarget=null}function aI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ew(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ew(i,a,c),s=l}}}if(nf)throw t=hg,nf=!1,hg=null,t}function _t(t,e){var n=e[Eg];n===void 0&&(n=e[Eg]=new Set);var r=t+"__bubble";n.has(r)||(lI(e,t,2,!1),n.add(r))}function mm(t,e,n){var r=0;e&&(r|=4),lI(n,t,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function Rc(t){if(!t[id]){t[id]=!0,mT.forEach(function(n){n!=="selectionchange"&&(rR.has(n)||mm(n,!1,t),mm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,mm("selectionchange",!1,e))}}function lI(t,e,n,r){switch(HT(e)){case 1:var i=vk;break;case 4:i=_k;break;default:i=Kv}n=i.bind(null,e,n,t),i=void 0,!cg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ra(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RT(function(){var c=s,d=Bv(n),p=[];e:{var g=oI.get(t);if(g!==void 0){var w=Qv,E=t;switch(t){case"keypress":if(Ad(n)===0)break e;case"keydown":case"keyup":w=Ok;break;case"focusin":E="focus",w=um;break;case"focusout":E="blur",w=um;break;case"beforeblur":case"afterblur":w=um;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Ek;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Mk;break;case nI:case rI:case iI:w=Sk;break;case sI:w=jk;break;case"scroll":w=yk;break;case"wheel":w=Uk;break;case"copy":case"cut":case"paste":w=Ck;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=q0}var A=(e&4)!==0,R=!A&&t==="scroll",x=A?g!==null?g+"Capture":null:g;A=[];for(var T=c,I;T!==null;){I=T;var M=I.stateNode;if(I.tag===5&&M!==null&&(I=M,x!==null&&(M=bc(T,x),M!=null&&A.push(Dc(T,M,I)))),R)break;T=T.return}0<A.length&&(g=new w(g,E,null,n,d),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==lg&&(E=n.relatedTarget||n.fromElement)&&(ra(E)||E[Zi]))break e;if((w||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,w?(E=n.relatedTarget||n.toElement,w=c,E=E?ra(E):null,E!==null&&(R=Pa(E),E!==R||E.tag!==5&&E.tag!==6)&&(E=null)):(w=null,E=c),w!==E)){if(A=z0,M="onMouseLeave",x="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(A=q0,M="onPointerLeave",x="onPointerEnter",T="pointer"),R=w==null?g:ml(w),I=E==null?g:ml(E),g=new A(M,T+"leave",w,n,d),g.target=R,g.relatedTarget=I,M=null,ra(d)===c&&(A=new A(x,T+"enter",E,n,d),A.target=I,A.relatedTarget=R,M=A),R=M,w&&E)t:{for(A=w,x=E,T=0,I=A;I;I=Za(I))T++;for(I=0,M=x;M;M=Za(M))I++;for(;0<T-I;)A=Za(A),T--;for(;0<I-T;)x=Za(x),I--;for(;T--;){if(A===x||x!==null&&A===x.alternate)break t;A=Za(A),x=Za(x)}A=null}else A=null;w!==null&&tw(p,g,w,A,!1),E!==null&&R!==null&&tw(p,R,E,A,!0)}}e:{if(g=c?ml(c):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var B=Kk;else if(K0(g))if(XT)B=Xk;else{B=Qk;var W=Gk}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=Yk);if(B&&(B=B(t,c))){YT(p,B,n,d);break e}W&&W(t,g,c),t==="focusout"&&(W=g._wrapperState)&&W.controlled&&g.type==="number"&&rg(g,"number",g.value)}switch(W=c?ml(c):window,t){case"focusin":(K0(W)||W.contentEditable==="true")&&(fl=W,mg=c,cc=null);break;case"focusout":cc=mg=fl=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,J0(p,n,d);break;case"selectionchange":if(eR)break;case"keydown":case"keyup":J0(p,n,d)}var P;if(Xv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else dl?GT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(KT&&n.locale!=="ko"&&(dl||C!=="onCompositionStart"?C==="onCompositionEnd"&&dl&&(P=WT()):(Gs=d,Gv="value"in Gs?Gs.value:Gs.textContent,dl=!0)),W=lf(c,C),0<W.length&&(C=new B0(C,t,null,n,d),p.push({event:C,listeners:W}),P?C.data=P:(P=QT(n),P!==null&&(C.data=P)))),(P=zk?Bk(t,n):qk(t,n))&&(c=lf(c,"onBeforeInput"),0<c.length&&(d=new B0("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=P))}aI(p,e)})}function Dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bc(t,n),s!=null&&r.unshift(Dc(t,s,i)),s=bc(t,e),s!=null&&r.push(Dc(t,s,i))),t=t.return}return r}function Za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=bc(n,s),l!=null&&o.unshift(Dc(n,l,a))):i||(l=bc(n,s),l!=null&&o.push(Dc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var iR=/\r\n?/g,sR=/\u0000|\uFFFD/g;function nw(t){return(typeof t=="string"?t:""+t).replace(iR,`
`).replace(sR,"")}function sd(t,e,n){if(e=nw(e),nw(t)!==e&&n)throw Error(Y(425))}function uf(){}var vg=null,_g=null;function yg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wg=typeof setTimeout=="function"?setTimeout:void 0,oR=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,aR=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(t){return rw.resolve(null).then(t).catch(lR)}:wg;function lR(t){setTimeout(function(){throw t})}function vm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ac(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ac(e)}function to(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nu=Math.random().toString(36).slice(2),yi="__reactFiber$"+nu,Oc="__reactProps$"+nu,Zi="__reactContainer$"+nu,Eg="__reactEvents$"+nu,uR="__reactListeners$"+nu,cR="__reactHandles$"+nu;function ra(t){var e=t[yi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zi]||n[yi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iw(t);t!==null;){if(n=t[yi])return n;t=iw(t)}return e}t=n,n=t.parentNode}return null}function ih(t){return t=t[yi]||t[Zi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ml(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function ep(t){return t[Oc]||null}var Tg=[],gl=-1;function Eo(t){return{current:t}}function yt(t){0>gl||(t.current=Tg[gl],Tg[gl]=null,gl--)}function gt(t,e){gl++,Tg[gl]=t.current,t.current=e}var mo={},An=Eo(mo),Xn=Eo(!1),da=mo;function Ll(t,e){var n=t.type.contextTypes;if(!n)return mo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function cf(){yt(Xn),yt(An)}function sw(t,e,n){if(An.current!==mo)throw Error(Y(168));gt(An,e),gt(Xn,n)}function uI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,GP(t)||"Unknown",i));return Pt({},n,r)}function hf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mo,da=An.current,gt(An,t),gt(Xn,Xn.current),!0}function ow(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=uI(t,e,da),r.__reactInternalMemoizedMergedChildContext=t,yt(Xn),yt(An),gt(An,t)):yt(Xn),gt(Xn,n)}var $i=null,tp=!1,_m=!1;function cI(t){$i===null?$i=[t]:$i.push(t)}function hR(t){tp=!0,cI(t)}function To(){if(!_m&&$i!==null){_m=!0;var t=0,e=it;try{var n=$i;for(it=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$i=null,tp=!1}catch(i){throw $i!==null&&($i=$i.slice(t+1)),LT(qv,To),i}finally{it=e,_m=!1}}return null}var vl=[],_l=0,df=null,ff=0,Pr=[],kr=0,fa=null,Bi=1,qi="";function Qo(t,e){vl[_l++]=ff,vl[_l++]=df,df=t,ff=e}function hI(t,e,n){Pr[kr++]=Bi,Pr[kr++]=qi,Pr[kr++]=fa,fa=t;var r=Bi;t=qi;var i=32-ti(r)-1;r&=~(1<<i),n+=1;var s=32-ti(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bi=1<<32-ti(e)+i|n<<i|r,qi=s+t}else Bi=1<<s|n<<i|r,qi=t}function Zv(t){t.return!==null&&(Qo(t,1),hI(t,1,0))}function e_(t){for(;t===df;)df=vl[--_l],vl[_l]=null,ff=vl[--_l],vl[_l]=null;for(;t===fa;)fa=Pr[--kr],Pr[kr]=null,qi=Pr[--kr],Pr[kr]=null,Bi=Pr[--kr],Pr[kr]=null}var ur=null,or=null,Tt=!1,Zr=null;function dI(t,e){var n=Dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function aw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,or=to(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fa!==null?{id:Bi,overflow:qi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,or=null,!0):!1;default:return!1}}function Ig(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sg(t){if(Tt){var e=or;if(e){var n=e;if(!aw(t,e)){if(Ig(t))throw Error(Y(418));e=to(n.nextSibling);var r=ur;e&&aw(t,e)?dI(r,n):(t.flags=t.flags&-4097|2,Tt=!1,ur=t)}}else{if(Ig(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Tt=!1,ur=t}}}function lw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function od(t){if(t!==ur)return!1;if(!Tt)return lw(t),Tt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yg(t.type,t.memoizedProps)),e&&(e=or)){if(Ig(t))throw fI(),Error(Y(418));for(;e;)dI(t,e),e=to(e.nextSibling)}if(lw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){or=to(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}or=null}}else or=ur?to(t.stateNode.nextSibling):null;return!0}function fI(){for(var t=or;t;)t=to(t.nextSibling)}function Ml(){or=ur=null,Tt=!1}function t_(t){Zr===null?Zr=[t]:Zr.push(t)}var dR=as.ReactCurrentBatchConfig;function Mu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function ad(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uw(t){var e=t._init;return e(t._payload)}function pI(t){function e(x,T){if(t){var I=x.deletions;I===null?(x.deletions=[T],x.flags|=16):I.push(T)}}function n(x,T){if(!t)return null;for(;T!==null;)e(x,T),T=T.sibling;return null}function r(x,T){for(x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function i(x,T){return x=so(x,T),x.index=0,x.sibling=null,x}function s(x,T,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<T?(x.flags|=2,T):I):(x.flags|=2,T)):(x.flags|=1048576,T)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,T,I,M){return T===null||T.tag!==6?(T=bm(I,x.mode,M),T.return=x,T):(T=i(T,I),T.return=x,T)}function l(x,T,I,M){var B=I.type;return B===hl?d(x,T,I.props.children,M,I.key):T!==null&&(T.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===js&&uw(B)===T.type)?(M=i(T,I.props),M.ref=Mu(x,T,I),M.return=x,M):(M=Ld(I.type,I.key,I.props,null,x.mode,M),M.ref=Mu(x,T,I),M.return=x,M)}function c(x,T,I,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=Cm(I,x.mode,M),T.return=x,T):(T=i(T,I.children||[]),T.return=x,T)}function d(x,T,I,M,B){return T===null||T.tag!==7?(T=la(I,x.mode,M,B),T.return=x,T):(T=i(T,I),T.return=x,T)}function p(x,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=bm(""+T,x.mode,I),T.return=x,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Yh:return I=Ld(T.type,T.key,T.props,null,x.mode,I),I.ref=Mu(x,null,T),I.return=x,I;case cl:return T=Cm(T,x.mode,I),T.return=x,T;case js:var M=T._init;return p(x,M(T._payload),I)}if(Gu(T)||Ru(T))return T=la(T,x.mode,I,null),T.return=x,T;ad(x,T)}return null}function g(x,T,I,M){var B=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return B!==null?null:a(x,T,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Yh:return I.key===B?l(x,T,I,M):null;case cl:return I.key===B?c(x,T,I,M):null;case js:return B=I._init,g(x,T,B(I._payload),M)}if(Gu(I)||Ru(I))return B!==null?null:d(x,T,I,M,null);ad(x,I)}return null}function w(x,T,I,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return x=x.get(I)||null,a(T,x,""+M,B);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Yh:return x=x.get(M.key===null?I:M.key)||null,l(T,x,M,B);case cl:return x=x.get(M.key===null?I:M.key)||null,c(T,x,M,B);case js:var W=M._init;return w(x,T,I,W(M._payload),B)}if(Gu(M)||Ru(M))return x=x.get(I)||null,d(T,x,M,B,null);ad(T,M)}return null}function E(x,T,I,M){for(var B=null,W=null,P=T,C=T=0,k=null;P!==null&&C<I.length;C++){P.index>C?(k=P,P=null):k=P.sibling;var O=g(x,P,I[C],M);if(O===null){P===null&&(P=k);break}t&&P&&O.alternate===null&&e(x,P),T=s(O,T,C),W===null?B=O:W.sibling=O,W=O,P=k}if(C===I.length)return n(x,P),Tt&&Qo(x,C),B;if(P===null){for(;C<I.length;C++)P=p(x,I[C],M),P!==null&&(T=s(P,T,C),W===null?B=P:W.sibling=P,W=P);return Tt&&Qo(x,C),B}for(P=r(x,P);C<I.length;C++)k=w(P,x,C,I[C],M),k!==null&&(t&&k.alternate!==null&&P.delete(k.key===null?C:k.key),T=s(k,T,C),W===null?B=k:W.sibling=k,W=k);return t&&P.forEach(function(L){return e(x,L)}),Tt&&Qo(x,C),B}function A(x,T,I,M){var B=Ru(I);if(typeof B!="function")throw Error(Y(150));if(I=B.call(I),I==null)throw Error(Y(151));for(var W=B=null,P=T,C=T=0,k=null,O=I.next();P!==null&&!O.done;C++,O=I.next()){P.index>C?(k=P,P=null):k=P.sibling;var L=g(x,P,O.value,M);if(L===null){P===null&&(P=k);break}t&&P&&L.alternate===null&&e(x,P),T=s(L,T,C),W===null?B=L:W.sibling=L,W=L,P=k}if(O.done)return n(x,P),Tt&&Qo(x,C),B;if(P===null){for(;!O.done;C++,O=I.next())O=p(x,O.value,M),O!==null&&(T=s(O,T,C),W===null?B=O:W.sibling=O,W=O);return Tt&&Qo(x,C),B}for(P=r(x,P);!O.done;C++,O=I.next())O=w(P,x,C,O.value,M),O!==null&&(t&&O.alternate!==null&&P.delete(O.key===null?C:O.key),T=s(O,T,C),W===null?B=O:W.sibling=O,W=O);return t&&P.forEach(function(j){return e(x,j)}),Tt&&Qo(x,C),B}function R(x,T,I,M){if(typeof I=="object"&&I!==null&&I.type===hl&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Yh:e:{for(var B=I.key,W=T;W!==null;){if(W.key===B){if(B=I.type,B===hl){if(W.tag===7){n(x,W.sibling),T=i(W,I.props.children),T.return=x,x=T;break e}}else if(W.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===js&&uw(B)===W.type){n(x,W.sibling),T=i(W,I.props),T.ref=Mu(x,W,I),T.return=x,x=T;break e}n(x,W);break}else e(x,W);W=W.sibling}I.type===hl?(T=la(I.props.children,x.mode,M,I.key),T.return=x,x=T):(M=Ld(I.type,I.key,I.props,null,x.mode,M),M.ref=Mu(x,T,I),M.return=x,x=M)}return o(x);case cl:e:{for(W=I.key;T!==null;){if(T.key===W)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){n(x,T.sibling),T=i(T,I.children||[]),T.return=x,x=T;break e}else{n(x,T);break}else e(x,T);T=T.sibling}T=Cm(I,x.mode,M),T.return=x,x=T}return o(x);case js:return W=I._init,R(x,T,W(I._payload),M)}if(Gu(I))return E(x,T,I,M);if(Ru(I))return A(x,T,I,M);ad(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(n(x,T.sibling),T=i(T,I),T.return=x,x=T):(n(x,T),T=bm(I,x.mode,M),T.return=x,x=T),o(x)):n(x,T)}return R}var Vl=pI(!0),mI=pI(!1),pf=Eo(null),mf=null,yl=null,n_=null;function r_(){n_=yl=mf=null}function i_(t){var e=pf.current;yt(pf),t._currentValue=e}function bg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Al(t,e){mf=t,n_=yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yn=!0),t.firstContext=null)}function Vr(t){var e=t._currentValue;if(n_!==t)if(t={context:t,memoizedValue:e,next:null},yl===null){if(mf===null)throw Error(Y(308));yl=t,mf.dependencies={lanes:0,firstContext:t}}else yl=yl.next=t;return e}var ia=null;function s_(t){ia===null?ia=[t]:ia.push(t)}function gI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,s_(e)):(n.next=i.next,i.next=n),e.interleaved=n,es(t,r)}function es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fs=!1;function o_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function no(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,es(t,n)}return i=r.interleaved,i===null?(e.next=e,s_(r)):(e.next=i.next,i.next=e),r.interleaved=e,es(t,n)}function Pd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hv(t,n)}}function cw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gf(t,e,n,r){var i=t.updateQueue;Fs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=c=l=null,a=s;do{var g=a.lane,w=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:w,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,A=a;switch(g=e,w=n,A.tag){case 1:if(E=A.payload,typeof E=="function"){p=E.call(w,p,g);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=A.payload,g=typeof E=="function"?E.call(w,p,g):E,g==null)break e;p=Pt({},p,g);break e;case 2:Fs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else w={eventTime:w,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=w,l=p):d=d.next=w,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ma|=o,t.lanes=o,t.memoizedState=p}}function hw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var sh={},bi=Eo(sh),Nc=Eo(sh),Lc=Eo(sh);function sa(t){if(t===sh)throw Error(Y(174));return t}function a_(t,e){switch(gt(Lc,e),gt(Nc,t),gt(bi,sh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sg(e,t)}yt(bi),gt(bi,e)}function jl(){yt(bi),yt(Nc),yt(Lc)}function _I(t){sa(Lc.current);var e=sa(bi.current),n=sg(e,t.type);e!==n&&(gt(Nc,t),gt(bi,n))}function l_(t){Nc.current===t&&(yt(bi),yt(Nc))}var bt=Eo(0);function vf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ym=[];function u_(){for(var t=0;t<ym.length;t++)ym[t]._workInProgressVersionPrimary=null;ym.length=0}var kd=as.ReactCurrentDispatcher,wm=as.ReactCurrentBatchConfig,pa=0,xt=null,Yt=null,sn=null,_f=!1,hc=!1,Mc=0,fR=0;function En(){throw Error(Y(321))}function c_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ii(t[n],e[n]))return!1;return!0}function h_(t,e,n,r,i,s){if(pa=s,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kd.current=t===null||t.memoizedState===null?vR:_R,t=n(r,i),hc){s=0;do{if(hc=!1,Mc=0,25<=s)throw Error(Y(301));s+=1,sn=Yt=null,e.updateQueue=null,kd.current=yR,t=n(r,i)}while(hc)}if(kd.current=yf,e=Yt!==null&&Yt.next!==null,pa=0,sn=Yt=xt=null,_f=!1,e)throw Error(Y(300));return t}function d_(){var t=Mc!==0;return Mc=0,t}function _i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?xt.memoizedState=sn=t:sn=sn.next=t,sn}function jr(){if(Yt===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=sn===null?xt.memoizedState:sn.next;if(e!==null)sn=e,Yt=t;else{if(t===null)throw Error(Y(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},sn===null?xt.memoizedState=sn=t:sn=sn.next=t}return sn}function Vc(t,e){return typeof e=="function"?e(t):e}function Em(t){var e=jr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((pa&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,xt.lanes|=d,ma|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ii(r,e.memoizedState)||(Yn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xt.lanes|=s,ma|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tm(t){var e=jr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ii(s,e.memoizedState)||(Yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yI(){}function wI(t,e){var n=xt,r=jr(),i=e(),s=!ii(r.memoizedState,i);if(s&&(r.memoizedState=i,Yn=!0),r=r.queue,f_(II.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,jc(9,TI.bind(null,n,r,i,e),void 0,null),on===null)throw Error(Y(349));pa&30||EI(n,e,i)}return i}function EI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TI(t,e,n,r){e.value=n,e.getSnapshot=r,SI(e)&&bI(t)}function II(t,e,n){return n(function(){SI(e)&&bI(t)})}function SI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ii(t,n)}catch{return!0}}function bI(t){var e=es(t,1);e!==null&&ni(e,t,1,-1)}function dw(t){var e=_i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:t},e.queue=t,t=t.dispatch=gR.bind(null,xt,t),[e.memoizedState,t]}function jc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CI(){return jr().memoizedState}function Rd(t,e,n,r){var i=_i();xt.flags|=t,i.memoizedState=jc(1|e,n,void 0,r===void 0?null:r)}function np(t,e,n,r){var i=jr();r=r===void 0?null:r;var s=void 0;if(Yt!==null){var o=Yt.memoizedState;if(s=o.destroy,r!==null&&c_(r,o.deps)){i.memoizedState=jc(e,n,s,r);return}}xt.flags|=t,i.memoizedState=jc(1|e,n,s,r)}function fw(t,e){return Rd(8390656,8,t,e)}function f_(t,e){return np(2048,8,t,e)}function xI(t,e){return np(4,2,t,e)}function AI(t,e){return np(4,4,t,e)}function PI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kI(t,e,n){return n=n!=null?n.concat([t]):null,np(4,4,PI.bind(null,e,t),n)}function p_(){}function RI(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DI(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&c_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function OI(t,e,n){return pa&21?(ii(n,e)||(n=jT(),xt.lanes|=n,ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yn=!0),t.memoizedState=n)}function pR(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var r=wm.transition;wm.transition={};try{t(!1),e()}finally{it=n,wm.transition=r}}function NI(){return jr().memoizedState}function mR(t,e,n){var r=io(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},LI(t))MI(e,n);else if(n=gI(t,e,n,r),n!==null){var i=jn();ni(n,t,r,i),VI(n,e,r)}}function gR(t,e,n){var r=io(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(LI(t))MI(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ii(a,o)){var l=e.interleaved;l===null?(i.next=i,s_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=gI(t,e,i,r),n!==null&&(i=jn(),ni(n,t,r,i),VI(n,e,r))}}function LI(t){var e=t.alternate;return t===xt||e!==null&&e===xt}function MI(t,e){hc=_f=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VI(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hv(t,n)}}var yf={readContext:Vr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},vR={readContext:Vr,useCallback:function(t,e){return _i().memoizedState=[t,e===void 0?null:e],t},useContext:Vr,useEffect:fw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rd(4194308,4,PI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rd(4,2,t,e)},useMemo:function(t,e){var n=_i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_i();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mR.bind(null,xt,t),[r.memoizedState,t]},useRef:function(t){var e=_i();return t={current:t},e.memoizedState=t},useState:dw,useDebugValue:p_,useDeferredValue:function(t){return _i().memoizedState=t},useTransition:function(){var t=dw(!1),e=t[0];return t=pR.bind(null,t[1]),_i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xt,i=_i();if(Tt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),on===null)throw Error(Y(349));pa&30||EI(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,fw(II.bind(null,r,s,t),[t]),r.flags|=2048,jc(9,TI.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=_i(),e=on.identifierPrefix;if(Tt){var n=qi,r=Bi;n=(r&~(1<<32-ti(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_R={readContext:Vr,useCallback:RI,useContext:Vr,useEffect:f_,useImperativeHandle:kI,useInsertionEffect:xI,useLayoutEffect:AI,useMemo:DI,useReducer:Em,useRef:CI,useState:function(){return Em(Vc)},useDebugValue:p_,useDeferredValue:function(t){var e=jr();return OI(e,Yt.memoizedState,t)},useTransition:function(){var t=Em(Vc)[0],e=jr().memoizedState;return[t,e]},useMutableSource:yI,useSyncExternalStore:wI,useId:NI,unstable_isNewReconciler:!1},yR={readContext:Vr,useCallback:RI,useContext:Vr,useEffect:f_,useImperativeHandle:kI,useInsertionEffect:xI,useLayoutEffect:AI,useMemo:DI,useReducer:Tm,useRef:CI,useState:function(){return Tm(Vc)},useDebugValue:p_,useDeferredValue:function(t){var e=jr();return Yt===null?e.memoizedState=t:OI(e,Yt.memoizedState,t)},useTransition:function(){var t=Tm(Vc)[0],e=jr().memoizedState;return[t,e]},useMutableSource:yI,useSyncExternalStore:wI,useId:NI,unstable_isNewReconciler:!1};function Xr(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rp={isMounted:function(t){return(t=t._reactInternals)?Pa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jn(),i=io(t),s=Qi(r,i);s.payload=e,n!=null&&(s.callback=n),e=no(t,s,i),e!==null&&(ni(e,t,i,r),Pd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jn(),i=io(t),s=Qi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=no(t,s,i),e!==null&&(ni(e,t,i,r),Pd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),r=io(t),i=Qi(n,r);i.tag=2,e!=null&&(i.callback=e),e=no(t,i,r),e!==null&&(ni(e,t,r,n),Pd(e,t,r))}};function pw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!kc(n,r)||!kc(i,s):!0}function jI(t,e,n){var r=!1,i=mo,s=e.contextType;return typeof s=="object"&&s!==null?s=Vr(s):(i=Jn(e)?da:An.current,r=e.contextTypes,s=(r=r!=null)?Ll(t,i):mo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function mw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&rp.enqueueReplaceState(e,e.state,null)}function xg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},o_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Vr(s):(s=Jn(e)?da:An.current,i.context=Ll(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&rp.enqueueReplaceState(i,i.state,null),gf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fl(t,e){try{var n="",r=e;do n+=KP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Im(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ag(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wR=typeof WeakMap=="function"?WeakMap:Map;function FI(t,e,n){n=Qi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ef||(Ef=!0,jg=r),Ag(t,e)},n}function UI(t,e,n){n=Qi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ag(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ag(t,e),typeof r!="function"&&(ro===null?ro=new Set([this]):ro.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NR.bind(null,t,e,n),e.then(t,t))}function vw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _w(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qi(-1,1),e.tag=2,no(n,e,1))),n.lanes|=1),t)}var ER=as.ReactCurrentOwner,Yn=!1;function Nn(t,e,n,r){e.child=t===null?mI(e,null,n,r):Vl(e,t.child,n,r)}function yw(t,e,n,r,i){n=n.render;var s=e.ref;return Al(e,i),r=h_(t,e,n,r,s,i),n=d_(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ts(t,e,i)):(Tt&&n&&Zv(e),e.flags|=1,Nn(t,e,r,i),e.child)}function ww(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!T_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$I(t,e,s,r,i)):(t=Ld(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:kc,n(o,r)&&t.ref===e.ref)return ts(t,e,i)}return e.flags|=1,t=so(s,r),t.ref=e.ref,t.return=e,e.child=t}function $I(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(kc(s,r)&&t.ref===e.ref)if(Yn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yn=!0);else return e.lanes=t.lanes,ts(t,e,i)}return Pg(t,e,n,r,i)}function zI(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(El,sr),sr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gt(El,sr),sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,gt(El,sr),sr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,gt(El,sr),sr|=r;return Nn(t,e,i,n),e.child}function BI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pg(t,e,n,r,i){var s=Jn(n)?da:An.current;return s=Ll(e,s),Al(e,i),n=h_(t,e,n,r,s,i),r=d_(),t!==null&&!Yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ts(t,e,i)):(Tt&&r&&Zv(e),e.flags|=1,Nn(t,e,n,i),e.child)}function Ew(t,e,n,r,i){if(Jn(n)){var s=!0;hf(e)}else s=!1;if(Al(e,i),e.stateNode===null)Dd(t,e),jI(e,n,r),xg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Vr(c):(c=Jn(n)?da:An.current,c=Ll(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&mw(e,o,r,c),Fs=!1;var g=e.memoizedState;o.state=g,gf(e,r,o,i),l=e.memoizedState,a!==r||g!==l||Xn.current||Fs?(typeof d=="function"&&(Cg(e,n,d,r),l=e.memoizedState),(a=Fs||pw(e,n,a,r,g,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Xr(e.type,a),o.props=c,p=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Vr(l):(l=Jn(n)?da:An.current,l=Ll(e,l));var w=n.getDerivedStateFromProps;(d=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&mw(e,o,r,l),Fs=!1,g=e.memoizedState,o.state=g,gf(e,r,o,i);var E=e.memoizedState;a!==p||g!==E||Xn.current||Fs?(typeof w=="function"&&(Cg(e,n,w,r),E=e.memoizedState),(c=Fs||pw(e,n,c,r,g,E,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return kg(t,e,n,r,s,i)}function kg(t,e,n,r,i,s){BI(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ow(e,n,!1),ts(t,e,s);r=e.stateNode,ER.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Vl(e,t.child,null,s),e.child=Vl(e,null,a,s)):Nn(t,e,a,s),e.memoizedState=r.state,i&&ow(e,n,!0),e.child}function qI(t){var e=t.stateNode;e.pendingContext?sw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sw(t,e.context,!1),a_(t,e.containerInfo)}function Tw(t,e,n,r,i){return Ml(),t_(i),e.flags|=256,Nn(t,e,n,r),e.child}var Rg={dehydrated:null,treeContext:null,retryLane:0};function Dg(t){return{baseLanes:t,cachePool:null,transitions:null}}function HI(t,e,n){var r=e.pendingProps,i=bt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),gt(bt,i&1),t===null)return Sg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=op(o,r,0,null),t=la(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Dg(n),e.memoizedState=Rg,t):m_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return TR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=so(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=so(a,s):(s=la(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Dg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rg,r}return s=t.child,t=s.sibling,r=so(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function m_(t,e){return e=op({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ld(t,e,n,r){return r!==null&&t_(r),Vl(e,t.child,null,n),t=m_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function TR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Im(Error(Y(422))),ld(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=op({mode:"visible",children:r.children},i,0,null),s=la(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Vl(e,t.child,null,o),e.child.memoizedState=Dg(o),e.memoizedState=Rg,s);if(!(e.mode&1))return ld(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Y(419)),r=Im(s,r,void 0),ld(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yn||a){if(r=on,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,es(t,i),ni(r,t,i,-1))}return E_(),r=Im(Error(Y(421))),ld(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=LR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,or=to(i.nextSibling),ur=e,Tt=!0,Zr=null,t!==null&&(Pr[kr++]=Bi,Pr[kr++]=qi,Pr[kr++]=fa,Bi=t.id,qi=t.overflow,fa=e),e=m_(e,r.children),e.flags|=4096,e)}function Iw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bg(t.return,e,n)}function Sm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nn(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iw(t,n,e);else if(t.tag===19)Iw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gt(bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sm(e,!0,n,null,s);break;case"together":Sm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=so(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=so(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function IR(t,e,n){switch(e.tag){case 3:qI(e),Ml();break;case 5:_I(e);break;case 1:Jn(e.type)&&hf(e);break;case 4:a_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;gt(pf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?HI(t,e,n):(gt(bt,bt.current&1),t=ts(t,e,n),t!==null?t.sibling:null);gt(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gt(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,zI(t,e,n)}return ts(t,e,n)}var KI,Og,GI,QI;KI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Og=function(){};GI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,sa(bi.current);var s=null;switch(n){case"input":i=tg(t,i),r=tg(t,r),s=[];break;case"select":i=Pt({},i,{value:void 0}),r=Pt({},r,{value:void 0}),s=[];break;case"textarea":i=ig(t,i),r=ig(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uf)}og(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ic.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ic.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_t("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};QI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vu(t,e){if(!Tt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function SR(t,e,n){var r=e.pendingProps;switch(e_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(e),null;case 1:return Jn(e.type)&&cf(),Tn(e),null;case 3:return r=e.stateNode,jl(),yt(Xn),yt(An),u_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(od(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Zr!==null&&($g(Zr),Zr=null))),Og(t,e),Tn(e),null;case 5:l_(e);var i=sa(Lc.current);if(n=e.type,t!==null&&e.stateNode!=null)GI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Tn(e),null}if(t=sa(bi.current),od(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yi]=e,r[Oc]=s,t=(e.mode&1)!==0,n){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(i=0;i<Yu.length;i++)_t(Yu[i],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":D0(r,s),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_t("invalid",r);break;case"textarea":N0(r,s),_t("invalid",r)}og(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&sd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&sd(r.textContent,a,t),i=["children",""+a]):Ic.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_t("scroll",r)}switch(n){case"input":Xh(r),O0(r,s,!0);break;case"textarea":Xh(r),L0(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=uf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yi]=e,t[Oc]=r,KI(t,e,!1,!1),e.stateNode=t;e:{switch(o=ag(n,r),n){case"dialog":_t("cancel",t),_t("close",t),i=r;break;case"iframe":case"object":case"embed":_t("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yu.length;i++)_t(Yu[i],t);i=r;break;case"source":_t("error",t),i=r;break;case"img":case"image":case"link":_t("error",t),_t("load",t),i=r;break;case"details":_t("toggle",t),i=r;break;case"input":D0(t,r),i=tg(t,r),_t("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pt({},r,{value:void 0}),_t("invalid",t);break;case"textarea":N0(t,r),i=ig(t,r),_t("invalid",t);break;default:i=r}og(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?CT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ST(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Sc(t,l):typeof l=="number"&&Sc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ic.hasOwnProperty(s)?l!=null&&s==="onScroll"&&_t("scroll",t):l!=null&&Fv(t,s,l,o))}switch(n){case"input":Xh(t),O0(t,r,!1);break;case"textarea":Xh(t),L0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+po(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Sl(t,!!r.multiple,s,!1):r.defaultValue!=null&&Sl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=uf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tn(e),null;case 6:if(t&&e.stateNode!=null)QI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=sa(Lc.current),sa(bi.current),od(e)){if(r=e.stateNode,n=e.memoizedProps,r[yi]=e,(s=r.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:sd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yi]=e,e.stateNode=r}return Tn(e),null;case 13:if(yt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tt&&or!==null&&e.mode&1&&!(e.flags&128))fI(),Ml(),e.flags|=98560,s=!1;else if(s=od(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[yi]=e}else Ml(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tn(e),s=!1}else Zr!==null&&($g(Zr),Zr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Xt===0&&(Xt=3):E_())),e.updateQueue!==null&&(e.flags|=4),Tn(e),null);case 4:return jl(),Og(t,e),t===null&&Rc(e.stateNode.containerInfo),Tn(e),null;case 10:return i_(e.type._context),Tn(e),null;case 17:return Jn(e.type)&&cf(),Tn(e),null;case 19:if(yt(bt),s=e.memoizedState,s===null)return Tn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vu(s,!1);else{if(Xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vf(t),o!==null){for(e.flags|=128,Vu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gt(bt,bt.current&1|2),e.child}t=t.sibling}s.tail!==null&&jt()>Ul&&(e.flags|=128,r=!0,Vu(s,!1),e.lanes=4194304)}else{if(!r)if(t=vf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Tt)return Tn(e),null}else 2*jt()-s.renderingStartTime>Ul&&n!==1073741824&&(e.flags|=128,r=!0,Vu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=jt(),e.sibling=null,n=bt.current,gt(bt,r?n&1|2:n&1),e):(Tn(e),null);case 22:case 23:return w_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?sr&1073741824&&(Tn(e),e.subtreeFlags&6&&(e.flags|=8192)):Tn(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function bR(t,e){switch(e_(e),e.tag){case 1:return Jn(e.type)&&cf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return jl(),yt(Xn),yt(An),u_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return l_(e),null;case 13:if(yt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ml()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(bt),null;case 4:return jl(),null;case 10:return i_(e.type._context),null;case 22:case 23:return w_(),null;case 24:return null;default:return null}}var ud=!1,Cn=!1,CR=typeof WeakSet=="function"?WeakSet:Set,se=null;function wl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(t,e,r)}else n.current=null}function Ng(t,e,n){try{n()}catch(r){Ot(t,e,r)}}var Sw=!1;function xR(t,e){if(vg=of,t=eI(),Jv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=t,g=null;t:for(;;){for(var w;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++c===i&&(a=o),g===s&&++d===r&&(l=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(_g={focusedElem:t,selectionRange:n},of=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var A=E.memoizedProps,R=E.memoizedState,x=e.stateNode,T=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:Xr(e.type,A),R);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(M){Ot(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return E=Sw,Sw=!1,E}function dc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ng(e,n,s)}i=i.next}while(i!==r)}}function ip(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YI(t){var e=t.alternate;e!==null&&(t.alternate=null,YI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yi],delete e[Oc],delete e[Eg],delete e[uR],delete e[cR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XI(t){return t.tag===5||t.tag===3||t.tag===4}function bw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uf));else if(r!==4&&(t=t.child,t!==null))for(Mg(t,e,n),t=t.sibling;t!==null;)Mg(t,e,n),t=t.sibling}function Vg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vg(t,e,n),t=t.sibling;t!==null;)Vg(t,e,n),t=t.sibling}var cn=null,Jr=!1;function Ds(t,e,n){for(n=n.child;n!==null;)JI(t,e,n),n=n.sibling}function JI(t,e,n){if(Si&&typeof Si.onCommitFiberUnmount=="function")try{Si.onCommitFiberUnmount(Yf,n)}catch{}switch(n.tag){case 5:Cn||wl(n,e);case 6:var r=cn,i=Jr;cn=null,Ds(t,e,n),cn=r,Jr=i,cn!==null&&(Jr?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(Jr?(t=cn,n=n.stateNode,t.nodeType===8?vm(t.parentNode,n):t.nodeType===1&&vm(t,n),Ac(t)):vm(cn,n.stateNode));break;case 4:r=cn,i=Jr,cn=n.stateNode.containerInfo,Jr=!0,Ds(t,e,n),cn=r,Jr=i;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Ng(n,e,o),i=i.next}while(i!==r)}Ds(t,e,n);break;case 1:if(!Cn&&(wl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ot(n,e,a)}Ds(t,e,n);break;case 21:Ds(t,e,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,Ds(t,e,n),Cn=r):Ds(t,e,n);break;default:Ds(t,e,n)}}function Cw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CR),e.forEach(function(r){var i=MR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cn=a.stateNode,Jr=!1;break e;case 3:cn=a.stateNode.containerInfo,Jr=!0;break e;case 4:cn=a.stateNode.containerInfo,Jr=!0;break e}a=a.return}if(cn===null)throw Error(Y(160));JI(s,o,i),cn=null,Jr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ot(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZI(e,t),e=e.sibling}function ZI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yr(e,t),vi(t),r&4){try{dc(3,t,t.return),ip(3,t)}catch(A){Ot(t,t.return,A)}try{dc(5,t,t.return)}catch(A){Ot(t,t.return,A)}}break;case 1:Yr(e,t),vi(t),r&512&&n!==null&&wl(n,n.return);break;case 5:if(Yr(e,t),vi(t),r&512&&n!==null&&wl(n,n.return),t.flags&32){var i=t.stateNode;try{Sc(i,"")}catch(A){Ot(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ET(i,s),ag(a,o);var c=ag(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?CT(i,p):d==="dangerouslySetInnerHTML"?ST(i,p):d==="children"?Sc(i,p):Fv(i,d,p,c)}switch(a){case"input":ng(i,s);break;case"textarea":TT(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Sl(i,!!s.multiple,w,!1):g!==!!s.multiple&&(s.defaultValue!=null?Sl(i,!!s.multiple,s.defaultValue,!0):Sl(i,!!s.multiple,s.multiple?[]:"",!1))}i[Oc]=s}catch(A){Ot(t,t.return,A)}}break;case 6:if(Yr(e,t),vi(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Ot(t,t.return,A)}}break;case 3:if(Yr(e,t),vi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ac(e.containerInfo)}catch(A){Ot(t,t.return,A)}break;case 4:Yr(e,t),vi(t);break;case 13:Yr(e,t),vi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(__=jt())),r&4&&Cw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(c=Cn)||d,Yr(e,t),Cn=c):Yr(e,t),vi(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(se=t,d=t.child;d!==null;){for(p=se=d;se!==null;){switch(g=se,w=g.child,g.tag){case 0:case 11:case 14:case 15:dc(4,g,g.return);break;case 1:wl(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(A){Ot(r,n,A)}}break;case 5:wl(g,g.return);break;case 22:if(g.memoizedState!==null){Aw(p);continue}}w!==null?(w.return=g,se=w):Aw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bT("display",o))}catch(A){Ot(t,t.return,A)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(A){Ot(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Yr(e,t),vi(t),r&4&&Cw(t);break;case 21:break;default:Yr(e,t),vi(t)}}function vi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XI(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sc(i,""),r.flags&=-33);var s=bw(t);Vg(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bw(t);Mg(t,a,o);break;default:throw Error(Y(161))}}catch(l){Ot(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AR(t,e,n){se=t,eS(t)}function eS(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ud;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Cn;a=ud;var c=Cn;if(ud=o,(Cn=l)&&!c)for(se=i;se!==null;)o=se,l=o.child,o.tag===22&&o.memoizedState!==null?Pw(i):l!==null?(l.return=o,se=l):Pw(i);for(;s!==null;)se=s,eS(s),s=s.sibling;se=i,ud=a,Cn=c}xw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):xw(t)}}function xw(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||ip(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Ac(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Cn||e.flags&512&&Lg(e)}catch(g){Ot(e,e.return,g)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Aw(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Pw(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ip(4,e)}catch(l){Ot(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ot(e,i,l)}}var s=e.return;try{Lg(e)}catch(l){Ot(e,s,l)}break;case 5:var o=e.return;try{Lg(e)}catch(l){Ot(e,o,l)}}}catch(l){Ot(e,e.return,l)}if(e===t){se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,se=a;break}se=e.return}}var PR=Math.ceil,wf=as.ReactCurrentDispatcher,g_=as.ReactCurrentOwner,Nr=as.ReactCurrentBatchConfig,$e=0,on=null,Bt=null,fn=0,sr=0,El=Eo(0),Xt=0,Fc=null,ma=0,sp=0,v_=0,fc=null,Qn=null,__=0,Ul=1/0,Ui=null,Ef=!1,jg=null,ro=null,cd=!1,Qs=null,Tf=0,pc=0,Fg=null,Od=-1,Nd=0;function jn(){return $e&6?jt():Od!==-1?Od:Od=jt()}function io(t){return t.mode&1?$e&2&&fn!==0?fn&-fn:dR.transition!==null?(Nd===0&&(Nd=jT()),Nd):(t=it,t!==0||(t=window.event,t=t===void 0?16:HT(t.type)),t):1}function ni(t,e,n,r){if(50<pc)throw pc=0,Fg=null,Error(Y(185));nh(t,n,r),(!($e&2)||t!==on)&&(t===on&&(!($e&2)&&(sp|=n),Xt===4&&zs(t,fn)),Zn(t,r),n===1&&$e===0&&!(e.mode&1)&&(Ul=jt()+500,tp&&To()))}function Zn(t,e){var n=t.callbackNode;dk(t,e);var r=sf(t,t===on?fn:0);if(r===0)n!==null&&j0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&j0(n),e===1)t.tag===0?hR(kw.bind(null,t)):cI(kw.bind(null,t)),aR(function(){!($e&6)&&To()}),n=null;else{switch(FT(r)){case 1:n=qv;break;case 4:n=MT;break;case 16:n=rf;break;case 536870912:n=VT;break;default:n=rf}n=lS(n,tS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tS(t,e){if(Od=-1,Nd=0,$e&6)throw Error(Y(327));var n=t.callbackNode;if(Pl()&&t.callbackNode!==n)return null;var r=sf(t,t===on?fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=If(t,r);else{e=r;var i=$e;$e|=2;var s=rS();(on!==t||fn!==e)&&(Ui=null,Ul=jt()+500,aa(t,e));do try{DR();break}catch(a){nS(t,a)}while(!0);r_(),wf.current=s,$e=i,Bt!==null?e=0:(on=null,fn=0,e=Xt)}if(e!==0){if(e===2&&(i=dg(t),i!==0&&(r=i,e=Ug(t,i))),e===1)throw n=Fc,aa(t,0),zs(t,r),Zn(t,jt()),n;if(e===6)zs(t,r);else{if(i=t.current.alternate,!(r&30)&&!kR(i)&&(e=If(t,r),e===2&&(s=dg(t),s!==0&&(r=s,e=Ug(t,s))),e===1))throw n=Fc,aa(t,0),zs(t,r),Zn(t,jt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Yo(t,Qn,Ui);break;case 3:if(zs(t,r),(r&130023424)===r&&(e=__+500-jt(),10<e)){if(sf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wg(Yo.bind(null,t,Qn,Ui),e);break}Yo(t,Qn,Ui);break;case 4:if(zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ti(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PR(r/1960))-r,10<r){t.timeoutHandle=wg(Yo.bind(null,t,Qn,Ui),r);break}Yo(t,Qn,Ui);break;case 5:Yo(t,Qn,Ui);break;default:throw Error(Y(329))}}}return Zn(t,jt()),t.callbackNode===n?tS.bind(null,t):null}function Ug(t,e){var n=fc;return t.current.memoizedState.isDehydrated&&(aa(t,e).flags|=256),t=If(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&$g(e)),t}function $g(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function kR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ii(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zs(t,e){for(e&=~v_,e&=~sp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ti(e),r=1<<n;t[n]=-1,e&=~r}}function kw(t){if($e&6)throw Error(Y(327));Pl();var e=sf(t,0);if(!(e&1))return Zn(t,jt()),null;var n=If(t,e);if(t.tag!==0&&n===2){var r=dg(t);r!==0&&(e=r,n=Ug(t,r))}if(n===1)throw n=Fc,aa(t,0),zs(t,e),Zn(t,jt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yo(t,Qn,Ui),Zn(t,jt()),null}function y_(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(Ul=jt()+500,tp&&To())}}function ga(t){Qs!==null&&Qs.tag===0&&!($e&6)&&Pl();var e=$e;$e|=1;var n=Nr.transition,r=it;try{if(Nr.transition=null,it=1,t)return t()}finally{it=r,Nr.transition=n,$e=e,!($e&6)&&To()}}function w_(){sr=El.current,yt(El)}function aa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oR(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(e_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cf();break;case 3:jl(),yt(Xn),yt(An),u_();break;case 5:l_(r);break;case 4:jl();break;case 13:yt(bt);break;case 19:yt(bt);break;case 10:i_(r.type._context);break;case 22:case 23:w_()}n=n.return}if(on=t,Bt=t=so(t.current,null),fn=sr=e,Xt=0,Fc=null,v_=sp=ma=0,Qn=fc=null,ia!==null){for(e=0;e<ia.length;e++)if(n=ia[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ia=null}return t}function nS(t,e){do{var n=Bt;try{if(r_(),kd.current=yf,_f){for(var r=xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_f=!1}if(pa=0,sn=Yt=xt=null,hc=!1,Mc=0,g_.current=null,n===null||n.return===null){Xt=1,Fc=e,Bt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=fn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var w=vw(o);if(w!==null){w.flags&=-257,_w(w,o,a,s,e),w.mode&1&&gw(s,c,e),e=w,l=c;var E=e.updateQueue;if(E===null){var A=new Set;A.add(l),e.updateQueue=A}else E.add(l);break e}else{if(!(e&1)){gw(s,c,e),E_();break e}l=Error(Y(426))}}else if(Tt&&a.mode&1){var R=vw(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),_w(R,o,a,s,e),t_(Fl(l,a));break e}}s=l=Fl(l,a),Xt!==4&&(Xt=2),fc===null?fc=[s]:fc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=FI(s,l,e);cw(s,x);break e;case 1:a=l;var T=s.type,I=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ro===null||!ro.has(I)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=UI(s,a,e);cw(s,M);break e}}s=s.return}while(s!==null)}sS(n)}catch(B){e=B,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function rS(){var t=wf.current;return wf.current=yf,t===null?yf:t}function E_(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),on===null||!(ma&268435455)&&!(sp&268435455)||zs(on,fn)}function If(t,e){var n=$e;$e|=2;var r=rS();(on!==t||fn!==e)&&(Ui=null,aa(t,e));do try{RR();break}catch(i){nS(t,i)}while(!0);if(r_(),$e=n,wf.current=r,Bt!==null)throw Error(Y(261));return on=null,fn=0,Xt}function RR(){for(;Bt!==null;)iS(Bt)}function DR(){for(;Bt!==null&&!rk();)iS(Bt)}function iS(t){var e=aS(t.alternate,t,sr);t.memoizedProps=t.pendingProps,e===null?sS(t):Bt=e,g_.current=null}function sS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=bR(n,e),n!==null){n.flags&=32767,Bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xt=6,Bt=null;return}}else if(n=SR(n,e,sr),n!==null){Bt=n;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);Xt===0&&(Xt=5)}function Yo(t,e,n){var r=it,i=Nr.transition;try{Nr.transition=null,it=1,OR(t,e,n,r)}finally{Nr.transition=i,it=r}return null}function OR(t,e,n,r){do Pl();while(Qs!==null);if($e&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fk(t,s),t===on&&(Bt=on=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cd||(cd=!0,lS(rf,function(){return Pl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Nr.transition,Nr.transition=null;var o=it;it=1;var a=$e;$e|=4,g_.current=null,xR(t,n),ZI(n,t),Zk(_g),of=!!vg,_g=vg=null,t.current=n,AR(n),ik(),$e=a,it=o,Nr.transition=s}else t.current=n;if(cd&&(cd=!1,Qs=t,Tf=i),s=t.pendingLanes,s===0&&(ro=null),ak(n.stateNode),Zn(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ef)throw Ef=!1,t=jg,jg=null,t;return Tf&1&&t.tag!==0&&Pl(),s=t.pendingLanes,s&1?t===Fg?pc++:(pc=0,Fg=t):pc=0,To(),null}function Pl(){if(Qs!==null){var t=FT(Tf),e=Nr.transition,n=it;try{if(Nr.transition=null,it=16>t?16:t,Qs===null)var r=!1;else{if(t=Qs,Qs=null,Tf=0,$e&6)throw Error(Y(331));var i=$e;for($e|=4,se=t.current;se!==null;){var s=se,o=s.child;if(se.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(se=c;se!==null;){var d=se;switch(d.tag){case 0:case 11:case 15:dc(8,d,s)}var p=d.child;if(p!==null)p.return=d,se=p;else for(;se!==null;){d=se;var g=d.sibling,w=d.return;if(YI(d),d===c){se=null;break}if(g!==null){g.return=w,se=g;break}se=w}}}var E=s.alternate;if(E!==null){var A=E.child;if(A!==null){E.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,se=o;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:dc(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,se=x;break e}se=s.return}}var T=t.current;for(se=T;se!==null;){o=se;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,se=I;else e:for(o=T;se!==null;){if(a=se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ip(9,a)}}catch(B){Ot(a,a.return,B)}if(a===o){se=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,se=M;break e}se=a.return}}if($e=i,To(),Si&&typeof Si.onPostCommitFiberRoot=="function")try{Si.onPostCommitFiberRoot(Yf,t)}catch{}r=!0}return r}finally{it=n,Nr.transition=e}}return!1}function Rw(t,e,n){e=Fl(n,e),e=FI(t,e,1),t=no(t,e,1),e=jn(),t!==null&&(nh(t,1,e),Zn(t,e))}function Ot(t,e,n){if(t.tag===3)Rw(t,t,n);else for(;e!==null;){if(e.tag===3){Rw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ro===null||!ro.has(r))){t=Fl(n,t),t=UI(e,t,1),e=no(e,t,1),t=jn(),e!==null&&(nh(e,1,t),Zn(e,t));break}}e=e.return}}function NR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,on===t&&(fn&n)===n&&(Xt===4||Xt===3&&(fn&130023424)===fn&&500>jt()-__?aa(t,0):v_|=n),Zn(t,e)}function oS(t,e){e===0&&(t.mode&1?(e=ed,ed<<=1,!(ed&130023424)&&(ed=4194304)):e=1);var n=jn();t=es(t,e),t!==null&&(nh(t,e,n),Zn(t,n))}function LR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oS(t,n)}function MR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),oS(t,n)}var aS;aS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yn=!1,IR(t,e,n);Yn=!!(t.flags&131072)}else Yn=!1,Tt&&e.flags&1048576&&hI(e,ff,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Dd(t,e),t=e.pendingProps;var i=Ll(e,An.current);Al(e,n),i=h_(null,e,r,t,i,n);var s=d_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(r)?(s=!0,hf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,o_(e),i.updater=rp,e.stateNode=i,i._reactInternals=e,xg(e,r,t,n),e=kg(null,e,r,!0,s,n)):(e.tag=0,Tt&&s&&Zv(e),Nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Dd(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=jR(r),t=Xr(r,t),i){case 0:e=Pg(null,e,r,t,n);break e;case 1:e=Ew(null,e,r,t,n);break e;case 11:e=yw(null,e,r,t,n);break e;case 14:e=ww(null,e,r,Xr(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Pg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Ew(t,e,r,i,n);case 3:e:{if(qI(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vI(t,e),gf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fl(Error(Y(423)),e),e=Tw(t,e,r,n,i);break e}else if(r!==i){i=Fl(Error(Y(424)),e),e=Tw(t,e,r,n,i);break e}else for(or=to(e.stateNode.containerInfo.firstChild),ur=e,Tt=!0,Zr=null,n=mI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ml(),r===i){e=ts(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return _I(e),t===null&&Sg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yg(r,i)?o=null:s!==null&&yg(r,s)&&(e.flags|=32),BI(t,e),Nn(t,e,o,n),e.child;case 6:return t===null&&Sg(e),null;case 13:return HI(t,e,n);case 4:return a_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Vl(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),yw(t,e,r,i,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,gt(pf,r._currentValue),r._currentValue=o,s!==null)if(ii(s.value,o)){if(s.children===i.children&&!Xn.current){e=ts(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),bg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Al(e,n),i=Vr(i),r=r(i),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,i=Xr(r,e.pendingProps),i=Xr(r.type,i),ww(t,e,r,i,n);case 15:return $I(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xr(r,i),Dd(t,e),e.tag=1,Jn(r)?(t=!0,hf(e)):t=!1,Al(e,n),jI(e,r,i),xg(e,r,i,n),kg(null,e,r,!0,t,n);case 19:return WI(t,e,n);case 22:return zI(t,e,n)}throw Error(Y(156,e.tag))};function lS(t,e){return LT(t,e)}function VR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(t,e,n,r){return new VR(t,e,n,r)}function T_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function jR(t){if(typeof t=="function")return T_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$v)return 11;if(t===zv)return 14}return 2}function so(t,e){var n=t.alternate;return n===null?(n=Dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ld(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")T_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hl:return la(n.children,i,s,e);case Uv:o=8,i|=8;break;case Xm:return t=Dr(12,n,e,i|2),t.elementType=Xm,t.lanes=s,t;case Jm:return t=Dr(13,n,e,i),t.elementType=Jm,t.lanes=s,t;case Zm:return t=Dr(19,n,e,i),t.elementType=Zm,t.lanes=s,t;case _T:return op(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gT:o=10;break e;case vT:o=9;break e;case $v:o=11;break e;case zv:o=14;break e;case js:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Dr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function la(t,e,n,r){return t=Dr(7,t,r,e),t.lanes=n,t}function op(t,e,n,r){return t=Dr(22,t,r,e),t.elementType=_T,t.lanes=n,t.stateNode={isHidden:!1},t}function bm(t,e,n){return t=Dr(6,t,null,e),t.lanes=n,t}function Cm(t,e,n){return e=Dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=om(0),this.expirationTimes=om(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=om(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function I_(t,e,n,r,i,s,o,a,l){return t=new FR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Dr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},o_(s),t}function UR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uS(t){if(!t)return mo;t=t._reactInternals;e:{if(Pa(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Jn(n))return uI(t,n,e)}return e}function cS(t,e,n,r,i,s,o,a,l){return t=I_(n,r,!0,t,i,s,o,a,l),t.context=uS(null),n=t.current,r=jn(),i=io(n),s=Qi(r,i),s.callback=e??null,no(n,s,i),t.current.lanes=i,nh(t,i,r),Zn(t,r),t}function ap(t,e,n,r){var i=e.current,s=jn(),o=io(i);return n=uS(n),e.context===null?e.context=n:e.pendingContext=n,e=Qi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=no(i,e,o),t!==null&&(ni(t,i,o,s),Pd(t,i,o)),o}function Sf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Dw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function S_(t,e){Dw(t,e),(t=t.alternate)&&Dw(t,e)}function $R(){return null}var hS=typeof reportError=="function"?reportError:function(t){console.error(t)};function b_(t){this._internalRoot=t}lp.prototype.render=b_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));ap(t,e,null,null)};lp.prototype.unmount=b_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ga(function(){ap(null,t,null,null)}),e[Zi]=null}};function lp(t){this._internalRoot=t}lp.prototype.unstable_scheduleHydration=function(t){if(t){var e=zT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$s.length&&e!==0&&e<$s[n].priority;n++);$s.splice(n,0,t),n===0&&qT(t)}};function C_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ow(){}function zR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Sf(o);s.call(c)}}var o=cS(e,r,t,0,null,!1,!1,"",Ow);return t._reactRootContainer=o,t[Zi]=o.current,Rc(t.nodeType===8?t.parentNode:t),ga(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Sf(l);a.call(c)}}var l=I_(t,0,!1,null,null,!1,!1,"",Ow);return t._reactRootContainer=l,t[Zi]=l.current,Rc(t.nodeType===8?t.parentNode:t),ga(function(){ap(e,l,n,r)}),l}function cp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Sf(o);a.call(l)}}ap(e,o,t,i)}else o=zR(n,e,t,i,r);return Sf(o)}UT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qu(e.pendingLanes);n!==0&&(Hv(e,n|1),Zn(e,jt()),!($e&6)&&(Ul=jt()+500,To()))}break;case 13:ga(function(){var r=es(t,1);if(r!==null){var i=jn();ni(r,t,1,i)}}),S_(t,1)}};Wv=function(t){if(t.tag===13){var e=es(t,134217728);if(e!==null){var n=jn();ni(e,t,134217728,n)}S_(t,134217728)}};$T=function(t){if(t.tag===13){var e=io(t),n=es(t,e);if(n!==null){var r=jn();ni(n,t,e,r)}S_(t,e)}};zT=function(){return it};BT=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};ug=function(t,e,n){switch(e){case"input":if(ng(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ep(r);if(!i)throw Error(Y(90));wT(r),ng(r,i)}}}break;case"textarea":TT(t,n);break;case"select":e=n.value,e!=null&&Sl(t,!!n.multiple,e,!1)}};PT=y_;kT=ga;var BR={usingClientEntryPoint:!1,Events:[ih,ml,ep,xT,AT,y_]},ju={findFiberByHostInstance:ra,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qR={bundleType:ju.bundleType,version:ju.version,rendererPackageName:ju.rendererPackageName,rendererConfig:ju.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:as.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OT(t),t===null?null:t.stateNode},findFiberByHostInstance:ju.findFiberByHostInstance||$R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Yf=hd.inject(qR),Si=hd}catch{}}fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BR;fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C_(e))throw Error(Y(200));return UR(t,e,null,n)};fr.createRoot=function(t,e){if(!C_(t))throw Error(Y(299));var n=!1,r="",i=hS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=I_(t,1,!1,null,null,n,!1,r,i),t[Zi]=e.current,Rc(t.nodeType===8?t.parentNode:t),new b_(e)};fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=OT(e),t=t===null?null:t.stateNode,t};fr.flushSync=function(t){return ga(t)};fr.hydrate=function(t,e,n){if(!up(e))throw Error(Y(200));return cp(null,t,e,!0,n)};fr.hydrateRoot=function(t,e,n){if(!C_(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=hS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cS(e,null,t,1,n??null,i,!1,s,o),t[Zi]=e.current,Rc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new lp(e)};fr.render=function(t,e,n){if(!up(e))throw Error(Y(200));return cp(null,t,e,!1,n)};fr.unmountComponentAtNode=function(t){if(!up(t))throw Error(Y(40));return t._reactRootContainer?(ga(function(){cp(null,null,t,!1,function(){t._reactRootContainer=null,t[Zi]=null})}),!0):!1};fr.unstable_batchedUpdates=y_;fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!up(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return cp(t,e,n,!1,r)};fr.version="18.3.1-next-f1338f8080-20240426";function dS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dS)}catch(t){console.error(t)}}dS(),dT.exports=fr;var HR=dT.exports,fS,Nw=HR;fS=Nw.createRoot,Nw.hydrateRoot;var WR={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(vP,function(){const n=new Map,r={set(y,h,m){n.has(y)||n.set(y,new Map);const S=n.get(y);S.has(h)||S.size===0?S.set(h,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(S.keys())[0]}.`)},get:(y,h)=>n.has(y)&&n.get(y).get(h)||null,remove(y,h){if(!n.has(y))return;const m=n.get(y);m.delete(h),m.size===0&&n.delete(y)}},i="transitionend",s=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(h,m)=>`#${CSS.escape(m)}`)),y),o=y=>{y.dispatchEvent(new Event(i))},a=y=>!(!y||typeof y!="object")&&(y.jquery!==void 0&&(y=y[0]),y.nodeType!==void 0),l=y=>a(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(s(y)):null,c=y=>{if(!a(y)||y.getClientRects().length===0)return!1;const h=getComputedStyle(y).getPropertyValue("visibility")==="visible",m=y.closest("details:not([open])");if(!m)return h;if(m!==y){const S=y.closest("summary");if(S&&S.parentNode!==m||S===null)return!1}return h},d=y=>!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(y.disabled!==void 0?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false"),p=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){const h=y.getRootNode();return h instanceof ShadowRoot?h:null}return y instanceof ShadowRoot?y:y.parentNode?p(y.parentNode):null},g=()=>{},w=y=>{y.offsetHeight},E=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,A=[],R=()=>document.documentElement.dir==="rtl",x=y=>{var h;h=()=>{const m=E();if(m){const S=y.NAME,V=m.fn[S];m.fn[S]=y.jQueryInterface,m.fn[S].Constructor=y,m.fn[S].noConflict=()=>(m.fn[S]=V,y.jQueryInterface)}},document.readyState==="loading"?(A.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of A)m()}),A.push(h)):h()},T=(y,h=[],m=y)=>typeof y=="function"?y(...h):m,I=(y,h,m=!0)=>{if(!m)return void T(y);const S=(H=>{if(!H)return 0;let{transitionDuration:G,transitionDelay:Z}=window.getComputedStyle(H);const ie=Number.parseFloat(G),oe=Number.parseFloat(Z);return ie||oe?(G=G.split(",")[0],Z=Z.split(",")[0],1e3*(Number.parseFloat(G)+Number.parseFloat(Z))):0})(h)+5;let V=!1;const F=({target:H})=>{H===h&&(V=!0,h.removeEventListener(i,F),T(y))};h.addEventListener(i,F),setTimeout(()=>{V||o(h)},S)},M=(y,h,m,S)=>{const V=y.length;let F=y.indexOf(h);return F===-1?!m&&S?y[V-1]:y[0]:(F+=m?1:-1,S&&(F=(F+V)%V),y[Math.max(0,Math.min(F,V-1))])},B=/[^.]*(?=\..*)\.|.*/,W=/\..*/,P=/::\d+$/,C={};let k=1;const O={mouseenter:"mouseover",mouseleave:"mouseout"},L=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function j(y,h){return h&&`${h}::${k++}`||y.uidEvent||k++}function D(y){const h=j(y);return y.uidEvent=h,C[h]=C[h]||{},C[h]}function vt(y,h,m=null){return Object.values(y).find(S=>S.callable===h&&S.delegationSelector===m)}function St(y,h,m){const S=typeof h=="string",V=S?m:h||m;let F=ce(y);return L.has(F)||(F=y),[S,V,F]}function Ut(y,h,m,S,V){if(typeof h!="string"||!y)return;let[F,H,G]=St(h,m,S);h in O&&(H=(Te=>function(ve){if(!ve.relatedTarget||ve.relatedTarget!==ve.delegateTarget&&!ve.delegateTarget.contains(ve.relatedTarget))return Te.call(this,ve)})(H));const Z=D(y),ie=Z[G]||(Z[G]={}),oe=vt(ie,H,F?m:null);if(oe)return void(oe.oneOff=oe.oneOff&&V);const ee=j(H,h.replace(B,"")),xe=F?function(pe,Te,ve){return function Ie(ct){const mt=pe.querySelectorAll(Te);for(let{target:ke}=ct;ke&&ke!==this;ke=ke.parentNode)for(const Ke of mt)if(Ke===ke)return Ve(ct,{delegateTarget:ke}),Ie.oneOff&&z.off(pe,ct.type,Te,ve),ve.apply(ke,[ct])}}(y,m,H):function(pe,Te){return function ve(Ie){return Ve(Ie,{delegateTarget:pe}),ve.oneOff&&z.off(pe,Ie.type,Te),Te.apply(pe,[Ie])}}(y,H);xe.delegationSelector=F?m:null,xe.callable=H,xe.oneOff=V,xe.uidEvent=ee,ie[ee]=xe,y.addEventListener(G,xe,F)}function Xe(y,h,m,S,V){const F=vt(h[m],S,V);F&&(y.removeEventListener(m,F,!!V),delete h[m][F.uidEvent])}function X(y,h,m,S){const V=h[m]||{};for(const[F,H]of Object.entries(V))F.includes(S)&&Xe(y,h,m,H.callable,H.delegationSelector)}function ce(y){return y=y.replace(W,""),O[y]||y}const z={on(y,h,m,S){Ut(y,h,m,S,!1)},one(y,h,m,S){Ut(y,h,m,S,!0)},off(y,h,m,S){if(typeof h!="string"||!y)return;const[V,F,H]=St(h,m,S),G=H!==h,Z=D(y),ie=Z[H]||{},oe=h.startsWith(".");if(F===void 0){if(oe)for(const ee of Object.keys(Z))X(y,Z,ee,h.slice(1));for(const[ee,xe]of Object.entries(ie)){const pe=ee.replace(P,"");G&&!h.includes(pe)||Xe(y,Z,H,xe.callable,xe.delegationSelector)}}else{if(!Object.keys(ie).length)return;Xe(y,Z,H,F,V?m:null)}},trigger(y,h,m){if(typeof h!="string"||!y)return null;const S=E();let V=null,F=!0,H=!0,G=!1;h!==ce(h)&&S&&(V=S.Event(h,m),S(y).trigger(V),F=!V.isPropagationStopped(),H=!V.isImmediatePropagationStopped(),G=V.isDefaultPrevented());const Z=Ve(new Event(h,{bubbles:F,cancelable:!0}),m);return G&&Z.preventDefault(),H&&y.dispatchEvent(Z),Z.defaultPrevented&&V&&V.preventDefault(),Z}};function Ve(y,h={}){for(const[m,S]of Object.entries(h))try{y[m]=S}catch{Object.defineProperty(y,m,{configurable:!0,get:()=>S})}return y}function Re(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function ze(y){return y.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const ot={setDataAttribute(y,h,m){y.setAttribute(`data-bs-${ze(h)}`,m)},removeDataAttribute(y,h){y.removeAttribute(`data-bs-${ze(h)}`)},getDataAttributes(y){if(!y)return{};const h={},m=Object.keys(y.dataset).filter(S=>S.startsWith("bs")&&!S.startsWith("bsConfig"));for(const S of m){let V=S.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),h[V]=Re(y.dataset[S])}return h},getDataAttribute:(y,h)=>Re(y.getAttribute(`data-bs-${ze(h)}`))};class kt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,m){const S=a(m)?ot.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof S=="object"?S:{},...a(m)?ot.getDataAttributes(m):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,m=this.constructor.DefaultType){for(const[V,F]of Object.entries(m)){const H=h[V],G=a(H)?"element":(S=H)==null?`${S}`:Object.prototype.toString.call(S).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(F).test(G))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${V}" provided type "${G}" but expected type "${F}".`)}var S}}class Ge extends kt{constructor(h,m){super(),(h=l(h))&&(this._element=h,this._config=this._getConfig(m),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),z.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,m,S=!0){I(h,m,S)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return r.get(l(h),this.DATA_KEY)}static getOrCreateInstance(h,m={}){return this.getInstance(h)||new this(h,typeof m=="object"?m:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const fe=y=>{let h=y.getAttribute("data-bs-target");if(!h||h==="#"){let m=y.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),h=m&&m!=="#"?m.trim():null}return h?h.split(",").map(m=>s(m)).join(","):null},re={find:(y,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,y)),findOne:(y,h=document.documentElement)=>Element.prototype.querySelector.call(h,y),children:(y,h)=>[].concat(...y.children).filter(m=>m.matches(h)),parents(y,h){const m=[];let S=y.parentNode.closest(h);for(;S;)m.push(S),S=S.parentNode.closest(h);return m},prev(y,h){let m=y.previousElementSibling;for(;m;){if(m.matches(h))return[m];m=m.previousElementSibling}return[]},next(y,h){let m=y.nextElementSibling;for(;m;){if(m.matches(h))return[m];m=m.nextElementSibling}return[]},focusableChildren(y){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(h,y).filter(m=>!d(m)&&c(m))},getSelectorFromElement(y){const h=fe(y);return h&&re.findOne(h)?h:null},getElementFromSelector(y){const h=fe(y);return h?re.findOne(h):null},getMultipleElementsFromSelector(y){const h=fe(y);return h?re.find(h):[]}},mn=(y,h="hide")=>{const m=`click.dismiss${y.EVENT_KEY}`,S=y.NAME;z.on(document,m,`[data-bs-dismiss="${S}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),d(this))return;const F=re.getElementFromSelector(this)||this.closest(`.${S}`);y.getOrCreateInstance(F)[h]()})},gn=".bs.alert",wt=`close${gn}`,Lt=`closed${gn}`;class ln extends Ge{static get NAME(){return"alert"}close(){if(z.trigger(this._element,wt).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),z.trigger(this._element,Lt),this.dispose()}static jQueryInterface(h){return this.each(function(){const m=ln.getOrCreateInstance(this);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}mn(ln,"close"),x(ln);const Ur='[data-bs-toggle="button"]';class vn extends Ge{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const m=vn.getOrCreateInstance(this);h==="toggle"&&m[h]()})}}z.on(document,"click.bs.button.data-api",Ur,y=>{y.preventDefault();const h=y.target.closest(Ur);vn.getOrCreateInstance(h).toggle()}),x(vn);const Ht=".bs.swipe",ps=`touchstart${Ht}`,si=`touchmove${Ht}`,le=`touchend${Ht}`,me=`pointerdown${Ht}`,de=`pointerup${Ht}`,_e={endCallback:null,leftCallback:null,rightCallback:null},Oe={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Je extends kt{constructor(h,m){super(),this._element=h,h&&Je.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return _e}static get DefaultType(){return Oe}static get NAME(){return"swipe"}dispose(){z.off(this._element,Ht)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),T(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const m=h/this._deltaX;this._deltaX=0,m&&T(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(z.on(this._element,me,h=>this._start(h)),z.on(this._element,de,h=>this._end(h)),this._element.classList.add("pointer-event")):(z.on(this._element,ps,h=>this._start(h)),z.on(this._element,si,h=>this._move(h)),z.on(this._element,le,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ue=".bs.carousel",We=".data-api",at="next",er="prev",$r="left",Ai="right",ms=`slide${Ue}`,tr=`slid${Ue}`,Na=`keydown${Ue}`,Pi=`mouseenter${Ue}`,oi=`mouseleave${Ue}`,cu=`dragstart${Ue}`,hu=`load${Ue}${We}`,ko=`click${Ue}${We}`,Ro="carousel",zr="active",ai=".active",gs=".carousel-item",Do=ai+gs,Br={ArrowLeft:Ai,ArrowRight:$r},vs={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},_s={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Bn extends Ge{constructor(h,m){super(h,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ro&&this.cycle()}static get Default(){return vs}static get DefaultType(){return _s}static get NAME(){return"carousel"}next(){this._slide(at)}nextWhenVisible(){!document.hidden&&c(this._element)&&this.next()}prev(){this._slide(er)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?z.one(this._element,tr,()=>this.cycle()):this.cycle())}to(h){const m=this._getItems();if(h>m.length-1||h<0)return;if(this._isSliding)return void z.one(this._element,tr,()=>this.to(h));const S=this._getItemIndex(this._getActive());if(S===h)return;const V=h>S?at:er;this._slide(V,m[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&z.on(this._element,Na,h=>this._keydown(h)),this._config.pause==="hover"&&(z.on(this._element,Pi,()=>this.pause()),z.on(this._element,oi,()=>this._maybeEnableCycle())),this._config.touch&&Je.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of re.find(".carousel-item img",this._element))z.on(m,cu,S=>S.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder($r)),rightCallback:()=>this._slide(this._directionToOrder(Ai)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Je(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const m=Br[h.key];m&&(h.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const m=re.findOne(ai,this._indicatorsElement);m.classList.remove(zr),m.removeAttribute("aria-current");const S=re.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);S&&(S.classList.add(zr),S.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const m=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(h,m=null){if(this._isSliding)return;const S=this._getActive(),V=h===at,F=m||M(this._getItems(),S,V,this._config.wrap);if(F===S)return;const H=this._getItemIndex(F),G=ee=>z.trigger(this._element,ee,{relatedTarget:F,direction:this._orderToDirection(h),from:this._getItemIndex(S),to:H});if(G(ms).defaultPrevented||!S||!F)return;const Z=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(H),this._activeElement=F;const ie=V?"carousel-item-start":"carousel-item-end",oe=V?"carousel-item-next":"carousel-item-prev";F.classList.add(oe),w(F),S.classList.add(ie),F.classList.add(ie),this._queueCallback(()=>{F.classList.remove(ie,oe),F.classList.add(zr),S.classList.remove(zr,oe,ie),this._isSliding=!1,G(tr)},S,this._isAnimated()),Z&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return re.findOne(Do,this._element)}_getItems(){return re.find(gs,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return R()?h===$r?er:at:h===$r?at:er}_orderToDirection(h){return R()?h===er?$r:Ai:h===er?Ai:$r}static jQueryInterface(h){return this.each(function(){const m=Bn.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}}else m.to(h)})}}z.on(document,ko,"[data-bs-slide], [data-bs-slide-to]",function(y){const h=re.getElementFromSelector(this);if(!h||!h.classList.contains(Ro))return;y.preventDefault();const m=Bn.getOrCreateInstance(h),S=this.getAttribute("data-bs-slide-to");return S?(m.to(S),void m._maybeEnableCycle()):ot.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),z.on(window,hu,()=>{const y=re.find('[data-bs-ride="carousel"]');for(const h of y)Bn.getOrCreateInstance(h)}),x(Bn);const Pn=".bs.collapse",La=`show${Pn}`,Wt=`shown${Pn}`,Ma=`hide${Pn}`,ki=`hidden${Pn}`,Be=`click${Pn}.data-api`,lt="show",Mt="collapse",Ze="collapsing",mr=`:scope .${Mt} .${Mt}`,un='[data-bs-toggle="collapse"]',ys={parent:null,toggle:!0},Th={parent:"(null|element)",toggle:"boolean"};class li extends Ge{constructor(h,m){super(h,m),this._isTransitioning=!1,this._triggerArray=[];const S=re.find(un);for(const V of S){const F=re.getSelectorFromElement(V),H=re.find(F).filter(G=>G===this._element);F!==null&&H.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ys}static get DefaultType(){return Th}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(V=>V!==this._element).map(V=>li.getOrCreateInstance(V,{toggle:!1}))),h.length&&h[0]._isTransitioning||z.trigger(this._element,La).defaultPrevented)return;for(const V of h)V.hide();const m=this._getDimension();this._element.classList.remove(Mt),this._element.classList.add(Ze),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const S=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ze),this._element.classList.add(Mt,lt),this._element.style[m]="",z.trigger(this._element,Wt)},this._element,!0),this._element.style[m]=`${this._element[S]}px`}hide(){if(this._isTransitioning||!this._isShown()||z.trigger(this._element,Ma).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,w(this._element),this._element.classList.add(Ze),this._element.classList.remove(Mt,lt);for(const m of this._triggerArray){const S=re.getElementFromSelector(m);S&&!this._isShown(S)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Ze),this._element.classList.add(Mt),z.trigger(this._element,ki)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(lt)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=l(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(un);for(const m of h){const S=re.getElementFromSelector(m);S&&this._addAriaAndCollapsedClass([m],this._isShown(S))}}_getFirstLevelChildren(h){const m=re.find(mr,this._config.parent);return re.find(h,this._config.parent).filter(S=>!m.includes(S))}_addAriaAndCollapsedClass(h,m){if(h.length)for(const S of h)S.classList.toggle("collapsed",!m),S.setAttribute("aria-expanded",m)}static jQueryInterface(h){const m={};return typeof h=="string"&&/show|hide/.test(h)&&(m.toggle=!1),this.each(function(){const S=li.getOrCreateInstance(this,m);if(typeof h=="string"){if(S[h]===void 0)throw new TypeError(`No method named "${h}"`);S[h]()}})}}z.on(document,Be,un,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(const h of re.getMultipleElementsFromSelector(this))li.getOrCreateInstance(h,{toggle:!1}).toggle()}),x(li);var $t="top",Rt="bottom",_n="right",en="left",ws="auto",ui=[$t,Rt,_n,en],ci="start",Ri="end",Ih="clippingParents",Es="viewport",Di="popper",Va="reference",Oi=ui.reduce(function(y,h){return y.concat([h+"-"+ci,h+"-"+Ri])},[]),qr=[].concat(ui,[ws]).reduce(function(y,h){return y.concat([h,h+"-"+ci,h+"-"+Ri])},[]),ja="beforeRead",Sh="read",du="afterRead",fu="beforeMain",pu="main",Fa="afterMain",Ua="beforeWrite",mu="write",gu="afterWrite",bh=[ja,Sh,du,fu,pu,Fa,Ua,mu,gu];function gr(y){return y?(y.nodeName||"").toLowerCase():null}function yn(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var h=y.ownerDocument;return h&&h.defaultView||window}return y}function hi(y){return y instanceof yn(y).Element||y instanceof Element}function qn(y){return y instanceof yn(y).HTMLElement||y instanceof HTMLElement}function Hr(y){return typeof ShadowRoot<"u"&&(y instanceof yn(y).ShadowRoot||y instanceof ShadowRoot)}const nr={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var h=y.state;Object.keys(h.elements).forEach(function(m){var S=h.styles[m]||{},V=h.attributes[m]||{},F=h.elements[m];qn(F)&&gr(F)&&(Object.assign(F.style,S),Object.keys(V).forEach(function(H){var G=V[H];G===!1?F.removeAttribute(H):F.setAttribute(H,G===!0?"":G)}))})},effect:function(y){var h=y.state,m={popper:{position:h.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(h.elements.popper.style,m.popper),h.styles=m,h.elements.arrow&&Object.assign(h.elements.arrow.style,m.arrow),function(){Object.keys(h.elements).forEach(function(S){var V=h.elements[S],F=h.attributes[S]||{},H=Object.keys(h.styles.hasOwnProperty(S)?h.styles[S]:m[S]).reduce(function(G,Z){return G[Z]="",G},{});qn(V)&&gr(V)&&(Object.assign(V.style,H),Object.keys(F).forEach(function(G){V.removeAttribute(G)}))})}},requires:["computeStyles"]};function kn(y){return y.split("-")[0]}var vr=Math.max,Oo=Math.min,qe=Math.round;function Ts(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function Is(){return!/^((?!chrome|android).)*safari/i.test(Ts())}function _r(y,h,m){h===void 0&&(h=!1),m===void 0&&(m=!1);var S=y.getBoundingClientRect(),V=1,F=1;h&&qn(y)&&(V=y.offsetWidth>0&&qe(S.width)/y.offsetWidth||1,F=y.offsetHeight>0&&qe(S.height)/y.offsetHeight||1);var H=(hi(y)?yn(y):window).visualViewport,G=!Is()&&m,Z=(S.left+(G&&H?H.offsetLeft:0))/V,ie=(S.top+(G&&H?H.offsetTop:0))/F,oe=S.width/V,ee=S.height/F;return{width:oe,height:ee,top:ie,right:Z+oe,bottom:ie+ee,left:Z,x:Z,y:ie}}function vu(y){var h=_r(y),m=y.offsetWidth,S=y.offsetHeight;return Math.abs(h.width-m)<=1&&(m=h.width),Math.abs(h.height-S)<=1&&(S=h.height),{x:y.offsetLeft,y:y.offsetTop,width:m,height:S}}function _u(y,h){var m=h.getRootNode&&h.getRootNode();if(y.contains(h))return!0;if(m&&Hr(m)){var S=h;do{if(S&&y.isSameNode(S))return!0;S=S.parentNode||S.host}while(S)}return!1}function Wr(y){return yn(y).getComputedStyle(y)}function Up(y){return["table","td","th"].indexOf(gr(y))>=0}function di(y){return((hi(y)?y.ownerDocument:y.document)||window.document).documentElement}function $a(y){return gr(y)==="html"?y:y.assignedSlot||y.parentNode||(Hr(y)?y.host:null)||di(y)}function Ss(y){return qn(y)&&Wr(y).position!=="fixed"?y.offsetParent:null}function Hn(y){for(var h=yn(y),m=Ss(y);m&&Up(m)&&Wr(m).position==="static";)m=Ss(m);return m&&(gr(m)==="html"||gr(m)==="body"&&Wr(m).position==="static")?h:m||function(S){var V=/firefox/i.test(Ts());if(/Trident/i.test(Ts())&&qn(S)&&Wr(S).position==="fixed")return null;var F=$a(S);for(Hr(F)&&(F=F.host);qn(F)&&["html","body"].indexOf(gr(F))<0;){var H=Wr(F);if(H.transform!=="none"||H.perspective!=="none"||H.contain==="paint"||["transform","perspective"].indexOf(H.willChange)!==-1||V&&H.willChange==="filter"||V&&H.filter&&H.filter!=="none")return F;F=F.parentNode}return null}(y)||h}function za(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function bs(y,h,m){return vr(y,Oo(h,m))}function yu(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function Ni(y,h){return h.reduce(function(m,S){return m[S]=y,m},{})}const Ch={name:"arrow",enabled:!0,phase:"main",fn:function(y){var h,m=y.state,S=y.name,V=y.options,F=m.elements.arrow,H=m.modifiersData.popperOffsets,G=kn(m.placement),Z=za(G),ie=[en,_n].indexOf(G)>=0?"height":"width";if(F&&H){var oe=function(ht,nt){return yu(typeof(ht=typeof ht=="function"?ht(Object.assign({},nt.rects,{placement:nt.placement})):ht)!="number"?ht:Ni(ht,ui))}(V.padding,m),ee=vu(F),xe=Z==="y"?$t:en,pe=Z==="y"?Rt:_n,Te=m.rects.reference[ie]+m.rects.reference[Z]-H[Z]-m.rects.popper[ie],ve=H[Z]-m.rects.reference[Z],Ie=Hn(F),ct=Ie?Z==="y"?Ie.clientHeight||0:Ie.clientWidth||0:0,mt=Te/2-ve/2,ke=oe[xe],Ke=ct-ee[ie]-oe[pe],Ae=ct/2-ee[ie]/2+mt,Le=bs(ke,Ae,Ke),tt=Z;m.modifiersData[S]=((h={})[tt]=Le,h.centerOffset=Le-Ae,h)}},effect:function(y){var h=y.state,m=y.options.element,S=m===void 0?"[data-popper-arrow]":m;S!=null&&(typeof S!="string"||(S=h.elements.popper.querySelector(S)))&&_u(h.elements.popper,S)&&(h.elements.arrow=S)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cs(y){return y.split("-")[1]}var $p={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kr(y){var h,m=y.popper,S=y.popperRect,V=y.placement,F=y.variation,H=y.offsets,G=y.position,Z=y.gpuAcceleration,ie=y.adaptive,oe=y.roundOffsets,ee=y.isFixed,xe=H.x,pe=xe===void 0?0:xe,Te=H.y,ve=Te===void 0?0:Te,Ie=typeof oe=="function"?oe({x:pe,y:ve}):{x:pe,y:ve};pe=Ie.x,ve=Ie.y;var ct=H.hasOwnProperty("x"),mt=H.hasOwnProperty("y"),ke=en,Ke=$t,Ae=window;if(ie){var Le=Hn(m),tt="clientHeight",ht="clientWidth";Le===yn(m)&&Wr(Le=di(m)).position!=="static"&&G==="absolute"&&(tt="scrollHeight",ht="scrollWidth"),(V===$t||(V===en||V===_n)&&F===Ri)&&(Ke=Rt,ve-=(ee&&Le===Ae&&Ae.visualViewport?Ae.visualViewport.height:Le[tt])-S.height,ve*=Z?1:-1),V!==en&&(V!==$t&&V!==Rt||F!==Ri)||(ke=_n,pe-=(ee&&Le===Ae&&Ae.visualViewport?Ae.visualViewport.width:Le[ht])-S.width,pe*=Z?1:-1)}var nt,Vt=Object.assign({position:G},ie&&$p),rr=oe===!0?function(Qr,Rn){var Tr=Qr.x,Ir=Qr.y,Dt=Rn.devicePixelRatio||1;return{x:qe(Tr*Dt)/Dt||0,y:qe(Ir*Dt)/Dt||0}}({x:pe,y:ve},yn(m)):{x:pe,y:ve};return pe=rr.x,ve=rr.y,Z?Object.assign({},Vt,((nt={})[Ke]=mt?"0":"",nt[ke]=ct?"0":"",nt.transform=(Ae.devicePixelRatio||1)<=1?"translate("+pe+"px, "+ve+"px)":"translate3d("+pe+"px, "+ve+"px, 0)",nt)):Object.assign({},Vt,((h={})[Ke]=mt?ve+"px":"",h[ke]=ct?pe+"px":"",h.transform="",h))}const wu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var h=y.state,m=y.options,S=m.gpuAcceleration,V=S===void 0||S,F=m.adaptive,H=F===void 0||F,G=m.roundOffsets,Z=G===void 0||G,ie={placement:kn(h.placement),variation:Cs(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:V,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,Kr(Object.assign({},ie,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:H,roundOffsets:Z})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,Kr(Object.assign({},ie,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Z})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})},data:{}};var Ba={passive:!0};const xs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(y){var h=y.state,m=y.instance,S=y.options,V=S.scroll,F=V===void 0||V,H=S.resize,G=H===void 0||H,Z=yn(h.elements.popper),ie=[].concat(h.scrollParents.reference,h.scrollParents.popper);return F&&ie.forEach(function(oe){oe.addEventListener("scroll",m.update,Ba)}),G&&Z.addEventListener("resize",m.update,Ba),function(){F&&ie.forEach(function(oe){oe.removeEventListener("scroll",m.update,Ba)}),G&&Z.removeEventListener("resize",m.update,Ba)}},data:{}};var qa={left:"right",right:"left",bottom:"top",top:"bottom"};function No(y){return y.replace(/left|right|bottom|top/g,function(h){return qa[h]})}var Lo={start:"end",end:"start"};function As(y){return y.replace(/start|end/g,function(h){return Lo[h]})}function Ha(y){var h=yn(y);return{scrollLeft:h.pageXOffset,scrollTop:h.pageYOffset}}function Mo(y){return _r(di(y)).left+Ha(y).scrollLeft}function pt(y){var h=Wr(y),m=h.overflow,S=h.overflowX,V=h.overflowY;return/auto|scroll|overlay|hidden/.test(m+V+S)}function xh(y){return["html","body","#document"].indexOf(gr(y))>=0?y.ownerDocument.body:qn(y)&&pt(y)?y:xh($a(y))}function Vo(y,h){var m;h===void 0&&(h=[]);var S=xh(y),V=S===((m=y.ownerDocument)==null?void 0:m.body),F=yn(S),H=V?[F].concat(F.visualViewport||[],pt(S)?S:[]):S,G=h.concat(H);return V?G:G.concat(Vo($a(H)))}function Wa(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function Eu(y,h,m){return h===Es?Wa(function(S,V){var F=yn(S),H=di(S),G=F.visualViewport,Z=H.clientWidth,ie=H.clientHeight,oe=0,ee=0;if(G){Z=G.width,ie=G.height;var xe=Is();(xe||!xe&&V==="fixed")&&(oe=G.offsetLeft,ee=G.offsetTop)}return{width:Z,height:ie,x:oe+Mo(S),y:ee}}(y,m)):hi(h)?function(S,V){var F=_r(S,!1,V==="fixed");return F.top=F.top+S.clientTop,F.left=F.left+S.clientLeft,F.bottom=F.top+S.clientHeight,F.right=F.left+S.clientWidth,F.width=S.clientWidth,F.height=S.clientHeight,F.x=F.left,F.y=F.top,F}(h,m):Wa(function(S){var V,F=di(S),H=Ha(S),G=(V=S.ownerDocument)==null?void 0:V.body,Z=vr(F.scrollWidth,F.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),ie=vr(F.scrollHeight,F.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),oe=-H.scrollLeft+Mo(S),ee=-H.scrollTop;return Wr(G||F).direction==="rtl"&&(oe+=vr(F.clientWidth,G?G.clientWidth:0)-Z),{width:Z,height:ie,x:oe,y:ee}}(di(y)))}function Tu(y){var h,m=y.reference,S=y.element,V=y.placement,F=V?kn(V):null,H=V?Cs(V):null,G=m.x+m.width/2-S.width/2,Z=m.y+m.height/2-S.height/2;switch(F){case $t:h={x:G,y:m.y-S.height};break;case Rt:h={x:G,y:m.y+m.height};break;case _n:h={x:m.x+m.width,y:Z};break;case en:h={x:m.x-S.width,y:Z};break;default:h={x:m.x,y:m.y}}var ie=F?za(F):null;if(ie!=null){var oe=ie==="y"?"height":"width";switch(H){case ci:h[ie]=h[ie]-(m[oe]/2-S[oe]/2);break;case Ri:h[ie]=h[ie]+(m[oe]/2-S[oe]/2)}}return h}function Gr(y,h){h===void 0&&(h={});var m=h,S=m.placement,V=S===void 0?y.placement:S,F=m.strategy,H=F===void 0?y.strategy:F,G=m.boundary,Z=G===void 0?Ih:G,ie=m.rootBoundary,oe=ie===void 0?Es:ie,ee=m.elementContext,xe=ee===void 0?Di:ee,pe=m.altBoundary,Te=pe!==void 0&&pe,ve=m.padding,Ie=ve===void 0?0:ve,ct=yu(typeof Ie!="number"?Ie:Ni(Ie,ui)),mt=xe===Di?Va:Di,ke=y.rects.popper,Ke=y.elements[Te?mt:xe],Ae=function(Rn,Tr,Ir,Dt){var mi=Tr==="clippingParents"?function(ft){var Dn=Vo($a(ft)),Sr=["absolute","fixed"].indexOf(Wr(ft).position)>=0&&qn(ft)?Hn(ft):ft;return hi(Sr)?Dn.filter(function(Rs){return hi(Rs)&&_u(Rs,Sr)&&gr(Rs)!=="body"}):[]}(Rn):[].concat(Tr),gi=[].concat(mi,[Ir]),Ja=gi[0],tn=gi.reduce(function(ft,Dn){var Sr=Eu(Rn,Dn,Dt);return ft.top=vr(Sr.top,ft.top),ft.right=Oo(Sr.right,ft.right),ft.bottom=Oo(Sr.bottom,ft.bottom),ft.left=vr(Sr.left,ft.left),ft},Eu(Rn,Ja,Dt));return tn.width=tn.right-tn.left,tn.height=tn.bottom-tn.top,tn.x=tn.left,tn.y=tn.top,tn}(hi(Ke)?Ke:Ke.contextElement||di(y.elements.popper),Z,oe,H),Le=_r(y.elements.reference),tt=Tu({reference:Le,element:ke,placement:V}),ht=Wa(Object.assign({},ke,tt)),nt=xe===Di?ht:Le,Vt={top:Ae.top-nt.top+ct.top,bottom:nt.bottom-Ae.bottom+ct.bottom,left:Ae.left-nt.left+ct.left,right:nt.right-Ae.right+ct.right},rr=y.modifiersData.offset;if(xe===Di&&rr){var Qr=rr[V];Object.keys(Vt).forEach(function(Rn){var Tr=[_n,Rt].indexOf(Rn)>=0?1:-1,Ir=[$t,Rt].indexOf(Rn)>=0?"y":"x";Vt[Rn]+=Qr[Ir]*Tr})}return Vt}function Ah(y,h){h===void 0&&(h={});var m=h,S=m.placement,V=m.boundary,F=m.rootBoundary,H=m.padding,G=m.flipVariations,Z=m.allowedAutoPlacements,ie=Z===void 0?qr:Z,oe=Cs(S),ee=oe?G?Oi:Oi.filter(function(Te){return Cs(Te)===oe}):ui,xe=ee.filter(function(Te){return ie.indexOf(Te)>=0});xe.length===0&&(xe=ee);var pe=xe.reduce(function(Te,ve){return Te[ve]=Gr(y,{placement:ve,boundary:V,rootBoundary:F,padding:H})[kn(ve)],Te},{});return Object.keys(pe).sort(function(Te,ve){return pe[Te]-pe[ve]})}const yr={name:"flip",enabled:!0,phase:"main",fn:function(y){var h=y.state,m=y.options,S=y.name;if(!h.modifiersData[S]._skip){for(var V=m.mainAxis,F=V===void 0||V,H=m.altAxis,G=H===void 0||H,Z=m.fallbackPlacements,ie=m.padding,oe=m.boundary,ee=m.rootBoundary,xe=m.altBoundary,pe=m.flipVariations,Te=pe===void 0||pe,ve=m.allowedAutoPlacements,Ie=h.options.placement,ct=kn(Ie),mt=Z||(ct!==Ie&&Te?function(ft){if(kn(ft)===ws)return[];var Dn=No(ft);return[As(ft),Dn,As(Dn)]}(Ie):[No(Ie)]),ke=[Ie].concat(mt).reduce(function(ft,Dn){return ft.concat(kn(Dn)===ws?Ah(h,{placement:Dn,boundary:oe,rootBoundary:ee,padding:ie,flipVariations:Te,allowedAutoPlacements:ve}):Dn)},[]),Ke=h.rects.reference,Ae=h.rects.popper,Le=new Map,tt=!0,ht=ke[0],nt=0;nt<ke.length;nt++){var Vt=ke[nt],rr=kn(Vt),Qr=Cs(Vt)===ci,Rn=[$t,Rt].indexOf(rr)>=0,Tr=Rn?"width":"height",Ir=Gr(h,{placement:Vt,boundary:oe,rootBoundary:ee,altBoundary:xe,padding:ie}),Dt=Rn?Qr?_n:en:Qr?Rt:$t;Ke[Tr]>Ae[Tr]&&(Dt=No(Dt));var mi=No(Dt),gi=[];if(F&&gi.push(Ir[rr]<=0),G&&gi.push(Ir[Dt]<=0,Ir[mi]<=0),gi.every(function(ft){return ft})){ht=Vt,tt=!1;break}Le.set(Vt,gi)}if(tt)for(var Ja=function(ft){var Dn=ke.find(function(Sr){var Rs=Le.get(Sr);if(Rs)return Rs.slice(0,ft).every(function(Wh){return Wh})});if(Dn)return ht=Dn,"break"},tn=Te?3:1;tn>0&&Ja(tn)!=="break";tn--);h.placement!==ht&&(h.modifiersData[S]._skip=!0,h.placement=ht,h.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Iu(y,h,m){return m===void 0&&(m={x:0,y:0}),{top:y.top-h.height-m.y,right:y.right-h.width+m.x,bottom:y.bottom-h.height+m.y,left:y.left-h.width-m.x}}function Ph(y){return[$t,_n,Rt,en].some(function(h){return y[h]>=0})}const Ps={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var h=y.state,m=y.name,S=h.rects.reference,V=h.rects.popper,F=h.modifiersData.preventOverflow,H=Gr(h,{elementContext:"reference"}),G=Gr(h,{altBoundary:!0}),Z=Iu(H,S),ie=Iu(G,V,F),oe=Ph(Z),ee=Ph(ie);h.modifiersData[m]={referenceClippingOffsets:Z,popperEscapeOffsets:ie,isReferenceHidden:oe,hasPopperEscaped:ee},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":oe,"data-popper-escaped":ee})}},Su={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var h=y.state,m=y.options,S=y.name,V=m.offset,F=V===void 0?[0,0]:V,H=qr.reduce(function(oe,ee){return oe[ee]=function(xe,pe,Te){var ve=kn(xe),Ie=[en,$t].indexOf(ve)>=0?-1:1,ct=typeof Te=="function"?Te(Object.assign({},pe,{placement:xe})):Te,mt=ct[0],ke=ct[1];return mt=mt||0,ke=(ke||0)*Ie,[en,_n].indexOf(ve)>=0?{x:ke,y:mt}:{x:mt,y:ke}}(ee,h.rects,F),oe},{}),G=H[h.placement],Z=G.x,ie=G.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=Z,h.modifiersData.popperOffsets.y+=ie),h.modifiersData[S]=H}},jo={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var h=y.state,m=y.name;h.modifiersData[m]=Tu({reference:h.rects.reference,element:h.rects.popper,placement:h.placement})},data:{}},Fo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var h=y.state,m=y.options,S=y.name,V=m.mainAxis,F=V===void 0||V,H=m.altAxis,G=H!==void 0&&H,Z=m.boundary,ie=m.rootBoundary,oe=m.altBoundary,ee=m.padding,xe=m.tether,pe=xe===void 0||xe,Te=m.tetherOffset,ve=Te===void 0?0:Te,Ie=Gr(h,{boundary:Z,rootBoundary:ie,padding:ee,altBoundary:oe}),ct=kn(h.placement),mt=Cs(h.placement),ke=!mt,Ke=za(ct),Ae=Ke==="x"?"y":"x",Le=h.modifiersData.popperOffsets,tt=h.rects.reference,ht=h.rects.popper,nt=typeof ve=="function"?ve(Object.assign({},h.rects,{placement:h.placement})):ve,Vt=typeof nt=="number"?{mainAxis:nt,altAxis:nt}:Object.assign({mainAxis:0,altAxis:0},nt),rr=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,Qr={x:0,y:0};if(Le){if(F){var Rn,Tr=Ke==="y"?$t:en,Ir=Ke==="y"?Rt:_n,Dt=Ke==="y"?"height":"width",mi=Le[Ke],gi=mi+Ie[Tr],Ja=mi-Ie[Ir],tn=pe?-ht[Dt]/2:0,ft=mt===ci?tt[Dt]:ht[Dt],Dn=mt===ci?-ht[Dt]:-tt[Dt],Sr=h.elements.arrow,Rs=pe&&Sr?vu(Sr):{width:0,height:0},Wh=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},p0=Wh[Tr],m0=Wh[Ir],Kh=bs(0,tt[Dt],Rs[Dt]),oP=ke?tt[Dt]/2-tn-Kh-p0-Vt.mainAxis:ft-Kh-p0-Vt.mainAxis,aP=ke?-tt[Dt]/2+tn+Kh+m0+Vt.mainAxis:Dn+Kh+m0+Vt.mainAxis,Jp=h.elements.arrow&&Hn(h.elements.arrow),lP=Jp?Ke==="y"?Jp.clientTop||0:Jp.clientLeft||0:0,g0=(Rn=rr==null?void 0:rr[Ke])!=null?Rn:0,uP=mi+aP-g0,v0=bs(pe?Oo(gi,mi+oP-g0-lP):gi,mi,pe?vr(Ja,uP):Ja);Le[Ke]=v0,Qr[Ke]=v0-mi}if(G){var _0,cP=Ke==="x"?$t:en,hP=Ke==="x"?Rt:_n,Ko=Le[Ae],Gh=Ae==="y"?"height":"width",y0=Ko+Ie[cP],w0=Ko-Ie[hP],Zp=[$t,en].indexOf(ct)!==-1,E0=(_0=rr==null?void 0:rr[Ae])!=null?_0:0,T0=Zp?y0:Ko-tt[Gh]-ht[Gh]-E0+Vt.altAxis,I0=Zp?Ko+tt[Gh]+ht[Gh]-E0-Vt.altAxis:w0,S0=pe&&Zp?function(dP,fP,em){var b0=bs(dP,fP,em);return b0>em?em:b0}(T0,Ko,I0):bs(pe?T0:y0,Ko,pe?I0:w0);Le[Ae]=S0,Qr[Ae]=S0-Ko}h.modifiersData[S]=Qr}},requiresIfExists:["offset"]};function kh(y,h,m){m===void 0&&(m=!1);var S,V,F=qn(h),H=qn(h)&&function(ee){var xe=ee.getBoundingClientRect(),pe=qe(xe.width)/ee.offsetWidth||1,Te=qe(xe.height)/ee.offsetHeight||1;return pe!==1||Te!==1}(h),G=di(h),Z=_r(y,H,m),ie={scrollLeft:0,scrollTop:0},oe={x:0,y:0};return(F||!F&&!m)&&((gr(h)!=="body"||pt(G))&&(ie=(S=h)!==yn(S)&&qn(S)?{scrollLeft:(V=S).scrollLeft,scrollTop:V.scrollTop}:Ha(S)),qn(h)?((oe=_r(h,!0)).x+=h.clientLeft,oe.y+=h.clientTop):G&&(oe.x=Mo(G))),{x:Z.left+ie.scrollLeft-oe.x,y:Z.top+ie.scrollTop-oe.y,width:Z.width,height:Z.height}}function Ka(y){var h=new Map,m=new Set,S=[];function V(F){m.add(F.name),[].concat(F.requires||[],F.requiresIfExists||[]).forEach(function(H){if(!m.has(H)){var G=h.get(H);G&&V(G)}}),S.push(F)}return y.forEach(function(F){h.set(F.name,F)}),y.forEach(function(F){m.has(F.name)||V(F)}),S}var Rh={placement:"bottom",modifiers:[],strategy:"absolute"};function bu(){for(var y=arguments.length,h=new Array(y),m=0;m<y;m++)h[m]=arguments[m];return!h.some(function(S){return!(S&&typeof S.getBoundingClientRect=="function")})}function fi(y){y===void 0&&(y={});var h=y,m=h.defaultModifiers,S=m===void 0?[]:m,V=h.defaultOptions,F=V===void 0?Rh:V;return function(H,G,Z){Z===void 0&&(Z=F);var ie,oe,ee={placement:"bottom",orderedModifiers:[],options:Object.assign({},Rh,F),modifiersData:{},elements:{reference:H,popper:G},attributes:{},styles:{}},xe=[],pe=!1,Te={state:ee,setOptions:function(Ie){var ct=typeof Ie=="function"?Ie(ee.options):Ie;ve(),ee.options=Object.assign({},F,ee.options,ct),ee.scrollParents={reference:hi(H)?Vo(H):H.contextElement?Vo(H.contextElement):[],popper:Vo(G)};var mt,ke,Ke=function(Ae){var Le=Ka(Ae);return bh.reduce(function(tt,ht){return tt.concat(Le.filter(function(nt){return nt.phase===ht}))},[])}((mt=[].concat(S,ee.options.modifiers),ke=mt.reduce(function(Ae,Le){var tt=Ae[Le.name];return Ae[Le.name]=tt?Object.assign({},tt,Le,{options:Object.assign({},tt.options,Le.options),data:Object.assign({},tt.data,Le.data)}):Le,Ae},{}),Object.keys(ke).map(function(Ae){return ke[Ae]})));return ee.orderedModifiers=Ke.filter(function(Ae){return Ae.enabled}),ee.orderedModifiers.forEach(function(Ae){var Le=Ae.name,tt=Ae.options,ht=tt===void 0?{}:tt,nt=Ae.effect;if(typeof nt=="function"){var Vt=nt({state:ee,name:Le,instance:Te,options:ht});xe.push(Vt||function(){})}}),Te.update()},forceUpdate:function(){if(!pe){var Ie=ee.elements,ct=Ie.reference,mt=Ie.popper;if(bu(ct,mt)){ee.rects={reference:kh(ct,Hn(mt),ee.options.strategy==="fixed"),popper:vu(mt)},ee.reset=!1,ee.placement=ee.options.placement,ee.orderedModifiers.forEach(function(nt){return ee.modifiersData[nt.name]=Object.assign({},nt.data)});for(var ke=0;ke<ee.orderedModifiers.length;ke++)if(ee.reset!==!0){var Ke=ee.orderedModifiers[ke],Ae=Ke.fn,Le=Ke.options,tt=Le===void 0?{}:Le,ht=Ke.name;typeof Ae=="function"&&(ee=Ae({state:ee,options:tt,name:ht,instance:Te})||ee)}else ee.reset=!1,ke=-1}}},update:(ie=function(){return new Promise(function(Ie){Te.forceUpdate(),Ie(ee)})},function(){return oe||(oe=new Promise(function(Ie){Promise.resolve().then(function(){oe=void 0,Ie(ie())})})),oe}),destroy:function(){ve(),pe=!0}};if(!bu(H,G))return Te;function ve(){xe.forEach(function(Ie){return Ie()}),xe=[]}return Te.setOptions(Z).then(function(Ie){!pe&&Z.onFirstUpdate&&Z.onFirstUpdate(Ie)}),Te}}var Dh=fi(),Oh=fi({defaultModifiers:[xs,jo,wu,nr]}),Uo=fi({defaultModifiers:[xs,jo,wu,nr,Su,yr,Fo,Ch,Ps]});const Ga=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Fa,afterRead:du,afterWrite:gu,applyStyles:nr,arrow:Ch,auto:ws,basePlacements:ui,beforeMain:fu,beforeRead:ja,beforeWrite:Ua,bottom:Rt,clippingParents:Ih,computeStyles:wu,createPopper:Uo,createPopperBase:Dh,createPopperLite:Oh,detectOverflow:Gr,end:Ri,eventListeners:xs,flip:yr,hide:Ps,left:en,main:pu,modifierPhases:bh,offset:Su,placements:qr,popper:Di,popperGenerator:fi,popperOffsets:jo,preventOverflow:Fo,read:Sh,reference:Va,right:_n,start:ci,top:$t,variationPlacements:Oi,viewport:Es,write:mu},Symbol.toStringTag,{value:"Module"})),Cu="dropdown",wr=".bs.dropdown",Qa=".data-api",Nh="ArrowUp",pi="ArrowDown",Lh=`hide${wr}`,Mh=`hidden${wr}`,Vh=`show${wr}`,jh=`shown${wr}`,$o=`click${wr}${Qa}`,wn=`keydown${wr}${Qa}`,Fh=`keyup${wr}${Qa}`,Li="show",Wn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',u=`${Wn}.${Li}`,f=".dropdown-menu",_=R()?"top-end":"top-start",b=R()?"top-start":"top-end",U=R()?"bottom-end":"bottom-start",q=R()?"bottom-start":"bottom-end",J=R()?"left-start":"right-start",et=R()?"right-start":"left-start",Kt={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},je={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ut extends Ge{constructor(h,m){super(h,m),this._popper=null,this._parent=this._element.parentNode,this._menu=re.next(this._element,f)[0]||re.prev(this._element,f)[0]||re.findOne(f,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Kt}static get DefaultType(){return je}static get NAME(){return Cu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(d(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!z.trigger(this._element,Vh,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))z.on(m,"mouseover",g);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Li),this._element.classList.add(Li),z.trigger(this._element,jh,h)}}hide(){if(d(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!z.trigger(this._element,Lh,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))z.off(m,"mouseover",g);this._popper&&this._popper.destroy(),this._menu.classList.remove(Li),this._element.classList.remove(Li),this._element.setAttribute("aria-expanded","false"),ot.removeDataAttribute(this._menu,"popper"),z.trigger(this._element,Mh,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!a(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${Cu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(Ga===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:a(this._config.reference)?h=l(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const m=this._getPopperConfig();this._popper=Uo(h,this._menu,m)}_isShown(){return this._menu.classList.contains(Li)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return J;if(h.classList.contains("dropstart"))return et;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?m?b:_:m?q:U}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(m=>Number.parseInt(m,10)):typeof h=="function"?m=>h(m,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ot.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...T(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:m}){const S=re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(V=>c(V));S.length&&M(S,m,h===pi,!S.includes(m)).focus()}static jQueryInterface(h){return this.each(function(){const m=ut.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const m=re.find(u);for(const S of m){const V=ut.getInstance(S);if(!V||V._config.autoClose===!1)continue;const F=h.composedPath(),H=F.includes(V._menu);if(F.includes(V._element)||V._config.autoClose==="inside"&&!H||V._config.autoClose==="outside"&&H||V._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const G={relatedTarget:V._element};h.type==="click"&&(G.clickEvent=h),V._completeHide(G)}}static dataApiKeydownHandler(h){const m=/input|textarea/i.test(h.target.tagName),S=h.key==="Escape",V=[Nh,pi].includes(h.key);if(!V&&!S||m&&!S)return;h.preventDefault();const F=this.matches(Wn)?this:re.prev(this,Wn)[0]||re.next(this,Wn)[0]||re.findOne(Wn,h.delegateTarget.parentNode),H=ut.getOrCreateInstance(F);if(V)return h.stopPropagation(),H.show(),void H._selectMenuItem(h);H._isShown()&&(h.stopPropagation(),H.hide(),F.focus())}}z.on(document,wn,Wn,ut.dataApiKeydownHandler),z.on(document,wn,f,ut.dataApiKeydownHandler),z.on(document,$o,ut.clearMenus),z.on(document,Fh,ut.clearMenus),z.on(document,$o,Wn,function(y){y.preventDefault(),ut.getOrCreateInstance(this).toggle()}),x(ut);const Gt="backdrop",Mi="show",Kn=`mousedown.bs.${Gt}`,Ya={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},xu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Fy extends kt{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return Ya}static get DefaultType(){return xu}static get NAME(){return Gt}show(h){if(!this._config.isVisible)return void T(h);this._append();const m=this._getElement();this._config.isAnimated&&w(m),m.classList.add(Mi),this._emulateAnimation(()=>{T(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(Mi),this._emulateAnimation(()=>{this.dispose(),T(h)})):T(h)}dispose(){this._isAppended&&(z.off(this._element,Kn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=l(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),z.on(h,Kn,()=>{T(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){I(h,this._getElement(),this._config.isAnimated)}}const Uh=".bs.focustrap",Zx=`focusin${Uh}`,eA=`keydown.tab${Uh}`,Uy="backward",tA={autofocus:!0,trapElement:null},nA={autofocus:"boolean",trapElement:"element"};class $y extends kt{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return tA}static get DefaultType(){return nA}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),z.off(document,Uh),z.on(document,Zx,h=>this._handleFocusin(h)),z.on(document,eA,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,z.off(document,Uh))}_handleFocusin(h){const{trapElement:m}=this._config;if(h.target===document||h.target===m||m.contains(h.target))return;const S=re.focusableChildren(m);S.length===0?m.focus():this._lastTabNavDirection===Uy?S[S.length-1].focus():S[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?Uy:"forward")}}const zy=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",By=".sticky-top",$h="padding-right",qy="margin-right";class zp{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,$h,m=>m+h),this._setElementAttributes(zy,$h,m=>m+h),this._setElementAttributes(By,qy,m=>m-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,$h),this._resetElementAttributes(zy,$h),this._resetElementAttributes(By,qy)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,m,S){const V=this.getWidth();this._applyManipulationCallback(h,F=>{if(F!==this._element&&window.innerWidth>F.clientWidth+V)return;this._saveInitialAttribute(F,m);const H=window.getComputedStyle(F).getPropertyValue(m);F.style.setProperty(m,`${S(Number.parseFloat(H))}px`)})}_saveInitialAttribute(h,m){const S=h.style.getPropertyValue(m);S&&ot.setDataAttribute(h,m,S)}_resetElementAttributes(h,m){this._applyManipulationCallback(h,S=>{const V=ot.getDataAttribute(S,m);V!==null?(ot.removeDataAttribute(S,m),S.style.setProperty(m,V)):S.style.removeProperty(m)})}_applyManipulationCallback(h,m){if(a(h))m(h);else for(const S of re.find(h,this._element))m(S)}}const Er=".bs.modal",rA=`hide${Er}`,iA=`hidePrevented${Er}`,Hy=`hidden${Er}`,Wy=`show${Er}`,sA=`shown${Er}`,oA=`resize${Er}`,aA=`click.dismiss${Er}`,lA=`mousedown.dismiss${Er}`,uA=`keydown.dismiss${Er}`,cA=`click${Er}.data-api`,Ky="modal-open",Gy="show",Bp="modal-static",hA={backdrop:!0,focus:!0,keyboard:!0},dA={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class zo extends Ge{constructor(h,m){super(h,m),this._dialog=re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new zp,this._addEventListeners()}static get Default(){return hA}static get DefaultType(){return dA}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||z.trigger(this._element,Wy,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ky),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(z.trigger(this._element,rA).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Gy),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){z.off(window,Er),z.off(this._dialog,Er),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Fy({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new $y({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=re.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),w(this._element),this._element.classList.add(Gy),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,z.trigger(this._element,sA,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){z.on(this._element,uA,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),z.on(window,oA,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),z.on(this._element,lA,h=>{z.one(this._element,aA,m=>{this._element===h.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ky),this._resetAdjustments(),this._scrollBar.reset(),z.trigger(this._element,Hy)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(z.trigger(this._element,iA).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(Bp)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Bp),this._queueCallback(()=>{this._element.classList.remove(Bp),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),S=m>0;if(S&&!h){const V=R()?"paddingLeft":"paddingRight";this._element.style[V]=`${m}px`}if(!S&&h){const V=R()?"paddingRight":"paddingLeft";this._element.style[V]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,m){return this.each(function(){const S=zo.getOrCreateInstance(this,h);if(typeof h=="string"){if(S[h]===void 0)throw new TypeError(`No method named "${h}"`);S[h](m)}})}}z.on(document,cA,'[data-bs-toggle="modal"]',function(y){const h=re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),z.one(h,Wy,S=>{S.defaultPrevented||z.one(h,Hy,()=>{c(this)&&this.focus()})});const m=re.findOne(".modal.show");m&&zo.getInstance(m).hide(),zo.getOrCreateInstance(h).toggle(this)}),mn(zo),x(zo);const Vi=".bs.offcanvas",Qy=".data-api",fA=`load${Vi}${Qy}`,Yy="show",Xy="showing",Jy="hiding",Zy=".offcanvas.show",pA=`show${Vi}`,mA=`shown${Vi}`,gA=`hide${Vi}`,e0=`hidePrevented${Vi}`,t0=`hidden${Vi}`,vA=`resize${Vi}`,_A=`click${Vi}${Qy}`,yA=`keydown.dismiss${Vi}`,wA={backdrop:!0,keyboard:!0,scroll:!1},EA={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ji extends Ge{constructor(h,m){super(h,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wA}static get DefaultType(){return EA}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||z.trigger(this._element,pA,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new zp().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Xy),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Yy),this._element.classList.remove(Xy),z.trigger(this._element,mA,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(z.trigger(this._element,gA).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Jy),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Yy,Jy),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new zp().reset(),z.trigger(this._element,t0)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new Fy({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():z.trigger(this._element,e0)}:null})}_initializeFocusTrap(){return new $y({trapElement:this._element})}_addEventListeners(){z.on(this._element,yA,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():z.trigger(this._element,e0))})}static jQueryInterface(h){return this.each(function(){const m=ji.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}z.on(document,_A,'[data-bs-toggle="offcanvas"]',function(y){const h=re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),d(this))return;z.one(h,t0,()=>{c(this)&&this.focus()});const m=re.findOne(Zy);m&&m!==h&&ji.getInstance(m).hide(),ji.getOrCreateInstance(h).toggle(this)}),z.on(window,fA,()=>{for(const y of re.find(Zy))ji.getOrCreateInstance(y).show()}),z.on(window,vA,()=>{for(const y of re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&ji.getOrCreateInstance(y).hide()}),mn(ji),x(ji);const n0={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},TA=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),IA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,SA=(y,h)=>{const m=y.nodeName.toLowerCase();return h.includes(m)?!TA.has(m)||!!IA.test(y.nodeValue):h.filter(S=>S instanceof RegExp).some(S=>S.test(m))},bA={allowList:n0,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},CA={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},xA={entry:"(string|element|function|null)",selector:"(string|element)"};class AA extends kt{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return bA}static get DefaultType(){return CA}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[V,F]of Object.entries(this._config.content))this._setContent(h,F,V);const m=h.children[0],S=this._resolvePossibleFunction(this._config.extraClass);return S&&m.classList.add(...S.split(" ")),m}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[m,S]of Object.entries(h))super._typeCheckConfig({selector:m,entry:S},xA)}_setContent(h,m,S){const V=re.findOne(S,h);V&&((m=this._resolvePossibleFunction(m))?a(m)?this._putElementInTemplate(l(m),V):this._config.html?V.innerHTML=this._maybeSanitize(m):V.textContent=m:V.remove())}_maybeSanitize(h){return this._config.sanitize?function(m,S,V){if(!m.length)return m;if(V&&typeof V=="function")return V(m);const F=new window.DOMParser().parseFromString(m,"text/html"),H=[].concat(...F.body.querySelectorAll("*"));for(const G of H){const Z=G.nodeName.toLowerCase();if(!Object.keys(S).includes(Z)){G.remove();continue}const ie=[].concat(...G.attributes),oe=[].concat(S["*"]||[],S[Z]||[]);for(const ee of ie)SA(ee,oe)||G.removeAttribute(ee.nodeName)}return F.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return T(h,[this])}_putElementInTemplate(h,m){if(this._config.html)return m.innerHTML="",void m.append(h);m.textContent=h.textContent}}const PA=new Set(["sanitize","allowList","sanitizeFn"]),qp="fade",zh="show",r0=".modal",i0="hide.bs.modal",Au="hover",Hp="focus",kA={AUTO:"auto",TOP:"top",RIGHT:R()?"left":"right",BOTTOM:"bottom",LEFT:R()?"right":"left"},RA={allowList:n0,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DA={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Bo extends Ge{constructor(h,m){if(Ga===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return RA}static get DefaultType(){return DA}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),z.off(this._element.closest(r0),i0,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=z.trigger(this._element,this.constructor.eventName("show")),m=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!m)return;this._disposePopper();const S=this._getTipElement();this._element.setAttribute("aria-describedby",S.getAttribute("id"));const{container:V}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(V.append(S),z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(S),S.classList.add(zh),"ontouchstart"in document.documentElement)for(const F of[].concat(...document.body.children))z.on(F,"mouseover",g);this._queueCallback(()=>{z.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(zh),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))z.off(h,"mouseover",g);this._activeTrigger.click=!1,this._activeTrigger[Hp]=!1,this._activeTrigger[Au]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const m=this._getTemplateFactory(h).toHtml();if(!m)return null;m.classList.remove(qp,zh),m.classList.add(`bs-${this.constructor.NAME}-auto`);const S=(V=>{do V+=Math.floor(1e6*Math.random());while(document.getElementById(V));return V})(this.constructor.NAME).toString();return m.setAttribute("id",S),this._isAnimated()&&m.classList.add(qp),m}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new AA({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(qp)}_isShown(){return this.tip&&this.tip.classList.contains(zh)}_createPopper(h){const m=T(this._config.placement,[this,h,this._element]),S=kA[m.toUpperCase()];return Uo(this._element,h,this._getPopperConfig(S))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(m=>Number.parseInt(m,10)):typeof h=="function"?m=>h(m,this._element):h}_resolvePossibleFunction(h){return T(h,[this._element])}_getPopperConfig(h){const m={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:S=>{this._getTipElement().setAttribute("data-popper-placement",S.state.placement)}}]};return{...m,...T(this._config.popperConfig,[m])}}_setListeners(){const h=this._config.trigger.split(" ");for(const m of h)if(m==="click")z.on(this._element,this.constructor.eventName("click"),this._config.selector,S=>{this._initializeOnDelegatedTarget(S).toggle()});else if(m!=="manual"){const S=m===Au?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),V=m===Au?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");z.on(this._element,S,this._config.selector,F=>{const H=this._initializeOnDelegatedTarget(F);H._activeTrigger[F.type==="focusin"?Hp:Au]=!0,H._enter()}),z.on(this._element,V,this._config.selector,F=>{const H=this._initializeOnDelegatedTarget(F);H._activeTrigger[F.type==="focusout"?Hp:Au]=H._element.contains(F.relatedTarget),H._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},z.on(this._element.closest(r0),i0,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,m){clearTimeout(this._timeout),this._timeout=setTimeout(h,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const m=ot.getDataAttributes(this._element);for(const S of Object.keys(m))PA.has(S)&&delete m[S];return h={...m,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:l(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[m,S]of Object.entries(this._config))this.constructor.Default[m]!==S&&(h[m]=S);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const m=Bo.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h]()}})}}x(Bo);const OA={...Bo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},NA={...Bo.DefaultType,content:"(null|string|element|function)"};class Bh extends Bo{static get Default(){return OA}static get DefaultType(){return NA}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const m=Bh.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h]()}})}}x(Bh);const Wp=".bs.scrollspy",LA=`activate${Wp}`,s0=`click${Wp}`,MA=`load${Wp}.data-api`,Xa="active",Kp="[href]",o0=".nav-link",VA=`${o0}, .nav-item > ${o0}, .list-group-item`,jA={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},FA={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Pu extends Ge{constructor(h,m){super(h,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return jA}static get DefaultType(){return FA}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=l(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(m=>Number.parseFloat(m))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(z.off(this._config.target,s0),z.on(this._config.target,s0,Kp,h=>{const m=this._observableSections.get(h.target.hash);if(m){h.preventDefault();const S=this._rootElement||window,V=m.offsetTop-this._element.offsetTop;if(S.scrollTo)return void S.scrollTo({top:V,behavior:"smooth"});S.scrollTop=V}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),h)}_observerCallback(h){const m=H=>this._targetLinks.get(`#${H.target.id}`),S=H=>{this._previousScrollData.visibleEntryTop=H.target.offsetTop,this._process(m(H))},V=(this._rootElement||document.documentElement).scrollTop,F=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const H of h){if(!H.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(H));continue}const G=H.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(F&&G){if(S(H),!V)return}else F||G||S(H)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=re.find(Kp,this._config.target);for(const m of h){if(!m.hash||d(m))continue;const S=re.findOne(decodeURI(m.hash),this._element);c(S)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,S))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(Xa),this._activateParents(h),z.trigger(this._element,LA,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))re.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(Xa);else for(const m of re.parents(h,".nav, .list-group"))for(const S of re.prev(m,VA))S.classList.add(Xa)}_clearActiveClass(h){h.classList.remove(Xa);const m=re.find(`${Kp}.${Xa}`,h);for(const S of m)S.classList.remove(Xa)}static jQueryInterface(h){return this.each(function(){const m=Pu.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}z.on(window,MA,()=>{for(const y of re.find('[data-bs-spy="scroll"]'))Pu.getOrCreateInstance(y)}),x(Pu);const qo=".bs.tab",UA=`hide${qo}`,$A=`hidden${qo}`,zA=`show${qo}`,BA=`shown${qo}`,qA=`click${qo}`,HA=`keydown${qo}`,WA=`load${qo}`,KA="ArrowLeft",a0="ArrowRight",GA="ArrowUp",l0="ArrowDown",Gp="Home",u0="End",Ho="active",c0="fade",Qp="show",h0=".dropdown-toggle",Yp=`:not(${h0})`,d0='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Xp=`.nav-link${Yp}, .list-group-item${Yp}, [role="tab"]${Yp}, ${d0}`,QA=`.${Ho}[data-bs-toggle="tab"], .${Ho}[data-bs-toggle="pill"], .${Ho}[data-bs-toggle="list"]`;class Wo extends Ge{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),z.on(this._element,HA,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const m=this._getActiveElem(),S=m?z.trigger(m,UA,{relatedTarget:h}):null;z.trigger(h,zA,{relatedTarget:m}).defaultPrevented||S&&S.defaultPrevented||(this._deactivate(m,h),this._activate(h,m))}_activate(h,m){h&&(h.classList.add(Ho),this._activate(re.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),z.trigger(h,BA,{relatedTarget:m})):h.classList.add(Qp)},h,h.classList.contains(c0)))}_deactivate(h,m){h&&(h.classList.remove(Ho),h.blur(),this._deactivate(re.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),z.trigger(h,$A,{relatedTarget:m})):h.classList.remove(Qp)},h,h.classList.contains(c0)))}_keydown(h){if(![KA,a0,GA,l0,Gp,u0].includes(h.key))return;h.stopPropagation(),h.preventDefault();const m=this._getChildren().filter(V=>!d(V));let S;if([Gp,u0].includes(h.key))S=m[h.key===Gp?0:m.length-1];else{const V=[a0,l0].includes(h.key);S=M(m,h.target,V,!0)}S&&(S.focus({preventScroll:!0}),Wo.getOrCreateInstance(S).show())}_getChildren(){return re.find(Xp,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,m){this._setAttributeIfNotExists(h,"role","tablist");for(const S of m)this._setInitialAttributesOnChild(S)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const m=this._elemIsActive(h),S=this._getOuterElement(h);h.setAttribute("aria-selected",m),S!==h&&this._setAttributeIfNotExists(S,"role","presentation"),m||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const m=re.getElementFromSelector(h);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,m){const S=this._getOuterElement(h);if(!S.classList.contains("dropdown"))return;const V=(F,H)=>{const G=re.findOne(F,S);G&&G.classList.toggle(H,m)};V(h0,Ho),V(".dropdown-menu",Qp),S.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(h,m,S){h.hasAttribute(m)||h.setAttribute(m,S)}_elemIsActive(h){return h.classList.contains(Ho)}_getInnerElement(h){return h.matches(Xp)?h:re.findOne(Xp,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const m=Wo.getOrCreateInstance(this);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}z.on(document,qA,d0,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),d(this)||Wo.getOrCreateInstance(this).show()}),z.on(window,WA,()=>{for(const y of re.find(QA))Wo.getOrCreateInstance(y)}),x(Wo);const ks=".bs.toast",YA=`mouseover${ks}`,XA=`mouseout${ks}`,JA=`focusin${ks}`,ZA=`focusout${ks}`,eP=`hide${ks}`,tP=`hidden${ks}`,nP=`show${ks}`,rP=`shown${ks}`,f0="hide",qh="show",Hh="showing",iP={animation:"boolean",autohide:"boolean",delay:"number"},sP={animation:!0,autohide:!0,delay:5e3};class ku extends Ge{constructor(h,m){super(h,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return sP}static get DefaultType(){return iP}static get NAME(){return"toast"}show(){z.trigger(this._element,nP).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(f0),w(this._element),this._element.classList.add(qh,Hh),this._queueCallback(()=>{this._element.classList.remove(Hh),z.trigger(this._element,rP),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(z.trigger(this._element,eP).defaultPrevented||(this._element.classList.add(Hh),this._queueCallback(()=>{this._element.classList.add(f0),this._element.classList.remove(Hh,qh),z.trigger(this._element,tP)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qh),super.dispose()}isShown(){return this._element.classList.contains(qh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,m){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const S=h.relatedTarget;this._element===S||this._element.contains(S)||this._maybeScheduleHide()}_setListeners(){z.on(this._element,YA,h=>this._onInteraction(h,!0)),z.on(this._element,XA,h=>this._onInteraction(h,!1)),z.on(this._element,JA,h=>this._onInteraction(h,!0)),z.on(this._element,ZA,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const m=ku.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0)throw new TypeError(`No method named "${h}"`);m[h](this)}})}}return mn(ku),x(ku),{Alert:ln,Button:vn,Carousel:Bn,Collapse:li,Dropdown:ut,Modal:zo,Offcanvas:ji,Popover:Bh,ScrollSpy:Pu,Tab:Wo,Toast:ku,Tooltip:Bo}})})(WR);/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uc(){return Uc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uc.apply(this,arguments)}var Ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ys||(Ys={}));const Lw="popstate";function KR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zg("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:bf(i)}return QR(e,n,null,t)}function Ft(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GR(){return Math.random().toString(36).substr(2,8)}function Mw(t,e){return{usr:t.state,key:t.key,idx:e}}function zg(t,e,n,r){return n===void 0&&(n=null),Uc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ru(e):e,{state:n,key:e&&e.key||r||GR()})}function bf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ru(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function QR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ys.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Uc({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=Ys.Pop;let R=d(),x=R==null?null:R-c;c=R,l&&l({action:a,location:A.location,delta:x})}function g(R,x){a=Ys.Push;let T=zg(A.location,R,x);c=d()+1;let I=Mw(T,c),M=A.createHref(T);try{o.pushState(I,"",M)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(M)}s&&l&&l({action:a,location:A.location,delta:1})}function w(R,x){a=Ys.Replace;let T=zg(A.location,R,x);c=d();let I=Mw(T,c),M=A.createHref(T);o.replaceState(I,"",M),s&&l&&l({action:a,location:A.location,delta:0})}function E(R){let x=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof R=="string"?R:bf(R);return T=T.replace(/ $/,"%20"),Ft(x,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,x)}let A={get action(){return a},get location(){return t(i,o)},listen(R){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Lw,p),l=R,()=>{i.removeEventListener(Lw,p),l=null}},createHref(R){return e(i,R)},createURL:E,encodeLocation(R){let x=E(R);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:w,go(R){return o.go(R)}};return A}var Vw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vw||(Vw={}));function YR(t,e,n){return n===void 0&&(n="/"),XR(t,e,n,!1)}function XR(t,e,n,r){let i=typeof e=="string"?ru(e):e,s=x_(i.pathname||"/",n);if(s==null)return null;let o=mS(t);JR(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=uD(s);a=aD(o[l],c,r)}return a}function mS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ft(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=oo([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Ft(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mS(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sD(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of gS(s.path))i(s,o,l)}),e}function gS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=gS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ZR=/^:[\w-]+$/,eD=3,tD=2,nD=1,rD=10,iD=-2,jw=t=>t==="*";function sD(t,e){let n=t.split("/"),r=n.length;return n.some(jw)&&(r+=iD),e&&(r+=tD),n.filter(i=>!jw(i)).reduce((i,s)=>i+(ZR.test(s)?eD:s===""?nD:rD),r)}function oD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aD(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=Fw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=Fw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:oo([s,p.pathname]),pathnameBase:fD(oo([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=oo([s,p.pathnameBase]))}return o}function Fw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=lD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:g,isOptional:w}=d;if(g==="*"){let A=a[p]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const E=a[p];return w&&!E?c[g]=void 0:c[g]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function lD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function x_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ru(t):t;return{pathname:n?n.startsWith("/")?n:hD(n,e):e,search:pD(r),hash:mD(i)}}function hD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function xm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dD(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function A_(t,e){let n=dD(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function P_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ru(t):(i=Uc({},t),Ft(!i.pathname||!i.pathname.includes("?"),xm("?","pathname","search",i)),Ft(!i.pathname||!i.pathname.includes("#"),xm("#","pathname","hash",i)),Ft(!i.search||!i.search.includes("#"),xm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=cD(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const oo=t=>t.join("/").replace(/\/\/+/g,"/"),fD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vS=["post","put","patch","delete"];new Set(vS);const vD=["get",...vS];new Set(vD);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$c.apply(this,arguments)}const k_=N.createContext(null),_D=N.createContext(null),Io=N.createContext(null),hp=N.createContext(null),ls=N.createContext({outlet:null,matches:[],isDataRoute:!1}),_S=N.createContext(null);function yD(t,e){let{relative:n}=e===void 0?{}:e;iu()||Ft(!1);let{basename:r,navigator:i}=N.useContext(Io),{hash:s,pathname:o,search:a}=wS(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:oo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function iu(){return N.useContext(hp)!=null}function So(){return iu()||Ft(!1),N.useContext(hp).location}function yS(t){N.useContext(Io).static||N.useLayoutEffect(t)}function ka(){let{isDataRoute:t}=N.useContext(ls);return t?OD():wD()}function wD(){iu()||Ft(!1);let t=N.useContext(k_),{basename:e,future:n,navigator:r}=N.useContext(Io),{matches:i}=N.useContext(ls),{pathname:s}=So(),o=JSON.stringify(A_(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return yS(()=>{a.current=!0}),N.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=P_(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:oo([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}function ED(){let{matches:t}=N.useContext(ls),e=t[t.length-1];return e?e.params:{}}function wS(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Io),{matches:i}=N.useContext(ls),{pathname:s}=So(),o=JSON.stringify(A_(i,r.v7_relativeSplatPath));return N.useMemo(()=>P_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function TD(t,e){return ID(t,e)}function ID(t,e,n,r){iu()||Ft(!1);let{navigator:i}=N.useContext(Io),{matches:s}=N.useContext(ls),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=So(),d;if(e){var p;let R=typeof e=="string"?ru(e):e;l==="/"||(p=R.pathname)!=null&&p.startsWith(l)||Ft(!1),d=R}else d=c;let g=d.pathname||"/",w=g;if(l!=="/"){let R=l.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=YR(t,{pathname:w}),A=AD(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:oo([l,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:oo([l,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r);return e&&A?N.createElement(hp.Provider,{value:{location:$c({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ys.Pop}},A):A}function SD(){let t=DD(),e=gD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:i},n):null,null)}const bD=N.createElement(SD,null);class CD extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(ls.Provider,{value:this.props.routeContext},N.createElement(_S.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xD(t){let{routeContext:e,match:n,children:r}=t,i=N.useContext(k_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(ls.Provider,{value:e},r)}function AD(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Ft(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:g,errors:w}=n,E=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,g)=>{let w,E=!1,A=null,R=null;n&&(w=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||bD,l&&(c<0&&g===0?(E=!0,R=null):c===g&&(E=!0,R=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),T=()=>{let I;return w?I=A:E?I=R:p.route.Component?I=N.createElement(p.route.Component,null):p.route.element?I=p.route.element:I=d,N.createElement(xD,{match:p,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:I})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?N.createElement(CD,{location:n.location,revalidation:n.revalidation,component:A,error:w,children:T(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):T()},null)}var ES=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ES||{}),Cf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cf||{});function PD(t){let e=N.useContext(k_);return e||Ft(!1),e}function kD(t){let e=N.useContext(_D);return e||Ft(!1),e}function RD(t){let e=N.useContext(ls);return e||Ft(!1),e}function TS(t){let e=RD(),n=e.matches[e.matches.length-1];return n.route.id||Ft(!1),n.route.id}function DD(){var t;let e=N.useContext(_S),n=kD(Cf.UseRouteError),r=TS(Cf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function OD(){let{router:t}=PD(ES.UseNavigateStable),e=TS(Cf.UseNavigateStable),n=N.useRef(!1);return yS(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,$c({fromRouteId:e},s)))},[t,e])}const Uw={};function ND(t,e){Uw[e]||(Uw[e]=!0,console.warn(e))}const $w=(t,e,n)=>ND(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function LD(t,e){t!=null&&t.v7_startTransition||$w("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&$w("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function IS(t){let{to:e,replace:n,state:r,relative:i}=t;iu()||Ft(!1);let{future:s,static:o}=N.useContext(Io),{matches:a}=N.useContext(ls),{pathname:l}=So(),c=ka(),d=P_(e,A_(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return N.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function On(t){Ft(!1)}function MD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ys.Pop,navigator:s,static:o=!1,future:a}=t;iu()&&Ft(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:s,static:o,future:$c({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ru(r));let{pathname:d="/",search:p="",hash:g="",state:w=null,key:E="default"}=r,A=N.useMemo(()=>{let R=x_(d,l);return R==null?null:{location:{pathname:R,search:p,hash:g,state:w,key:E},navigationType:i}},[l,d,p,g,w,E,i]);return A==null?null:N.createElement(Io.Provider,{value:c},N.createElement(hp.Provider,{children:n,value:A}))}function VD(t){let{children:e,location:n}=t;return TD(Bg(e),n)}new Promise(()=>{});function Bg(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,i)=>{if(!N.isValidElement(r))return;let s=[...e,i];if(r.type===N.Fragment){n.push.apply(n,Bg(r.props.children,s));return}r.type!==On&&Ft(!1),!r.props.index||!r.props.children||Ft(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Bg(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qg(){return qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qg.apply(this,arguments)}function jD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function FD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UD(t,e){return t.button===0&&(!e||e==="_self")&&!FD(t)}const $D=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],zD="6";try{window.__reactRouterVersion=zD}catch{}const BD="startTransition",zw=NP[BD];function qD(t){let{basename:e,children:n,future:r,window:i}=t,s=N.useRef();s.current==null&&(s.current=KR({window:i,v5Compat:!0}));let o=s.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=N.useCallback(p=>{c&&zw?zw(()=>l(p)):l(p)},[l,c]);return N.useLayoutEffect(()=>o.listen(d),[o,d]),N.useEffect(()=>LD(r),[r]),N.createElement(MD,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cr=N.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:p}=e,g=jD(e,$D),{basename:w}=N.useContext(Io),E,A=!1;if(typeof c=="string"&&WD.test(c)&&(E=c,HD))try{let I=new URL(window.location.href),M=c.startsWith("//")?new URL(I.protocol+c):new URL(c),B=x_(M.pathname,w);M.origin===I.origin&&B!=null?c=B+M.search+M.hash:A=!0}catch{}let R=yD(c,{relative:i}),x=KD(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:p});function T(I){r&&r(I),I.defaultPrevented||x(I)}return N.createElement("a",qg({},g,{href:E||R,onClick:A||s?r:T,ref:n,target:l}))});var Bw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Bw||(Bw={}));var qw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qw||(qw={}));function KD(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ka(),c=So(),d=wS(t,{relative:o});return N.useCallback(p=>{if(UD(p,n)){p.preventDefault();let g=r!==void 0?r:bf(c)===bf(d);l(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}var Hw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GD=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let g=(a&15)<<2|c>>6,w=c&63;l||(w=64,o||(g=64)),r.push(n[d],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GD(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new QD;const g=s<<2|a>>4;if(r.push(g),c!==64){const w=a<<4&240|c>>2;if(r.push(w),p!==64){const E=c<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YD=function(t){const e=SS(t);return bS.encodeByteArray(e,!0)},xf=function(t){return YD(t).replace(/\./g,"")},CS=function(t){try{return bS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=()=>XD().__FIREBASE_DEFAULTS__,ZD=()=>{if(typeof process>"u"||typeof Hw>"u")return;const t=Hw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},e2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CS(t[1]);return e&&JSON.parse(e)},dp=()=>{try{return JD()||ZD()||e2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},t2=t=>{var e,n;return(n=(e=dp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xS=()=>{var t;return(t=dp())===null||t===void 0?void 0:t.config},AS=t=>{var e;return(e=dp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xf(JSON.stringify(n)),xf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function s2(){var t;const e=(t=dp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function a2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function l2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u2(){const t=Jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PS(){return!s2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kS(){try{return typeof indexedDB=="object"}catch{return!1}}function c2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="FirebaseError";class us extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=h2,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oh.prototype.create)}}class oh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?d2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new us(i,a,r)}}function d2(t,e){return t.replace(f2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const f2=/\{\$([^}]+)}/g;function p2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ww(s)&&Ww(o)){if(!zc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ww(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ju(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function m2(t,e){const n=new g2(t,e);return n.subscribe.bind(n)}class g2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");v2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Am),i.error===void 0&&(i.error=Am),i.complete===void 0&&(i.complete=Am);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Am(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class va{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new n2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(w2(e))try{this.getOrInitializeService({instanceIdentifier:Xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xo){return this.instances.has(e)}getOptions(e=Xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:y2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xo){return this.component?this.component.multipleInstances?e:Xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function y2(t){return t===Xo?void 0:t}function w2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const T2={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},I2=Ne.INFO,S2={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},b2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=S2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class R_{constructor(e){this.name=e,this._logLevel=I2,this._logHandler=b2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?T2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const C2=(t,e)=>e.some(n=>t instanceof n);let Kw,Gw;function x2(){return Kw||(Kw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function A2(){return Gw||(Gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RS=new WeakMap,Hg=new WeakMap,DS=new WeakMap,Pm=new WeakMap,D_=new WeakMap;function P2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ao(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RS.set(n,t)}).catch(()=>{}),D_.set(e,t),e}function k2(t){if(Hg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Hg.set(t,e)}let Wg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ao(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function R2(t){Wg=t(Wg)}function D2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(km(this),e,...n);return DS.set(r,e.sort?e.sort():[e]),ao(r)}:A2().includes(t)?function(...e){return t.apply(km(this),e),ao(RS.get(this))}:function(...e){return ao(t.apply(km(this),e))}}function O2(t){return typeof t=="function"?D2(t):(t instanceof IDBTransaction&&k2(t),C2(t,x2())?new Proxy(t,Wg):t)}function ao(t){if(t instanceof IDBRequest)return P2(t);if(Pm.has(t))return Pm.get(t);const e=O2(t);return e!==t&&(Pm.set(t,e),D_.set(e,t)),e}const km=t=>D_.get(t);function N2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ao(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ao(o.result),l.oldVersion,l.newVersion,ao(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const L2=["get","getKey","getAll","getAllKeys","count"],M2=["put","add","delete","clear"],Rm=new Map;function Qw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=M2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||L2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Rm.set(e,s),s}R2(t=>({...t,get:(e,n,r)=>Qw(e,n)||t.get(e,n,r),has:(e,n)=>!!Qw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(j2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function j2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Kg="@firebase/app",Yw="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new R_("@firebase/app"),F2="@firebase/app-compat",U2="@firebase/analytics-compat",$2="@firebase/analytics",z2="@firebase/app-check-compat",B2="@firebase/app-check",q2="@firebase/auth",H2="@firebase/auth-compat",W2="@firebase/database",K2="@firebase/data-connect",G2="@firebase/database-compat",Q2="@firebase/functions",Y2="@firebase/functions-compat",X2="@firebase/installations",J2="@firebase/installations-compat",Z2="@firebase/messaging",eO="@firebase/messaging-compat",tO="@firebase/performance",nO="@firebase/performance-compat",rO="@firebase/remote-config",iO="@firebase/remote-config-compat",sO="@firebase/storage",oO="@firebase/storage-compat",aO="@firebase/firestore",lO="@firebase/vertexai",uO="@firebase/firestore-compat",cO="firebase",hO="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="[DEFAULT]",dO={[Kg]:"fire-core",[F2]:"fire-core-compat",[$2]:"fire-analytics",[U2]:"fire-analytics-compat",[B2]:"fire-app-check",[z2]:"fire-app-check-compat",[q2]:"fire-auth",[H2]:"fire-auth-compat",[W2]:"fire-rtdb",[K2]:"fire-data-connect",[G2]:"fire-rtdb-compat",[Q2]:"fire-fn",[Y2]:"fire-fn-compat",[X2]:"fire-iid",[J2]:"fire-iid-compat",[Z2]:"fire-fcm",[eO]:"fire-fcm-compat",[tO]:"fire-perf",[nO]:"fire-perf-compat",[rO]:"fire-rc",[iO]:"fire-rc-compat",[sO]:"fire-gcs",[oO]:"fire-gcs-compat",[aO]:"fire-fst",[uO]:"fire-fst-compat",[lO]:"fire-vertex","fire-js":"fire-js",[cO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Map,fO=new Map,Qg=new Map;function Xw(t,e){try{t.container.addComponent(e)}catch(n){ns.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function $l(t){const e=t.name;if(Qg.has(e))return ns.debug(`There were multiple attempts to register component ${e}.`),!1;Qg.set(e,t);for(const n of Af.values())Xw(n,t);for(const n of fO.values())Xw(n,t);return!0}function O_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ei(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lo=new oh("app","Firebase",pO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new va("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=hO;function OS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw lo.create("bad-app-name",{appName:String(i)});if(n||(n=xS()),!n)throw lo.create("no-options");const s=Af.get(i);if(s){if(zc(n,s.options)&&zc(r,s.config))return s;throw lo.create("duplicate-app",{appName:i})}const o=new E2(i);for(const l of Qg.values())o.addComponent(l);const a=new mO(n,r,o);return Af.set(i,a),a}function gO(t=Gg){const e=Af.get(t);if(!e&&t===Gg&&xS())return OS();if(!e)throw lo.create("no-app",{appName:t});return e}function uo(t,e,n){var r;let i=(r=dO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ns.warn(a.join(" "));return}$l(new va(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="firebase-heartbeat-database",_O=1,Bc="firebase-heartbeat-store";let Dm=null;function NS(){return Dm||(Dm=N2(vO,_O,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bc)}catch(n){console.warn(n)}}}}).catch(t=>{throw lo.create("idb-open",{originalErrorMessage:t.message})})),Dm}async function yO(t){try{const n=(await NS()).transaction(Bc),r=await n.objectStore(Bc).get(LS(t));return await n.done,r}catch(e){if(e instanceof us)ns.warn(e.message);else{const n=lo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ns.warn(n.message)}}}async function Jw(t,e){try{const r=(await NS()).transaction(Bc,"readwrite");await r.objectStore(Bc).put(e,LS(t)),await r.done}catch(n){if(n instanceof us)ns.warn(n.message);else{const r=lo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ns.warn(r.message)}}}function LS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=1024,EO=30*24*60*60*1e3;class TO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=EO}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ns.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zw(),{heartbeatsToSend:r,unsentEntries:i}=IO(this._heartbeatsCache.heartbeats),s=xf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ns.warn(n),""}}}function Zw(){return new Date().toISOString().substring(0,10)}function IO(t,e=wO){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),eE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),eE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kS()?c2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function eE(t){return xf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t){$l(new va("platform-logger",e=>new V2(e),"PRIVATE")),$l(new va("heartbeat",e=>new TO(e),"PRIVATE")),uo(Kg,Yw,t),uo(Kg,Yw,"esm2017"),uo("fire-js","")}bO("");function N_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function MS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CO=MS,VS=new oh("auth","Firebase",MS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new R_("@firebase/auth");function xO(t,...e){Pf.logLevel<=Ne.WARN&&Pf.warn(`Auth (${su}): ${t}`,...e)}function Md(t,...e){Pf.logLevel<=Ne.ERROR&&Pf.error(`Auth (${su}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw M_(t,...e)}function ri(t,...e){return M_(t,...e)}function L_(t,e,n){const r=Object.assign(Object.assign({},CO()),{[e]:n});return new oh("auth","Firebase",r).create(e,{appName:t.name})}function Yi(t){return L_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AO(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fr(t,"argument-error"),L_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function M_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VS.create(t,...e)}function ge(t,e,...n){if(!t)throw M_(e,...n)}function Hi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Md(e),new Error(e)}function rs(t,e){t||Hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function PO(){return tE()==="http:"||tE()==="https:"}function tE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PO()||a2()||"connection"in navigator)?navigator.onLine:!0}function RO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.shortDelay=e,this.longDelay=n,rs(n>e,"Short delay should be less than long delay!"),this.isMobile=i2()||l2()}get(){return kO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(t,e){rs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new lh(3e4,6e4);function bo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cs(t,e,n,r,i={}){return FS(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ah(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return o2()||(c.referrerPolicy="no-referrer"),jS.fetch()(US(t,t.config.apiHost,n,a),c)})}async function FS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DO),e);try{const i=new LO(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw dd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw dd(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw L_(t,d,c);Fr(t,d)}}catch(i){if(i instanceof us)throw i;Fr(t,"network-request-failed",{message:String(i)})}}async function uh(t,e,n,r,i={}){const s=await cs(t,e,n,r,i);return"mfaPendingCredential"in s&&Fr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function US(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?V_(t.config,i):`${t.config.apiScheme}://${i}`}function NO(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ri(this.auth,"network-request-failed")),OO.get())})}}function dd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ri(t,e,r);return i.customData._tokenResponse=n,i}function nE(t){return t!==void 0&&t.enterprise!==void 0}class MO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NO(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function VO(t,e){return cs(t,"GET","/v2/recaptchaConfig",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(t,e){return cs(t,"POST","/v1/accounts:delete",e)}async function $S(t,e){return cs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FO(t,e=!1){const n=an(t),r=await n.getIdToken(e),i=j_(r);ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mc(Om(i.auth_time)),issuedAtTime:mc(Om(i.iat)),expirationTime:mc(Om(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Om(t){return Number(t)*1e3}function j_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Md("JWT malformed, contained fewer than 3 sections"),null;try{const i=CS(n);return i?JSON.parse(i):(Md("Failed to decode base64 JWT payload"),null)}catch(i){return Md("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function rE(t){const e=j_(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof us&&UO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function UO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(t){var e;const n=t.auth,r=await t.getIdToken(),i=await zl(t,$S(n,{idToken:r}));ge(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?zS(s.providerUserInfo):[],a=BO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function zO(t){const e=an(t);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zS(t){return t.map(e=>{var{providerId:n}=e,r=N_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(t,e){const n=await FS(t,{},async()=>{const r=ah({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=US(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jS.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function HO(t,e){return cs(t,"POST","/v2/accounts:revokeToken",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=rE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await qO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new kl;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ge(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kl,this.toJSON())}_performRefresh(){return Hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=N_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $O(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zl(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FO(this,e)}reload(){return zO(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ei(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await zl(this,jO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,w=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:M,isAnonymous:B,providerData:W,stsTokenManager:P}=n;ge(I&&P,e,"internal-error");const C=kl.fromJSON(this.name,P);ge(typeof I=="string",e,"internal-error"),Os(p,e.name),Os(g,e.name),ge(typeof M=="boolean",e,"internal-error"),ge(typeof B=="boolean",e,"internal-error"),Os(w,e.name),Os(E,e.name),Os(A,e.name),Os(R,e.name),Os(x,e.name),Os(T,e.name);const k=new Wi({uid:I,auth:e,email:g,emailVerified:M,displayName:p,isAnonymous:B,photoURL:E,phoneNumber:w,tenantId:A,stsTokenManager:C,createdAt:x,lastLoginAt:T});return W&&Array.isArray(W)&&(k.providerData=W.map(O=>Object.assign({},O))),R&&(k._redirectEventId=R),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new kl;i.updateFromServerResponse(n);const s=new Wi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kf(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ge(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?zS(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new kl;a.updateFromIdToken(r);const l=new Wi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=new Map;function Ki(t){rs(t instanceof Function,"Expected a class definition");let e=iE.get(t);return e?(rs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BS.type="NONE";const sE=BS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t,e,n){return`firebase:${t}:${e}:${n}`}class Rl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Vd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rl(Ki(sE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ki(sE);const o=Vd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const p=Wi._fromJSON(e,d);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Rl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Rl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QS(e))return"Blackberry";if(YS(e))return"Webos";if(HS(e))return"Safari";if((e.includes("chrome/")||WS(e))&&!e.includes("edge/"))return"Chrome";if(GS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qS(t=Jt()){return/firefox\//i.test(t)}function HS(t=Jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WS(t=Jt()){return/crios\//i.test(t)}function KS(t=Jt()){return/iemobile/i.test(t)}function GS(t=Jt()){return/android/i.test(t)}function QS(t=Jt()){return/blackberry/i.test(t)}function YS(t=Jt()){return/webos/i.test(t)}function F_(t=Jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function WO(t=Jt()){var e;return F_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KO(){return u2()&&document.documentMode===10}function XS(t=Jt()){return F_(t)||GS(t)||YS(t)||QS(t)||/windows phone/i.test(t)||KS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e=[]){let n;switch(t){case"Browser":n=oE(Jt());break;case"Worker":n=`${oE(Jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${su}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(t,e={}){return cs(t,"GET","/v2/passwordPolicy",bo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=6;class XO{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aE(this),this.idTokenSubscription=new aE(this),this.beforeStateQueue=new GO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ki(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $S(this,{idToken:e}),r=await Wi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ei(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ei(this.app))return Promise.reject(Yi(this));const n=e?an(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ei(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ei(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QO(this),n=new XO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await HO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ki(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[Ki(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&xO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Co(t){return an(t)}class aE{constructor(e){this.auth=e,this.observer=null,this.addObserver=m2(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZO(t){fp=t}function ZS(t){return fp.loadJS(t)}function eN(){return fp.recaptchaEnterpriseScript}function tN(){return fp.gapiScript}function nN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class rN{constructor(){this.enterprise=new iN}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class iN{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sN="recaptcha-enterprise",eb="NO_RECAPTCHA";class oN{constructor(e){this.type=sN,this.auth=Co(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{VO(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new MO(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;nE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(eb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rN().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&nE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=eN();l.length!==0&&(l+=a),ZS(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function lE(t,e,n,r=!1,i=!1){const s=new oN(t);let o;if(i)o=eb;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jg(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await lE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(t,e){const n=O_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(zc(s,e??{}))return i;Fr(i,"already-initialized")}return n.initialize({options:e})}function lN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ki);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tb(t,e,n){const r=Co(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=nb(e),{host:o,port:a}=uN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||cN()}function nb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function uN(t){const e=nb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:uE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:uE(o)}}}function uE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function cN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hi("not implemented")}_getIdTokenResponse(e){return Hi("not implemented")}_linkToIdToken(e,n){return Hi("not implemented")}_getReauthenticationResolver(e){return Hi("not implemented")}}async function hN(t,e){return cs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){return uh(t,"POST","/v1/accounts:signInWithPassword",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(t,e){return uh(t,"POST","/v1/accounts:signInWithEmailLink",bo(t,e))}async function pN(t,e){return uh(t,"POST","/v1/accounts:signInWithEmailLink",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends U_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new qc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,n,"signInWithPassword",dN);case"emailLink":return fN(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jg(e,r,"signUpPassword",hN);case"emailLink":return pN(e,{idToken:n,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t,e){return uh(t,"POST","/v1/accounts:signInWithIdp",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="http://localhost";class _a extends U_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=N_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new _a(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Dl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Dl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Dl(e,n)}buildRequest(){const e={requestUri:mN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ah(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vN(t){const e=Xu(Ju(t)).link,n=e?Xu(Ju(e)).deep_link_id:null,r=Xu(Ju(t)).deep_link_id;return(r?Xu(Ju(r)).link:null)||r||n||e||t}class $_{constructor(e){var n,r,i,s,o,a;const l=Xu(Ju(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=gN((i=l.mode)!==null&&i!==void 0?i:null);ge(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=vN(e);try{return new $_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.providerId=ou.PROVIDER_ID}static credential(e,n){return qc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=$_.parseLink(n);return ge(r,"argument-error"),qc._fromEmailAndCode(e,r.code,r.tenantId)}}ou.PROVIDER_ID="password";ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends z_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends ch{constructor(){super("facebook.com")}static credential(e){return _a._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _a._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wi.credential(n,r)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends ch{constructor(){super("github.com")}static credential(e){return _a._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends ch{constructor(){super("twitter.com")}static credential(e,n){return _a._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(t,e){return uh(t,"POST","/v1/accounts:signUp",bo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Wi._fromIdTokenResponse(e,r,i),o=cE(r);return new ya({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=cE(r);return new ya({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function cE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends us{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Rf(e,n,r,i)}}function rb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Rf._fromErrorAndOperation(t,s,e,r):s})}async function yN(t,e,n=!1){const r=await zl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ya._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e,n=!1){const{auth:r}=t;if(ei(r.app))return Promise.reject(Yi(r));const i="reauthenticate";try{const s=await zl(t,rb(r,i,e,t),n);ge(s.idToken,r,"internal-error");const o=j_(s.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),ya._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ib(t,e,n=!1){if(ei(t.app))return Promise.reject(Yi(t));const r="signIn",i=await rb(t,r,e),s=await ya._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function EN(t,e){return ib(Co(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(t){const e=Co(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TN(t,e,n){if(ei(t.app))return Promise.reject(Yi(t));const r=Co(t),o=await Jg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_N).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&sb(t),l}),a=await ya._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function IN(t,e,n){return ei(t.app)?Promise.reject(Yi(t)):EN(an(t),ou.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sb(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){return cs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=an(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await zl(r,SN(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function bN(t,e,n,r){return an(t).onIdTokenChanged(e,n,r)}function CN(t,e,n){return an(t).beforeAuthStateChanged(e,n)}function ab(t,e,n,r){return an(t).onAuthStateChanged(e,n,r)}function xN(t){return an(t).signOut()}const Df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=1e3,PN=10;class ub extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);KO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,PN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ub.type="LOCAL";const kN=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cb.type="SESSION";const hb=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new pp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await RN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=B_("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(){return window}function ON(t){Ci().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return typeof Ci().WorkerGlobalScope<"u"&&typeof Ci().importScripts=="function"}async function NN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MN(){return db()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="firebaseLocalStorageDb",VN=1,Of="firebaseLocalStorage",pb="fbase_key";class hh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mp(t,e){return t.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function jN(){const t=indexedDB.deleteDatabase(fb);return new hh(t).toPromise()}function Zg(){const t=indexedDB.open(fb,VN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Of,{keyPath:pb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Of)?e(r):(r.close(),await jN(),e(await Zg()))})})}async function hE(t,e,n){const r=mp(t,!0).put({[pb]:e,value:n});return new hh(r).toPromise()}async function FN(t,e){const n=mp(t,!1).get(e),r=await new hh(n).toPromise();return r===void 0?null:r.value}function dE(t,e){const n=mp(t,!0).delete(e);return new hh(n).toPromise()}const UN=800,$N=3;class mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$N)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return db()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pp._getInstance(MN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await NN(),!this.activeServiceWorker)return;this.sender=new DN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zg();return await hE(e,Df,"1"),await dE(e,Df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mp(i,!1).getAll();return new hh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mb.type="LOCAL";const zN=mb;new lh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t,e){return e?Ki(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends U_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BN(t){return ib(t.auth,new q_(t),t.bypassAuthState)}function qN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),wN(n,new q_(t),t.bypassAuthState)}async function HN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),yN(n,new q_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BN;case"linkViaPopup":case"linkViaRedirect":return HN;case"reauthViaPopup":case"reauthViaRedirect":return qN;default:Fr(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new lh(2e3,1e4);async function _b(t,e,n){if(ei(t.app))return Promise.reject(ri(t,"operation-not-supported-in-this-environment"));const r=Co(t);AO(t,e,z_);const i=gb(r,n);return new oa(r,"signInViaPopup",e,i).executeNotNull()}class oa extends vb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oa.currentPopupAction&&oa.currentPopupAction.cancel(),oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){rs(this.filter.length===1,"Popup operations only handle one event");const e=B_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WN.get())};e()}}oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="pendingRedirect",jd=new Map;class GN extends vb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jd.get(this.auth._key());if(!e){try{const r=await QN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jd.set(this.auth._key(),e)}return this.bypassAuthState||jd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QN(t,e){const n=JN(e),r=XN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function YN(t,e){jd.set(t._key(),e)}function XN(t){return Ki(t._redirectPersistence)}function JN(t){return Vd(KN,t.config.apiKey,t.name)}async function ZN(t,e,n=!1){if(ei(t.app))return Promise.reject(Yi(t));const r=Co(t),i=gb(r,e),o=await new GN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL=10*60*1e3;class tL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yb(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eL&&this.cachedEventUids.clear(),this.cachedEventUids.has(fE(e))}saveEventToCache(e){this.cachedEventUids.add(fE(e)),this.lastProcessedEventTime=Date.now()}}function fE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e={}){return cs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sL=/^https?/;async function oL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await rL(t);for(const n of e)try{if(aL(n))return}catch{}Fr(t,"unauthorized-domain")}function aL(t){const e=Yg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sL.test(n))return!1;if(iL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=new lh(3e4,6e4);function pE(){const t=Ci().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uL(t){return new Promise((e,n)=>{var r,i,s;function o(){pE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pE(),n(ri(t,"network-request-failed"))},timeout:lL.get()})}if(!((i=(r=Ci().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Ci().gapi)===null||s===void 0)&&s.load)o();else{const a=nN("iframefcb");return Ci()[a]=()=>{gapi.load?o():n(ri(t,"network-request-failed"))},ZS(`${tN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fd=null,e})}let Fd=null;function cL(t){return Fd=Fd||uL(t),Fd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new lh(5e3,15e3),dL="__/auth/iframe",fL="emulator/auth/iframe",pL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gL(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?V_(e,fL):`https://${t.config.authDomain}/${dL}`,r={apiKey:e.apiKey,appName:t.name,v:su},i=mL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ah(r).slice(1)}`}async function vL(t){const e=await cL(t),n=Ci().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:gL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ri(t,"network-request-failed"),a=Ci().setTimeout(()=>{s(o)},hL.get());function l(){Ci().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yL=500,wL=600,EL="_blank",TL="http://localhost";class mE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IL(t,e,n,r=yL,i=wL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},_L),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Jt().toLowerCase();n&&(a=WS(c)?EL:n),qS(c)&&(e=e||TL,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[w,E])=>`${g}${w}=${E},`,"");if(WO(c)&&a!=="_self")return SL(e||"",a),new mE(null);const p=window.open(e||"",a,d);ge(p,t,"popup-blocked");try{p.focus()}catch{}return new mE(p)}function SL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="__/auth/handler",CL="emulator/auth/handler",xL=encodeURIComponent("fac");async function gE(t,e,n,r,i,s){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:su,eventId:i};if(e instanceof z_){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",p2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof ch){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${xL}=${encodeURIComponent(l)}`:"";return`${AL(t)}?${ah(a).slice(1)}${c}`}function AL({config:t}){return t.emulator?V_(t,CL):`https://${t.authDomain}/${bL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class PL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=ZN,this._overrideRedirectResult=YN}async _openPopup(e,n,r,i){var s;rs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await gE(e,n,r,Yg(),i);return IL(e,o,B_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await gE(e,n,r,Yg(),i);return ON(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(rs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vL(e),r=new tL(e);return n.register("authEvent",i=>(ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Nm];o!==void 0&&n(!!o),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return XS()||HS()||F_()}}const kL=PL;var vE="@firebase/auth",_E="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OL(t){$l(new va("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JS(t)},c=new JO(r,i,s,l);return lN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),$l(new va("auth-internal",e=>{const n=Co(e.getProvider("auth").getImmediate());return(r=>new RL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),uo(vE,_E,DL(t)),uo(vE,_E,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=5*60,LL=AS("authIdTokenMaxAge")||NL;let yE=null;const ML=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LL)return;const i=n==null?void 0:n.token;yE!==i&&(yE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VL(t=gO()){const e=O_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=aN(t,{popupRedirectResolver:kL,persistence:[zN,kN,hb]}),r=AS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=ML(s.toString());CN(n,o,()=>o(n.currentUser)),bN(n,a=>o(a))}}const i=t2("auth");return i&&tb(n,`http://${i}`),n}function jL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZO({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ri("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",jL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OL("Browser");var FL="firebase",UL="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */uo(FL,UL,"app");var wE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ua,wb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,C){function k(){}k.prototype=C.prototype,P.D=C.prototype,P.prototype=new k,P.prototype.constructor=P,P.C=function(O,L,j){for(var D=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)D[vt-2]=arguments[vt];return C.prototype[L].apply(O,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,k){k||(k=0);var O=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)O[L]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(L=0;16>L;++L)O[L]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=P.g[0],k=P.g[1],L=P.g[2];var j=P.g[3],D=C+(j^k&(L^j))+O[0]+3614090360&4294967295;C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[1]+3905402710&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[2]+606105819&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[3]+3250441966&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(j^k&(L^j))+O[4]+4118548399&4294967295,C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[5]+1200080426&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[6]+2821735955&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[7]+4249261313&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(j^k&(L^j))+O[8]+1770035416&4294967295,C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[9]+2336552879&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[10]+4294925233&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[11]+2304563134&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(j^k&(L^j))+O[12]+1804603682&4294967295,C=k+(D<<7&4294967295|D>>>25),D=j+(L^C&(k^L))+O[13]+4254626195&4294967295,j=C+(D<<12&4294967295|D>>>20),D=L+(k^j&(C^k))+O[14]+2792965006&4294967295,L=j+(D<<17&4294967295|D>>>15),D=k+(C^L&(j^C))+O[15]+1236535329&4294967295,k=L+(D<<22&4294967295|D>>>10),D=C+(L^j&(k^L))+O[1]+4129170786&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[6]+3225465664&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[11]+643717713&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[0]+3921069994&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(L^j&(k^L))+O[5]+3593408605&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[10]+38016083&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[15]+3634488961&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[4]+3889429448&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(L^j&(k^L))+O[9]+568446438&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[14]+3275163606&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[3]+4107603335&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[8]+1163531501&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(L^j&(k^L))+O[13]+2850285829&4294967295,C=k+(D<<5&4294967295|D>>>27),D=j+(k^L&(C^k))+O[2]+4243563512&4294967295,j=C+(D<<9&4294967295|D>>>23),D=L+(C^k&(j^C))+O[7]+1735328473&4294967295,L=j+(D<<14&4294967295|D>>>18),D=k+(j^C&(L^j))+O[12]+2368359562&4294967295,k=L+(D<<20&4294967295|D>>>12),D=C+(k^L^j)+O[5]+4294588738&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[8]+2272392833&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[11]+1839030562&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[14]+4259657740&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(k^L^j)+O[1]+2763975236&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[4]+1272893353&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[7]+4139469664&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[10]+3200236656&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(k^L^j)+O[13]+681279174&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[0]+3936430074&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[3]+3572445317&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[6]+76029189&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(k^L^j)+O[9]+3654602809&4294967295,C=k+(D<<4&4294967295|D>>>28),D=j+(C^k^L)+O[12]+3873151461&4294967295,j=C+(D<<11&4294967295|D>>>21),D=L+(j^C^k)+O[15]+530742520&4294967295,L=j+(D<<16&4294967295|D>>>16),D=k+(L^j^C)+O[2]+3299628645&4294967295,k=L+(D<<23&4294967295|D>>>9),D=C+(L^(k|~j))+O[0]+4096336452&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[7]+1126891415&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[14]+2878612391&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[5]+4237533241&4294967295,k=L+(D<<21&4294967295|D>>>11),D=C+(L^(k|~j))+O[12]+1700485571&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[3]+2399980690&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[10]+4293915773&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[1]+2240044497&4294967295,k=L+(D<<21&4294967295|D>>>11),D=C+(L^(k|~j))+O[8]+1873313359&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[15]+4264355552&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[6]+2734768916&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[13]+1309151649&4294967295,k=L+(D<<21&4294967295|D>>>11),D=C+(L^(k|~j))+O[4]+4149444226&4294967295,C=k+(D<<6&4294967295|D>>>26),D=j+(k^(C|~L))+O[11]+3174756917&4294967295,j=C+(D<<10&4294967295|D>>>22),D=L+(C^(j|~k))+O[2]+718787259&4294967295,L=j+(D<<15&4294967295|D>>>17),D=k+(j^(L|~C))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+j&4294967295}r.prototype.u=function(P,C){C===void 0&&(C=P.length);for(var k=C-this.blockSize,O=this.B,L=this.h,j=0;j<C;){if(L==0)for(;j<=k;)i(this,P,j),j+=this.blockSize;if(typeof P=="string"){for(;j<C;)if(O[L++]=P.charCodeAt(j++),L==this.blockSize){i(this,O),L=0;break}}else for(;j<C;)if(O[L++]=P[j++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=C},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;var k=8*this.o;for(C=P.length-8;C<P.length;++C)P[C]=k&255,k/=256;for(this.u(P),P=Array(16),C=k=0;4>C;++C)for(var O=0;32>O;O+=8)P[k++]=this.g[C]>>>O&255;return P};function s(P,C){var k=a;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=C(P)}function o(P,C){this.h=C;for(var k=[],O=!0,L=P.length-1;0<=L;L--){var j=P[L]|0;O&&j==C||(k[L]=j,O=!1)}this.g=k}var a={};function l(P){return-128<=P&&128>P?s(P,function(C){return new o([C|0],0>C?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return p;if(0>P)return R(c(-P));for(var C=[],k=1,O=0;P>=k;O++)C[O]=P/k|0,k*=4294967296;return new o(C,0)}function d(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return R(d(P.substring(1),C));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(C,8)),O=p,L=0;L<P.length;L+=8){var j=Math.min(8,P.length-L),D=parseInt(P.substring(L,L+j),C);8>j?(j=c(Math.pow(C,j)),O=O.j(j).add(c(D))):(O=O.j(k),O=O.add(c(D)))}return O}var p=l(0),g=l(1),w=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-R(this).m();for(var P=0,C=1,k=0;k<this.g.length;k++){var O=this.i(k);P+=(0<=O?O:4294967296+O)*C,C*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(A(this))return"-"+R(this).toString(P);for(var C=c(Math.pow(P,6)),k=this,O="";;){var L=M(k,C).g;k=x(k,L.j(C));var j=((0<k.g.length?k.g[0]:k.h)>>>0).toString(P);if(k=L,E(k))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(var C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function A(P){return P.h==-1}t.l=function(P){return P=x(this,P),A(P)?-1:E(P)?0:1};function R(P){for(var C=P.g.length,k=[],O=0;O<C;O++)k[O]=~P.g[O];return new o(k,~P.h).add(g)}t.abs=function(){return A(this)?R(this):this},t.add=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0,L=0;L<=C;L++){var j=O+(this.i(L)&65535)+(P.i(L)&65535),D=(j>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);O=D>>>16,j&=65535,D&=65535,k[L]=D<<16|j}return new o(k,k[k.length-1]&-2147483648?-1:0)};function x(P,C){return P.add(R(C))}t.j=function(P){if(E(this)||E(P))return p;if(A(this))return A(P)?R(this).j(R(P)):R(R(this).j(P));if(A(P))return R(this.j(R(P)));if(0>this.l(w)&&0>P.l(w))return c(this.m()*P.m());for(var C=this.g.length+P.g.length,k=[],O=0;O<2*C;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<P.g.length;L++){var j=this.i(O)>>>16,D=this.i(O)&65535,vt=P.i(L)>>>16,St=P.i(L)&65535;k[2*O+2*L]+=D*St,T(k,2*O+2*L),k[2*O+2*L+1]+=j*St,T(k,2*O+2*L+1),k[2*O+2*L+1]+=D*vt,T(k,2*O+2*L+1),k[2*O+2*L+2]+=j*vt,T(k,2*O+2*L+2)}for(O=0;O<C;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=C;O<2*C;O++)k[O]=0;return new o(k,0)};function T(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function I(P,C){this.g=P,this.h=C}function M(P,C){if(E(C))throw Error("division by zero");if(E(P))return new I(p,p);if(A(P))return C=M(R(P),C),new I(R(C.g),R(C.h));if(A(C))return C=M(P,R(C)),new I(R(C.g),C.h);if(30<P.g.length){if(A(P)||A(C))throw Error("slowDivide_ only works with positive integers.");for(var k=g,O=C;0>=O.l(P);)k=B(k),O=B(O);var L=W(k,1),j=W(O,1);for(O=W(O,2),k=W(k,2);!E(O);){var D=j.add(O);0>=D.l(P)&&(L=L.add(k),j=D),O=W(O,1),k=W(k,1)}return C=x(P,L.j(C)),new I(L,C)}for(L=p;0<=P.l(C);){for(k=Math.max(1,Math.floor(P.m()/C.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=c(k),D=j.j(C);A(D)||0<D.l(P);)k-=O,j=c(k),D=j.j(C);E(j)&&(j=g),L=L.add(j),P=x(P,D)}return new I(L,P)}t.A=function(P){return M(this,P).h},t.and=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0;O<C;O++)k[O]=this.i(O)&P.i(O);return new o(k,this.h&P.h)},t.or=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0;O<C;O++)k[O]=this.i(O)|P.i(O);return new o(k,this.h|P.h)},t.xor=function(P){for(var C=Math.max(this.g.length,P.g.length),k=[],O=0;O<C;O++)k[O]=this.i(O)^P.i(O);return new o(k,this.h^P.h)};function B(P){for(var C=P.g.length+1,k=[],O=0;O<C;O++)k[O]=P.i(O)<<1|P.i(O-1)>>>31;return new o(k,P.h)}function W(P,C){var k=C>>5;C%=32;for(var O=P.g.length-k,L=[],j=0;j<O;j++)L[j]=0<C?P.i(j+k)>>>C|P.i(j+k+1)<<32-C:P.i(j+k);return new o(L,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ua=o}).apply(typeof wE<"u"?wE:typeof self<"u"?self:typeof window<"u"?window:{});var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eb,Zu,Tb,Ud,ev,Ib,Sb,bb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,_){return u==Array.prototype||u==Object.prototype||(u[f]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fd=="object"&&fd];for(var f=0;f<u.length;++f){var _=u[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var _=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var U=u[b];if(!(U in _))break e;_=_[U]}u=u[u.length-1],b=_[u],f=f(b),f!=b&&f!=null&&e(_,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var _=0,b=!1,U={next:function(){if(!b&&_<u.length){var q=_++;return{value:f(q,u[q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,_){return u.call.apply(u.bind,arguments)}function p(u,f,_){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,b),u.apply(f,U)}}return function(){return u.apply(f,arguments)}}function g(u,f,_){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function w(u,f){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function E(u,f){function _(){}_.prototype=f.prototype,u.aa=f.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(b,U,q){for(var J=Array(arguments.length-2),et=2;et<arguments.length;et++)J[et-2]=arguments[et];return f.prototype[U].apply(b,J)}}function A(u){const f=u.length;if(0<f){const _=Array(f);for(let b=0;b<f;b++)_[b]=u[b];return _}return[]}function R(u,f){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(l(b)){const U=u.length||0,q=b.length||0;u.length=U+q;for(let J=0;J<q;J++)u[U+J]=b[J]}else u.push(b)}}class x{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(u){return/^[\s\xa0]*$/.test(u)}function I(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function M(u){return M[" "](u),u}M[" "]=function(){};var B=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function W(u,f,_){for(const b in u)f.call(_,u[b],b,u)}function P(u,f){for(const _ in u)f.call(void 0,u[_],_,u)}function C(u){const f={};for(const _ in u)f[_]=u[_];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,f){let _,b;for(let U=1;U<arguments.length;U++){b=arguments[U];for(_ in b)u[_]=b[_];for(let q=0;q<k.length;q++)_=k[q],Object.prototype.hasOwnProperty.call(b,_)&&(u[_]=b[_])}}function L(u){var f=1;u=u.split(":");const _=[];for(;0<f&&u.length;)_.push(u.shift()),f--;return u.length&&_.push(u.join(":")),_}function j(u){a.setTimeout(()=>{throw u},0)}function D(){var u=ce;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class vt{constructor(){this.h=this.g=null}add(f,_){const b=St.get();b.set(f,_),this.h?this.h.next=b:this.g=b,this.h=b}}var St=new x(()=>new Ut,u=>u.reset());class Ut{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,X=!1,ce=new vt,z=()=>{const u=a.Promise.resolve(void 0);Xe=()=>{u.then(Ve)}};var Ve=()=>{for(var u;u=D();){try{u.h.call(u.g)}catch(_){j(_)}var f=St;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}X=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var ot=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};a.addEventListener("test",_,f),a.removeEventListener("test",_,f)}catch{}return u}();function kt(u,f){if(ze.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(B){e:{try{M(f.nodeName);var U=!0;break e}catch{}U=!1}U||(f=null)}}else _=="mouseover"?f=u.fromElement:_=="mouseout"&&(f=u.toElement);this.relatedTarget=f,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ge[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&kt.aa.h.call(this)}}E(kt,ze);var Ge={2:"touch",3:"pen",4:"mouse"};kt.prototype.h=function(){kt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),re=0;function mn(u,f,_,b,U){this.listener=u,this.proxy=null,this.src=f,this.type=_,this.capture=!!b,this.ha=U,this.key=++re,this.da=this.fa=!1}function gn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wt(u){this.src=u,this.g={},this.h=0}wt.prototype.add=function(u,f,_,b,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var J=ln(u,f,b,U);return-1<J?(f=u[J],_||(f.fa=!1)):(f=new mn(f,this.src,q,!!b,U),f.fa=_,u.push(f)),f};function Lt(u,f){var _=f.type;if(_ in u.g){var b=u.g[_],U=Array.prototype.indexOf.call(b,f,void 0),q;(q=0<=U)&&Array.prototype.splice.call(b,U,1),q&&(gn(f),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ln(u,f,_,b){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==f&&q.capture==!!_&&q.ha==b)return U}return-1}var Ur="closure_lm_"+(1e6*Math.random()|0),vn={};function Ht(u,f,_,b,U){if(Array.isArray(f)){for(var q=0;q<f.length;q++)Ht(u,f[q],_,b,U);return null}return _=Ue(_),u&&u[fe]?u.K(f,_,c(b)?!!b.capture:!!b,U):ps(u,f,_,!1,b,U)}function ps(u,f,_,b,U,q){if(!f)throw Error("Invalid event type");var J=c(U)?!!U.capture:!!U,et=Oe(u);if(et||(u[Ur]=et=new wt(u)),_=et.add(f,_,b,J,q),_.proxy)return _;if(b=si(),_.proxy=b,b.src=u,b.listener=_,u.addEventListener)ot||(U=J),U===void 0&&(U=!1),u.addEventListener(f.toString(),b,U);else if(u.attachEvent)u.attachEvent(de(f.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function si(){function u(_){return f.call(u.src,u.listener,_)}const f=_e;return u}function le(u,f,_,b,U){if(Array.isArray(f))for(var q=0;q<f.length;q++)le(u,f[q],_,b,U);else b=c(b)?!!b.capture:!!b,_=Ue(_),u&&u[fe]?(u=u.i,f=String(f).toString(),f in u.g&&(q=u.g[f],_=ln(q,_,b,U),-1<_&&(gn(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[f],u.h--)))):u&&(u=Oe(u))&&(f=u.g[f.toString()],u=-1,f&&(u=ln(f,_,b,U)),(_=-1<u?f[u]:null)&&me(_))}function me(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[fe])Lt(f.i,u);else{var _=u.type,b=u.proxy;f.removeEventListener?f.removeEventListener(_,b,u.capture):f.detachEvent?f.detachEvent(de(_),b):f.addListener&&f.removeListener&&f.removeListener(b),(_=Oe(f))?(Lt(_,u),_.h==0&&(_.src=null,f[Ur]=null)):gn(u)}}}function de(u){return u in vn?vn[u]:vn[u]="on"+u}function _e(u,f){if(u.da)u=!0;else{f=new kt(f,this);var _=u.listener,b=u.ha||u.src;u.fa&&me(u),u=_.call(b,f)}return u}function Oe(u){return u=u[Ur],u instanceof wt?u:null}var Je="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(u){return typeof u=="function"?u:(u[Je]||(u[Je]=function(f){return u.handleEvent(f)}),u[Je])}function We(){Re.call(this),this.i=new wt(this),this.M=this,this.F=null}E(We,Re),We.prototype[fe]=!0,We.prototype.removeEventListener=function(u,f,_,b){le(this,u,f,_,b)};function at(u,f){var _,b=u.F;if(b)for(_=[];b;b=b.F)_.push(b);if(u=u.M,b=f.type||f,typeof f=="string")f=new ze(f,u);else if(f instanceof ze)f.target=f.target||u;else{var U=f;f=new ze(b,u),O(f,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var J=f.g=_[q];U=er(J,b,!0,f)&&U}if(J=f.g=u,U=er(J,b,!0,f)&&U,U=er(J,b,!1,f)&&U,_)for(q=0;q<_.length;q++)J=f.g=_[q],U=er(J,b,!1,f)&&U}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var _=u.g[f],b=0;b<_.length;b++)gn(_[b]);delete u.g[f],u.h--}}this.F=null},We.prototype.K=function(u,f,_,b){return this.i.add(String(u),f,!1,_,b)},We.prototype.L=function(u,f,_,b){return this.i.add(String(u),f,!0,_,b)};function er(u,f,_,b){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var U=!0,q=0;q<f.length;++q){var J=f[q];if(J&&!J.da&&J.capture==_){var et=J.listener,Kt=J.ha||J.src;J.fa&&Lt(u.i,J),U=et.call(Kt,b)!==!1&&U}}return U&&!b.defaultPrevented}function $r(u,f,_){if(typeof u=="function")_&&(u=g(u,_));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Ai(u){u.g=$r(()=>{u.g=null,u.i&&(u.i=!1,Ai(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class ms extends Re{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(u){Re.call(this),this.h=u,this.g={}}E(tr,Re);var Na=[];function Pi(u){W(u.g,function(f,_){this.g.hasOwnProperty(_)&&me(f)},u),u.g={}}tr.prototype.N=function(){tr.aa.N.call(this),Pi(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oi=a.JSON.stringify,cu=a.JSON.parse,hu=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ko(){}ko.prototype.h=null;function Ro(u){return u.h||(u.h=u.i())}function zr(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gs(){ze.call(this,"d")}E(gs,ze);function Do(){ze.call(this,"c")}E(Do,ze);var Br={},vs=null;function _s(){return vs=vs||new We}Br.La="serverreachability";function Bn(u){ze.call(this,Br.La,u)}E(Bn,ze);function Pn(u){const f=_s();at(f,new Bn(f))}Br.STAT_EVENT="statevent";function La(u,f){ze.call(this,Br.STAT_EVENT,u),this.stat=f}E(La,ze);function Wt(u){const f=_s();at(f,new La(f,u))}Br.Ma="timingevent";function Ma(u,f){ze.call(this,Br.Ma,u),this.size=f}E(Ma,ze);function ki(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Be(){this.g=!0}Be.prototype.xa=function(){this.g=!1};function lt(u,f,_,b,U,q){u.info(function(){if(u.g)if(q)for(var J="",et=q.split("&"),Kt=0;Kt<et.length;Kt++){var je=et[Kt].split("=");if(1<je.length){var ut=je[0];je=je[1];var Gt=ut.split("_");J=2<=Gt.length&&Gt[1]=="type"?J+(ut+"="+je+"&"):J+(ut+"=redacted&")}}else J=null;else J=q;return"XMLHTTP REQ ("+b+") [attempt "+U+"]: "+f+`
`+_+`
`+J})}function Mt(u,f,_,b,U,q,J){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+U+"]: "+f+`
`+_+`
`+q+" "+J})}function Ze(u,f,_,b){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+un(u,_)+(b?" "+b:"")})}function mr(u,f){u.info(function(){return"TIMEOUT: "+f})}Be.prototype.info=function(){};function un(u,f){if(!u.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var b=_[u];if(!(2>b.length)){var U=b[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var J=1;J<U.length;J++)U[J]=""}}}}return oi(_)}catch{return f}}var ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Th={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function $t(){}E($t,ko),$t.prototype.g=function(){return new XMLHttpRequest},$t.prototype.i=function(){return{}},li=new $t;function Rt(u,f,_,b){this.j=u,this.i=f,this.l=_,this.R=b||1,this.U=new tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _n}function _n(){this.i=null,this.g="",this.h=!1}var en={},ws={};function ui(u,f,_){u.L=1,u.v=Ts(nr(f)),u.m=_,u.P=!0,ci(u,null)}function ci(u,f){u.F=Date.now(),Es(u),u.A=nr(u.v);var _=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),yu(_.i,"t",b),u.C=0,_=u.j.J,u.h=new _n,u.g=Vh(u.j,_?f:null,!u.m),0<u.O&&(u.M=new ms(g(u.Y,u,u.g),u.O)),f=u.U,_=u.g,b=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Na[0]=U.toString()),U=Na);for(var q=0;q<U.length;q++){var J=Ht(_,U[q],b||f.handleEvent,!1,f.h||f);if(!J)break;f.g[J.key]=J}f=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Pn(),lt(u.i,u.u,u.A,u.l,u.R,u.m)}Rt.prototype.ca=function(u){u=u.target;const f=this.M;f&&yr(u)==3?f.j():this.Y(u)},Rt.prototype.Y=function(u){try{if(u==this.g)e:{const Gt=yr(this.g);var f=this.g.Ba();const Mi=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||Iu(this.g)))){this.J||Gt!=4||f==7||(f==8||0>=Mi?Pn(3):Pn(2)),Va(this);var _=this.g.Z();this.X=_;t:if(Ri(this)){var b=Iu(this.g);u="";var U=b.length,q=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),Oi(this);var J="";break t}this.h.i=new a.TextDecoder}for(f=0;f<U;f++)this.h.h=!0,u+=this.h.i.decode(b[f],{stream:!(q&&f==U-1)});b.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,Mt(this.i,this.u,this.A,this.l,this.R,Gt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Kt=this.g;if((et=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(et)){var je=et;break t}}je=null}if(_=je)Ze(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ja(this,_);else{this.o=!1,this.s=3,Wt(12),qr(this),Oi(this);break e}}if(this.P){_=!0;let Kn;for(;!this.J&&this.C<J.length;)if(Kn=Ih(this,J),Kn==ws){Gt==4&&(this.s=4,Wt(14),_=!1),Ze(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==en){this.s=4,Wt(15),Ze(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else Ze(this.i,this.l,Kn,null),ja(this,Kn);if(Ri(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||J.length!=0||this.h.h||(this.s=1,Wt(16),_=!1),this.o=this.o&&_,!_)Ze(this.i,this.l,J,"[Invalid Chunked Response]"),qr(this),Oi(this);else if(0<J.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Ga(ut),ut.M=!0,Wt(11))}}else Ze(this.i,this.l,J,null),ja(this,J);Gt==4&&qr(this),this.o&&!this.J&&(Gt==4?Qa(this.j,this):(this.o=!1,Es(this)))}else Ph(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),qr(this),Oi(this)}}}catch{}finally{}};function Ri(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ih(u,f){var _=u.C,b=f.indexOf(`
`,_);return b==-1?ws:(_=Number(f.substring(_,b)),isNaN(_)?en:(b+=1,b+_>f.length?ws:(f=f.slice(b,b+_),u.C=b+_,f)))}Rt.prototype.cancel=function(){this.J=!0,qr(this)};function Es(u){u.S=Date.now()+u.I,Di(u,u.I)}function Di(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ki(g(u.ba,u),f)}function Va(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Rt.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(mr(this.i,this.A),this.L!=2&&(Pn(),Wt(17)),qr(this),this.s=2,Oi(this)):Di(this,this.S-u)};function Oi(u){u.j.G==0||u.J||Qa(u.j,u)}function qr(u){Va(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Pi(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function ja(u,f){try{var _=u.j;if(_.G!=0&&(_.g==u||Fa(_.h,u))){if(!u.K&&Fa(_.h,u)&&_.G==3){try{var b=_.Da.g.parse(f)}catch{b=null}if(Array.isArray(b)&&b.length==3){var U=b;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)wr(_),Fo(_);else break e;Uo(_),Wt(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=ki(g(_.Za,_),6e3));if(1>=pu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else pi(_,11)}else if((u.K||_.g==u)&&wr(_),!T(f))for(U=_.Da.g.parse(f),f=0;f<U.length;f++){let je=U[f];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const ut=je[3];ut!=null&&(_.la=ut,_.j.info("VER="+_.la));const Gt=je[4];Gt!=null&&(_.Aa=Gt,_.j.info("SVER="+_.Aa));const Mi=je[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(b=1.5*Mi,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Kn=u.g;if(Kn){const Ya=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ya){var q=b.h;q.g||Ya.indexOf("spdy")==-1&&Ya.indexOf("quic")==-1&&Ya.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ua(q,q.h),q.h=null))}if(b.D){const xu=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;xu&&(b.ya=xu,qe(b.I,b.D,xu))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var J=u;if(b.qa=Mh(b,b.J?b.ia:null,b.W),J.K){mu(b.h,J);var et=J,Kt=b.L;Kt&&(et.I=Kt),et.B&&(Va(et),Es(et)),b.g=J}else Oh(b);0<_.i.length&&Ka(_)}else je[0]!="stop"&&je[0]!="close"||pi(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?pi(_,7):jo(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}Pn(4)}catch{}}var Sh=class{constructor(u,f){this.g=u,this.map=f}};function du(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fu(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pu(u){return u.h?1:u.g?u.g.size:0}function Fa(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Ua(u,f){u.g?u.g.add(f):u.h=f}function mu(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}du.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function gu(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const _ of u.g.values())f=f.concat(_.D);return f}return A(u.i)}function bh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],_=u.length,b=0;b<_;b++)f.push(u[b]);return f}f=[],_=0;for(b in u)f[_++]=u[b];return f}function gr(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var _=0;_<u;_++)f.push(_);return f}f=[],_=0;for(const b in u)f[_++]=b;return f}}}function yn(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var _=gr(u),b=bh(u),U=b.length,q=0;q<U;q++)f.call(void 0,b[q],_&&_[q],u)}var hi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qn(u,f){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var b=u[_].indexOf("="),U=null;if(0<=b){var q=u[_].substring(0,b);U=u[_].substring(b+1)}else q=u[_];f(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Hr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Hr){this.h=u.h,kn(this,u.j),this.o=u.o,this.g=u.g,vr(this,u.s),this.l=u.l;var f=u.i,_=new Ss;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),Oo(this,_),this.m=u.m}else u&&(f=String(u).match(hi))?(this.h=!1,kn(this,f[1]||"",!0),this.o=Is(f[2]||""),this.g=Is(f[3]||"",!0),vr(this,f[4]),this.l=Is(f[5]||"",!0),Oo(this,f[6]||"",!0),this.m=Is(f[7]||"")):(this.h=!1,this.i=new Ss(null,this.h))}Hr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(_r(f,_u,!0),":");var _=this.g;return(_||f=="file")&&(u.push("//"),(f=this.o)&&u.push(_r(f,_u,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(_r(_,_.charAt(0)=="/"?Up:Wr,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",_r(_,$a)),u.join("")};function nr(u){return new Hr(u)}function kn(u,f,_){u.j=_?Is(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function vr(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Oo(u,f,_){f instanceof Ss?(u.i=f,Ch(u.i,u.h)):(_||(f=_r(f,di)),u.i=new Ss(f,u.h))}function qe(u,f,_){u.i.set(f,_)}function Ts(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Is(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _r(u,f,_){return typeof u=="string"?(u=encodeURI(u).replace(f,vu),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _u=/[#\/\?@]/g,Wr=/[#\?:]/g,Up=/[#\?]/g,di=/[#\?@]/g,$a=/#/g;function Ss(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Hn(u){u.g||(u.g=new Map,u.h=0,u.i&&qn(u.i,function(f,_){u.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}t=Ss.prototype,t.add=function(u,f){Hn(this),this.i=null,u=Ni(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(f),this.h+=1,this};function za(u,f){Hn(u),f=Ni(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function bs(u,f){return Hn(u),f=Ni(u,f),u.g.has(f)}t.forEach=function(u,f){Hn(this),this.g.forEach(function(_,b){_.forEach(function(U){u.call(f,U,b,this)},this)},this)},t.na=function(){Hn(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let b=0;b<f.length;b++){const U=u[b];for(let q=0;q<U.length;q++)_.push(f[b])}return _},t.V=function(u){Hn(this);let f=[];if(typeof u=="string")bs(this,u)&&(f=f.concat(this.g.get(Ni(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)f=f.concat(u[_])}return f},t.set=function(u,f){return Hn(this),this.i=null,u=Ni(this,u),bs(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function yu(u,f,_){za(u,f),0<_.length&&(u.i=null,u.g.set(Ni(u,f),A(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var b=f[_];const q=encodeURIComponent(String(b)),J=this.V(b);for(b=0;b<J.length;b++){var U=q;J[b]!==""&&(U+="="+encodeURIComponent(String(J[b]))),u.push(U)}}return this.i=u.join("&")};function Ni(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Ch(u,f){f&&!u.j&&(Hn(u),u.i=null,u.g.forEach(function(_,b){var U=b.toLowerCase();b!=U&&(za(this,b),yu(this,U,_))},u)),u.j=f}function Cs(u,f){const _=new Be;if(a.Image){const b=new Image;b.onload=w(Kr,_,"TestLoadImage: loaded",!0,f,b),b.onerror=w(Kr,_,"TestLoadImage: error",!1,f,b),b.onabort=w(Kr,_,"TestLoadImage: abort",!1,f,b),b.ontimeout=w(Kr,_,"TestLoadImage: timeout",!1,f,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else f(!1)}function $p(u,f){const _=new Be,b=new AbortController,U=setTimeout(()=>{b.abort(),Kr(_,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:b.signal}).then(q=>{clearTimeout(U),q.ok?Kr(_,"TestPingServer: ok",!0,f):Kr(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(U),Kr(_,"TestPingServer: error",!1,f)})}function Kr(u,f,_,b,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),b(_)}catch{}}function wu(){this.g=new hu}function Ba(u,f,_){const b=_||"";try{yn(u,function(U,q){let J=U;c(U)&&(J=oi(U)),f.push(b+q+"="+encodeURIComponent(J))})}catch(U){throw f.push(b+"type="+encodeURIComponent("_badmap")),U}}function xs(u){this.l=u.Ub||null,this.j=u.eb||!1}E(xs,ko),xs.prototype.g=function(){return new qa(this.l,this.j)},xs.prototype.i=function(u){return function(){return u}}({});function qa(u,f){We.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(qa,We),t=qa.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,As(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,As(this)),this.g&&(this.readyState=3,As(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;No(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function No(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Lo(this):As(this),this.readyState==3&&No(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Lo(this))},t.Qa=function(u){this.g&&(this.response=u,Lo(this))},t.ga=function(){this.g&&Lo(this)};function Lo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,As(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=f.next();return u.join(`\r
`)};function As(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ha(u){let f="";return W(u,function(_,b){f+=b,f+=":",f+=_,f+=`\r
`}),f}function Mo(u,f,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=Ha(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):qe(u,f,_))}function pt(u){We.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(pt,We);var xh=/^https?$/i,Vo=["POST","PUT"];t=pt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?Ro(this.o):Ro(li),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(q){Wa(this,q);return}if(u=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var U in b)_.set(U,b[U]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())_.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Vo,f,void 0))||b||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,J]of _)this.g.setRequestHeader(q,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ah(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){Wa(this,q)}};function Wa(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Eu(u),Gr(u)}function Eu(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,at(this,"complete"),at(this,"abort"),Gr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tu(this):this.bb())},t.bb=function(){Tu(this)};function Tu(u){if(u.h&&typeof o<"u"&&(!u.v[1]||yr(u)!=4||u.Z()!=2)){if(u.u&&yr(u)==4)$r(u.Ea,0,u);else if(at(u,"readystatechange"),yr(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var _;if(!(_=f)){var b;if(b=J===0){var U=String(u.D).match(hi)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),b=!xh.test(U?U.toLowerCase():"")}_=b}if(_)at(u,"complete"),at(u,"success");else{u.m=6;try{var q=2<yr(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Eu(u)}}finally{Gr(u)}}}}function Gr(u,f){if(u.g){Ah(u);const _=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||at(u,"ready");try{_.onreadystatechange=b}catch{}}}function Ah(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function yr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),cu(f)}};function Iu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ph(u){const f={};u=(u.g&&2<=yr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(T(u[b]))continue;var _=L(u[b]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=f[U]||[];f[U]=q,q.push(_)}P(f,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(u,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||f}function Su(u){this.Aa=0,this.i=[],this.j=new Be,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,u),this.cb=Ps("retryDelaySeedMs",1e4,u),this.Wa=Ps("forwardChannelMaxRetries",2,u),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new du(u&&u.concurrentRequestLimit),this.Da=new wu,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Su.prototype,t.la=8,t.G=1,t.connect=function(u,f,_,b){Wt(0),this.W=u,this.H=f||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Mh(this,null,this.W),Ka(this)};function jo(u){if(kh(u),u.G==3){var f=u.U++,_=nr(u.I);if(qe(_,"SID",u.K),qe(_,"RID",f),qe(_,"TYPE","terminate"),fi(u,_),f=new Rt(u,u.j,f),f.L=2,f.v=Ts(nr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=f.v,_=!0),_||(f.g=Vh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Es(f)}Lh(u)}function Fo(u){u.g&&(Ga(u),u.g.cancel(),u.g=null)}function kh(u){Fo(u),u.u&&(a.clearTimeout(u.u),u.u=null),wr(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ka(u){if(!fu(u.h)&&!u.s){u.s=!0;var f=u.Ga;Xe||z(),X||(Xe(),X=!0),ce.add(f,u),u.B=0}}function Rh(u,f){return pu(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ki(g(u.Ga,u,f),Nh(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Rt(this,this.j,u);let q=this.o;if(this.S&&(q?(q=C(q),O(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var f=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(f+=b,4096<f){f=_;break e}if(f===4096||_===this.i.length-1){f=_+1;break e}}f=1e3}else f=1e3;f=Dh(this,U,f),_=nr(this.I),qe(_,"RID",u),qe(_,"CVER",22),this.D&&qe(_,"X-HTTP-Session-Id",this.D),fi(this,_),q&&(this.O?f="headers="+encodeURIComponent(String(Ha(q)))+"&"+f:this.m&&Mo(_,this.m,q)),Ua(this.h,U),this.Ua&&qe(_,"TYPE","init"),this.P?(qe(_,"$req",f),qe(_,"SID","null"),U.T=!0,ui(U,_,null)):ui(U,_,f),this.G=2}}else this.G==3&&(u?bu(this,u):this.i.length==0||fu(this.h)||bu(this))};function bu(u,f){var _;f?_=f.l:_=u.U++;const b=nr(u.I);qe(b,"SID",u.K),qe(b,"RID",_),qe(b,"AID",u.T),fi(u,b),u.m&&u.o&&Mo(b,u.m,u.o),_=new Rt(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Dh(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ua(u.h,_),ui(_,b,f)}function fi(u,f){u.H&&W(u.H,function(_,b){qe(f,b,_)}),u.l&&yn({},function(_,b){qe(f,b,_)})}function Dh(u,f,_){_=Math.min(u.i.length,_);var b=u.l?g(u.l.Na,u.l,u):null;e:{var U=u.i;let q=-1;for(;;){const J=["count="+_];q==-1?0<_?(q=U[0].g,J.push("ofs="+q)):q=0:J.push("ofs="+q);let et=!0;for(let Kt=0;Kt<_;Kt++){let je=U[Kt].g;const ut=U[Kt].map;if(je-=q,0>je)q=Math.max(0,U[Kt].g-100),et=!1;else try{Ba(ut,J,"req"+je+"_")}catch{b&&b(ut)}}if(et){b=J.join("&");break e}}}return u=u.i.splice(0,_),f.D=u,b}function Oh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Xe||z(),X||(Xe(),X=!0),ce.add(f,u),u.v=0}}function Uo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ki(g(u.Fa,u),Nh(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Cu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ki(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Fo(this),Cu(this))};function Ga(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Cu(u){u.g=new Rt(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=nr(u.qa);qe(f,"RID","rpc"),qe(f,"SID",u.K),qe(f,"AID",u.T),qe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(f,"TO",u.ja),qe(f,"TYPE","xmlhttp"),fi(u,f),u.m&&u.o&&Mo(f,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ts(nr(f)),_.m=null,_.P=!0,ci(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Fo(this),Uo(this),Wt(19))};function wr(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Qa(u,f){var _=null;if(u.g==f){wr(u),Ga(u),u.g=null;var b=2}else if(Fa(u.h,f))_=f.D,mu(u.h,f),b=1;else return;if(u.G!=0){if(f.o)if(b==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var U=u.B;b=_s(),at(b,new Ma(b,_)),Ka(u)}else Oh(u);else if(U=f.s,U==3||U==0&&0<f.X||!(b==1&&Rh(u,f)||b==2&&Uo(u)))switch(_&&0<_.length&&(f=u.h,f.i=f.i.concat(_)),U){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function Nh(u,f){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*f}function pi(u,f){if(u.j.info("Error code "+f),f==2){var _=g(u.fb,u),b=u.Xa;const U=!b;b=new Hr(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||kn(b,"https"),Ts(b),U?Cs(b.toString(),_):$p(b.toString(),_)}else Wt(2);u.G=0,u.l&&u.l.sa(f),Lh(u),kh(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Lh(u){if(u.G=0,u.ka=[],u.l){const f=gu(u.h);(f.length!=0||u.i.length!=0)&&(R(u.ka,f),R(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function Mh(u,f,_){var b=_ instanceof Hr?nr(_):new Hr(_);if(b.g!="")f&&(b.g=f+"."+b.g),vr(b,b.s);else{var U=a.location;b=U.protocol,f=f?f+"."+U.hostname:U.hostname,U=+U.port;var q=new Hr(null);b&&kn(q,b),f&&(q.g=f),U&&vr(q,U),_&&(q.l=_),b=q}return _=u.D,f=u.ya,_&&f&&qe(b,_,f),qe(b,"VER",u.la),fi(u,b),b}function Vh(u,f,_){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new pt(new xs({eb:_})):new pt(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jh(){}t=jh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $o(){}$o.prototype.g=function(u,f){return new wn(u,f)};function wn(u,f){We.call(this),this.g=new Su(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!T(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Wn(this)}E(wn,We),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){jo(this.g)},wn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=oi(u),u=_);f.i.push(new Sh(f.Ya++,u)),f.G==3&&Ka(f)},wn.prototype.N=function(){this.g.l=null,delete this.j,jo(this.g),delete this.g,wn.aa.N.call(this)};function Fh(u){gs.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const _ in f){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}E(Fh,gs);function Li(){Do.call(this),this.status=1}E(Li,Do);function Wn(u){this.g=u}E(Wn,jh),Wn.prototype.ua=function(){at(this.g,"a")},Wn.prototype.ta=function(u){at(this.g,new Fh(u))},Wn.prototype.sa=function(u){at(this.g,new Li)},Wn.prototype.ra=function(){at(this.g,"b")},$o.prototype.createWebChannel=$o.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,bb=function(){return new $o},Sb=function(){return _s()},Ib=Br,ev={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,Ud=ys,Th.COMPLETE="complete",Tb=Th,zr.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",We.prototype.listen=We.prototype.K,Zu=zr,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,Eb=pt}).apply(typeof fd<"u"?fd:typeof self<"u"?self:typeof window<"u"?window:{});const EE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new R_("@firebase/firestore");function sl(){return wa.logLevel}function Q(t,...e){if(wa.logLevel<=Ne.DEBUG){const n=e.map(H_);wa.debug(`Firestore (${au}): ${t}`,...n)}}function Ln(t,...e){if(wa.logLevel<=Ne.ERROR){const n=e.map(H_);wa.error(`Firestore (${au}): ${t}`,...n)}}function Ea(t,...e){if(wa.logLevel<=Ne.WARN){const n=e.map(H_);wa.warn(`Firestore (${au}): ${t}`,...n)}}function H_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: `+t;throw Ln(e),new Error(e)}function ue(t,e){t||ae()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $L{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}}class zL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BL{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ue(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new Cb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new hn(e)}}class qL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class HL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ue(this.o===void 0);const r=s=>{s.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new WL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function Bl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Ab(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new At(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{static fromTimestamp(e){return new he(e)}static min(){return new he(new At(0,0))}static max(){return new he(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends Hc{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const QL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Hc{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return QL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(rt.fromString(e))}static fromName(e){return new te(rt.fromString(e).popFirst(5))}static empty(){return new te(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function tv(t){return t.fields.find(e=>e.kind===2)}function Jo(t){return t.fields.filter(e=>e.kind!==2)}Nf.UNKNOWN_ID=-1;class $d{constructor(e,n){this.fieldPath=e,this.kind=n}}class Wc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Wc(0,dr.min())}}function YL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new At(n+1,0):new At(n,r));return new dr(i,te.empty(),e)}function Pb(t){return new dr(t.readTime,t.key,-1)}class dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dr(he.min(),te.empty(),-1)}static max(){return new dr(he.max(),te.empty(),-1)}}function W_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==kb)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{static open(e,n,r,i){try{return new gp(n,e.transaction(i,r))}catch(s){throw new gc(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new gc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=K_(r.target.error);this.V.reject(new gc(e,i))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new JL(n)}}class co{static delete(e){return Q("SimpleDb","Removing database:",e),Zo(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!kS())return!1;if(co.S())return!0;const e=Jt(),n=co.D(e),r=0<n&&n<10,i=Db(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.F=r,co.D(Jt())===12.2&&Ln("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new ne(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new ne(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new gc(e,o))},i.onupgradeneeded=s=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.F.O(o,i.transaction,s.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=gp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),$.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(Q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Db(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class XL{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zo(this.B.delete())}}class gc extends ne{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function xo(t){return t.name==="IndexedDbTransactionError"}class JL{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zo(r)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),Zo(this.store.add(e))}get(e){return Zo(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),Zo(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),Zo(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new $((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new $((r,i)=>{n.onerror=s=>{const o=K_(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new $((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new XL(a),c=n(a.primaryKey,a.value,l);if(c instanceof $){const d=c.catch(p=>(l.done(),$.reject(p)));r.push(d)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Zo(t){return new $((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=K_(r.target.error);n(i)}})}let TE=!1;function K_(t){const e=co.D(Jt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TE||(TE=!0,setTimeout(()=>{throw r},0)),r}}return t}class ZL{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){xo(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ra(n)}await this.X(6e4)})}}class eM{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return $.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return Q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=Pb(s);W_(o,r)>0&&(r=o)}),new dr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Or.oe=-1;function vp(t){return t==null}function Kc(t){return t===0&&1/t==-1/0}function tM(t){return typeof t=="number"&&Number.isInteger(t)&&!Kc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IE(e)),e=nM(t.get(n),e);return IE(e)}function nM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function IE(t){return t+""}function Ti(t){const e=t.length;if(ue(e>=2),e===2)return ue(t.charAt(0)===""&&t.charAt(1)===""),rt.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&ae(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:ae()}s=o+2}return new rt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t,e){return[t,xn(e)]}function Ob(t,e,n){return[t,xn(e),n]}const rM={},iM=["prefixPath","collectionGroup","readTime","documentId"],sM=["prefixPath","collectionGroup","documentId"],oM=["collectionGroup","readTime","prefixPath","documentId"],aM=["canonicalId","targetId"],lM=["targetId","path"],uM=["path","targetId"],cM=["collectionId","parent"],hM=["indexId","uid"],dM=["uid","sequenceNumber"],fM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pM=["indexId","uid","orderedDocumentKey"],mM=["userId","collectionPath","documentId"],gM=["userId","collectionPath","largestBatchId"],vM=["userId","collectionGroup","largestBatchId"],Nb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_M=[...Nb,"documentOverlays"],Lb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mb=Lb,G_=[...Mb,"indexConfiguration","indexState","indexEntries"],yM=G_,wM=[...G_,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends Rb{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Zt(t,e){const n=Ee(t);return co.C(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ao(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pd(this.root,e,this.comparator,!1)}getReverseIterator(){return new pd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pd(this.root,e,this.comparator,!0)}}class pd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??dn.RED,this.left=i??dn.EMPTY,this.right=s??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new dn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CE(this.data.getIterator())}getIteratorFrom(e){return new CE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class CE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function el(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new ar([])}unionWith(e){let n=new st(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jb("Invalid base64 string: "+s):s}}(e);return new qt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const EM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(ue(!!t),typeof t=="string"){let e=0;const n=EM.exec(t);if(ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(t.seconds),nanos:Et(t.nanos)}}function Et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ss(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _p(t){const e=t.mapValue.fields.__previous_value__;return Q_(e)?_p(e):e}function Gc(t){const e=is(t.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ta{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bd={nullValue:"NULL_VALUE"};function go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Q_(t)?4:Fb(t)?9007199254740991:yp(t)?10:11:ae()}function xi(t,e){if(t===e)return!0;const n=go(t);if(n!==go(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Gc(t).isEqual(Gc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=is(i.timestampValue),a=is(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ss(i.bytesValue).isEqual(ss(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Et(i.geoPointValue.latitude)===Et(s.geoPointValue.latitude)&&Et(i.geoPointValue.longitude)===Et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Et(i.integerValue)===Et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Et(i.doubleValue),a=Et(s.doubleValue);return o===a?Kc(o)===Kc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Bl(t.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bE(o)!==bE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!xi(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function Qc(t,e){return(t.values||[]).find(n=>xi(n,e))!==void 0}function vo(t,e){if(t===e)return 0;const n=go(t),r=go(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Et(s.integerValue||s.doubleValue),l=Et(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return xE(t.timestampValue,e.timestampValue);case 4:return xE(Gc(t),Gc(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ss(s),l=ss(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Se(a[c],l[c]);if(d!==0)return d}return Se(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Se(Et(s.latitude),Et(o.latitude));return a!==0?a:Se(Et(s.longitude),Et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return AE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const p=s.fields||{},g=o.fields||{},w=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=g.value)===null||l===void 0?void 0:l.arrayValue,A=Se(((c=w==null?void 0:w.values)===null||c===void 0?void 0:c.length)||0,((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:AE(w,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Xs.mapValue&&o===Xs.mapValue)return 0;if(s===Xs.mapValue)return 1;if(o===Xs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Se(l[p],d[p]);if(g!==0)return g;const w=vo(a[l[p]],c[d[p]]);if(w!==0)return w}return Se(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ae()}}function xE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=is(t),r=is(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function AE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=vo(n[i],r[i]);if(s)return s}return Se(n.length,r.length)}function ql(t){return rv(t)}function rv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rv(n.fields[o])}`;return i+"}"}(t.mapValue):ae()}function qd(t){switch(go(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_p(t);return e?16+qd(e):16;case 5:return 2*t.stringValue.length;case 6:return ss(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+qd(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ao(r.fields,(s,o)=>{i+=s.length+qd(o)}),i}(t.mapValue);default:throw ae()}}function Y_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iv(t){return!!t&&"integerValue"in t}function Yc(t){return!!t&&"arrayValue"in t}function PE(t){return!!t&&"nullValue"in t}function kE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hd(t){return!!t&&"mapValue"in t}function yp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ao(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const Ub={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function IM(t){return"nullValue"in t?Bd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Y_(Ta.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?yp(t)?Ub:{mapValue:{}}:ae()}function SM(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Y_(Ta.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Ub:"mapValue"in t?yp(t)?{mapValue:{}}:Xs:ae()}function RE(t,e){const n=vo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function DE(t,e){const n=vo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=Ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Hd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ao(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mn(vc(this.value))}}function $b(t){const e=[];return Ao(t.fields,(n,r)=>{const i=new Ct([n]);if(Hd(r)){const s=$b(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nt(e,0,he.min(),he.min(),he.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,he.min(),he.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,he.min(),he.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this.position=e,this.inclusive=n}}function OE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=vo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n="asc"){this.field=e,this.dir=n}}function bM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{}class Me extends zb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CM(e,n,r):n==="array-contains"?new PM(e,r):n==="in"?new Gb(e,r):n==="not-in"?new kM(e,r):n==="array-contains-any"?new RM(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xM(e,r):new AM(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vo(n,this.value)):n!==null&&go(this.value)===go(n)&&this.matchesComparison(vo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dt extends zb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new dt(e,n)}matches(e){return Wl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Wl(t){return t.op==="and"}function sv(t){return t.op==="or"}function X_(t){return Bb(t)&&Wl(t)}function Bb(t){for(const e of t.filters)if(e instanceof dt)return!1;return!0}function ov(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+ql(t.value);if(X_(t))return t.filters.map(e=>ov(e)).join(",");{const e=t.filters.map(n=>ov(n)).join(",");return`${t.op}(${e})`}}function qb(t,e){return t instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.field.isEqual(i.field)&&xi(r.value,i.value)}(t,e):t instanceof dt?function(r,i){return i instanceof dt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&qb(o,i.filters[a]),!0):!1}(t,e):void ae()}function Hb(t,e){const n=t.filters.concat(e);return dt.create(n,t.op)}function Wb(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${ql(n.value)}`}(t):t instanceof dt?function(n){return n.op.toString()+" {"+n.getFilters().map(Wb).join(" ,")+"}"}(t):"Filter"}class CM extends Me{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class xM extends Me{constructor(e,n){super(e,"in",n),this.keys=Kb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class AM extends Me{constructor(e,n){super(e,"not-in",n),this.keys=Kb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Kb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class PM extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yc(n)&&Qc(n.arrayValue,this.value)}}class Gb extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qc(this.value.arrayValue,n)}}class kM extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qc(this.value.arrayValue,n)}}class RM extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function av(t,e=null,n=[],r=[],i=null,s=null,o=null){return new DM(t,e,n,r,i,s,o)}function Ia(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ov(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),vp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ql(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ql(r)).join(",")),e.ue=n}return e.ue}function dh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!NE(t.startAt,e.startAt)&&NE(t.endAt,e.endAt)}function Mf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Vf(t,e){return t.filters.filter(n=>n instanceof Me&&n.field.isEqual(e))}function LE(t,e,n){let r=Bd,i=!0;for(const s of Vf(t,e)){let o=Bd,a=!0;switch(s.op){case"<":case"<=":o=IM(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Bd}RE({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];RE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function ME(t,e,n){let r=Xs,i=!0;for(const s of Vf(t,e)){let o=Xs,a=!0;switch(s.op){case">=":case">":o=SM(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Xs}DE({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];DE({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function OM(t,e,n,r,i,s,o,a){return new wp(t,e,n,r,i,s,o,a)}function fh(t){return new wp(t)}function VE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NM(t){return t.collectionGroup!==null}function _c(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new st(Ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lf(s,r))}),n.has(Ct.keyField().canonicalString())||e.ce.push(new Lf(Ct.keyField(),r))}return e.ce}function Lr(t){const e=Ee(t);return e.le||(e.le=LM(e,_c(t))),e.le}function LM(t,e){if(t.limitType==="F")return av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lf(i.field,s)});const n=t.endAt?new Hl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Hl(t.startAt.position,t.startAt.inclusive):null;return av(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lv(t,e,n){return new wp(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ep(t,e){return dh(Lr(t),Lr(e))&&t.limitType===e.limitType}function Qb(t){return`${Ia(Lr(t))}|lt:${t.limitType}`}function ol(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wb(i)).join(", ")}]`),vp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ql(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ql(i)).join(",")),`Target(${r})`}(Lr(t))}; limitType=${t.limitType})`}function ph(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _c(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=OE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,_c(r),i)||r.endAt&&!function(o,a,l){const c=OE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,_c(r),i))}(t,e)}function MM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yb(t){return(e,n)=>{let r=!1;for(const i of _c(t)){const s=VM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function VM(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?vo(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Vb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new It(te.comparator);function lr(){return jM}const Xb=new It(te.comparator);function ec(...t){let e=Xb;for(const n of t)e=e.insert(n.key,n);return e}function Jb(t){let e=Xb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ii(){return yc()}function Zb(){return yc()}function yc(){return new hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const FM=new It(te.comparator),UM=new st(te.comparator);function Pe(...t){let e=UM;for(const n of t)e=e.add(n);return e}const $M=new st(Se);function zM(){return $M}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kc(e)?"-0":e}}function eC(t){return{integerValue:""+t}}function tC(t,e){return tM(e)?eC(e):J_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this._=void 0}}function BM(t,e,n){return t instanceof Kl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Q_(s)&&(s=_p(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Gl?rC(t,e):t instanceof Ql?iC(t,e):function(i,s){const o=nC(i,s),a=jE(o)+jE(i.Pe);return iv(o)&&iv(i.Pe)?eC(a):J_(i.serializer,a)}(t,e)}function qM(t,e,n){return t instanceof Gl?rC(t,e):t instanceof Ql?iC(t,e):n}function nC(t,e){return t instanceof Yl?function(r){return iv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Kl extends Tp{}class Gl extends Tp{constructor(e){super(),this.elements=e}}function rC(t,e){const n=sC(e);for(const r of t.elements)n.some(i=>xi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ql extends Tp{constructor(e){super(),this.elements=e}}function iC(t,e){let n=sC(e);for(const r of t.elements)n=n.filter(i=>!xi(i,r));return{arrayValue:{values:n}}}class Yl extends Tp{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function jE(t){return Et(t.integerValue||t.doubleValue)}function sC(t){return Yc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.field=e,this.transform=n}}function HM(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gl&&i instanceof Gl||r instanceof Ql&&i instanceof Ql?Bl(r.elements,i.elements,xi):r instanceof Yl&&i instanceof Yl?xi(r.Pe,i.Pe):r instanceof Kl&&i instanceof Kl}(t.transform,e.transform)}class WM{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ip{}function oC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ey(t.key,Vn.none()):new lu(t.key,t.data,Vn.none());{const n=t.data,r=Mn.empty();let i=new st(Ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ds(t.key,r,new ar(i.toArray()),Vn.none())}}function KM(t,e,n){t instanceof lu?function(i,s,o){const a=i.value.clone(),l=UE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(i,s,o){if(!Wd(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=UE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(aC(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wc(t,e,n,r){return t instanceof lu?function(s,o,a,l){if(!Wd(s.precondition,o))return a;const c=s.value.clone(),d=$E(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ds?function(s,o,a,l){if(!Wd(s.precondition,o))return a;const c=$E(s.fieldTransforms,l,o),d=o.data;return d.setAll(aC(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Wd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function GM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=nC(r.transform,i||null);s!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,s))}return n||null}function FE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bl(r,i,(s,o)=>HM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lu extends Ip{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ds extends Ip{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function UE(t,e,n){const r=new Map;ue(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qM(o,a,n[i]))}return r}function $E(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BM(s,o,e))}return r}class ey extends Ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lC extends Ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&KM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Zb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=oC(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,(n,r)=>FE(n,r))&&Bl(this.baseMutations,e.baseMutations,(n,r)=>FE(n,r))}}class ny{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ue(e.mutations.length===r.length);let i=function(){return FM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ny(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,Fe;function YM(t){switch(t){default:return ae();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function uC(t){if(t===void 0)return Ln("GRPC error has no .code"),K.UNKNOWN;switch(t){case zt.OK:return K.OK;case zt.CANCELLED:return K.CANCELLED;case zt.UNKNOWN:return K.UNKNOWN;case zt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case zt.INTERNAL:return K.INTERNAL;case zt.UNAVAILABLE:return K.UNAVAILABLE;case zt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case zt.NOT_FOUND:return K.NOT_FOUND;case zt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case zt.ABORTED:return K.ABORTED;case zt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case zt.DATA_LOSS:return K.DATA_LOSS;default:return ae()}}(Fe=zt||(zt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new ua([4294967295,4294967295],0);function zE(t){const e=XM().encode(t),n=new wb;return n.update(e),new Uint8Array(n.digest())}function BE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ua([n,r],0),new ua([i,s],0)]}class iy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tc(`Invalid padding: ${n}`);if(r<0)throw new tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=ua.fromNumber(this.Te)}Ee(e,n,r){let i=e.add(n.multiply(ua.fromNumber(r)));return i.compare(JM)===1&&(i=new ua([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=zE(e),[r,i]=BE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new iy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=zE(e),[r,i]=BE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Sp(he.min(),i,new It(Se),lr(),Pe())}}class mh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mh(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class cC{constructor(e,n){this.targetId=e,this.me=n}}class hC{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class qE{constructor(){this.fe=0,this.ge=HE(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new mh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=HE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ZM{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=md(),this.Qe=md(),this.Ke=new It(Se)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Mf(s))if(r===0){const o=new te(s.path);this.We(n,o,Nt.newNoDocument(o,he.min()))}else ue(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ss(r).toUint8Array()}catch(l){if(l instanceof jb)return Ea("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new iy(o,i,s)}catch(l){return Ea(l instanceof tc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Mf(a.target)){const l=new te(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Nt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Pe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Sp(e,n,this.Ke,this.ke,r);return this.ke=lr(),this.qe=md(),this.Qe=md(),this.Ke=new It(Se),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new qE,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new st(Se),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(Se),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new qE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function md(){return new It(te.comparator)}function HE(){return new It(te.comparator)}const eV={asc:"ASCENDING",desc:"DESCENDING"},tV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nV={and:"AND",or:"OR"};class rV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uv(t,e){return t.useProto3Json||vp(e)?e:{value:e}}function Xl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iV(t,e){return Xl(t,e.toTimestamp())}function Fn(t){return ue(!!t),he.fromTimestamp(function(n){const r=is(n);return new At(r.seconds,r.nanos)}(t))}function sy(t,e){return cv(t,e).canonicalString()}function cv(t,e){const n=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fC(t){const e=rt.fromString(t);return ue(TC(e)),e}function jf(t,e){return sy(t.databaseId,e.path)}function ca(t,e){const n=fC(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(gC(n))}function pC(t,e){return sy(t.databaseId,e)}function mC(t){const e=fC(t);return e.length===4?rt.emptyPath():gC(e)}function hv(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gC(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function WE(t,e,n){return{name:jf(t,e),fields:n.value.mapValue.fields}}function sV(t,e,n){const r=ca(t,e.name),i=Fn(e.updateTime),s=e.createTime?Fn(e.createTime):he.min(),o=new Mn({mapValue:{fields:e.fields}}),a=Nt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function oV(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(ue(d===void 0||typeof d=="string"),qt.fromBase64String(d||"")):(ue(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?K.UNKNOWN:uC(c.code);return new ne(d,c.message||"")}(o);n=new hC(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ca(t,r.document.name),s=Fn(r.document.updateTime),o=r.document.createTime?Fn(r.document.createTime):he.min(),a=new Mn({mapValue:{fields:r.document.fields}}),l=Nt.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Kd(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ca(t,r.document),s=r.readTime?Fn(r.readTime):he.min(),o=Nt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Kd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ca(t,r.document),s=r.removedTargetIds||[];n=new Kd([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QM(i,s),a=r.targetId;n=new cC(a,o)}}return n}function Ff(t,e){let n;if(e instanceof lu)n={update:WE(t,e.key,e.value)};else if(e instanceof ey)n={delete:jf(t,e.key)};else if(e instanceof ds)n={update:WE(t,e.key,e.data),updateMask:dV(e.fieldMask)};else{if(!(e instanceof lC))return ae();n={verify:jf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Kl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ql)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yl)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function dv(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Vn.updateTime(Fn(s.updateTime)):s.exists!==void 0?Vn.exists(s.exists):Vn.none()}(e.currentDocument):Vn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)ue(a.setToServerValue==="REQUEST_TIME"),l=new Kl;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new Gl(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new Ql(d)}else"increment"in a?l=new Yl(o,a.increment):ae();const c=Ct.fromServerFormat(a.fieldPath);return new Z_(c,l)}(t,i)):[];if(e.update){e.update.name;const i=ca(t,e.update.name),s=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new ar(c.map(d=>Ct.fromServerFormat(d)))}(e.updateMask);return new ds(i,s,o,n,r)}return new lu(i,s,n,r)}if(e.delete){const i=ca(t,e.delete);return new ey(i,n)}if(e.verify){const i=ca(t,e.verify);return new lC(i,n)}return ae()}function aV(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Fn(i.updateTime):Fn(s);return o.isEqual(he.min())&&(o=Fn(s)),new WM(o,i.transformResults||[])}(n,e))):[]}function vC(t,e){return{documents:[pC(t,e.path)]}}function _C(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pC(t,i);const s=function(c){if(c.length!==0)return EC(dt.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:al(g.field),direction:uV(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=uv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function yC(t){let e=mC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ue(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const g=wC(p);return g instanceof dt&&X_(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(E){return new Lf(ll(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,vp(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,w=p.values||[];return new Hl(w,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,w=p.values||[];return new Hl(w,g)}(n.endAt)),OM(e,i,o,s,a,"F",l,c)}function lV(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ll(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ll(n.unaryFilter.field);return Me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ll(n.unaryFilter.field);return Me.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ll(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(ll(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dt.create(n.compositeFilter.filters.map(r=>wC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function uV(t){return eV[t]}function cV(t){return tV[t]}function hV(t){return nV[t]}function al(t){return{fieldPath:t.canonicalString()}}function ll(t){return Ct.fromServerFormat(t.fieldPath)}function EC(t){return t instanceof Me?function(n){if(n.op==="=="){if(kE(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NAN"}};if(PE(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kE(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NAN"}};if(PE(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(n.field),op:cV(n.op),value:n.value}}}(t):t instanceof dt?function(n){const r=n.getFilters().map(i=>EC(i));return r.length===1?r[0]:{compositeFilter:{op:hV(n.op),filters:r}}}(t):ae()}function dV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,r,i,s=he.min(),o=he.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.ht=e}}function fV(t,e){let n;if(e.document)n=sV(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=te.fromSegments(e.noDocument.path),i=ba(e.noDocument.readTime);n=Nt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{const r=te.fromSegments(e.unknownDocument.path),i=ba(e.unknownDocument.version);n=Nt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new At(i[0],i[1]);return he.fromTimestamp(s)}(e.readTime)),n}function KE(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:jf(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Xl(s,o.version.toTimestamp()),createTime:Xl(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Sa(e.version)};else{if(!e.isUnknownDocument())return ae();r.unknownDocument={path:n.path.toArray(),version:Sa(e.version)}}return r}function Uf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Sa(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ba(t){const e=new At(t.seconds,t.nanoseconds);return he.fromTimestamp(e)}function ea(t,e){const n=(e.baseMutations||[]).map(s=>dv(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>dv(t.ht,s)),i=At.fromMillis(e.localWriteTimeMs);return new ty(e.batchId,i,n,r)}function nc(t){const e=ba(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ba(t.lastLimboFreeSnapshotVersion):he.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return ue(s.documents.length===1),Lr(fh(mC(s.documents[0])))}(t.query):function(s){return Lr(yC(s))}(t.query),new Gi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qt.fromBase64String(t.resumeToken))}function SC(t,e){const n=Sa(e.snapshotVersion),r=Sa(e.lastLimboFreeSnapshotVersion);let i;i=Mf(e.target)?vC(t.ht,e.target):_C(t.ht,e.target).ct;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ia(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function bC(t){const e=yC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lv(e,e.limit,"L"):e}function Lm(t,e){return new ry(e.largestBatchId,dv(t.ht,e.overlayMutation))}function GE(t,e){const n=e.path.lastSegment();return[t,xn(e.path.popLast()),n]}function QE(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Sa(r.readTime),documentKey:xn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{getBundleMetadata(e,n){return YE(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ba(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return YE(e).put(function(i){return{bundleId:i.id,createTime:Sa(Fn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return XE(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:bC(s.bundledQuery),readTime:ba(s.readTime)}}(r)})}saveNamedQuery(e,n){return XE(e).put(function(i){return{name:i.name,readTime:Sa(Fn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function YE(t){return Zt(t,"bundles")}function XE(t){return Zt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new bp(e,r)}getOverlay(e,n){return Fu(e).get(GE(this.userId,n)).next(r=>r?Lm(this.serializer,r):null)}getOverlays(e,n){const r=Ii();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new ry(n,o);i.push(this.Tt(e,a))}),$.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(xn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Fu(e).j("collectionPathOverlayIndex",a))}),$.waitFor(s)}getOverlaysForCollection(e,n,r){const i=Ii(),s=xn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Fu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Lm(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=Ii();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fu(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const p=Lm(this.serializer,c);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):d.done()}).next(()=>s)}Tt(e,n){return Fu(e).put(function(i,s,o){const[a,l,c]=GE(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ff(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function Fu(t){return Zt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{It(e){return Zt(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?qt.fromUint8Array(r):qt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.It(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){}Et(e,n){this.dt(e,n),n.At()}dt(e,n){if("nullValue"in e)this.Rt(n,5);else if("booleanValue"in e)this.Rt(n,10),n.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(n,15),n.Vt(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.Rt(n,13):(this.Rt(n,15),Kc(r)?n.Vt(0):n.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(n,20),typeof r=="string"&&(r=is(r)),n.ft(`${r.seconds||""}`),n.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,n),this.yt(n);else if("bytesValue"in e)this.Rt(n,30),n.wt(ss(e.bytesValue)),this.yt(n);else if("referenceValue"in e)this.St(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(n,45),n.Vt(r.latitude||0),n.Vt(r.longitude||0)}else"mapValue"in e?Fb(e)?this.Rt(n,Number.MAX_SAFE_INTEGER):yp(e)?this.bt(e.mapValue,n):(this.Dt(e.mapValue,n),this.yt(n)):"arrayValue"in e?(this.vt(e.arrayValue,n),this.yt(n)):ae()}gt(e,n){this.Rt(n,25),this.Ct(e,n)}Ct(e,n){n.ft(e)}Dt(e,n){const r=e.fields||{};this.Rt(n,55);for(const i of Object.keys(r))this.gt(i,n),this.dt(r[i],n)}bt(e,n){var r,i;const s=e.fields||{};this.Rt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(n,15),n.Vt(Et(a)),this.gt(o,n),this.dt(s[o],n)}vt(e,n){const r=e.values||[];this.Rt(n,50);for(const i of r)this.dt(i,n)}St(e,n){this.Rt(n,37),te.fromName(e).path.forEach(r=>{this.Rt(n,60),this.Ct(r,n)})}Rt(e,n){e.Vt(n)}yt(e){e.Vt(2)}}ta.Ft=new ta;function gV(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function JE(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=gV(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class vV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.xt(r.value),r=n.next();this.Ot()}Nt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Lt(r.value),r=n.next();this.Bt()}kt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=n.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}qt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Lt(r);else if(r<2048)this.Lt(960|r>>>6),this.Lt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Lt(480|r>>>12),this.Lt(128|63&r>>>6),this.Lt(128|63&r);else{const i=n.codePointAt(0);this.Lt(240|i>>>18),this.Lt(128|63&i>>>12),this.Lt(128|63&i>>>6),this.Lt(128|63&i)}}this.Bt()}Qt(e){const n=this.Kt(e),r=JE(n);this.$t(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Ut(e){const n=this.Kt(e),r=JE(n);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}xt(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(n)}Lt(e){const n=255&e;n===0?(this.jt(0),this.jt(255)):n===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class _V{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class yV{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Uu{constructor(){this.Jt=new vV,this.Yt=new _V(this.Jt),this.Zt=new yV(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}en(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new na(this.indexId,this.documentKey,this.arrayValue,r)}}function Ns(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=ZE(t.arrayValue,e.arrayValue),n!==0?n:(n=ZE(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function ZE(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.tn=new st((n,r)=>Ct.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(ue(e.collectionGroup===this.collectionId),this.sn)return!1;const n=tv(e);if(n!==void 0&&!this._n(n))return!1;const r=Jo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this._n(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn.size>0){const a=this.tn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.an(a,l)||!this.un(this.nn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.nn.length||!this.un(this.nn[o++],a))return!1}return!0}cn(){if(this.sn)return null;let e=new st(Ct.comparator);const n=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new $d(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new $d(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new $d(r.field,r.dir==="asc"?0:1)));return new Nf(Nf.UNKNOWN_ID,this.collectionId,n,Wc.empty())}_n(e){for(const n of this.rn)if(this.an(n,e))return!0;return!1}an(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}un(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){var e,n;if(ue(t instanceof Me||t instanceof dt),t instanceof Me){if(t instanceof Gb){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Me.create(t.field,"==",s)))||[];return dt.create(i,"or")}return t}const r=t.filters.map(i=>CC(i));return dt.create(r,t.op)}function wV(t){if(t.getFilters().length===0)return[];const e=mv(CC(t));return ue(xC(e)),fv(e)||pv(e)?[e]:e.getFilters()}function fv(t){return t instanceof Me}function pv(t){return t instanceof dt&&X_(t)}function xC(t){return fv(t)||pv(t)||function(n){if(n instanceof dt&&sv(n)){for(const r of n.getFilters())if(!fv(r)&&!pv(r))return!1;return!0}return!1}(t)}function mv(t){if(ue(t instanceof Me||t instanceof dt),t instanceof Me)return t;if(t.filters.length===1)return mv(t.filters[0]);const e=t.filters.map(r=>mv(r));let n=dt.create(e,t.op);return n=$f(n),xC(n)?n:(ue(n instanceof dt),ue(Wl(n)),ue(n.filters.length>1),n.filters.reduce((r,i)=>oy(r,i)))}function oy(t,e){let n;return ue(t instanceof Me||t instanceof dt),ue(e instanceof Me||e instanceof dt),n=t instanceof Me?e instanceof Me?function(i,s){return dt.create([i,s],"and")}(t,e):t1(t,e):e instanceof Me?t1(e,t):function(i,s){if(ue(i.filters.length>0&&s.filters.length>0),Wl(i)&&Wl(s))return Hb(i,s.getFilters());const o=sv(i)?i:s,a=sv(i)?s:i,l=o.filters.map(c=>oy(c,a));return dt.create(l,"or")}(t,e),$f(n)}function t1(t,e){if(Wl(e))return Hb(e,t.getFilters());{const n=e.filters.map(r=>oy(t,r));return dt.create(n,"or")}}function $f(t){if(ue(t instanceof Me||t instanceof dt),t instanceof Me)return t;const e=t.getFilters();if(e.length===1)return $f(e[0]);if(Bb(t))return t;const n=e.map(i=>$f(i)),r=[];return n.forEach(i=>{i instanceof Me?r.push(i):i instanceof dt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:dt.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(){this.ln=new ay}addToCollectionParentIndex(e,n){return this.ln.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(dr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class ay{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new st(rt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new st(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Uint8Array(0);class TV{constructor(e,n){this.databaseId=n,this.hn=new ay,this.Pn=new hs(r=>Ia(r),(r,i)=>dh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.hn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.hn.add(n)});const s={collectionId:r,parent:xn(i)};return n1(e).put(s)}return $.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Ab(n),""],!1,!0);return n1(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Ti(o.parent))}return r})}addFieldIndex(e,n){const r=$u(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=nl(e);return s.next(a=>{o.put(QE(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=$u(e),i=nl(e),s=tl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$u(e),r=tl(e),i=nl(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return $.forEach(this.Tn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new e1(r).cn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=tl(e);let i=!0;const s=new Map;return $.forEach(this.Tn(n),o=>this.In(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Pe();const a=[];return $.forEach(s,(l,c)=>{Q("IndexedDbIndexManager",`Using index ${function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map(M=>`${M.fieldPath}:${M.kind}`).join(",")}`}(l)} to execute ${Ia(n)}`);const d=function(I,M){const B=tv(M);if(B===void 0)return null;for(const W of Vf(I,B.fieldPath))switch(W.op){case"array-contains-any":return W.value.arrayValue.values||[];case"array-contains":return[W.value]}return null}(c,l),p=function(I,M){const B=new Map;for(const W of Jo(M))for(const P of Vf(I,W.fieldPath))switch(P.op){case"==":case"in":B.set(W.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return B.set(W.fieldPath.canonicalString(),P.value),Array.from(B.values())}return null}(c,l),g=function(I,M){const B=[];let W=!0;for(const P of Jo(M)){const C=P.kind===0?LE(I,P.fieldPath,I.startAt):ME(I,P.fieldPath,I.startAt);B.push(C.value),W&&(W=C.inclusive)}return new Hl(B,W)}(c,l),w=function(I,M){const B=[];let W=!0;for(const P of Jo(M)){const C=P.kind===0?ME(I,P.fieldPath,I.endAt):LE(I,P.fieldPath,I.endAt);B.push(C.value),W&&(W=C.inclusive)}return new Hl(B,W)}(c,l),E=this.En(l,c,g),A=this.En(l,c,w),R=this.dn(l,c,p),x=this.An(l.indexId,d,E,g.inclusive,A,w.inclusive,R);return $.forEach(x,T=>r.G(T,n.limit).next(I=>{I.forEach(M=>{const B=te.fromSegments(M.documentKey);o.has(B)||(o=o.add(B),a.push(B))})}))}).next(()=>a)}return $.resolve(null)})}Tn(e){let n=this.Pn.get(e);return n||(e.filters.length===0?n=[e]:n=wV(dt.create(e.filters,"and")).map(r=>av(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,n),n)}An(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),d=[];for(let p=0;p<l;++p){const g=n?this.Rn(n[p/c]):gd,w=this.Vn(e,g,r[p%c],i),E=this.mn(e,g,s[p%c],o),A=a.map(R=>this.Vn(e,g,R,!0));d.push(...this.createRange(w,E,A))}return d}Vn(e,n,r,i){const s=new na(e,te.empty(),n,r);return i?s:s.en()}mn(e,n,r,i){const s=new na(e,te.empty(),n,r);return i?s.en():s}In(e,n){const r=new e1(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.on(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Tn(n);return $.forEach(i,s=>this.In(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new st(Ct.comparator),d=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}fn(e,n){const r=new Uu;for(const i of Jo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Xt(i.kind);ta.Ft.Et(s,o)}return r.Ht()}Rn(e){const n=new Uu;return ta.Ft.Et(e,n.Xt(0)),n.Ht()}gn(e,n){const r=new Uu;return ta.Ft.Et(Y_(this.databaseId,n),r.Xt(function(s){const o=Jo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ht()}dn(e,n,r){if(r===null)return[];let i=[];i.push(new Uu);let s=0;for(const o of Jo(e)){const a=r[s++];for(const l of i)if(this.pn(n,o.fieldPath)&&Yc(a))i=this.yn(i,o,a);else{const c=l.Xt(o.kind);ta.Ft.Et(a,c)}}return this.wn(i)}En(e,n,r){return this.dn(e,n,r.position)}wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ht();return n}yn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Uu;l.seed(a.Ht()),ta.Ft.Et(o,l.Xt(n.kind)),s.push(l)}return s}pn(e,n){return!!e.filters.find(r=>r instanceof Me&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$u(e),i=nl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return $.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(d,p){const g=p?new Wc(p.sequenceNumber,new dr(ba(p.readTime),new te(Ti(p.documentKey)),p.largestBatchId)):Wc.empty(),w=d.fields.map(([E,A])=>new $d(Ct.fromServerFormat(E),A));return new Nf(d.indexId,d.collectionGroup,w,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Se(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=$u(e),s=nl(e);return this.Sn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>$.forEach(a,l=>s.put(QE(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),$.forEach(a,l=>this.bn(e,i,l).next(c=>{const d=this.Dn(s,l);return c.isEqual(d)?$.resolve():this.vn(e,s,l,c,d)}))))})}Cn(e,n,r,i){return tl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Fn(e,n,r,i){return tl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}bn(e,n,r){const i=tl(e);let s=new st(Ns);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{s=s.add(new na(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Dn(e,n){let r=new st(Ns);const i=this.fn(n,e);if(i==null)return r;const s=tv(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Yc(o))for(const a of o.arrayValue.values||[])r=r.add(new na(n.indexId,e.key,this.Rn(a),i))}else r=r.add(new na(n.indexId,e.key,gd,i));return r}vn(e,n,r,i,s){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,p,g){const w=l.getIterator(),E=c.getIterator();let A=el(w),R=el(E);for(;A||R;){let x=!1,T=!1;if(A&&R){const I=d(A,R);I<0?T=!0:I>0&&(x=!0)}else A!=null?T=!0:x=!0;x?(p(R),R=el(E)):T?(g(A),A=el(w)):(A=el(w),R=el(E))}}(i,s,Ns,a=>{o.push(this.Cn(e,n,r,a))},a=>{o.push(this.Fn(e,n,r,a))}),$.waitFor(o)}Sn(e){let n=1;return nl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ns(o,a)).filter((o,a,l)=>!a||Ns(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=Ns(o,e),l=Ns(o,n);if(a===0)i[0]=e.en();else if(a>0&&l<0)i.push(o),i.push(o.en());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Mn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,gd,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,gd,[]];s.push(IDBKeyRange.bound(a,l))}return s}Mn(e,n){return Ns(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(r1)}getMinOffset(e,n){return $.mapArray(this.Tn(n),r=>this.In(e,r).next(i=>i||ae())).next(r1)}}function n1(t){return Zt(t,"collectionParents")}function tl(t){return Zt(t,"indexEntries")}function $u(t){return Zt(t,"indexConfiguration")}function nl(t){return Zt(t,"indexState")}function r1(t){ue(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;W_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new dr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(d,p,g)=>(a++,g.delete()));s.push(l.next(()=>{ue(a===1)}));const c=[];for(const d of n.mutations){const p=Ob(e,d.key.path,n.batchId);s.push(i.delete(p)),c.push(d.key)}return $.waitFor(s).next(()=>c)}function zf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(41943040,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);class Cp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.xn={}}static Pt(e,n,r,i){ue(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Cp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ul(e),o=Ls(e);return o.add({}).next(a=>{ue(typeof a=="number");const l=new ty(a,n,r,i),c=function(w,E,A){const R=A.baseMutations.map(T=>Ff(w.ht,T)),x=A.mutations.map(T=>Ff(w.ht,T));return{userId:E,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:R,mutations:x}}(this.serializer,this.userId,l),d=[];let p=new st((g,w)=>Se(g.canonicalString(),w.canonicalString()));for(const g of i){const w=Ob(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),d.push(o.put(c)),d.push(s.put(w,rM))}return p.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.xn[a]=l.keys()}),$.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return Ls(e).get(n).next(r=>r?(ue(r.userId===this.userId),ea(this.serializer,r)):null)}On(e,n){return this.xn[n]?$.resolve(this.xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ls(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(ue(a.batchId>=r),s=ea(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ls(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).U("userMutationsIndex",n).next(r=>r.map(i=>ea(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=zd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ul(e).J({range:i},(o,a,l)=>{const[c,d,p]=o,g=Ti(d);if(c===this.userId&&n.path.isEqual(g))return Ls(e).get(p).next(w=>{if(!w)throw ae();ue(w.userId===this.userId),s.push(ea(this.serializer,w))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(Se);const i=[];return n.forEach(s=>{const o=zd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=ul(e).J({range:a},(c,d,p)=>{const[g,w,E]=c,A=Ti(w);g===this.userId&&s.path.isEqual(A)?r=r.add(E):p.done()});i.push(l)}),$.waitFor(i).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=zd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new st(Se);return ul(e).J({range:o},(l,c,d)=>{const[p,g,w]=l,E=Ti(g);p===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(w)):d.done()}).next(()=>this.Nn(e,a))}Nn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Ls(e).get(s).next(o=>{if(o===null)throw ae();ue(o.userId===this.userId),r.push(ea(this.serializer,o))}))}),$.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return AC(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Ln(n.batchId)}),$.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ul(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Ti(s[1]);i.push(l)}else a.done()}).next(()=>{ue(i.length===0)})})}containsKey(e,n){return PC(e,this.userId,n)}Bn(e){return kC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PC(t,e,n){const r=zd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ul(t).J({range:s,H:!0},(a,l,c)=>{const[d,p,g]=a;d===e&&p===i&&(o=!0),c.done()}).next(()=>o)}function Ls(t){return Zt(t,"mutations")}function ul(t){return Zt(t,"documentMutations")}function kC(t){return Zt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ca(0)}static Qn(){return new Ca(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Kn(e).next(n=>{const r=new Ca(n.highestTargetId);return n.highestTargetId=r.next(),this.$n(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(n=>he.fromTimestamp(new At(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.$n(e,i)))}addTargetData(e,n){return this.Un(e,n).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(n,r),this.$n(e,r))))}updateTargetData(e,n){return this.Un(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rl(e).delete(n.targetId)).next(()=>this.Kn(e)).next(r=>(ue(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return rl(e).J((o,a)=>{const l=nc(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>$.waitFor(s)).next(()=>i)}forEachTarget(e,n){return rl(e).J((r,i)=>{const s=nc(i);n(s)})}Kn(e){return s1(e).get("targetGlobalKey").next(n=>(ue(n!==null),n))}$n(e,n){return s1(e).put("targetGlobalKey",n)}Un(e,n){return rl(e).put(SC(this.serializer,n))}Wn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Ia(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return rl(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=nc(a);dh(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ws(e);return n.forEach(o=>{const a=xn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),$.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ws(e);return $.forEach(n,s=>{const o=xn(s.path);return $.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ws(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ws(e);let s=Pe();return i.J({range:r,H:!0},(o,a,l)=>{const c=Ti(o[1]),d=new te(c);s=s.add(d)}).next(()=>s)}containsKey(e,n){const r=xn(n.path),i=IDBKeyRange.bound([r],[Ab(r)],!1,!0);let s=0;return Ws(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ut(e,n){return rl(e).get(n).next(r=>r?nc(r):null)}}function rl(t){return Zt(t,"targets")}function s1(t){return Zt(t,"targetGlobal")}function Ws(t){return Zt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1([t,e],[n,r]){const i=Se(t,n);return i===0?Se(e,r):i}class SV{constructor(e){this.Gn=e,this.buffer=new st(o1),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();o1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xo(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ra(n)}await this.Yn(3e5)})}}class bV{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Or.oe);const r=new SV(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(i1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),i1):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),sl()<=Ne.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function DC(t,e){return new bV(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n){this.db=e,this.garbageCollector=DC(this,n)}Xn(e){const n=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}er(e,n){return this.rr(e,(r,i)=>n(i))}addReference(e,n,r){return vd(e,r)}removeReference(e,n,r){return vd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return vd(e,n)}ir(e,n){return function(i,s){let o=!1;return kC(i).Y(a=>PC(i,a,s).next(l=>(l&&(o=!0),$.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.rr(e,(o,a)=>{if(a<=n){const l=this.ir(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,he.min()),Ws(e).delete(function(p){return[0,xn(p.path)]}(o))))});i.push(l)}}).next(()=>$.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return vd(e,n)}rr(e,n){const r=Ws(e);let i,s=Or.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Or.oe&&n(new te(Ti(i)),s),s=c,i=l):s=Or.oe}).next(()=>{s!==Or.oe&&n(new te(Ti(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vd(t,e){return Ws(t).put(function(r,i){return{targetId:0,path:xn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.changes=new hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Go(e).put(r)}removeEntry(e,n,r){return Go(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Uf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.sr(e,r)))}getEntry(e,n){let r=Nt.newInvalidDocument(n);return Go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(zu(n))},(i,s)=>{r=this._r(n,s)}).next(()=>r)}ar(e,n){let r={size:0,document:Nt.newInvalidDocument(n)};return Go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(zu(n))},(i,s)=>{r={document:this._r(n,s),size:zf(s)}}).next(()=>r)}getEntries(e,n){let r=lr();return this.ur(e,n,(i,s)=>{const o=this._r(i,s);r=r.insert(i,o)}).next(()=>r)}cr(e,n){let r=lr(),i=new It(te.comparator);return this.ur(e,n,(s,o)=>{const a=this._r(s,o);r=r.insert(s,a),i=i.insert(s,zf(o))}).next(()=>({documents:r,lr:i}))}ur(e,n,r){if(n.isEmpty())return $.resolve();let i=new st(u1);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(zu(i.first()),zu(i.last())),o=i.getIterator();let a=o.getNext();return Go(e).J({index:"documentKeyIndex",range:s},(l,c,d)=>{const p=te.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&u1(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.$(zu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),Uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Go(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let d=lr();for(const p of c){const g=this._r(te.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(ph(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let s=lr();const o=l1(n,r),a=l1(n,dr.max());return Go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const p=this._r(te.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new AV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return a1(e).get("remoteDocumentGlobalKey").next(n=>(ue(!!n),n))}sr(e,n){return a1(e).put("remoteDocumentGlobalKey",n)}_r(e,n){if(n){const r=fV(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(he.min())))return r}return Nt.newInvalidDocument(e)}}function NC(t){return new xV(t)}class AV extends OC{constructor(e,n){super(),this.hr=e,this.trackRemovals=n,this.Pr=new hs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new st((s,o)=>Se(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Pr.get(s);if(n.push(this.hr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=KE(this.hr.serializer,o);i=i.add(s.path.popLast());const c=zf(l);r+=c-a.size,n.push(this.hr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=KE(this.hr.serializer,o.convertToNoDocument(he.min()));n.push(this.hr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.hr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.hr.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.hr.ar(e,n).next(r=>(this.Pr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.hr.cr(e,n).next(({documents:r,lr:i})=>(i.forEach((s,o)=>{this.Pr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function a1(t){return Zt(t,"remoteDocumentGlobal")}function Go(t){return Zt(t,"remoteDocumentsV14")}function zu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l1(t,e){const n=e.documentKey.path.toArray();return[t,Uf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function u1(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Se(n[s],r[s]),i)return i;return i=Se(n.length,r.length),i||(i=Se(n[n.length-2],r[r.length-2]),i||Se(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wc(r.mutation,i,ar.empty(),At.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const i=Ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ec();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=lr();const o=yc(),a=function(){return yc()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ds)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),wc(d.mutation,c,d.mutation.getFieldMask(),At.now())):o.set(c.key,ar.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var p;return a.set(c,new PV(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=yc();let i=new It((o,a)=>o-a),s=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||ar.empty();d=a.applyToLocalView(c,d),r.set(l,d);const p=(i.get(a.batchId)||Pe()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=Zb();d.forEach(g=>{if(!s.has(g)){const w=oC(n.get(g),r.get(g));w!==null&&p.set(g,w),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Ii());let a=-1,l=s;return o.next(c=>$.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?$.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Pe())).next(d=>({batchId:a,changes:Jb(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=ec();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const c=function(p,g){return new wp(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Nt.newInvalidDocument(d)))});let a=ec();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&wc(d.mutation,c,ar.empty(),At.now()),ph(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return $.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:bC(i.bundledQuery),readTime:Fn(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.overlays=new It(te.comparator),this.Er=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ii();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Ii(),s=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new It((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Ii(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Ii(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return $.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ry(n,r));let s=this.Er.get(n);s===void 0&&(s=Pe(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(){this.dr=new st(rn.Ar),this.Rr=new st(rn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new rn(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new rn(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new te(new rt([])),r=new rn(n,e),i=new rn(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new te(new rt([])),r=new rn(n,e),i=new rn(n,e+1);let s=Pe();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rn(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rn{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return te.comparator(e.key,n.key)||Se(e.br,n.br)}static Vr(e,n){return Se(e.br,n.br)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new st(rn.Ar)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ty(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new rn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rn(n,0),i=new rn(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new st(Se);return n.forEach(i=>{const s=new rn(i,0),o=new rn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),$.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new rn(new te(s),0);let a=new st(Se);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),$.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ue(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return $.forEach(n.mutations,i=>{const s=new rn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new rn(n,0),i=this.vr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.Nr=e,this.docs=function(){return new It(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=lr();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||W_(Pb(d),r)<=0||(i.has(d.key)||ph(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Lr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LV(this)}getSize(e){return $.resolve(this.size)}}class LV extends OC{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.persistence=e,this.Br=new hs(n=>Ia(n),dh),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.kr=0,this.qr=new ly,this.targetCount=0,this.Qr=Ca.qn()}forEachTarget(e,n){return this.Br.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),$.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ca(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Un(n),$.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Or(0),this.Ur=!1,this.Ur=!0,this.Wr=new DV,this.referenceDelegate=e(this),this.Gr=new MV(this),this.indexManager=new EV,this.remoteDocumentCache=function(i){return new NV(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new IC(n),this.jr=new kV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new OV(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const i=new VV(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return $.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class VV extends Rb{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Zr=new ly,this.Xr=null}static ei(e){return new xp(e)}get ti(){if(this.Xr)return this.Xr;throw ae()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),$.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.ti,r=>{const i=te.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,he.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return $.or([()=>$.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Bf{constructor(e,n){this.persistence=e,this.ri=new hs(r=>xn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DC(this,n)}static ei(e,n){return new Bf(e,n)}Hr(){}Jr(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return $.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,he.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),$.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qd(e.data.value)),n}ir(e,n,r){return $.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.serializer=e}O(e,n,r,i){const s=new gp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SE,{unique:!0}),l.createObjectStore("documentMutations")}(e),c1(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=$.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),c1(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:he.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SE,{unique:!0});const p=c.store("mutations"),g=d.map(w=>p.put(w));return $.waitFor(g)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ii(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.si(s)))),r<7&&i>=7&&(o=o.next(()=>this.oi(s))),r<8&&i>=8&&(o=o.next(()=>this._i(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ai(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:mM});c.createIndex("collectionPathOverlayIndex",gM,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",vM,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:iM});c.createIndex("documentKeyIndex",sM),c.createIndex("collectionGroupIndex",oM)}(e)).next(()=>this.ui(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ci(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:hM}).createIndex("sequenceNumberIndex",dM,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:fM}).createIndex("documentKeyIndex",pM,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}si(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=zf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>$.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>$.forEach(a,l=>{ue(l.userId===s.userId);const c=ea(this.serializer,l);return AC(e,s.userId,c).next(()=>{})}))}))}oi(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new rt(o),c=function(p){return[0,xn(p)]}(l);s.push(n.get(c).next(d=>d?$.resolve():(p=>n.put({targetId:0,path:xn(p),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>$.waitFor(s))})}_i(e,n){e.createObjectStore("collectionParents",{keyPath:cM});const r=n.store("collectionParents"),i=new ay,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:xn(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new rt(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const d=Ti(a);return s(d.popLast())}))}ai(e){const n=e.store("targets");return n.J((r,i)=>{const s=nc(i),o=SC(this.serializer,s);return n.put(o)})}ui(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(p){return p.document?new te(rt.fromString(p.document.name).popFirst(5)):p.noDocument?te.fromSegments(p.noDocument.path):p.unknownDocument?te.fromSegments(p.unknownDocument.path):ae()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>$.waitFor(i))}ci(e,n){const r=n.store("mutations"),i=NC(this.serializer),s=new uy(xp.ei,this.serializer.ht);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Pe();ea(this.serializer,l).keys().forEach(p=>d=d.add(p)),a.set(l.userId,d)}),$.forEach(a,(l,c)=>{const d=new hn(c),p=bp.Pt(this.serializer,d),g=s.getIndexManager(d),w=Cp.Pt(d,this.serializer,g,s.referenceDelegate);return new LC(i,w,p,g).recalculateAndSaveOverlaysForDocumentKeys(new nv(n,Or.oe),l).next()})})}}function c1(t){t.createObjectStore("targetDocuments",{keyPath:lM}).createIndex("documentTargetsIndex",uM,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aM,{unique:!0}),t.createObjectStore("targetGlobal")}const Mm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cy{constructor(e,n,r,i,s,o,a,l,c,d,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.li=s,this.window=o,this.document=a,this.hi=c,this.Pi=d,this.Ti=p,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=g=>Promise.resolve(),!cy.p())throw new ne(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CV(this,i),this.Vi=n+"main",this.serializer=new IC(l),this.mi=new co(this.Vi,this.Ti,new jV(this.serializer)),this.Wr=new mV,this.Gr=new IV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NC(this.serializer),this.jr=new pV,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,d===!1&&Ln("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ne(K.FAILED_PRECONDITION,Mm);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Or(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>_d(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(n=>{n||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(n=>this.isPrimary&&!n?this.vi(e).next(()=>!1):!!n&&this.Ci(e).next(()=>!0))).catch(e=>{if(xo(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Bu(e).get("owner").next(n=>$.resolve(this.Fi(n)))}Mi(e){return _d(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Zt(n,"clientMetadata");return r.U().next(i=>{const s=this.Ni(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return $.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.fi)for(const n of e)this.fi.removeItem(this.Li(n.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?$.resolve(!0):Bu(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Bi(n.ownerId)){if(this.Fi(n)&&this.networkEnabled)return!0;if(!this.Fi(n)){if(!n.allowTabSynchronization)throw new ne(K.FAILED_PRECONDITION,Mm);return!1}}return!(!this.networkEnabled||!this.inForeground)||_d(e).U().next(r=>this.Ni(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new nv(e,Or.oe);return this.vi(n).next(()=>this.Mi(n))}),this.mi.close(),this.Ki()}Ni(e,n){return e.filter(r=>this.Oi(r.updateTimeMs,n)&&!this.Bi(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>_d(e).U().next(n=>this.Ni(n,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,n){return Cp.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new TV(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return bp.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,n,r){Q("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?wM:l===16?yM:l===15?G_:l===14?Mb:l===13?Lb:l===12?_M:l===11?Nb:void ae()}(this.Ti);let o;return this.mi.runTransaction(e,i,s,a=>(o=new nv(a,this.$r?this.$r.next():Or.oe),n==="readwrite-primary"?this.bi(o).next(l=>!!l||this.Di(o)).next(l=>{if(!l)throw Ln(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new ne(K.FAILED_PRECONDITION,kb);return r(o)}).next(l=>this.Ci(o).next(()=>l)):this.Ui(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ui(e){return Bu(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Bi(n.ownerId)&&!this.Fi(n)&&!(this.Pi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ne(K.FAILED_PRECONDITION,Mm)})}Ci(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bu(e).put("owner",n)}static p(){return co.p()}vi(e){const n=Bu(e);return n.get("owner").next(r=>this.Fi(r)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Oi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ln(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground=this.document.visibilityState==="visible")}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const n=/(?:Version|Mobile)\/1[456]/;PS()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var n;try{const r=((n=this.fi)===null||n===void 0?void 0:n.getItem(this.Li(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ln("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(e){Ln("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch{}}Li(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bu(t){return Zt(t,"owner")}function _d(t){return Zt(t,"clientMetadata")}function FV(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=Pe(),i=Pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return PS()?8:Db(Jt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new UV;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(sl()<=Ne.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),$.resolve()):(sl()<=Ne.DEBUG&&Q("QueryEngine","Query:",ol(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(sl()<=Ne.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(n))):$.resolve())}Xi(e,n){if(VE(n))return $.resolve(null);let r=Lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=lv(n,null,"F"),r=Lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pe(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,lv(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return VE(n)||i.isEqual(he.min())?$.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?$.resolve(null):(sl()<=Ne.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ol(n)),this.os(e,o,n,YL(i,-1)).next(a=>a))})}rs(e,n){let r=new st(Yb(e));return n.forEach((i,s)=>{ph(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return sl()<=Ne.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",ol(n)),this.Zi.getDocumentsMatchingQuery(e,n,dr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new It(Se),this.cs=new hs(s=>Ia(s),dh),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function VC(t,e,n,r){return new $V(t,e,n,r)}async function jC(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function zV(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,g=p.keys();let w=$.resolve();return g.forEach(E=>{w=w.next(()=>d.getEntry(l,E)).next(A=>{const R=c.docVersions.get(E);ue(R!==null),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),d.addEntry(A)))})}),w.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function FC(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function BV(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;a.push(n.Gr.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Gr.addMatchingKeys(s,d.addedDocuments,p)));let w=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(qt.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(d.resumeToken,r)),i=i.insert(p,w),function(A,R,x){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,w,d)&&a.push(n.Gr.updateTargetData(s,w))});let l=lr(),c=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(qV(s,o,e.documentUpdates).next(d=>{l=d.Is,c=d.Es})),!r.isEqual(he.min())){const d=n.Gr.getLastRemoteSnapshotVersion(s).next(p=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function qV(t,e,n){let r=Pe(),i=Pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=lr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(he.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:i}})}function HV(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function WV(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Gi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function gv(t,e,n){const r=Ee(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xo(o))throw o;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function h1(t,e,n){const r=Ee(t);let i=he.min(),s=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=Ee(l),g=p.cs.get(d);return g!==void 0?$.resolve(p.us.get(g)):p.Gr.getTargetData(c,d)}(r,o,Lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:he.min(),n?s:Pe())).next(a=>(KV(r,MM(e),a),{documents:a,ds:s})))}function KV(t,e,n){let r=t.ls.get(e)||he.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}class d1{constructor(){this.activeTargetIds=zM()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UC{constructor(){this._o=new d1,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new d1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yd=null;function Vm(){return yd===null?yd=function(){return 268435456+Math.round(2147483648*Math.random())}():yd++,"0x"+yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class XV extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=Vm(),l=this.No(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(n,l,c,i).then(d=>(Q("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Ea("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+au}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=QV[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,i){const s=Vm();return new Promise((o,a)=>{const l=new Eb;l.setWithCredentials(!0),l.listenOnce(Tb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ud.NO_ERROR:const d=l.getResponseJson();Q(In,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ud.TIMEOUT:Q(In,`RPC '${e}' ${s} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ud.HTTP_ERROR:const p=l.getStatus();if(Q(In,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const E=function(R){const x=R.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(w.status);a(new ne(E,w.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Q(In,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);Q(In,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=Vm(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bb(),a=Sb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");Q(In,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let g=!1,w=!1;const E=new YV({Eo:R=>{w?Q(In,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(Q(In,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Q(In,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Ao:()=>p.close()}),A=(R,x,T)=>{R.listen(x,I=>{try{T(I)}catch(M){setTimeout(()=>{throw M},0)}})};return A(p,Zu.EventType.OPEN,()=>{w||(Q(In,`RPC '${e}' stream ${i} transport opened.`),E.So())}),A(p,Zu.EventType.CLOSE,()=>{w||(w=!0,Q(In,`RPC '${e}' stream ${i} transport closed`),E.Do())}),A(p,Zu.EventType.ERROR,R=>{w||(w=!0,Ea(In,`RPC '${e}' stream ${i} transport errored:`,R),E.Do(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),A(p,Zu.EventType.MESSAGE,R=>{var x;if(!w){const T=R.data[0];ue(!!T);const I=T,M=(I==null?void 0:I.error)||((x=I[0])===null||x===void 0?void 0:x.error);if(M){Q(In,`RPC '${e}' stream ${i} received error:`,M);const B=M.status;let W=function(k){const O=zt[k];if(O!==void 0)return uC(O)}(B),P=M.message;W===void 0&&(W=K.INTERNAL,P="Unknown error status: "+B+" with message "+M.message),w=!0,E.Do(new ne(W,P)),p.close()}else Q(In,`RPC '${e}' stream ${i} received:`,T),E.vo(T)}}),A(a,Ib.STAT_EVENT,R=>{R.stat===ev.PROXY?Q(In,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ev.NOPROXY&&Q(In,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.bo()},0),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(){return typeof window<"u"?window:null}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return new rV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new $C(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Ln(n.toString()),Ln("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZV extends zC{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=oV(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Fn(o.readTime):he.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=hv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Mf(l)?{documents:vC(s,l)}:{query:_C(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dC(s,o.resumeToken);const c=uv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=Xl(s,o.snapshotVersion.toTimestamp());const c=uv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=lV(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=hv(this.serializer),n.removeTarget=e,this.c_(n)}}class e5 extends zC{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return ue(!!e.streamToken),this.lastStreamToken=e.streamToken,ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=aV(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=hv(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ff(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,cv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(K.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,cv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class n5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Ln(n),this.C_=!1):Q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Da(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ee(l);c.k_.add(4),await gh(c),c.K_.set("Unknown"),c.k_.delete(4),await Pp(c)}(this))})}),this.K_=new n5(r,i)}}async function Pp(t){if(Da(t))for(const e of t.q_)await e(!0)}async function gh(t){for(const e of t.q_)await e(!1)}function BC(t,e){const n=Ee(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),my(n)?py(n):uu(n).s_()&&fy(n,e))}function dy(t,e){const n=Ee(t),r=uu(n);n.B_.delete(e),r.s_()&&qC(n,e),n.B_.size===0&&(r.s_()?r.a_():Da(n)&&n.K_.set("Unknown"))}function fy(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uu(t).V_(e)}function qC(t,e){t.U_.xe(e),uu(t).m_(e)}function py(t){t.U_=new ZM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),uu(t).start(),t.K_.F_()}function my(t){return Da(t)&&!uu(t).i_()&&t.B_.size>0}function Da(t){return Ee(t).k_.size===0}function HC(t){t.U_=void 0}async function i5(t){t.K_.set("Online")}async function s5(t){t.B_.forEach((e,n)=>{fy(t,e)})}async function o5(t,e){HC(t),my(t)?(t.K_.O_(e),py(t)):t.K_.set("Unknown")}async function a5(t,e,n){if(t.K_.set("Online"),e instanceof hC&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qf(t,r)}else if(e instanceof Kd?t.U_.$e(e):e instanceof cC?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(he.min()))try{const r=await FC(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.B_.get(c);d&&s.B_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.B_.get(l);if(!d)return;s.B_.set(l,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),qC(s,l);const p=new Gi(d.target,l,c,d.sequenceNumber);fy(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await qf(t,r)}}async function qf(t,e,n){if(!xo(e))throw e;t.k_.add(1),await gh(t),t.K_.set("Offline"),n||(n=()=>FC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Pp(t)})}function WC(t,e){return e().catch(n=>qf(t,n,e))}async function vh(t){const e=Ee(t),n=_o(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;l5(e);)try{const i=await HV(e.localStore,r);if(i===null){e.L_.length===0&&n.a_();break}r=i.batchId,u5(e,i)}catch(i){await qf(e,i)}KC(e)&&GC(e)}function l5(t){return Da(t)&&t.L_.length<10}function u5(t,e){t.L_.push(e);const n=_o(t);n.s_()&&n.f_&&n.g_(e.mutations)}function KC(t){return Da(t)&&!_o(t).i_()&&t.L_.length>0}function GC(t){_o(t).start()}async function c5(t){_o(t).w_()}async function h5(t){const e=_o(t);for(const n of t.L_)e.g_(n.mutations)}async function d5(t,e,n){const r=t.L_.shift(),i=ny.from(r,e,n);await WC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vh(t)}async function f5(t,e){e&&_o(t).f_&&await async function(r,i){if(function(o){return YM(o)&&o!==K.ABORTED}(i.code)){const s=r.L_.shift();_o(r).__(),await WC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await vh(r)}}(t,e),KC(t)&&GC(t)}async function p1(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Da(n);n.k_.add(3),await gh(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Pp(n)}async function p5(t,e){const n=Ee(t);e?(n.k_.delete(2),await Pp(n)):e||(n.k_.add(2),await gh(n),n.K_.set("Unknown"))}function uu(t){return t.W_||(t.W_=function(n,r,i){const s=Ee(n);return s.b_(),new ZV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:i5.bind(null,t),mo:s5.bind(null,t),po:o5.bind(null,t),R_:a5.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),my(t)?py(t):t.K_.set("Unknown")):(await t.W_.stop(),HC(t))})),t.W_}function _o(t){return t.G_||(t.G_=function(n,r,i){const s=Ee(n);return s.b_(),new e5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:c5.bind(null,t),po:f5.bind(null,t),p_:h5.bind(null,t),y_:d5.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await vh(t)):(await t.G_.stop(),t.L_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(t,e){if(Ln("AsyncQueue",`${e}: ${t}`),xo(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{static emptySet(e){return new Ol(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ec(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(){this.z_=new It(te.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ae():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Jl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Jl(e,n,Ol.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ep(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class g5{constructor(){this.queries=g1(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Ee(n),s=i.queries;i.queries=g1(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function g1(){return new hs(t=>Qb(t),Ep)}async function QC(t,e){const n=Ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new m5,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=vy(o,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&_y(n)}async function YC(t,e){const n=Ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v5(t,e){const n=Ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&_y(n)}function _5(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function _y(t){t.X_.forEach(e=>{e.next()})}var vv,v1;(v1=vv||(vv={})).na="default",v1.Cache="cache";class XC{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Jl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Jl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==vv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.key=e}}class ZC{constructor(e){this.key=e}}class y5{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=Yb(e),this.ma=new Ol(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new m1,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),w=ph(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),A=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;g&&w?g.data.isEqual(w.data)?E!==A&&(r.track({type:3,doc:w}),R=!0):this.ya(g,w)||(r.track({type:2,doc:w}),R=!0,(l&&this.Va(w,l)>0||c&&this.Va(w,c)<0)&&(a=!0)):!g&&w?(r.track({type:0,doc:w}),R=!0):g&&!w&&(r.track({type:1,doc:g}),R=!0,(l||c)&&(a=!0)),R&&(w?(o=o.add(w),s=A?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((d,p)=>function(w,E){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return A(w)-A(E)}(d.type,p.type)||this.Va(d.doc,p.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new Jl(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new m1,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pe(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new ZC(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new JC(r))}),n}va(e){this.da=e.ds,this.Ra=Pe();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Jl.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class w5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E5{constructor(e){this.key=e,this.Fa=!1}}class T5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new hs(a=>Qb(a),Ep),this.Oa=new Map,this.Na=new Set,this.La=new It(te.comparator),this.Ba=new Map,this.ka=new ly,this.qa={},this.Qa=new Map,this.Ka=Ca.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function I5(t,e,n=!0){const r=sx(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await ex(r,e,n,!0),i}async function S5(t,e){const n=sx(t);await ex(n,e,!0,!1)}async function ex(t,e,n,r){const i=await WV(t.localStore,Lr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await b5(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&BC(t.remoteStore,i),a}async function b5(t,e,n,r,i){t.Ua=(p,g,w)=>async function(A,R,x,T){let I=R.view.ga(x);I.ss&&(I=await h1(A.localStore,R.query,!1).then(({documents:P})=>R.view.ga(P,I)));const M=T&&T.targetChanges.get(R.targetId),B=T&&T.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(I,A.isPrimaryClient,M,B);return y1(A,R.targetId,W.ba),W.snapshot}(t,p,g,w);const s=await h1(t.localStore,e,!0),o=new y5(e,s.ds),a=o.ga(s.documents),l=mh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);y1(t,n,c.ba);const d=new w5(e,n,o);return t.xa.set(e,d),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function C5(t,e,n){const r=Ee(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Ep(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dy(r.remoteStore,i.targetId),_v(r,i.targetId)}).catch(Ra)):(_v(r,i.targetId),await gv(r.localStore,i.targetId,!0))}async function x5(t,e){const n=Ee(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dy(n.remoteStore,r.targetId))}async function A5(t,e,n){const r=ox(t);try{const i=await function(o,a){const l=Ee(o),c=At.now(),d=a.reduce((w,E)=>w.add(E.key),Pe());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let E=lr(),A=Pe();return l.hs.getEntries(w,d).next(R=>{E=R,E.forEach((x,T)=>{T.isValidDocument()||(A=A.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,E)).next(R=>{p=R;const x=[];for(const T of a){const I=GM(T,p.get(T.key).overlayedDocument);I!=null&&x.push(new ds(T.key,I,$b(I.value.mapValue),Vn.exists(!0)))}return l.mutationQueue.addMutationBatch(w,c,x,a)}).next(R=>{g=R;const x=R.applyToLocalDocumentSet(p,A);return l.documentOverlayCache.saveOverlays(w,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:Jb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new It(Se)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await _h(r,i.changes),await vh(r.remoteStore)}catch(i){const s=vy(i,"Failed to persist write");n.reject(s)}}async function tx(t,e){const n=Ee(t);try{const r=await BV(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?ue(o.Fa):i.removedDocuments.size>0&&(ue(o.Fa),o.Fa=!1))}),await _h(n,r,e)}catch(r){await Ra(r)}}function _1(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ee(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const g of p.J_)g.ea(a)&&(c=!0)}),c&&_y(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P5(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new It(te.comparator);o=o.insert(s,Nt.newNoDocument(s,he.min()));const a=Pe().add(s),l=new Sp(he.min(),new Map,new It(Se),o,a);await tx(r,l),r.La=r.La.remove(s),r.Ba.delete(e),yy(r)}else await gv(r.localStore,e,!1).then(()=>_v(r,e,n)).catch(Ra)}async function k5(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await zV(n.localStore,e);rx(n,r,null),nx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _h(n,i)}catch(i){await Ra(i)}}async function R5(t,e,n){const r=Ee(t);try{const i=await function(o,a){const l=Ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(ue(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);rx(r,e,n),nx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _h(r,i)}catch(i){await Ra(i)}}function nx(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function rx(t,e,n){const r=Ee(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function _v(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||ix(t,r)})}function ix(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(dy(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),yy(t))}function y1(t,e,n){for(const r of n)r instanceof JC?(t.ka.addReference(r.key,e),D5(t,r)):r instanceof ZC?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||ix(t,r.key)):ae()}function D5(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.Na.add(r),yy(t))}function yy(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new te(rt.fromString(e)),r=t.Ka.next();t.Ba.set(r,new E5(n)),t.La=t.La.insert(n,r),BC(t.remoteStore,new Gi(Lr(fh(n.path)),r,"TargetPurposeLimboResolution",Or.oe))}}async function _h(t,e,n){const r=Ee(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=hy.zi(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const d=Ee(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>$.forEach(c,g=>$.forEach(g.Wi,w=>d.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>$.forEach(g.Gi,w=>d.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!xo(p))throw p;Q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const w=d.us.get(g),E=w.snapshotVersion,A=w.withLastLimboFreeSnapshotVersion(E);d.us=d.us.insert(g,A)}}}(r.localStore,s))}async function O5(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await jC(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _h(n,r.Ts)}}function N5(t,e){const n=Ee(t),r=n.Ba.get(e);if(r&&r.Fa)return Pe().add(r.key);{let i=Pe();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function sx(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P5.bind(null,e),e.Ma.R_=v5.bind(null,e.eventManager),e.Ma.Wa=_5.bind(null,e.eventManager),e}function ox(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R5.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ap(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return VC(this.persistence,new MC,e.initialUser,this.serializer)}ja(e){return new uy(xp.ei,this.serializer)}za(e){return new UC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class L5 extends Xc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){ue(this.persistence.referenceDelegate instanceof Bf);const r=this.persistence.referenceDelegate.garbageCollector;return new RC(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new uy(r=>Bf.ei(r,n),this.serializer)}}class M5 extends Xc{constructor(e,n,r){super(),this.Za=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await ox(this.Za.syncEngine),await vh(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return VC(this.persistence,new MC,e.initialUser,this.serializer)}Ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new RC(r,e.asyncQueue,n)}Ya(e,n){const r=new eM(n,this.persistence);return new ZL(e.asyncQueue,r)}ja(e){const n=FV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new cy(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,JV(),Gd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new UC}}class Hf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O5.bind(null,this.syncEngine),await p5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new g5}()}createDatastore(e){const n=Ap(e.databaseInfo.databaseId),r=function(s){return new XV(s)}(e.databaseInfo);return function(s,o,a,l){return new t5(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new r5(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_1(this.syncEngine,n,0),function(){return f1.p()?new f1:new GV}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const p=new T5(i,s,o,a,l,c);return d&&(p.$a=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ee(i);Q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await gh(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Hf.provider={build:()=>new Hf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ln("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=xb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jm(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await jC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await j5(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>p1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>p1(e.remoteStore,i)),t._onlineComponents=e}async function j5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await jm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ea("Error using user provided cache. Falling back to memory cache: "+n),await jm(t,new Xc)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await jm(t,new L5(void 0));return t._offlineComponents}async function lx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await w1(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await w1(t,new Hf))),t._onlineComponents}function F5(t){return lx(t).then(e=>e.syncEngine)}async function yv(t){const e=await lx(t),n=e.eventManager;return n.onListen=I5.bind(null,e.syncEngine),n.onUnlisten=C5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=S5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x5.bind(null,e.syncEngine),n}function U5(t,e,n={}){const r=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new ax({next:g=>{d.eu(),o.enqueueAndForget(()=>YC(s,p));const w=g.docs.has(a);!w&&g.fromCache?c.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&l&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new XC(fh(a.path),d,{includeMetadataChanges:!0,ua:!0});return QC(s,p)}(await yv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $5(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function T1(t){if(!te.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function I1(t){if(te.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Mr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wy(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ux((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S1({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S1(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $L;switch(r.type){case"firstParty":return new HL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=E1.get(n);r&&(Q("ComponentProvider","Removing Datastore"),E1.delete(n),r.terminate())}(this),Promise.resolve()}}function z5(t,e,n,r={}){var i;const s=(t=Mr(t,kp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=hn.MOCK_USER;else{a=r2(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new hn(c)}t._authCredentials=new zL(new Cb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rp(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class ho extends Rp{constructor(e,n,r){super(e,n,fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new te(e))}withConverter(e){return new ho(this.firestore,e,this._path)}}function B5(t,e,...n){if(t=an(t),cx("collection","path",e),t instanceof kp){const r=rt.fromString(e,...n);return I1(r),new ho(t,null,r)}{if(!(t instanceof Un||t instanceof ho))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return I1(r),new ho(t.firestore,null,r)}}function Qe(t,e,...n){if(t=an(t),arguments.length===1&&(e=xb.newId()),cx("doc","path",e),t instanceof kp){const r=rt.fromString(e,...n);return T1(r),new Un(t,null,new te(r))}{if(!(t instanceof Un||t instanceof ho))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return T1(r),new Un(t.firestore,t instanceof ho?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new $C(this,"async_queue_retry"),this.fu=()=>{const r=Gd();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Xi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!xo(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ln("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=gy.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&ae()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function C1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class yo extends kp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new b1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b1(e),this._firestoreClient=void 0,await e}}}function q5(t,e,n){n||(n="(default)");const r=O_(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(zc(s,e))return i;throw new ne(K.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ne(K.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Ey(t){if(t._terminated)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hx(t),t._firestoreClient}function hx(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new TM(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ux(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new V5(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function H5(t,e){Ea("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return W5(t,Hf.provider,{build:r=>new M5(r,n.cacheSizeBytes,void 0)}),Promise.resolve()}function W5(t,e,n){if((t=Mr(t,yo))._firestoreClient||t._terminated)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new ne(K.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},hx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zl(qt.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zl(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=/^__.*__$/;class G5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new lu(e,this.data,n,this.fieldTransforms)}}class Q5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Sy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Sy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Wf(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(dx(this.Mu)&&K5.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Y5{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ap(e)}$u(e,n,r,i=!1){return new Sy({Mu:e,methodName:n,Ku:r,path:Ct.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function by(t){const e=t._freezeSettings(),n=Ap(t._databaseId);return new Y5(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fx(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);ky("Data must be an object, but it was:",o,r);const a=px(r,o);let l,c;if(s.merge)l=new ar(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const g=gx(e,p,n);if(!o.contains(g))throw new ne(K.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);e3(d,g)||d.push(g)}l=new ar(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new G5(new Mn(a),l,c)}class Cy extends yh{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cy}}class xy extends yh{_toFieldTransform(e){return new Z_(e.path,new Kl)}isEqual(e){return e instanceof xy}}class Ay extends yh{constructor(e,n){super(e),this.Wu=n}_toFieldTransform(e){const n=new Yl(e.serializer,tC(e.serializer,this.Wu));return new Z_(e.path,n)}isEqual(e){return e instanceof Ay&&this.Wu===e.Wu}}function X5(t,e,n,r){const i=t.$u(1,e,n);ky("Data must be an object, but it was:",i,r);const s=[],o=Mn.empty();Ao(r,(l,c)=>{const d=Ry(e,l,n);c=an(c);const p=i.Bu(d);if(c instanceof Cy)s.push(d);else{const g=Py(c,p);g!=null&&(s.push(d),o.set(d,g))}});const a=new ar(s);return new Q5(o,a,i.fieldTransforms)}function J5(t,e,n,r,i,s){if(t.$u(1,e,n),gx(e,r,n),s.length%2!=0)throw new ne(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`)}function Py(t,e){if(mx(t=an(t)))return ky("Unsupported field value:",e,t),px(t,e);if(t instanceof yh)return function(r,i){if(!dx(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Py(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=an(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=At.fromDate(r);return{timestampValue:Xl(i.serializer,s)}}if(r instanceof At){const s=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xl(i.serializer,s)}}if(r instanceof Ty)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zl)return{bytesValue:dC(i.serializer,r._byteString)};if(r instanceof Un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Iy)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return J_(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${wy(r)}`)}(t,e)}function px(t,e){const n={};return Vb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ao(t,(r,i)=>{const s=Py(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof Ty||t instanceof Zl||t instanceof Un||t instanceof yh||t instanceof Iy)}function ky(t,e,n){if(!mx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=wy(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function gx(t,e,n){if((e=an(e))instanceof Dp)return e._internalPath;if(typeof e=="string")return Ry(t,e);throw Wf("Field path arguments must be of type string or ",t,!1,void 0,n)}const Z5=new RegExp("[~\\*/\\[\\]]");function Ry(t,e,n){if(e.search(Z5)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dp(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function e3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_x("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t3 extends vx{data(){return super.data()}}function _x(t,e){return typeof e=="string"?Ry(t,e):e instanceof Dp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r3{convertValue(e,n="none"){switch(go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ao(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Et(o.doubleValue));return new Iy(s)}convertGeoPoint(e){return new Ty(Et(e.latitude),Et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_p(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Gc(e));default:return null}}convertTimestamp(e){const n=is(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);ue(TC(r));const i=new Ta(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||Ln(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wx extends vx{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_x("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Qd extends wx{data(e={}){return super.data(e)}}class i3{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new rc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qd(this._firestore,this._userDataWriter,r.key,r,new rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Qd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Qd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new rc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:s3(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function s3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t){t=Mr(t,Un);const e=Mr(t.firestore,yo);return U5(Ey(e),t._key).then(n=>Tx(e,t,n))}class Ex extends r3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function Kf(t,e,n){t=Mr(t,Un);const r=Mr(t.firestore,yo),i=yx(t.converter,e);return Dy(r,[fx(by(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vn.none())])}function xr(t,e,n,...r){t=Mr(t,Un);const i=Mr(t.firestore,yo),s=by(i);let o;return o=typeof(e=an(e))=="string"||e instanceof Dp?J5(s,"updateDoc",t._key,e,n,r):X5(s,"updateDoc",t._key,e),Dy(i,[o.toMutation(t._key,Vn.exists(!0))])}function o3(t,e){const n=Mr(t.firestore,yo),r=Qe(t),i=yx(t.converter,e);return Dy(n,[fx(by(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}function qu(t,...e){var n,r,i;t=an(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||C1(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(C1(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let l,c,d;if(t instanceof Un)c=Mr(t.firestore,yo),d=fh(t._key.path),l={next:p=>{e[o]&&e[o](Tx(c,t,p))},error:e[o+1],complete:e[o+2]};else{const p=Mr(t,Rp);c=Mr(p.firestore,yo),d=p._query;const g=new Ex(c);l={next:w=>{e[o]&&e[o](new i3(c,g,p,w))},error:e[o+1],complete:e[o+2]},n3(t._query)}return function(g,w,E,A){const R=new ax(A),x=new XC(w,R,E);return g.asyncQueue.enqueueAndForget(async()=>QC(await yv(g),x)),()=>{R.eu(),g.asyncQueue.enqueueAndForget(async()=>YC(await yv(g),x))}}(Ey(c),d,a,l)}function Dy(t,e){return function(r,i){const s=new Xi;return r.asyncQueue.enqueueAndForget(async()=>A5(await F5(r),i,s)),s.promise}(Ey(t),e)}function Tx(t,e,n){const r=n.docs.get(e._key),i=new Ex(t);return new wx(t,i,e._key,r,new rc(n.hasPendingWrites,n.fromCache),e.converter)}function wv(){return new xy("serverTimestamp")}function a3(t){return new Ay("increment",t)}(function(e,n=!0){(function(i){au=i})(su),$l(new va("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new yo(new BL(r.getProvider("auth-internal")),new KL(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),uo(EE,"4.7.5",e),uo(EE,"4.7.5","esm2017")})();const l3={apiKey:"AIzaSyDcGX1V06Iox4rkwOm9BW2gfC1-jj8TiSs",authDomain:"chessmatch-b38ef.firebaseapp.com",projectId:"chessmatch-b38ef",storageBucket:"chessmatch-b38ef.firebasestorage.app",messagingSenderId:"293162008011",appId:"1:293162008011:web:e605313c7055f1ce784a4e",measurementId:"G-2V8DL9QX5J"},Ix=OS(l3),Ye=VL(Ix);tb(Ye,"http://localhost:9099",{disableWarnings:!0});const He=q5(Ix,{experimentalForceLongPolling:!0});z5(He,"localhost",9090);console.log(" Usando emuladores - Auth: 9099, Firestore: 9090");H5(He).catch(t=>{t.code==="failed-precondition"?console.warn("La persistencia fall: mltiples pestaas abiertas"):t.code==="unimplemented"&&console.warn("El navegador no soporta persistencia")});function u3(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Jc="abcdefgh".split(""),Yd={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},c3={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},h3={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},d3=[7,6,5,4,3,2,1,0],f3=[0,1,2,3,4,5,6,7],x1={wP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),v.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),v.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),v.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),v.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),v.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"}),v.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),v.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[v.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),v.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),v.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),v.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Ev(t,e,n){const r=e/8,i=t==="white"?c3:h3,s=t==="white"?d3:f3,o=i[n[0]]*r+r/2,a=s[parseInt(n[1],10)-1]*r+r/2;return{x:o,y:a}}function A1(t){let e=!1;return Object.keys(Yd).forEach(n=>{t[n]!==Yd[n]&&(e=!0)}),Object.keys(t).forEach(n=>{Yd[n]!==t[n]&&(e=!0)}),e}function p3(t,e){const n={removed:{},added:{}};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n.removed[r]=t[r])}),Object.keys(e).forEach(r=>{t[r]!==e[r]&&(n.added[r]=e[r])}),n}function P1(t){return t==="start"?Yd:typeof t=="string"?m3(t):t}function m3(t){if(!g3(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),n={};let r=8;for(let i=0;i<8;i++){const s=e[i].split("");let o=0;for(let a=0;a<s.length;a++)if(s[a].search(/[1-8]/)!==-1){const l=parseInt(s[a],10);o=o+l}else{const l=Jc[o]+r;n[l]=_3(s[a]),o=o+1}r=r-1}return n}function g3(t){t=t.replace(/ .+$/,""),t=v3(t);const e=t.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function v3(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function _3(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const y3=(t,e=!0,n,r)=>{const[i,s]=N.useState([]),[o,a]=N.useState([]),[l,c]=N.useState();N.useEffect(()=>{Array.isArray(t)&&(d(),s(t==null?void 0:t.filter(E=>E[0]!==E[1])))},[t]),N.useEffect(()=>{n==null||n(o)},[o]);function d(){a([]),c(void 0)}const p=(E,A)=>{e&&c([E,A,r])},g=[...o,...i];return{arrows:g,newArrow:l,clearArrows:d,drawNewArrow:p,setArrows:a,onArrowDrawEnd:(E,A)=>{if(E===A||!e)return;let R;const x=[E,A,r];g.every(([I,M])=>!(I===E&&M===A))?R=[...o,x]:R=o.filter(([I,M])=>!(I===E&&M===A)),c(void 0),a(R)}}},Sx=N.createContext({}),fs=()=>N.useContext(Sx),w3=N.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:r=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:o="white",boardWidth:a,children:l,clearPremovesOnRightClick:c=!0,customArrows:d,customArrowColor:p="rgb(255,170,0)",customBoardStyle:g,customNotationStyle:w,customDarkSquareStyle:E={backgroundColor:"#B58863"},customDropSquareStyle:A={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:R={backgroundColor:"#F0D9B5"},customPieces:x,customPremoveDarkSquareStyle:T={backgroundColor:"#A42323"},customPremoveLightSquareStyle:I={backgroundColor:"#BD2828"},customSquare:M="div",customSquareStyles:B,dropOffBoardAction:W="snapback",id:P=0,isDraggablePiece:C=()=>!0,getPositionObject:k=()=>{},onArrowsChange:O=()=>{},onDragOverSquare:L=()=>{},onMouseOutSquare:j=()=>{},onMouseOverSquare:D=()=>{},onPieceClick:vt=()=>{},onPieceDragBegin:St=()=>{},onPieceDragEnd:Ut=()=>{},onPieceDrop:Xe=()=>!0,onPieceDropOffBoard:X=()=>{},onPromotionCheck:ce=(wt,Lt,ln)=>(ln==="wP"&&wt[1]==="7"&&Lt[1]==="8"||ln==="bP"&&wt[1]==="2"&&Lt[1]==="1")&&Math.abs(wt.charCodeAt(0)-Lt.charCodeAt(0))<=1,onPromotionPieceSelect:z=()=>!0,onSparePieceDrop:Ve=()=>!0,onSquareClick:Re=()=>{},onSquareRightClick:ze=()=>{},position:ot="start",promotionDialogVariant:kt="default",promotionToSquare:Ge=null,showBoardNotation:fe=!0,showPromotionDialog:re=!1,snapToCursor:mn=!0},gn)=>{const[wt,Lt]=N.useState(P1(ot)),[ln,Ur]=N.useState({removed:{},added:{}}),[vn,Ht]=N.useState(void 0),[ps,si]=N.useState(re&&!s),[le,me]=N.useState(null),[de,_e]=N.useState(Ge),[Oe,Je]=N.useState([]),Ue=N.useRef(Oe),[We,at]=N.useState(),[er,$r]=N.useState(Object.assign(Object.assign({},x1),x)),[Ai,ms]=N.useState(!1),[tr,Na]=N.useState(),[Pi,oi]=N.useState(!1),[cu,hu]=N.useState(null);N.useImperativeHandle(gn,()=>({clearPremoves(Be=!0){Bn(Be)}})),N.useEffect(()=>{$r(Object.assign(Object.assign({},x1),x))},[x]),N.useEffect(()=>{si(re),_e(Ge)},[Ge,re]),N.useEffect(()=>{var Be,lt,Mt;Pn();const Ze=P1(ot),mr=p3(wt,Ze),un=((Be=Object.keys(mr.added))===null||Be===void 0?void 0:Be.length)<=2?(Mt=(lt=Object.entries(mr.added))===null||lt===void 0?void 0:lt[0])===null||Mt===void 0?void 0:Mt[1][0]:void 0;if(Pi)Lt(Ze),oi(!1),i&&vs(un),tr&&clearTimeout(tr);else if(Ai)Lt(Ze),oi(!1),i&&vs(un);else{A1(Ze)&&vn!==void 0?Ht(un):A1(Ze)?Ht(void 0):Ht("b"),Ur(mr),oi(!0);const ys=setTimeout(()=>{Lt(Ze),oi(!1),i&&vs(un)},e);Na(ys)}return ms(!1),k(Ze),zr(),()=>{clearTimeout(tr)}},[ot]);const{arrows:ko,newArrow:Ro,clearArrows:zr,drawNewArrow:ai,onArrowDrawEnd:gs}=y3(d,n,O,p);function Do(Be,lt,Mt,Ze){if(Be===lt)return;if(zr(),i&&Pi||i&&(vn===Mt[0]||Ue.current.filter(un=>un.piece[0]===Mt[0]).length>0)){const un=[...Ue.current];un.push({sourceSq:Be,targetSq:lt,piece:Mt}),Ue.current=un,Je([...un]),Pn();return}if(!i&&Pi)return;const mr=Object.assign({},wt);ms(!!Ze),Ht(Mt[0]),Xe.length?Xe(Be,lt,Mt)||(Bn(),ms(!1)):(delete mr[Be],mr[lt]=Mt,Lt(mr)),Pn(),k(mr)}function Br(Be){const lt=Object.assign({},wt);delete lt[Be],Lt(lt),k(lt)}function vs(Be){if(Ue.current.length===0)return;const lt=Ue.current[0];if(lt.piece[0]!==void 0&&lt.piece[0]!==Be&&Xe.length)if(Ht(lt.piece[0]),ms(!0),Xe(lt.sourceSq,lt.targetSq,lt.piece)){const Ze=[...Ue.current];Ze.shift(),Ue.current=Ze,Je([...Ze])}else Bn()}function _s(Be,lt){if(!Ve(Be,lt))return;const Ze=Object.assign({},wt);Ze[lt]=Be,Lt(Ze),k(Ze)}function Bn(Be=!0){Be&&Ht(void 0),Ue.current=[],Je([])}function Pn(){me(null),_e(null),si(!1)}function La(Be){at(Be)}function Wt(Be){if(We){if(We===Be){at(void 0),c&&Bn(!1),ze(Be);return}}else at(void 0)}function Ma(){at(void 0)}const ki={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:i,arrows:ko,autoPromoteToQueen:s,boardOrientation:o,boardWidth:a,chessPieces:er,clearArrows:zr,clearCurrentRightClickDown:Ma,currentPosition:wt,currentRightClickDown:We,customArrowColor:p,customBoardStyle:g,customDarkSquareStyle:E,customDropSquareStyle:A,customLightSquareStyle:R,customNotationStyle:w,customPremoveDarkSquareStyle:T,customPremoveLightSquareStyle:I,customSquare:M,customSquareStyles:B,deletePieceFromSquare:Br,drawNewArrow:ai,dropOffBoardAction:W,handleSetPosition:Do,handleSparePieceDrop:_s,id:P,isDraggablePiece:C,isWaitingForAnimation:Pi,lastPieceColour:vn,lastSquareDraggedOver:cu,newArrow:Ro,onArrowDrawEnd:gs,onDragOverSquare:L,onMouseOutSquare:j,onMouseOverSquare:D,onPieceClick:vt,onPieceDragBegin:St,onPieceDragEnd:Ut,onPieceDrop:Xe,onPieceDropOffBoard:X,onPromotionCheck:ce,onPromotionPieceSelect:z,onRightClickDown:La,onRightClickUp:Wt,onSparePieceDrop:Ve,onSquareClick:Re,positionDifferences:ln,premoves:Oe,promoteFromSquare:le,promoteToSquare:de,promotionDialogVariant:kt,setLastSquareDraggedOver:hu,setPromoteFromSquare:me,setPromoteToSquare:_e,setShowPromoteDialog:si,showBoardNotation:fe,showPromoteDialog:ps,snapToCursor:mn};return v.jsx(Sx.Provider,Object.assign({value:ki},{children:l}))});function E3({row:t,col:e}){const{boardOrientation:n,boardWidth:r,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:o}=fs(),a=s.backgroundColor,l=i.backgroundColor,c=e===0,d=t===7,p=c&&d;function g(){return n==="white"?8-t:t+1}function w(){return n==="black"?Jc[7-e]:Jc[e]}function E(){return v.jsxs(v.Fragment,{children:[v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),R1(r,o))},{children:g()})),v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),k1(r,o))},{children:w()}))]})}function A(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?l:a}),k1(r,o))},{children:w()}))}function R(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:t%2===0?l:a}:{color:t%2===0?l:a}),R1(r,o))},{children:g()}))}return p?E():d?A():c?R():null}const k1=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),R1=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),bx=N.createContext({dragDropManager:void 0});function Cr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var D1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),O1=function(){return Math.random().toString(36).substring(7).split("").join(".")},N1={INIT:"@@redux/INIT"+O1(),REPLACE:"@@redux/REPLACE"+O1()};function T3(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Cx(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Cr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Cr(1));return n(Cx)(t,e)}if(typeof t!="function")throw new Error(Cr(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function d(){if(l)throw new Error(Cr(3));return s}function p(A){if(typeof A!="function")throw new Error(Cr(4));if(l)throw new Error(Cr(5));var R=!0;return c(),a.push(A),function(){if(R){if(l)throw new Error(Cr(6));R=!1,c();var T=a.indexOf(A);a.splice(T,1),o=null}}}function g(A){if(!T3(A))throw new Error(Cr(7));if(typeof A.type>"u")throw new Error(Cr(8));if(l)throw new Error(Cr(9));try{l=!0,s=i(s,A)}finally{l=!1}for(var R=o=a,x=0;x<R.length;x++){var T=R[x];T()}return A}function w(A){if(typeof A!="function")throw new Error(Cr(10));i=A,g({type:N1.REPLACE})}function E(){var A,R=p;return A={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(Cr(11));function I(){T.next&&T.next(d())}I();var M=R(I);return{unsubscribe:M}}},A[D1]=function(){return this},A}return g({type:N1.INIT}),r={dispatch:g,subscribe:p,getState:d,replaceReducer:w},r[D1]=E,r}function be(t,e,...n){if(I3()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function I3(){return typeof process<"u"&&!0}function S3(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function b3(t,e){return t.filter(n=>n!==e)}function xx(t){return typeof t=="object"}function C3(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function x3(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Oy="dnd-core/INIT_COORDS",Op="dnd-core/BEGIN_DRAG",Ny="dnd-core/PUBLISH_DRAG_SOURCE",Np="dnd-core/HOVER",Lp="dnd-core/DROP",Mp="dnd-core/END_DRAG";function L1(t,e){return{type:Oy,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const A3={type:Oy,payload:{clientOffset:null,sourceClientOffset:null}};function P3(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch(L1(s)),k3(n,a,l);const c=O3(n,a);if(c==null){t.dispatch(A3);return}let d=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");R3(o),d=o(c)}t.dispatch(L1(s,d));const g=l.getSource(c).beginDrag(a,c);if(g==null)return;D3(g),l.pinSource(c);const w=l.getSourceType(c);return{type:Op,payload:{itemType:w,item:g,sourceId:c,clientOffset:s||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function k3(t,e,n){be(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){be(n.getSource(r),"Expected sourceIds to be registered.")})}function R3(t){be(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function D3(t){be(xx(t),"Item must be an object.")}function O3(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function N3(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){N3(t,i,n[i])})}return t}function M3(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();V3(r),U3(r).forEach((o,a)=>{const l=j3(o,a,i,r),c={type:Lp,payload:{dropResult:L3({},n,l)}};t.dispatch(c)})}}function V3(t){be(t.isDragging(),"Cannot call drop while not dragging."),be(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function j3(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return F3(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function F3(t){be(typeof t>"u"||xx(t),"Drop result must either be an object or undefined.")}function U3(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function $3(t){return function(){const n=t.getMonitor(),r=t.getRegistry();z3(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Mp}}}function z3(t){be(t.isDragging(),"Cannot call endDrag while not dragging.")}function Tv(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function B3(t){return function(n,{clientOffset:r}={}){q3(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return W3(i,o,a),H3(i,s,o),K3(i,s,o),{type:Np,payload:{targetIds:i,clientOffset:r||null}}}}function q3(t){be(Array.isArray(t),"Expected targetIds to be an array.")}function H3(t,e,n){be(e.isDragging(),"Cannot call hover while not dragging."),be(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];be(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);be(s,"Expected targetIds to be registered.")}}function W3(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);Tv(s,n)||t.splice(r,1)}}function K3(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function G3(t){return function(){if(t.getMonitor().isDragging())return{type:Ny}}}function Q3(t){return{beginDrag:P3(t),publishDragSource:G3(t),hover:B3(t),drop:M3(t),endDrag:$3(t)}}class Y3{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=Q3(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function X3(t,e){return{x:t.x+e.x,y:t.y+e.y}}function Ax(t,e){return{x:t.x-e.x,y:t.y-e.y}}function J3(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:Ax(X3(e,r),n)}function Z3(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:Ax(e,n)}const Ec=[],Ly=[];Ec.__IS_NONE__=!0;Ly.__IS_ALL__=!0;function ej(t,e){return t===Ec?!1:t===Ly||typeof e>"u"?!0:x3(e,t).length>0}class tj{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;be(typeof e=="function","listener must be a function."),be(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!ej(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){be(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return be(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(be(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return Tv(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(be(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!Tv(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return J3(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Z3(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const M1=typeof global<"u"?global:self,Px=M1.MutationObserver||M1.WebKitMutationObserver;function kx(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function nj(t){let e=1;const n=new Px(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const rj=typeof Px=="function"?nj:kx;class ij{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=rj(this.flush),this.requestErrorThrow=kx(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class sj{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class oj{create(e){const n=this.freeTasks,r=n.length?n.pop():new sj(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const Rx=new ij,aj=new oj(Rx.registerPendingError);function lj(t){Rx.enqueueTask(aj.create(t))}const My="dnd-core/ADD_SOURCE",Vy="dnd-core/ADD_TARGET",jy="dnd-core/REMOVE_SOURCE",Vp="dnd-core/REMOVE_TARGET";function uj(t){return{type:My,payload:{sourceId:t}}}function cj(t){return{type:Vy,payload:{targetId:t}}}function hj(t){return{type:jy,payload:{sourceId:t}}}function dj(t){return{type:Vp,payload:{targetId:t}}}function fj(t){be(typeof t.canDrag=="function","Expected canDrag to be a function."),be(typeof t.beginDrag=="function","Expected beginDrag to be a function."),be(typeof t.endDrag=="function","Expected endDrag to be a function.")}function pj(t){be(typeof t.canDrop=="function","Expected canDrop to be a function."),be(typeof t.hover=="function","Expected hover to be a function."),be(typeof t.drop=="function","Expected beginDrag to be a function.")}function Iv(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Iv(n,!1));return}be(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Rr;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Rr||(Rr={}));let mj=0;function gj(){return mj++}function vj(t){const e=gj().toString();switch(t){case Rr.SOURCE:return`S${e}`;case Rr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function V1(t){switch(t[0]){case"S":return Rr.SOURCE;case"T":return Rr.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function j1(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class _j{addSource(e,n){Iv(e),fj(n);const r=this.addHandler(Rr.SOURCE,e,n);return this.store.dispatch(uj(r)),r}addTarget(e,n){Iv(e,!0),pj(n);const r=this.addHandler(Rr.TARGET,e,n);return this.store.dispatch(cj(r)),r}containsHandler(e){return j1(this.dragSources,e)||j1(this.dropTargets,e)}getSource(e,n=!1){return be(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return be(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return be(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return be(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return V1(e)===Rr.SOURCE}isTargetId(e){return V1(e)===Rr.TARGET}removeSource(e){be(this.getSource(e),"Expected an existing source."),this.store.dispatch(hj(e)),lj(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){be(this.getTarget(e),"Expected an existing target."),this.store.dispatch(dj(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);be(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){be(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=vj(e);return this.types.set(i,n),e===Rr.SOURCE?this.dragSources.set(i,r):e===Rr.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const yj=(t,e)=>t===e;function wj(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Ej(t,e,n=yj){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function Tj(t=Ec,e){switch(e.type){case Np:break;case My:case Vy:case Vp:case jy:return Ec;case Op:case Ny:case Mp:case Lp:default:return Ly}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=C3(n,r);if(!(i.length>0||!Ej(n,r)))return Ec;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function Ij(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Ij(t,i,n[i])})}return t}const F1={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function bj(t=F1,e){const{payload:n}=e;switch(e.type){case Oy:case Op:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Np:return wj(t.clientOffset,n.clientOffset)?t:Sj({},t,{clientOffset:n.clientOffset});case Mp:case Lp:return F1;default:return t}}function Cj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function il(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Cj(t,i,n[i])})}return t}const xj={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Aj(t=xj,e){const{payload:n}=e;switch(e.type){case Op:return il({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Ny:return il({},t,{isSourcePublic:!0});case Np:return il({},t,{targetIds:n.targetIds});case Vp:return t.targetIds.indexOf(n.targetId)===-1?t:il({},t,{targetIds:b3(t.targetIds,n.targetId)});case Lp:return il({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Mp:return il({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Pj(t=0,e){switch(e.type){case My:case Vy:return t+1;case jy:case Vp:return t-1;default:return t}}function kj(t=0){return t+1}function Rj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Rj(t,i,n[i])})}return t}function Oj(t={},e){return{dirtyHandlerIds:Tj(t.dirtyHandlerIds,{type:e.type,payload:Dj({},e.payload,{prevTargetIds:S3(t,"dragOperation.targetIds",[])})}),dragOffset:bj(t.dragOffset,e),refCount:Pj(t.refCount,e),dragOperation:Aj(t.dragOperation,e),stateId:kj(t.stateId)}}function Nj(t,e=void 0,n={},r=!1){const i=Lj(r),s=new tj(i,new _j(i)),o=new Y3(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function Lj(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Cx(Oj,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Mj(t,e){if(t==null)return{};var n=Vj(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let U1=0;const Xd=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var jj=N.memo(function(e){var{children:n}=e,r=Mj(e,["children"]);const[i,s]=Fj(r);return N.useEffect(()=>{if(s){const o=Dx();return++U1,()=>{--U1===0&&(o[Xd]=null)}}},[]),v.jsx(bx.Provider,{value:i,children:n})});function Fj(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Uj(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function Uj(t,e=Dx(),n,r){const i=e;return i[Xd]||(i[Xd]={dragDropManager:Nj(t,e,n,r)}),i[Xd]}function Dx(){return typeof global<"u"?global:window}var $j=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const xa=typeof window<"u"?N.useLayoutEffect:N.useEffect;function Ox(t,e,n){const[r,i]=N.useState(()=>e(t)),s=N.useCallback(()=>{const o=e(t);$j(r,o)||(i(o),n&&n())},[r,t,n]);return xa(s),[r,s]}function zj(t,e,n){const[r,i]=Ox(t,e,n);return xa(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function Nx(t,e,n){return zj(e,t||(()=>({})),()=>n.reconnect())}function Lx(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),N.useMemo(()=>typeof t=="function"?t():t,n)}function Bj(t){return N.useMemo(()=>t.hooks.dragSource(),[t])}function qj(t){return N.useMemo(()=>t.hooks.dragPreview(),[t])}let Fm=!1,Um=!1;class Hj{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){be(!Fm,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Fm=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Fm=!1}}isDragging(){if(!this.sourceId)return!1;be(!Um,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Um=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Um=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let $m=!1;class Wj{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;be(!$m,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return $m=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{$m=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Kj(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function Gj(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function Sv(t,e,n,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const c=s[l];if(!a(c))return!1;const d=t[c],p=e[c];if(i=void 0,i===!1||i===void 0&&d!==p)return!1}return!0}function bv(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Qj(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Yj(t){return(e=null,n=null)=>{if(!N.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return Qj(r),Xj(r,n?s=>t(s,n):t)}}function Mx(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=Yj(r);e[n]=()=>i}}),e}function $1(t,e){typeof t=="function"?t(e):t.current=e}function Xj(t,e){const n=t.ref;return be(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?N.cloneElement(t,{ref:r=>{$1(n,r),$1(e,r)}}):N.cloneElement(t,{ref:e})}class Jj{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Sv(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Sv(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Mx({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,bv(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,bv(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Zj{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Sv(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Mx({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,bv(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Oa(){const{dragDropManager:t}=N.useContext(bx);return be(t!=null,"Expected drag drop context"),t}function e4(t,e){const n=Oa(),r=N.useMemo(()=>new Jj(n.getBackend()),[n]);return xa(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),xa(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function t4(){const t=Oa();return N.useMemo(()=>new Hj(t),[t])}class n4{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function r4(t,e,n){const r=N.useMemo(()=>new n4(t,e,n),[e,n]);return N.useEffect(()=>{r.spec=t},[t]),r}function i4(t){return N.useMemo(()=>{const e=t.type;return be(e!=null,"spec.type must be defined"),e},[t])}function s4(t,e,n){const r=Oa(),i=r4(t,e,n),s=i4(t);xa(function(){if(s!=null){const[a,l]=Gj(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function o4(t,e){const n=Lx(t,e);be(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=t4(),i=e4(n.options,n.previewOptions);return s4(n,r,i),[Nx(n.collect,r,i),Bj(i),qj(i)]}function a4(t){const n=Oa().getMonitor(),[r,i]=Ox(n,t);return N.useEffect(()=>n.subscribeToOffsetChange(i)),N.useEffect(()=>n.subscribeToStateChange(i)),r}function l4(t){return N.useMemo(()=>t.hooks.dropTarget(),[t])}function u4(t){const e=Oa(),n=N.useMemo(()=>new Zj(e.getBackend()),[e]);return xa(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function c4(){const t=Oa();return N.useMemo(()=>new Wj(t),[t])}function h4(t){const{accept:e}=t;return N.useMemo(()=>(be(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class d4{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function f4(t,e){const n=N.useMemo(()=>new d4(t,e),[e]);return N.useEffect(()=>{n.spec=t},[t]),n}function p4(t,e,n){const r=Oa(),i=f4(t,e),s=h4(t);xa(function(){const[a,l]=Kj(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function m4(t,e){const n=Lx(t,e),r=c4(),i=u4(n.options);return p4(n,r,i),[Nx(n.collect,r,i),l4(i)]}function Vx(t){let e=null;return()=>(e==null&&(e=t()),e)}function g4(t,e){return t.filter(n=>n!==e)}function v4(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class _4{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=v4(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=g4(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class y4{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const jx="__NATIVE_FILE__",Fx="__NATIVE_URL__",Ux="__NATIVE_TEXT__",$x="__NATIVE_HTML__";var z1=Object.freeze({__proto__:null,FILE:jx,HTML:$x,TEXT:Ux,URL:Fx});function zm(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const Cv={[jx]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[$x]:{exposeProperties:{html:(t,e)=>zm(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Fx]:{exposeProperties:{urls:(t,e)=>zm(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Ux]:{exposeProperties:{text:(t,e)=>zm(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function w4(t,e){const n=Cv[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new y4(n);return r.loadDataTransfer(e),r}function Bm(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(Cv).filter(n=>{const r=Cv[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const E4=Vx(()=>/firefox/i.test(navigator.userAgent)),zx=Vx(()=>!!window.safari);class B1{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,c=o.length-1,d;for(;l<=c;){d=Math.floor(.5*(l+c));const w=n[d];if(w<e)l=d+1;else if(w>e)c=d-1;else return r[d]}a=Math.max(0,c);const p=e-n[a],g=p*p;return r[a]+i[a]*p+s[a]*g+o[a]*p*g}constructor(e,n){const{length:r}=e,i=[];for(let w=0;w<r;w++)i.push(w);i.sort((w,E)=>e[w]<e[E]?-1:1);const s=[],o=[];let a,l;for(let w=0;w<r-1;w++)a=e[w+1]-e[w],l=n[w+1]-n[w],s.push(a),o.push(l/a);const c=[o[0]];for(let w=0;w<s.length-1;w++){const E=o[w],A=o[w+1];if(E*A<=0)c.push(0);else{a=s[w];const R=s[w+1],x=a+R;c.push(3*x/((x+R)/E+(x+a)/A))}}c.push(o[o.length-1]);const d=[],p=[];let g;for(let w=0;w<c.length-1;w++){g=o[w];const E=c[w],A=1/s[w],R=E+c[w+1]-g-g;d.push((g-E-R)*A),p.push(R*A*A)}this.xs=e,this.ys=n,this.c1s=c,this.c2s=d,this.c3s=p}}const T4=1;function Bx(t){const e=t.nodeType===T4?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function wd(t){return{x:t.clientX,y:t.clientY}}function I4(t){var e;return t.nodeName==="IMG"&&(E4()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function S4(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return zx()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function b4(t,e,n,r,i){const s=I4(e),a=Bx(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:c,offsetHeight:d}=t,{anchorX:p,anchorY:g}=r,{dragPreviewWidth:w,dragPreviewHeight:E}=S4(s,e,c,d),A=()=>{let W=new B1([0,.5,1],[l.y,l.y/d*E,l.y+E-d]).interpolate(g);return zx()&&s&&(W+=(window.devicePixelRatio-1)*E),W},R=()=>new B1([0,.5,1],[l.x,l.x/c*w,l.x+w-c]).interpolate(p),{offsetX:x,offsetY:T}=i,I=x===0||x,M=T===0||T;return{x:I?x:R(),y:M?T:A()}}let C4=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function x4(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){x4(t,i,n[i])})}return t}class A4{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return q1({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return q1({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(z1).some(n=>z1[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=w4(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&Bx(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=wd(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=Bm(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const d=this.monitor.getSourceId(),p=this.sourceNodes.get(d),g=this.sourcePreviewNodes.get(d)||p;if(g){const{anchorX:w,anchorY:E,offsetX:A,offsetY:R}=this.getCurrentSourcePreviewNodeOptions(),I=b4(p,g,o,{anchorX:w,anchorY:E},{offsetX:A,offsetY:R});a.setDragImage(g,I.x,I.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=Bm(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:wd(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=wd(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else Bm(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:wd(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new C4(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new _4(this.isNodeInDocument)}}let Ed;function P4(){return Ed||(Ed=new Image,Ed.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Ed}const k4=function(e,n,r){return new A4(e,n,r)};function H1({isPremovedPiece:t=!1,piece:e,square:n,squares:r}){const{animationDuration:i,arePiecesDraggable:s,boardWidth:o,boardOrientation:a,chessPieces:l,currentPosition:c,deletePieceFromSquare:d,dropOffBoardAction:p,id:g,isDraggablePiece:w,isWaitingForAnimation:E,onPieceClick:A,onPieceDragBegin:R,onPieceDragEnd:x,onPieceDropOffBoard:T,onPromotionCheck:I,positionDifferences:M}=fs(),[B,W]=N.useState({opacity:1,zIndex:5,touchAction:"none",cursor:s&&w({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:P,isDragging:C},k,O]=o4(()=>({type:"piece",item:()=>(R(e,n),{piece:e,square:n,id:g}),end:(j,D)=>{x(e,n),!D.didDrop()&&(p==="trash"&&d(n),T==null||T(n,e))},collect:j=>({canDrag:w({piece:e,sourceSquare:n}),isDragging:!!j.isDragging()})}),[e,n,c,g]);O(P4(),{captureDraggingState:!0}),N.useEffect(()=>{W(j=>Object.assign(Object.assign({},j),{opacity:C?0:1}))},[C]),N.useEffect(()=>{var j;const D=(j=M.removed)===null||j===void 0?void 0:j[n];if(!M.added||!D)return;const vt=Object.entries(M.added).find(([St,Ut])=>Ut===D||I(n,St,D));if(E&&D&&vt&&!t){const St=n,Ut=vt[0];if(St&&Ut){const Xe=o/8;W(X=>Object.assign(Object.assign({},X),{transform:`translate(${(a==="black"?-1:1)*(Ut.charCodeAt(0)-St.charCodeAt(0))*Xe}px, ${(a==="black"?-1:1)*(Number(St[1])-Number(Ut[1]))*Xe}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[M]),N.useEffect(()=>{const{sourceSq:j}=L();j&&W(D=>Object.assign(Object.assign({},D),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[c]),N.useEffect(()=>{W(j=>Object.assign(Object.assign({},j),{cursor:s&&w({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,c,s]);function L(){return{sourceSq:r[n]}}return v.jsx("div",Object.assign({ref:s&&P?k:null,onClick:()=>A(e,n),"data-piece":e,style:B},{children:typeof l[e]=="function"?l[e]({squareWidth:o/8,isDragging:C,square:n}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:v.jsx("g",{children:l[e]})}))}))}function R4({square:t,squareColor:e,setSquares:n,squareHasPremove:r,children:i}){const s=N.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:l,clearArrows:c,currentPosition:d,currentRightClickDown:p,customBoardStyle:g,customDarkSquareStyle:w,customDropSquareStyle:E,customLightSquareStyle:A,customPremoveDarkSquareStyle:R,customPremoveLightSquareStyle:x,customSquare:T,customSquareStyles:I,drawNewArrow:M,handleSetPosition:B,handleSparePieceDrop:W,isWaitingForAnimation:P,lastPieceColour:C,lastSquareDraggedOver:k,onArrowDrawEnd:O,onDragOverSquare:L,onMouseOutSquare:j,onMouseOverSquare:D,onPieceDrop:vt,onPromotionCheck:St,onRightClickDown:Ut,onRightClickUp:Xe,onSquareClick:X,setLastSquareDraggedOver:ce,setPromoteFromSquare:z,setPromoteToSquare:Ve,setShowPromoteDialog:Re}=fs(),[{isOver:ze},ot]=m4(()=>({accept:"piece",drop:kt,collect:fe=>({isOver:!!fe.isOver()})}),[t,d,vt,P,C]);function kt(fe){if(fe.isSpare){W(fe.piece,t);return}St(fe.square,t,fe.piece)?o?B(fe.square,t,fe.piece[0]==="w"?"wQ":"bQ"):(z(fe.square),Ve(t),Re(!0)):B(fe.square,t,fe.piece,!0)}N.useEffect(()=>{if(s.current){const{x:fe,y:re}=s.current.getBoundingClientRect();n(mn=>Object.assign(Object.assign({},mn),{[t]:{x:fe,y:re}}))}},[a,l]);const Ge=Object.assign(Object.assign(Object.assign(Object.assign({},D4(t,l,g)),e==="black"?w:A),r&&(e==="black"?R:x)),ze&&E);return v.jsx("div",Object.assign({ref:ot,style:Ge,"data-square-color":e,"data-square":t,onTouchMove:fe=>{var re;const mn=fe.touches[0],gn=document.elementsFromPoint(mn.clientX,mn.clientY),wt=(re=gn==null?void 0:gn.find(Lt=>Lt.getAttribute("data-square")))===null||re===void 0?void 0:re.getAttribute("data-square");wt&&wt!==k&&(ce(wt),L(wt))},onMouseOver:fe=>{fe.buttons===2&&p&&M(p,t),!(fe.relatedTarget&&fe.currentTarget.contains(fe.relatedTarget))&&D(t)},onMouseOut:fe=>{fe.relatedTarget&&fe.currentTarget.contains(fe.relatedTarget)||j(t)},onMouseDown:fe=>{fe.button===2&&Ut(t)},onMouseUp:fe=>{fe.button===2&&(p&&O(p,t),Xe(t))},onDragEnter:()=>L(t),onClick:()=>{const fe=d[t];X(t,fe),c()},onContextMenu:fe=>{fe.preventDefault()}},{children:typeof T=="string"?v.jsx(T,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},K1(a)),W1),!r&&(I==null?void 0:I[t]))},{children:i})):v.jsx(T,Object.assign({ref:s,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},K1(a)),W1),!r&&(I==null?void 0:I[t]))},{children:i}))}))}const W1={display:"flex",justifyContent:"center"},K1=t=>({width:t/8,height:t/8}),D4=(t,e,n)=>n!=null&&n.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function O4(){const[t,e]=N.useState({}),{arePremovesAllowed:n,boardOrientation:r,boardWidth:i,currentPosition:s,id:o,premoves:a,showBoardNotation:l}=fs(),c=N.useMemo(()=>{const d=[];return n?(a.forEach((p,g)=>{const{sourceSq:w,targetSq:E,piece:A}=p,R=d.find(x=>{var T;return x.piece===A&&((T=x.premovesRoute.at(-1))===null||T===void 0?void 0:T.targetSq)===w});R?R.premovesRoute.push({sourceSq:w,targetSq:E,index:g}):d.push({piece:A,premovesRoute:[{sourceSq:w,targetSq:E,index:g}]})}),d):[]},[a]);return v.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((d,p)=>v.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((g,w)=>{const E=r==="black"?Jc[7-w]+(p+1):Jc[w]+(8-p),A=w%2===p%2?"white":"black",R=a.find(T=>T.sourceSq===E||T.targetSq===E),x=c.filter(({premovesRoute:T})=>{var I;return((I=T.at(-1))===null||I===void 0?void 0:I.targetSq)===E}).sort((T,I)=>{var M,B;return((M=I.premovesRoute.at(-1))===null||M===void 0?void 0:M.index)-((B=T.premovesRoute.at(-1))===null||B===void 0?void 0:B.index)}).at(0);return v.jsxs(R4,Object.assign({square:E,squareColor:A,setSquares:e,squareHasPremove:!!R},{children:[!R&&s[E]&&v.jsx(H1,{piece:s[E],square:E,squares:t}),x&&v.jsx(H1,{isPremovedPiece:!0,piece:x.piece,square:E,squares:t}),l&&v.jsx(E3,{row:p,col:w})]}),`${w}${p}`)})}),p.toString()))}))}const N4=()=>{const{arrows:t,newArrow:e,boardOrientation:n,boardWidth:r,customArrowColor:i}=fs(),s=[...t,e].filter(Boolean);return v.jsx("svg",Object.assign({width:r,height:r,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((o,a)=>{const[l,c,d]=o;if(l===c)return null;const p=Ev(n,r,l),g=Ev(n,r,c);let w=r/32;const E=a===t.length;t.some(I=>I[0]!==l&&I[1]===c)&&!E&&(w=r/16);const A=g.x-p.x,R=g.y-p.y,x=Math.hypot(R,A),T={x:p.x+A*(x-w)/x,y:p.y+R*(x-w)/x};return v.jsxs(N.Fragment,{children:[v.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:v.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:d??i})})),v.jsx("line",{x1:p.x,y1:p.y,x2:T.x,y2:T.y,opacity:E?"0.5":"0.65",stroke:d??i,strokeWidth:E?.9*r/40:r/40,markerEnd:`url(#arrowhead-${a})`})]},`${l}-${c}${E?"-active":""}`)})}))};function L4({option:t}){const[e,n]=N.useState(!1),{boardWidth:r,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:l,promoteFromSquare:c,promoteToSquare:d,promotionDialogVariant:p}=fs(),g=()=>{switch(t[1]){case"Q":return s.backgroundColor;case"R":return o.backgroundColor;case"N":return p==="default"?o.backgroundColor:s.backgroundColor;case"B":return p==="default"?s.backgroundColor:o.backgroundColor}};return v.jsx("div",Object.assign({onClick:()=>{l(t,c??void 0,d??void 0)&&a(c,d,t,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?g():`${g()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?v.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:r/8,isDragging:!1})})):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:r/8,height:r/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:v.jsx("g",{children:i[t]})}))}))}function M4(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:n,promoteToSquare:r}=fs(),i=(r==null?void 0:r[1])==="1"?"b":"w",s=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=Ev(t,e,r||"a8");return v.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[n]),title:"Choose promotion piece"},{children:s.map(l=>v.jsx(L4,{option:l},l))}))}const V4={whiteKing:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:v.jsx("g",{children:v.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function j4({children:t}){try{return v.jsx(v.Fragment,{children:t})}catch(e){return console.log(e),v.jsx(qx,{showError:!0})}}function qx({showError:t=!1}){return v.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[v.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:V4.whiteKing})),t&&v.jsx("h1",{children:"Something went wrong"})]}))}function F4(){const t=N.useRef(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:r,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:o}=fs();return N.useEffect(()=>{function a(l){t.current&&!t.current.contains(l.target)&&n()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?v.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:v.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},U4(e)),o)},{children:[v.jsx(O4,{}),v.jsx(N4,{}),s&&v.jsxs(v.Fragment,{children:[v.jsx("div",{onClick:()=>{i(!1),r==null||r()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),v.jsx(M4,{})]})]}))})):v.jsx(qx,{})}const U4=t=>({cursor:"default",height:t,width:t});var fo;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(fo||(fo={}));class $4{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function z4(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function B4(t,e,n,r,i){if(!i)return!1;const s=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<i.length;++o){const a=i[o];if(a&&(a.start==null||s>=a.start)&&(a.end==null||s<=a.end))return!0}return!1}const q4={Left:1},H4={Left:0};function qm(t){return t.button===void 0||t.button===H4.Left}function W4(t){return t.buttons===void 0||(t.buttons&q4.Left)===0}function Hx(t){return!!t.targetTouches}const K4=1;function G4(t){const e=t.nodeType===K4?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function Q4(t,e){if(t.targetTouches.length===1)return Gf(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return Gf(t.touches[0])}function Gf(t,e){return Hx(t)?Q4(t,e):{x:t.clientX,y:t.clientY}}const G1=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Hu={[fo.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[fo.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[fo.keyboard]:{keydown:"keydown"}};class Tc{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(be(!Tc.isSetUp,"Cannot have two Touch backends at the same time."),Tc.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Tc.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,i=!1){const s=G1?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Hu[o][n];a&&e.addEventListener(a,r,s)})}removeEventListener(e,n,r,i=!1){const s=G1?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Hu[o][n];a&&e.removeEventListener(a,r,s)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const i=s=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(s.type){case Hu.mouse.move:o={x:s.clientX,y:s.clientY};break;case Hu.touch.move:var a,l;o={x:((a=s.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((l=s.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const c=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,d=c&&n.contains(c);if(c===n||d)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&G4(s)},this.handleTopMoveStartCapture=i=>{qm(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!qm(i))return;const s=Gf(i);s&&(Hx(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!qm(i))return;const s=i.type===Hu.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,l=Gf(i,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&B4(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&z4(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const c=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(c),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const d=(o||[]).map(E=>this.targetNodes.get(E)).filter(E=>!!E),p=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,d):this.document.elementsFromPoint(l.x,l.y),g=[];for(const E in p){if(!p.hasOwnProperty(E))continue;let A=p[E];for(A!=null&&g.push(A);A;)A=A.parentElement,A&&g.indexOf(A)===-1&&g.push(A)}const w=g.filter(E=>d.indexOf(E)>-1).map(E=>this._getDropTargetId(E)).filter(E=>!!E).filter((E,A,R)=>R.indexOf(E)===A);if(a)for(const E in this.targetNodes){const A=this.targetNodes.get(E);if(c&&A&&A.contains(c)&&w.indexOf(E)===-1){w.unshift(E);break}}w.reverse(),this.actions.hover(w,{clientOffset:l})},this._getDropTargetId=i=>{const s=this.targetNodes.keys();let o=s.next();for(;o.done===!1;){const a=o.value;if(i===this.targetNodes.get(a))return a;o=s.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!W4(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new $4(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(fo.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(fo.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(fo.keyboard)}}const Y4=function(e,n={},r={}){return new Tc(e,n,r)},X4=N.createContext({isCustomDndProviderSet:!1}),J4=({children:t})=>v.jsx(v.Fragment,{children:t}),Z4=({customDndBackend:t,customDndBackendOptions:e,children:n})=>{const[r,i]=N.useState(),[s,o]=N.useState(!1),[a,l]=N.useState(!1),{isCustomDndProviderSet:c}=N.useContext(X4);N.useEffect(()=>{l("ontouchstart"in window),o(!0),i(window)},[]);const d=c?J4:jj;return s?r?v.jsx(d,Object.assign({backend:t||(a?Y4:k4),context:r,options:t?e:void 0},{children:n})):v.jsx(v.Fragment,{children:n}):null};function eF({boardContainer:t}){const{boardWidth:e,chessPieces:n,id:r,snapToCursor:i,allowDragOutsideBoard:s}=fs(),o=a4(g=>({item:g.getItem(),clientOffset:g.getClientOffset(),sourceClientOffset:g.getSourceClientOffset(),isDragging:g.isDragging()})),{isDragging:a,item:l,clientOffset:c,sourceClientOffset:d}=o,p=N.useCallback((g,w)=>{if(!g||!w)return{display:"none"};let{x:E,y:A}=i?g:w;const R=e/8/2;if(i&&(E-=R,A-=R),!s){const{left:T,top:I}=t,M=T-R,B=I-R,W=T+e-R,P=I+e-R;E=Math.max(M,Math.min(E,W)),A=Math.max(B,Math.min(A,P))}const x=`translate(${E}px, ${A}px)`;return{transform:x,WebkitTransform:x,touchAction:"none"}},[e,s,i,t]);return a&&l.id===r?v.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:v.jsx("div",Object.assign({style:p(c,d)},{children:typeof n[l.piece]=="function"?n[l.piece]({squareWidth:e/8,isDragging:!0}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:v.jsx("g",{children:n[l.piece]})}))}))})):null}const Wx=N.forwardRef((t,e)=>{const{customDndBackend:n,customDndBackendOptions:r,onBoardWidthChange:i}=t,s=u3(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=N.useState(t.boardWidth),l=N.useRef(null),c=N.useRef(null),[d,p]=N.useState({left:0,top:0}),g=N.useMemo(()=>{var w;return(w=l.current)===null||w===void 0?void 0:w.getBoundingClientRect()},[l.current]);return N.useEffect(()=>{o&&(i==null||i(o))},[o]),N.useEffect(()=>{p({left:g!=null&&g.left?g==null?void 0:g.left:0,top:g!=null&&g.top?g==null?void 0:g.top:0})},[g]),N.useEffect(()=>{var w;if(t.boardWidth===void 0&&(!((w=l.current)===null||w===void 0)&&w.offsetWidth)){const E=new ResizeObserver(()=>{var A;a((A=l.current)===null||A===void 0?void 0:A.offsetWidth)});return E.observe(l.current),()=>{E.disconnect()}}},[l.current]),v.jsx(j4,{children:v.jsxs("div",Object.assign({ref:c,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[v.jsx("div",{ref:l,style:{width:"100%"}}),v.jsx(Z4,Object.assign({customDndBackend:n,customDndBackendOptions:r},{children:o&&v.jsxs(w3,Object.assign({boardWidth:o},s,{ref:e},{children:[v.jsx(eF,{boardContainer:d}),v.jsx(F4,{})]}))}))]}))})});/**
 * @license
 * Copyright (c) 2023, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Sn="w",Ar="b",nn="p",xv="n",Jd="b",ic="r",Us="q",Qt="k",Hm="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",Gn=-1,tF={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},ye={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},Ce={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Wm={b:[16,32,17,15],w:[-16,-32,-17,-15]},Q1={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},nF=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],rF=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],iF={p:1,n:2,b:4,r:8,q:16,k:32},sF="pnbrqkPNBRQK",Y1=[xv,Jd,ic,Us],oF=7,aF=6,lF=1,uF=0,Td={[Qt]:ye.KSIDE_CASTLE,[Us]:ye.QSIDE_CASTLE},Ms={w:[{square:Ce.a1,flag:ye.QSIDE_CASTLE},{square:Ce.h1,flag:ye.KSIDE_CASTLE}],b:[{square:Ce.a8,flag:ye.QSIDE_CASTLE},{square:Ce.h8,flag:ye.KSIDE_CASTLE}]},cF={b:lF,w:aF},hF=["1-0","0-1","1/2-1/2","*"];function ha(t){return t>>4}function Zc(t){return t&15}function Kx(t){return"0123456789".indexOf(t)!==-1}function ir(t){const e=Zc(t),n=ha(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Wu(t){return t===Sn?Ar:Sn}function dF(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let a=0,l=!1;for(let c=0;c<i[o].length;c++)if(Kx(i[o][c])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(i[o][c],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][c]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of s){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function fF(t,e){const n=t.from,r=t.to,i=t.piece;let s=0,o=0,a=0;for(let l=0,c=e.length;l<c;l++){const d=e[l].from,p=e[l].to,g=e[l].piece;i===g&&n!==d&&r===p&&(s++,ha(n)===ha(d)&&o++,Zc(n)===Zc(d)&&a++)}return s>0?o>0&&a>0?ir(n):a>0?ir(n).charAt(1):ir(n).charAt(0):""}function Vs(t,e,n,r,i,s=void 0,o=ye.NORMAL){const a=ha(r);if(i===nn&&(a===oF||a===uF))for(let l=0;l<Y1.length;l++){const c=Y1[l];t.push({color:e,from:n,to:r,piece:i,captured:s,promotion:c,flags:o|ye.PROMOTION})}else t.push({color:e,from:n,to:r,piece:i,captured:s,flags:o})}function X1(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:nn:(e=e.toLowerCase(),e==="o"?Qt:e)}function Km(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function Gm(t){return t.split(" ").slice(0,4).join(" ")}class zi{constructor(e=Hm){br(this,"_board",new Array(128));br(this,"_turn",Sn);br(this,"_header",{});br(this,"_kings",{w:Gn,b:Gn});br(this,"_epSquare",-1);br(this,"_halfMoves",0);br(this,"_moveNumber",0);br(this,"_history",[]);br(this,"_comments",{});br(this,"_castling",{w:0,b:0});br(this,"_positionCount",{});this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Gn,b:Gn},this._turn=Sn,this._castling={w:0,b:0},this._epSquare=Gn,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._positionCount={},delete this._header.SetUp,delete this._header.FEN}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const a=["-","-","0","1"];e=i.concat(a.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:a,error:l}=dF(e);if(!a)throw new Error(l)}const s=i[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<s.length;a++){const l=s.charAt(a);if(l==="/")o+=8;else if(Kx(l))o+=parseInt(l,10);else{const c=l<"a"?Sn:Ar;this._put({type:l.toLowerCase(),color:c},ir(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=ye.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=ye.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=ye.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=ye.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Gn:Ce[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){var s,o;let e=0,n="";for(let a=Ce.a8;a<=Ce.h1;a++){if(this._board[a]){e>0&&(n+=e,e=0);const{color:l,type:c}=this._board[a];n+=l===Sn?c.toUpperCase():c.toLowerCase()}else e++;a+1&136&&(e>0&&(n+=e),a!==Ce.h1&&(n+="/"),e=0,a+=8)}let r="";this._castling[Sn]&ye.KSIDE_CASTLE&&(r+="K"),this._castling[Sn]&ye.QSIDE_CASTLE&&(r+="Q"),this._castling[Ar]&ye.KSIDE_CASTLE&&(r+="k"),this._castling[Ar]&ye.QSIDE_CASTLE&&(r+="q"),r=r||"-";let i="-";if(this._epSquare!==Gn){const a=this._epSquare+(this._turn===Sn?16:-16),l=[a+1,a-1];for(const c of l){if(c&136)continue;const d=this._turn;if(((s=this._board[c])==null?void 0:s.color)===d&&((o=this._board[c])==null?void 0:o.type)===nn){this._makeMove({color:d,from:c,to:this._epSquare,piece:nn,captured:nn,flags:ye.EP_CAPTURE});const p=!this._isKingAttacked(d);if(this._undoMove(),p){i=ir(this._epSquare);break}}}}return[n,this._turn,r,i,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==Hm?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(Hm)}get(e){return this._board[Ce[e]]||!1}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_put({type:e,color:n},r){if(sF.indexOf(e.toLowerCase())===-1||!(r in Ce))return!1;const i=Ce[r];if(e==Qt&&!(this._kings[n]==Gn||this._kings[n]==i))return!1;const s=this._board[i];return s&&s.type===Qt&&(this._kings[s.color]=Gn),this._board[i]={type:e,color:n},e===Qt&&(this._kings[n]=i),!0}remove(e){const n=this.get(e);return delete this._board[Ce[e]],n&&n.type===Qt&&(this._kings[n.color]=Gn),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,i,s,o,a,l,c,d,p,g,w,E;const e=((r=this._board[Ce.e1])==null?void 0:r.type)===Qt&&((i=this._board[Ce.e1])==null?void 0:i.color)===Sn,n=((s=this._board[Ce.e8])==null?void 0:s.type)===Qt&&((o=this._board[Ce.e8])==null?void 0:o.color)===Ar;(!e||((a=this._board[Ce.a1])==null?void 0:a.type)!==ic||((l=this._board[Ce.a1])==null?void 0:l.color)!==Sn)&&(this._castling.w&=~ye.QSIDE_CASTLE),(!e||((c=this._board[Ce.h1])==null?void 0:c.type)!==ic||((d=this._board[Ce.h1])==null?void 0:d.color)!==Sn)&&(this._castling.w&=~ye.KSIDE_CASTLE),(!n||((p=this._board[Ce.a8])==null?void 0:p.type)!==ic||((g=this._board[Ce.a8])==null?void 0:g.color)!==Ar)&&(this._castling.b&=~ye.QSIDE_CASTLE),(!n||((w=this._board[Ce.h8])==null?void 0:w.type)!==ic||((E=this._board[Ce.h8])==null?void 0:E.color)!==Ar)&&(this._castling.b&=~ye.KSIDE_CASTLE)}_updateEnPassantSquare(){var s,o;if(this._epSquare===Gn)return;const e=this._epSquare+(this._turn===Sn?-16:16),n=this._epSquare+(this._turn===Sn?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((s=this._board[n])==null?void 0:s.color)!==Wu(this._turn)||((o=this._board[n])==null?void 0:o.type)!==nn){this._epSquare=Gn;return}const i=a=>{var l,c;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((c=this._board[a])==null?void 0:c.type)===nn};r.some(i)||(this._epSquare=Gn)}_attacked(e,n){for(let r=Ce.a8;r<=Ce.h1;r++){if(r&136){r+=7;continue}if(this._board[r]===void 0||this._board[r].color!==e)continue;const i=this._board[r],s=r-n;if(s===0)continue;const o=s+119;if(nF[o]&iF[i.type]){if(i.type===nn){if(s>0){if(i.color===Sn)return!0}else if(i.color===Ar)return!0;continue}if(i.type==="n"||i.type==="k")return!0;const a=rF[o];let l=r+a,c=!1;for(;l!==n;){if(this._board[l]!=null){c=!0;break}l+=a}if(!c)return!0}}return!1}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Wu(e),n)}isAttacked(e,n){return this._attacked(n,Ce[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,i=0;for(let s=Ce.a8;s<=Ce.h1;s++){if(i=(i+1)%2,s&136){s+=7;continue}const o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===Jd&&n.push(i),r++)}if(r===2)return!0;if(r===3&&(e[Jd]===1||e[xv]===1))return!0;if(r===e[Jd]+2){let s=0;const o=n.length;for(let a=0;a<o;a++)s+=n[a];if(s===0||s===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const i=this._moves({square:n,piece:r});return e?i.map(s=>this._makePretty(s)):i.map(s=>this._moveToSan(s,i))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var w;const i=r?r.toLowerCase():void 0,s=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=Wu(a);let c=Ce.a8,d=Ce.h1,p=!1;if(i)if(i in Ce)c=d=Ce[i],p=!0;else return[];for(let E=c;E<=d;E++){if(E&136){E+=7;continue}if(!this._board[E]||this._board[E].color===l)continue;const{type:A}=this._board[E];let R;if(A===nn){if(s&&s!==A)continue;R=E+Wm[a][0],this._board[R]||(Vs(o,a,E,R,nn),R=E+Wm[a][1],cF[a]===ha(E)&&!this._board[R]&&Vs(o,a,E,R,nn,void 0,ye.BIG_PAWN));for(let x=2;x<4;x++)R=E+Wm[a][x],!(R&136)&&(((w=this._board[R])==null?void 0:w.color)===l?Vs(o,a,E,R,nn,this._board[R].type,ye.CAPTURE):R===this._epSquare&&Vs(o,a,E,R,nn,nn,ye.EP_CAPTURE))}else{if(s&&s!==A)continue;for(let x=0,T=Q1[A].length;x<T;x++){const I=Q1[A][x];for(R=E;R+=I,!(R&136);){if(!this._board[R])Vs(o,a,E,R,A);else{if(this._board[R].color===a)break;Vs(o,a,E,R,A,this._board[R].type,ye.CAPTURE);break}if(A===xv||A===Qt)break}}}}if((s===void 0||s===Qt)&&(!p||d===this._kings[a])){if(this._castling[a]&ye.KSIDE_CASTLE){const E=this._kings[a],A=E+2;!this._board[E+1]&&!this._board[A]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,E+1)&&!this._attacked(l,A)&&Vs(o,a,this._kings[a],A,Qt,void 0,ye.KSIDE_CASTLE)}if(this._castling[a]&ye.QSIDE_CASTLE){const E=this._kings[a],A=E-2;!this._board[E-1]&&!this._board[E-2]&&!this._board[E-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,E-1)&&!this._attacked(l,A)&&Vs(o,a,this._kings[a],A,Qt,void 0,ye.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const g=[];for(let E=0,A=o.length;E<A;E++)this._makeMove(o[E]),this._isKingAttacked(a)||g.push(o[E]),this._undoMove();return g}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(typeof e=="object"){const s=this._moves();for(let o=0,a=s.length;o<a;o++)if(e.from===ir(s[o].from)&&e.to===ir(s[o].to)&&(!("promotion"in s[o])||e.promotion===s[o].promotion)){r=s[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);const i=this._makePretty(r);return this._makeMove(r),this._incPositionCount(i.after),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,r=Wu(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&ye.EP_CAPTURE&&(this._turn===Ar?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===Qt){if(this._kings[n]=e.to,e.flags&ye.KSIDE_CASTLE){const i=e.to-1,s=e.to+1;this._board[i]=this._board[s],delete this._board[s]}else if(e.flags&ye.QSIDE_CASTLE){const i=e.to+1,s=e.to-2;this._board[i]=this._board[s],delete this._board[s]}this._castling[n]=0}if(this._castling[n]){for(let i=0,s=Ms[n].length;i<s;i++)if(e.from===Ms[n][i].square&&this._castling[n]&Ms[n][i].flag){this._castling[n]^=Ms[n][i].flag;break}}if(this._castling[r]){for(let i=0,s=Ms[r].length;i<s;i++)if(e.to===Ms[r][i].square&&this._castling[r]&Ms[r][i].flag){this._castling[r]^=Ms[r][i].flag;break}}e.flags&ye.BIG_PAWN?n===Ar?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=Gn,e.piece===nn?this._halfMoves=0:e.flags&(ye.CAPTURE|ye.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===Ar&&this._moveNumber++,this._turn=r}undo(){const e=this._undoMove();if(e){const n=this._makePretty(e);return this._decPositionCount(n.after),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const r=this._turn,i=Wu(r);if(this._board[n.from]=this._board[n.to],this._board[n.from].type=n.piece,delete this._board[n.to],n.captured)if(n.flags&ye.EP_CAPTURE){let s;r===Ar?s=n.to-16:s=n.to+16,this._board[s]={type:nn,color:i}}else this._board[n.to]={type:n.captured,color:i};if(n.flags&(ye.KSIDE_CASTLE|ye.QSIDE_CASTLE)){let s,o;n.flags&ye.KSIDE_CASTLE?(s=n.to+1,o=n.to-1):(s=n.to-2,o=n.to+1),this._board[s]=this._board[o],delete this._board[o]}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let i=!1;for(const g in this._header)r.push("["+g+' "'+this._header[g]+'"]'+e),i=!0;i&&this._history.length&&r.push(e);const s=g=>{const w=this._comments[this.fen()];if(typeof w<"u"){const E=g.length>0?" ":"";g=`${g}${E}{${w}}`}return g},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(s(""));o.length>0;){l=s(l);const g=o.pop();if(!g)break;if(!this._history.length&&g.color==="b"){const w=`${this._moveNumber}. ...`;l=l?`${l} ${w}`:w}else g.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(g,this._moves({legal:!0})),this._makeMove(g)}if(l.length&&a.push(s(l)),typeof this._header.Result<"u"&&a.push(this._header.Result),n===0)return r.join("")+a.join(" ");const c=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},d=function(g,w){for(const E of w.split(" "))if(E){if(g+E.length>n){for(;c();)g--;r.push(e),g=0}r.push(E),g+=E.length,r.push(" "),g++}return c()&&g--,g};let p=0;for(let g=0;g<a.length;g++){if(p+a[g].length>n&&a[g].includes("{")){p=d(p,a[g]);continue}p+a[g].length>n&&g!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),p=0):g!==0&&(r.push(" "),p++),r.push(a[g]),p+=a[g].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){function i(I){return I.replace(/\\/g,"\\")}function s(I){const M={},B=I.split(new RegExp(i(r)));let W="",P="";for(let C=0;C<B.length;C++){const k=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;W=B[C].replace(k,"$1"),P=B[C].replace(k,"$2"),W.trim().length>0&&(M[W]=P)}return M}e=e.trim();const a=new RegExp("^(\\[((?:"+i(r)+")|.)*\\])((?:\\s*"+i(r)+"){2}|(?:\\s*"+i(r)+")*$)").exec(e),l=a&&a.length>=2?a[1]:"";this.reset();const c=s(l);let d="";for(const I in c)I.toLowerCase()==="fen"&&(d=c[I]),this.header(I,c[I]);if(!n)d&&this.load(d,{preserveHeaders:!0});else if(c.SetUp==="1"){if(!("FEN"in c))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(c.FEN,{preserveHeaders:!0})}function p(I){return Array.from(I).map(function(M){return M.charCodeAt(0)<128?M.charCodeAt(0).toString(16):encodeURIComponent(M).replace(/%/g,"").toLowerCase()}).join("")}function g(I){return I.length==0?"":decodeURIComponent("%"+(I.match(/.{1,2}/g)||[]).join("%"))}const w=function(I){return I=I.replace(new RegExp(i(r),"g")," "),`{${p(I.slice(1,I.length-1))}}`},E=function(I){if(I.startsWith("{")&&I.endsWith("}"))return g(I.slice(1,I.length-1))};let A=e.replace(l,"").replace(new RegExp(`({[^}]*})+?|;([^${i(r)}]*)`,"g"),function(I,M,B){return M!==void 0?w(M):" "+w(`{${B.slice(1)}}`)}).replace(new RegExp(i(r),"g")," ");const R=/(\([^()]+\))+?/g;for(;R.test(A);)A=A.replace(R,"");A=A.replace(/\d+\.(\.\.)?/g,""),A=A.replace(/\.\.\./g,""),A=A.replace(/\$\d+/g,"");let x=A.trim().split(new RegExp(/\s+/));x=x.filter(I=>I!=="");let T="";for(let I=0;I<x.length;I++){const M=E(x[I]);if(M!==void 0){this._comments[this.fen()]=M;continue}const B=this._moveFromSan(x[I],n);if(B==null)if(hF.indexOf(x[I])>-1)T=x[I];else throw new Error(`Invalid move in PGN: ${x[I]}`);else T="",this._makeMove(B),this._incPositionCount(this.fen())}T&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",T)}_moveToSan(e,n){let r="";if(e.flags&ye.KSIDE_CASTLE)r="O-O";else if(e.flags&ye.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==nn){const i=fF(e,n);r+=e.piece.toUpperCase()+i}e.flags&(ye.CAPTURE|ye.EP_CAPTURE)&&(e.piece===nn&&(r+=ir(e.from)[0]),r+="x"),r+=ir(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){const r=Km(e);let i=X1(r),s=this._moves({legal:!0,piece:i});for(let g=0,w=s.length;g<w;g++)if(r===Km(this._moveToSan(s[g],s)))return s[g];if(n)return null;let o,a,l,c,d,p=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],c=a[3],d=a[4],l.length==1&&(p=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],c=a[3],d=a[4],l.length==1&&(p=!0))),i=X1(r),s=this._moves({legal:!0,piece:o||i}),!c)return null;for(let g=0,w=s.length;g<w;g++)if(l){if((!o||o.toLowerCase()==s[g].piece)&&Ce[l]==s[g].from&&Ce[c]==s[g].to&&(!d||d.toLowerCase()==s[g].promotion))return s[g];if(p){const E=ir(s[g].from);if((!o||o.toLowerCase()==s[g].piece)&&Ce[c]==s[g].to&&(l==E[0]||l==E[1])&&(!d||d.toLowerCase()==s[g].promotion))return s[g]}}else if(r===Km(this._moveToSan(s[g],s)).replace("x",""))return s[g];return null}ascii(){let e=`   +------------------------+
`;for(let n=Ce.a8;n<=Ce.h1;n++){if(Zc(n)===0&&(e+=" "+"87654321"[ha(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===Sn?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const i=this._turn;for(let s=0,o=n.length;s<o;s++)this._makeMove(n[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:n,piece:r,from:i,to:s,flags:o,captured:a,promotion:l}=e;let c="";for(const w in ye)ye[w]&o&&(c+=tF[w]);const d=ir(i),p=ir(s),g={color:n,piece:r,from:d,to:p,san:this._moveToSan(e,this._moves({legal:!0})),flags:c,lan:d+p,before:this.fen(),after:""};return this._makeMove(e),g.after=this.fen(),this._undoMove(),a&&(g.captured=a),l&&(g.promotion=l,g.lan+=l),g}turn(){return this._turn}board(){const e=[];let n=[];for(let r=Ce.a8;r<=Ce.h1;r++)this._board[r]==null?n.push(null):n.push({square:ir(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in Ce){const n=Ce[e];return(ha(n)+Zc(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){const n=Gm(e);return this._positionCount[n]||0}_incPositionCount(e){const n=Gm(e);this._positionCount[n]===void 0&&(this._positionCount[n]=0),this._positionCount[n]+=1}_decPositionCount(e){const n=Gm(e);this._positionCount[n]===1?delete this._positionCount[n]:this._positionCount[n]-=1}_pruneComments(){const e=[],n={},r=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[Qt,Us])n[i]!==void 0&&(n[i]?this._castling[e]|=Td[i]:this._castling[e]&=~Td[i]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[Qt]===void 0||n[Qt]===r[Qt])&&(n[Us]===void 0||n[Us]===r[Us])}getCastlingRights(e){return{[Qt]:(this._castling[e]&Td[Qt])!==0,[Us]:(this._castling[e]&Td[Us])!==0}}moveNumber(){return this._moveNumber}}const Tl=({timeInMinutes:t,increment:e,isActive:n,color:r,onTimeout:i,onTimeUpdate:s,remainingTime:o})=>{const[a,l]=N.useState(o||t*60),c=N.useRef(null);N.useEffect(()=>{l(o||t*60),c.current&&clearInterval(c.current)},[o,t]),N.useEffect(()=>(n&&a>0?c.current=setInterval(()=>{l(p=>{const g=Math.max(0,p-1);return s(g),g})},1e3):c.current&&clearInterval(c.current),()=>{c.current&&clearInterval(c.current)}),[n,a,s]),N.useEffect(()=>{a<=0&&(c.current&&clearInterval(c.current),i())},[a,i]);const d=p=>{const g=Math.floor(p/60),w=p%60;return`${g}:${w.toString().padStart(2,"0")}`};return v.jsx("div",{className:`game-clock ${r} ${n?"active":""}`,children:d(a)})},sc=({isPuzzle:t=!1,timeControl:e})=>{const[n,r]=N.useState(null),[i,s]=N.useState(null),[o,a]=N.useState("Cargando puzzle..."),[l,c]=N.useState(0),[d,p]=N.useState("white");N.useEffect(()=>{let E=!0,A=!1;return t&&(async()=>{try{if(n||i||A)return;A=!0;const x=await fetch("https://lichess.org/api/puzzle/daily");if(!x.ok)throw new Error("Error al cargar el puzzle");const T=await x.json(),I=new zi;try{I.loadPgn(T.game.pgn);const M=I.history();console.log("Movimientos totales:",M.length),console.log("Initial Ply:",T.puzzle.initialPly),console.log("Moves:",M),I.reset();for(let P=0;P<T.puzzle.initialPly;P++)I.move(M[P]);const B=I.fen(),W=M[T.puzzle.initialPly];if(console.log("Siguiente movimiento:",W),!W){console.error("No se encontr el siguiente movimiento"),E&&a("Error al cargar el puzzle. Intenta recargar la pgina.");return}E&&(s({fen:B,moves:T.puzzle.solution,rating:T.puzzle.rating,themes:T.puzzle.themes}),r(new zi(B)),a("Observa el movimiento del oponente..."),setTimeout(()=>{if(!E)return;const P=new zi(B);try{if(console.log("Intentando mover:",W),!P.move(W))throw new Error(`Movimiento invlido: ${W}`);r(P),a("Tu turno - Encuentra el mejor movimiento")}catch(C){console.error("Error al realizar el movimiento:",C),a("Error al cargar el puzzle. Intenta recargar la pgina.")}},1e3))}catch(M){console.error("Error al procesar el puzzle:",M),E&&a("Error al cargar el puzzle. Intenta recargar la pgina.")}}catch(x){console.error("Error al obtener el puzzle:",x),E&&a("Error al cargar el puzzle. Intenta recargar la pgina.")}})(),()=>{E=!1}},[t]);function g(E){return E.includes("O-O-O")?{from:"e1",to:"c1"}:E.includes("O-O")?{from:"e1",to:"g1"}:{from:E.slice(0,2),to:E.slice(2,4),promotion:E.length===5?E[4]:void 0}}function w(E){if(!n||!i)return!1;try{const A=new zi(n.fen());if(A.move(E)){const x=i.moves[l],T=g(x),I=A.fen().split(" ")[0],M=new zi(n.fen()),W=M.move(T)?M.fen().split(" ")[0]:"";if(I===W)return r(A),l===i.moves.length-1?(a("Felicidades!  Has resuelto el puzzle correctamente."),!0):(c(l+1),setTimeout(()=>{if(l+1<i.moves.length){const P=i.moves[l+1],C=P.slice(0,2),k=P.slice(2,4);A.move({from:C,to:k,promotion:P.length===5?P[4]:void 0})&&(r(new zi(A.fen())),c(l+2),a("Tu turno"))}},500),!0)}return a("Movimiento incorrecto. Intenta de nuevo."),!1}catch(A){return console.error("Error en makeAMove:",A),!1}}return v.jsxs("div",{className:"board-container",children:[e&&v.jsx(Tl,{timeInMinutes:e.time,increment:e.increment,isActive:d==="black",color:"black",onTimeout:async()=>{},onTimeUpdate:E=>{},remainingTime:e.time*60}),n&&v.jsx(Wx,{position:n.fen(),boardOrientation:"white",onPieceDrop:(E,A)=>{const R=w({from:E,to:A,promotion:"q"});return R&&p(n.turn()==="w"?"white":"black"),R}}),e&&v.jsx(Tl,{timeInMinutes:e.time,increment:e.increment,isActive:d==="white",color:"white",onTimeout:async()=>{},onTimeUpdate:E=>{},remainingTime:e.time*60}),o&&v.jsx("div",{className:"puzzle-message",style:{marginTop:"1rem",padding:"1rem",backgroundColor:i&&l===i.moves.length-1?"#e6ffe6":"#fff",border:"1px solid #ccc",borderRadius:"4px"},children:o})]})};class Il{constructor(){this.cache=new Map}static getInstance(){return Il.instance||(Il.instance=new Il),Il.instance}set(e,n,r=5*60*1e3){this.cache.set(e,{value:n,timestamp:Date.now(),expiresIn:r})}get(e){const n=this.cache.get(e);return n?Date.now()-n.timestamp>n.expiresIn?(this.cache.delete(e),null):n.value:null}clear(){this.cache.clear()}}const Gx=N.createContext({currentUser:null,userData:null,loading:!0,refreshUserData:async()=>{}}),pF=()=>N.useContext(Gx),mF=({children:t})=>{const[e,n]=N.useState(null),[r,i]=N.useState(null),[s,o]=N.useState(!0),a=Il.getInstance(),l=async p=>{const g=a.get(`userData_${p}`);if(g)return g;const w=await Ei(Qe(He,"users",p));if(w.exists()){const E=w.data();return a.set(`userData_${p}`,E,5*60*1e3),E}return null},c=async()=>{if(e){const p=await l(e.uid);i(p)}};N.useEffect(()=>{const p=Ye.onAuthStateChanged(async g=>{if(n(g),g){const w=await l(g.uid);i(w)}else i(null),a.clear();o(!1)});return()=>p()},[]);const d={currentUser:e,userData:r,loading:s,refreshUserData:c};return v.jsx(Gx.Provider,{value:d,children:!s&&t})},wh=N.memo(()=>{console.log("Renderizando Header");const{currentUser:t}=pF(),e=async()=>{try{await xN(Ye)}catch(n){console.error("Error al cerrar sesin:",n)}};return v.jsxs("header",{className:"main-header",children:[v.jsxs(cr,{to:"/",className:"logo",children:[v.jsx("i",{className:"fas fa-chess-knight logo-icon"}),v.jsxs("div",{className:"logo-text",children:[v.jsx("span",{className:"logo-chess",children:"CHESS"}),v.jsx("span",{className:"logo-match",children:"MATCH"})]})]}),v.jsx("div",{className:"auth-buttons",children:t?v.jsxs("button",{onClick:e,className:"btn-logout",children:[v.jsx("i",{className:"fas fa-sign-out-alt"}),"Cerrar sesin"]}):v.jsxs(v.Fragment,{children:[v.jsx(cr,{to:"/register",className:"btn-signup",children:"Registrarse"}),v.jsx(cr,{to:"/login",className:"btn-login",children:"Iniciar sesin"})]})})]})}),J1=()=>(N.useEffect(()=>{console.log("Home montado");const t=document.querySelectorAll(".game-button");console.log("Botones encontrados:",t.length)},[]),console.log("Renderizando componente Home"),console.log("Estilos cargados:",document.styleSheets),v.jsxs("div",{className:"page-container",children:[v.jsx(wh,{}),v.jsx("div",{className:"home-container",children:v.jsxs("div",{className:"game-options",children:[v.jsx("h1",{children:"Play Chess Online on the #1 Site!"}),v.jsxs("div",{className:"stats",children:[v.jsx("span",{className:"games-today",children:"13,562,492 Games Today"}),v.jsx("span",{className:"playing-now",children:"118,172 Playing Now"})]}),v.jsxs("div",{className:"game-buttons",children:[v.jsxs(cr,{to:"/play/online",className:"game-button primary",children:[v.jsx("span",{className:"icon",children:""}),v.jsxs("div",{className:"button-content",children:[v.jsx("h3",{children:"Play Online"}),v.jsx("p",{children:"Play with someone at your level"})]})]}),v.jsxs(cr,{to:"/play/computer",className:"game-button",children:[v.jsx("span",{className:"icon",children:""}),v.jsxs("div",{className:"button-content",children:[v.jsx("h3",{children:"Play Computer"}),v.jsx("p",{children:"Play vs customizable training bots"})]})]})]}),v.jsxs("div",{className:"puzzle-section",children:[v.jsx("h2",{children:"Solve Chess Puzzles"}),v.jsx("div",{className:"mini-board",children:v.jsx(sc,{isPuzzle:!0})}),v.jsx("div",{className:"quote",children:v.jsxs("p",{children:['"En Ajedrez, el vencedor es quien hace la siguiente jugada al ltimo error." ',v.jsx("br",{})," GM S. Tartakower"]})}),v.jsx("button",{className:"game-button",children:"Solve Puzzles"})]}),v.jsx("button",{className:"game-button chess-today",children:"Chess Today"})]})})]}));let gF={data:""},vF=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||gF,_F=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yF=/\/\*[^]*?\*\/|  +/g,Z1=/\n+/g,Ks=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?Ks(o,s):s+"{"+Ks(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=Ks(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ks.p?Ks.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Fi={},Qx=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+Qx(t[n]);return e}return t},wF=(t,e,n,r,i)=>{let s=Qx(t),o=Fi[s]||(Fi[s]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(s));if(!Fi[o]){let l=s!==t?t:(c=>{let d,p,g=[{}];for(;d=_F.exec(c.replace(yF,""));)d[4]?g.shift():d[3]?(p=d[3].replace(Z1," ").trim(),g.unshift(g[0][p]=g[0][p]||{})):g[0][d[1]]=d[2].replace(Z1," ").trim();return g[0]})(t);Fi[o]=Ks(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Fi.g?Fi.g:null;return n&&(Fi.g=Fi[o]),((l,c,d,p)=>{p?c.data=c.data.replace(p,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Fi[o],e,r,a),o},EF=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Ks(a,""):a===!1?"":a}return r+i+(o??"")},"");function jp(t){let e=this||{},n=t.call?t(e.p):t;return wF(n.unshift?n.raw?EF(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,vF(e.target),e.g,e.o,e.k)}let Yx,Av,Pv;jp.bind({g:1});let os=jp.bind({k:1});function TF(t,e,n,r){Ks.p=e,Yx=t,Av=n,Pv=r}function Po(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:Av&&Av()},a),n.o=/ *go\d+/.test(l),a.className=jp.apply(n,r)+(l?" "+l:"");let c=t;return t[0]&&(c=a.as||t,delete a.as),Pv&&c[0]&&Pv(a),Yx(c,a)}return i}}var IF=t=>typeof t=="function",kv=(t,e)=>IF(t)?t(e):t,SF=(()=>{let t=0;return()=>(++t).toString()})(),bF=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),CF=20,Zd=new Map,xF=1e3,eT=t=>{if(Zd.has(t))return;let e=setTimeout(()=>{Zd.delete(t),Fp({type:4,toastId:t})},xF);Zd.set(t,e)},AF=t=>{let e=Zd.get(t);e&&clearTimeout(e)},Rv=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,CF)};case 1:return e.toast.id&&AF(e.toast.id),{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return t.toasts.find(s=>s.id===n.id)?Rv(t,{type:1,toast:n}):Rv(t,{type:0,toast:n});case 3:let{toastId:r}=e;return r?eT(r):t.toasts.forEach(s=>{eT(s.id)}),{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},PF=[],Qm={toasts:[],pausedAt:void 0},Fp=t=>{Qm=Rv(Qm,t),PF.forEach(e=>{e(Qm)})},kF=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||SF()}),Eh=t=>(e,n)=>{let r=kF(e,t,n);return Fp({type:2,toast:r}),r.id},we=(t,e)=>Eh("blank")(t,e);we.error=Eh("error");we.success=Eh("success");we.loading=Eh("loading");we.custom=Eh("custom");we.dismiss=t=>{Fp({type:3,toastId:t})};we.remove=t=>Fp({type:4,toastId:t});we.promise=(t,e,n)=>{let r=we.loading(e.loading,{...n,...n==null?void 0:n.loading});return t.then(i=>(we.success(kv(e.success,i),{id:r,...n,...n==null?void 0:n.success}),i)).catch(i=>{we.error(kv(e.error,i),{id:r,...n,...n==null?void 0:n.error})}),t};var RF=os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,DF=os`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,OF=os`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,NF=Po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${RF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${DF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${OF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,LF=os`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,MF=Po("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${LF} 1s linear infinite;
`,VF=os`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,jF=os`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,FF=Po("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${jF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UF=Po("div")`
  position: absolute;
`,$F=Po("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,zF=os`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BF=Po("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${zF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qF=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?N.createElement(BF,null,e):e:n==="blank"?null:N.createElement($F,null,N.createElement(MF,{...r}),n!=="loading"&&N.createElement(UF,null,n==="error"?N.createElement(NF,{...r}):N.createElement(FF,{...r})))},HF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,WF=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,KF="0%{opacity:0;} 100%{opacity:1;}",GF="0%{opacity:1;} 100%{opacity:0;}",QF=Po("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,YF=Po("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,XF=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=bF()?[KF,GF]:[HF(n),WF(n)];return{animation:e?`${os(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${os(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};N.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?XF(t.position||e||"top-center",t.visible):{opacity:0},s=N.createElement(qF,{toast:t}),o=N.createElement(YF,{...t.ariaProps},kv(t.message,t));return N.createElement(QF,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):N.createElement(N.Fragment,null,s,o))});TF(N.createElement);jp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const JF=()=>{var g,w;const t=ka(),e=So(),n=(g=window.location.href.match(/challenge\/([^/]+)/))==null?void 0:g[1],r=n?`/challenge/${n}`:((w=e.state)==null?void 0:w.redirect)||"/lobby",[i,s]=N.useState(""),[o,a]=N.useState(""),[l,c]=N.useState(!1),d=async E=>{E.preventDefault();try{await IN(Ye,i,o),we.success("Bienvenido de nuevo!"),t(r)}catch(A){console.error("Error al iniciar sesin:",A),A.code==="auth/invalid-credential"?we.error("Email o contrasea incorrectos"):A.code==="auth/user-not-found"?we.error("Usuario no encontrado"):A.code==="auth/wrong-password"?we.error("Contrasea incorrecta"):we.error("Error al iniciar sesin")}},p=async()=>{const E=new wi;try{console.log("Iniciando login con Google...");const A=await _b(Ye,E),R=await Ei(Qe(He,"users",A.user.uid));if(console.log("Usuario existe en Firestore:",R.exists()),!R.exists()){console.log("Redirigiendo a complete-profile con redirectTo:",r),t("/complete-profile",{state:{uid:A.user.uid,email:A.user.email,photoURL:A.user.photoURL,redirectTo:r}});return}console.log("Redirigiendo a:",r),t(r)}catch(A){console.error("Error con Google login:",A),we.error("Error al iniciar sesin con Google")}};return v.jsxs("div",{className:"page-container",children:[v.jsx(wh,{}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx(cr,{to:"/",className:"back-button",children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsx("h2",{children:"Ingresa tu email y contrasea"}),v.jsx("p",{className:"auth-subtitle",children:"Esto te permite iniciar sesin en cualquier dispositivo"}),v.jsxs("form",{onSubmit:d,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-envelope"}),v.jsx("input",{type:"email",placeholder:"Email",value:i,onChange:E=>s(E.target.value),required:!0})]})}),v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-lock"}),v.jsx("input",{type:l?"text":"password",placeholder:"Contrasea",value:o,onChange:E=>a(E.target.value),required:!0}),v.jsx("button",{type:"button",className:"toggle-password",onClick:()=>c(!l),children:v.jsx("i",{className:`fas fa-eye${l?"-slash":""}`})})]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Continuar"})]}),v.jsx("div",{className:"auth-divider",children:"O"}),v.jsxs("div",{className:"social-buttons",children:[v.jsxs("button",{className:"btn-social google",onClick:p,children:[v.jsx("i",{className:"fab fa-google"}),"Continuar con Google"]}),v.jsxs("button",{className:"btn-social apple",children:[v.jsx("i",{className:"fab fa-apple"}),"Continuar con Apple"]})]}),v.jsxs("div",{className:"auth-links",children:[v.jsx(cr,{to:"/forgot-password",children:"Olvidaste tu contrasea?"}),v.jsx(cr,{to:"/register",children:"No tienes una cuenta? Regstrate"})]})]})})]})},ZF=()=>{const t=ka(),[e,n]=N.useState({username:"",email:"",password:""}),r=async a=>{if(!/^[a-zA-Z0-9_]{3,15}$/.test(a))return!1;const l=Qe(He,"usernames",a.toLowerCase());return!(await Ei(l)).exists()},i=async(a,l,c,d)=>{try{await Kf(Qe(He,"usernames",l.toLowerCase()),{uid:a}),await Kf(Qe(He,"users",a),{username:l,email:c,createdAt:new Date,rating:1200,photoURL:d||null}),await ob(Ye.currentUser,{displayName:l,photoURL:d||null})}catch(p){throw console.error("Error guardando datos de usuario:",p),p}},s=async a=>{a.preventDefault();try{if(!await r(e.username)){we.error("Nombre de usuario no vlido o ya est en uso");return}const c=await TN(Ye,e.email,e.password);await i(c.user.uid,e.username,e.email),we.success("Cuenta creada exitosamente!"),t("/lobby")}catch(l){l.code==="auth/email-already-in-use"?we.error("Este email ya est registrado"):we.error("Error al crear la cuenta")}},o=async()=>{var a,l;try{const c=new wi,d=await _b(Ye,c);let p=((a=d.user.email)==null?void 0:a.split("@")[0])||"",g=await r(p),w=1;for(;!g&&w<100;)p=`${(l=d.user.email)==null?void 0:l.split("@")[0]}_${w}`,g=await r(p),w++;if(!g){we.error("No se pudo generar un nombre de usuario nico");return}await i(d.user.uid,p,d.user.email,d.user.photoURL||void 0),we.success("Cuenta creada exitosamente!"),t("/lobby")}catch(c){c.code==="auth/popup-closed-by-user"?we.error("Registro cancelado"):we.error("Error al registrarse con Google")}};return v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx(cr,{to:"/",className:"back-button",children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsxs(cr,{to:"/",className:"logo",children:[v.jsx("i",{className:"fas fa-chess-knight logo-icon"}),v.jsxs("div",{className:"logo-text",children:[v.jsx("span",{className:"logo-chess",children:"CHESS"}),v.jsx("span",{className:"logo-match",children:"MATCH"})]})]}),v.jsx("h2",{children:"Crear cuenta"}),v.jsx("p",{className:"auth-subtitle",children:"Este es el nombre que vern tus amigos y otros jugadores"}),v.jsxs("form",{onSubmit:s,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-user"}),v.jsx("input",{type:"text",placeholder:"Nombre de usuario",value:e.username,onChange:a=>n({...e,username:a.target.value}),required:!0,minLength:3,maxLength:15,pattern:"^[a-zA-Z0-9_]+$",title:"El nombre de usuario debe tener entre 3 y 15 caracteres y solo puede contener letras, nmeros y guiones bajos"})]})}),v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-envelope"}),v.jsx("input",{type:"email",placeholder:"Email",value:e.email,onChange:a=>n({...e,email:a.target.value}),required:!0})]})}),v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-lock"}),v.jsx("input",{type:"password",placeholder:"Contrasea",value:e.password,onChange:a=>n({...e,password:a.target.value}),required:!0})]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Crear cuenta"})]}),v.jsx("div",{className:"auth-divider",children:"O"}),v.jsxs("div",{className:"social-buttons",children:[v.jsxs("button",{className:"btn-social google",onClick:o,children:[v.jsx("i",{className:"fab fa-google"}),"Continuar con Google"]}),v.jsxs("button",{className:"btn-social apple",children:[v.jsx("i",{className:"fab fa-apple"}),"Continuar con Apple"]})]}),v.jsx("div",{className:"auth-links",children:v.jsx(cr,{to:"/login",children:"Ya tienes una cuenta? Inicia sesin"})})]})})},eU=()=>{const[t,e]=N.useState(""),[n,r]=N.useState(!1),i=s=>{s.preventDefault(),console.log("Recuperar contrasea para:",t),r(!0)};return v.jsxs("div",{className:"page-container",children:[v.jsx(wh,{}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx(cr,{to:"/login",className:"back-button",children:v.jsx("i",{className:"fas fa-arrow-left"})}),n?v.jsxs("div",{className:"success-message",children:[v.jsx("i",{className:"fas fa-check-circle"}),v.jsx("h2",{children:"Email enviado!"}),v.jsxs("p",{children:["Hemos enviado las instrucciones para restablecer tu contrasea a ",t]}),v.jsx("p",{className:"small",children:"Si no recibes el email en unos minutos, revisa tu carpeta de spam"}),v.jsx(cr,{to:"/login",className:"btn-continue",children:"Volver al inicio de sesin"})]}):v.jsxs(v.Fragment,{children:[v.jsx("h2",{children:"Recuperar contrasea"}),v.jsx("p",{className:"auth-subtitle",children:"Ingresa tu email y te enviaremos instrucciones para restablecer tu contrasea"}),v.jsxs("form",{onSubmit:i,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-envelope"}),v.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:s=>e(s.target.value),required:!0})]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Enviar instrucciones"})]})]})]})})]})},eh=[{name:"Bullet",time:1,increment:0},{name:"Bullet",time:1,increment:1},{name:"Blitz",time:3,increment:0},{name:"Blitz",time:3,increment:2},{name:"Blitz",time:5,increment:0},{name:"Blitz",time:5,increment:3},{name:"Rpida",time:10,increment:0},{name:"Rpida",time:15,increment:10},{name:"Clsica",time:30,increment:0}];eh.find(t=>t.time===3&&t.increment===2)||eh[0];const tU=({selectedOption:t,options:e,onChange:n})=>{const r=Array.from(new Set(e.map(i=>i.name)));return v.jsxs("div",{className:"time-control",children:[v.jsx("h3",{children:"Control de Tiempo"}),r.map(i=>v.jsxs("div",{className:"time-category",children:[v.jsx("span",{children:i}),v.jsx("div",{className:"time-category-options",children:e.filter(s=>s.name===i).map(s=>v.jsxs("button",{className:`time-option ${s.time===t.time&&s.increment===t.increment?"selected":""}`,onClick:()=>n(s),children:[v.jsx("span",{className:"time",children:`${s.time}+${s.increment}`}),v.jsx("span",{className:"name",children:s.name})]},`${s.time}-${s.increment}`))})]},i))]})},Xx=({selectedCount:t,onChange:e})=>{const n=[1,3,5,7,10];return v.jsxs("div",{className:"game-count-container",children:[v.jsx("h3",{children:"Nmero de partidas"}),v.jsx("div",{className:"game-count-options",children:n.map(r=>v.jsx("button",{className:`game-count-button ${t===r?"active":""}`,onClick:()=>e(r),children:r===1?"1 partida":`Al mejor de ${r}`},r))})]})},nU=({config:t,onChange:e})=>v.jsxs("div",{className:"match-settings",children:[v.jsx(tU,{selectedOption:t.timeControl,options:eh,onChange:n=>e({...t,timeControl:n})}),v.jsx(Xx,{selectedCount:t.numberOfGames,onChange:n=>e({...t,numberOfGames:n})}),v.jsxs("div",{className:"setting-group",children:[v.jsx("h3",{children:"Tipo de Match"}),v.jsxs("div",{className:"toggle-group",children:[v.jsx("button",{className:t.rated?"selected":"",onClick:()=>e({...t,rated:!0}),children:"Clasificatorio"}),v.jsx("button",{className:t.rated?"":"selected",onClick:()=>e({...t,rated:!1}),children:"Amistoso"})]})]}),v.jsxs("div",{className:"setting-group",children:[v.jsx("h3",{children:"Color de Piezas"}),v.jsxs("div",{className:"color-selector",children:[v.jsxs("button",{className:t.color==="random"?"selected":"",onClick:()=>e({...t,color:"random"}),children:[v.jsx("i",{className:"fas fa-random"}),"Aleatorio"]}),v.jsxs("button",{className:t.color==="white"?"selected":"",onClick:()=>e({...t,color:"white"}),children:[v.jsx("i",{className:"fas fa-chess-pawn"}),"Blancas"]}),v.jsxs("button",{className:t.color==="black"?"selected":"",onClick:()=>e({...t,color:"black"}),children:[v.jsx("i",{className:"fas fa-chess-pawn chess-piece-black"}),"Negras"]})]})]})]}),rU=({challengeId:t,challenge:e})=>{const n=ka(),[r,i]=N.useState(null),[s,o]=N.useState({timeControl:eh.find(c=>c.time===3&&c.increment===2)||eh[0],numberOfGames:3,rated:!0,color:"random"});N.useEffect(()=>{const c=ab(Ye,p=>{p||n("/login")});return(async()=>{if(Ye.currentUser){const p=await Ei(Qe(He,"users",Ye.currentUser.uid));p.exists()&&i(p.data())}})(),()=>c()},[n]);const a=async()=>{try{if(!Ye.currentUser||!(r!=null&&r.username)){we.error("Debes iniciar sesin para crear un reto"),n("/login");return}const c=s.timeControl.time*60,d={createdBy:Ye.currentUser.uid,creatorUsername:r.username,createdAt:wv(),config:s,status:"waiting",currentGame:1,gameStarted:!1,timeLeft:{white:c,black:c},players:{white:null,black:null},currentTurn:"white",fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1"},p=await o3(B5(He,"challenges"),d);we.success("Reto creado!"),n(`/challenge/${p.id}`)}catch(c){console.error("Error al crear reto:",c),we.error("Error al crear el reto")}},l=async()=>{if(!(!t||!Ye.currentUser))try{const c=e!=null&&e.players.white?"black":"white";await xr(Qe(He,"challenges",t),{[`players.${c}`]:Ye.currentUser.uid}),n(`/challenge/${t}`)}catch{we.error("Error al unirse al juego")}};return N.useEffect(()=>{e&&(!e.players.white||!e.players.black)&&l()},[e,t]),v.jsx("div",{className:"lobby-container",children:t?v.jsxs("div",{className:"waiting-screen",children:[v.jsx("h2",{children:"Esperando jugadores..."}),v.jsx("div",{className:"spinner"})]}):v.jsxs("div",{className:"create-challenge",children:[v.jsx("h2",{children:"Crear nuevo reto"}),v.jsx(nU,{config:s,onChange:o}),v.jsx(Xx,{selectedCount:s.numberOfGames,onChange:c=>o({...s,numberOfGames:c})}),v.jsx("button",{className:"create-button",onClick:a,children:"Crear Reto"})]})})},iU=()=>{new Audio("/sounds/game-start.mp3").play().catch(e=>console.error("Error reproduciendo sonido:",e))},sU=({whitePlayer:t,blackPlayer:e,numberOfGames:n,results:r=[],currentGame:i})=>{const s=Mv.useMemo(()=>{const o=[...r].filter(c=>c!==null),a=o.reduce((c,d)=>d?d==="1-0"?c+1:d==="0-1"?c+0:d==="-"?c+.5:c:c,0),l=o.reduce((c,d)=>d?d==="0-1"?c+1:d==="1-0"?c+0:d==="-"?c+.5:c:c,0);return{whiteScore:Number(a.toFixed(1)),blackScore:Number(l.toFixed(1))}},[r]);return v.jsx("div",{className:"table-responsive",children:v.jsxs("table",{className:"table table-dark table-bordered align-middle",children:[v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{scope:"col",children:"Jugador"}),Array(n).fill(null).map((o,a)=>v.jsx("th",{scope:"col",className:"text-center",children:a+1},a)),v.jsx("th",{scope:"col",className:"text-center",children:"Total"})]})}),v.jsxs("tbody",{children:[v.jsxs("tr",{className:i%2===1?"table-active":"",children:[v.jsxs("th",{scope:"row",className:"text-white",children:[v.jsx("i",{className:"fas fa-chess-king text-white me-2"}),t]}),Array(n).fill(null).map((o,a)=>v.jsx("td",{className:`text-center ${a+1===i?"current-game":""}`,children:r[a]?r[a]==="1-0"?"1":r[a]==="0-1"?"0":"":"-"},a)),v.jsx("td",{className:"text-center fw-bold",children:s.whiteScore})]}),v.jsxs("tr",{className:i%2===0?"table-active":"",children:[v.jsxs("th",{scope:"row",className:"text-white",children:[v.jsx("i",{className:"fas fa-chess-king text-secondary me-2"}),e]}),Array(n).fill(null).map((o,a)=>v.jsx("td",{className:`text-center ${a+1===i?"current-game":""}`,children:r[a]?r[a]==="0-1"?"1":r[a]==="1-0"?"0":"":"-"},a)),v.jsx("td",{className:"text-center fw-bold",children:s.blackScore})]})]})]})})},oU=Mv.memo(sU),aU=({isOpen:t,gameResult:e,reason:n,whiteScore:r,blackScore:i,currentGame:s,totalGames:o,onNextGame:a,readyForNextGame:l,playerColor:c})=>{if(!t)return null;const d=()=>{switch(n){case"checkmate":return"Jaque Mate";case"timeout":return"Tiempo Agotado";case"draw":return"Tablas";case"resignation":return"Abandono";default:return"Partida Finalizada"}},p=r>o/2||i>o/2,g=c?l[c]:!1;l.white&&l.black;const w=()=>c?l[c]?"Esperando al oponente...":l[c==="white"?"black":"white"]?"Comenzar siguiente partida":"Listo para siguiente partida":"";return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"game-over-modal",children:[v.jsx("h2",{children:"Fin de la Partida"}),v.jsxs("div",{className:"result-info",children:[v.jsx("p",{className:"reason",children:d()}),v.jsxs("p",{className:"score",children:["Resultado: ",e]}),v.jsxs("div",{className:"match-score",children:[v.jsx("p",{children:"Puntuacin del Match"}),v.jsxs("p",{className:"score-numbers",children:[Number(r).toFixed(1)," - ",Number(i).toFixed(1)]})]}),!p&&s<o&&v.jsx("button",{className:`btn btn-primary next-game-btn ${g?"confirmed":""}`,onClick:a,disabled:g,children:w()}),p&&v.jsxs("p",{className:"match-finished",children:["Match finalizado! ",r>i?"Victoria Blancas":"Victoria Negras"]})]})]})})},lU=()=>{var Re,ze,ot,kt,Ge,fe,re,mn,gn,wt,Lt,ln,Ur,vn,Ht,ps,si;const[t,e]=N.useState(new zi),[n,r]=N.useState(!1),[i,s]=N.useState(null),[o,a]=N.useState(!0),[l,c]=N.useState({isCreator:!1,gameStarted:!1,timeWhite:0,timeBlack:0,currentGame:1,totalGames:1,challenge:null,isWhiteTurn:!0,isLoading:!0,error:null,players:{white:null,black:null,whiteUsername:null,blackUsername:null},results:[],gameFinished:!1}),{challengeId:d}=ED(),p=ka(),[g,w]=N.useState(!1),[E,A]=N.useState(0),[R,x]=N.useState(!1),[T,I]=N.useState(null),[M,B]=N.useState(null),[W,P]=N.useState(null),[C,k]=N.useState({}),[O,L]=N.useState(null);N.useEffect(()=>{if(console.log("Iniciando efecto con challengeId:",d),!d)return;(async()=>{try{const de=Qe(He,"challenges",d),_e=await Ei(de);if(!_e.exists()){we.error("Reto no encontrado"),p("/");return}const Oe=_e.data();console.log("Datos del reto cargados:",Oe);const Je=(Oe.config.timeControl.time||0)*60;if(A(Je),c(Ue=>({...Ue,challenge:{id:d,...Oe},timeWhite:Je,timeBlack:Je,isLoading:!1,gameStarted:Oe.gameStarted||!1})),Ye.currentUser){const Ue=Oe.players.white===Ye.currentUser.uid,We=Oe.players.black===Ye.currentUser.uid;if(Ue)s("white");else if(We)s("black");else if(!Oe.players.white||!Oe.players.black){const at=Oe.players.white?"black":"white";await j(at)}}w(Oe.gameStarted||!1),a(!1)}catch(de){console.error("Error cargando el reto:",de),a(!1)}})();const me=qu(Qe(He,"challenges",d),async de=>{if(!de.exists())return;const _e=de.data();if(_e.players.white&&_e.players.black&&!_e.gameStarted&&(iU(),await xr(Qe(He,"challenges",d),{gameStarted:!0,startedAt:wv()})),_e.players.white&&_e.players.white!==l.players.white){const Ue=await Ei(Qe(He,"users",_e.players.white));Ue.exists()&&c(We=>({...We,players:{...We.players,white:_e.players.white,whiteUsername:Ue.data().username}}))}if(_e.players.black&&_e.players.black!==l.players.black){const Ue=await Ei(Qe(He,"users",_e.players.black));Ue.exists()&&c(We=>({...We,players:{...We.players,black:_e.players.black,blackUsername:Ue.data().username}}))}w(_e.gameStarted||!1)});return()=>me()},[d]);const j=async le=>{if(!(!d||!Ye.currentUser))try{const me=Qe(He,"challenges",d);await xr(me,{[`players.${le}`]:Ye.currentUser.uid,...le==="black"?{gameStarted:!0}:{}}),s(le),we.success("Te has unido al juego")}catch(me){console.error("Error al unirse al juego:",me),we.error("Error al unirse al juego")}};if(N.useEffect(()=>{!l.gameStarted||l.challenge},[l.gameStarted,l.challenge]),N.useEffect(()=>{(async()=>{if(l.players.white){const me=await Ei(Qe(He,"users",l.players.white));me.exists()&&c(de=>({...de,players:{...de.players,whiteUsername:me.data().username}}))}if(l.players.black){const me=await Ei(Qe(He,"users",l.players.black));me.exists()&&c(de=>({...de,players:{...de.players,blackUsername:me.data().username}}))}})()},[l.players.white,l.players.black]),N.useEffect(()=>{console.log("Estado del challenge:",{isLoading:o,challengeState:l,playerColor:i,game:t==null?void 0:t.fen()})},[o,l,i,t]),N.useEffect(()=>{if(!d)return;const le=qu(Qe(He,"challenges",d),me=>{const de=me.data();if(!de)return;const _e=new zi(de.fen||"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1");if(e(_e),de.drawOffer?L(de.drawOffer.offeredBy):L(null),de.status==="completed"&&de.endReason==="resignation"){const Je=de.winner==="white"?"1-0":"0-1";I(Je),x(!0),we.success(`${de.winner===i?"Has ganado!":"Tu oponente ha abandonado"}`)}const Oe=i===(_e.turn()==="w"?"white":"black");r(Oe)});return()=>le()},[d,i]),N.useEffect(()=>{if(!l.challenge)return;const le=l.challenge.players.white&&l.challenge.players.black;w(!!le),console.log("Estado del juego:",{hasAllPlayers:le,players:l.challenge.players,gameStarted:g})},[l.challenge]),N.useEffect(()=>{if(!d)return;const le=qu(Qe(He,"challenges",d),async me=>{var _e,Oe;const de=me.data();if(de&&(_e=de.readyForNextGame)!=null&&_e.white&&(Oe=de.readyForNextGame)!=null&&Oe.black){const Je=new zi;e(Je),x(!1),await xr(me.ref,{fen:Je.fen(),status:"active",drawOffer:null,readyForNextGame:null,currentGame:(de.currentGame||1)+1,gameStarted:!0,currentTurn:"white","timeLeft.white":E,"timeLeft.black":E}),I(null),L(null),w(!0),r(i==="white")}});return()=>le()},[d,E,i]),N.useEffect(()=>{if(!d)return;const le=qu(Qe(He,"challenges",d),me=>{const de=me.data();de&&de.status==="completed"&&(I(de.result),B(de.endReason),x(!0),c(_e=>{var Oe,Je,Ue;return{..._e,challenge:{..._e.challenge,whiteScore:((Oe=de.score)==null?void 0:Oe.white)||0,blackScore:((Je=de.score)==null?void 0:Je.black)||0,results:[...((Ue=_e.challenge)==null?void 0:Ue.results)||[],de.result]}}}))});return()=>le()},[d]),N.useEffect(()=>{if(!d)return;const le=qu(Qe(He,"challenges",d),me=>{const de=me.data();de&&c(_e=>{var Oe;return JSON.stringify((Oe=_e.challenge)==null?void 0:Oe.results)===JSON.stringify(de.results)?_e:{..._e,challenge:{..._e.challenge,id:d,...de},currentGame:de.currentGame||1,results:de.results||[]}})});return()=>le()},[d]),o)return v.jsx("div",{className:"loading",children:"Cargando reto..."});const D=(le,me)=>{try{if(t.move({from:le,to:me,promotion:"q"})&&d){if(t.isCheckmate()){const _e=t.turn()==="w"?"black":"white",Oe=_e==="white"?"1-0":"0-1";xr(Qe(He,"challenges",d),{status:"completed",result:Oe,endReason:"checkmate",winner:_e,[`score.${_e}`]:a3(1)}),I(Oe),B("checkmate"),x(!0)}return xr(Qe(He,"challenges",d),{fen:t.fen(),lastMove:{from:le,to:me},currentTurn:t.turn()==="w"?"white":"black"}),!0}return!1}catch(de){return console.error("Error en makeMove:",de),!1}},vt=async()=>{if(!(!d||!Ye.currentUser))try{const le=Qe(He,"challenges",d);await xr(le,{drawOffer:{offeredBy:Ye.currentUser.uid,offeredAt:Date.now()}}),L(Ye.currentUser.uid),we.success("Oferta de tablas enviada")}catch{we.error("Error al ofrecer tablas")}},St=async le=>{if(!(!d||!Ye.currentUser))try{const me=Qe(He,"challenges",d);le?(await xr(me,{status:"completed",result:"-",endReason:"draw_agreed",drawOffer:null,completedAt:wv()}),I("-"),B("draw"),x(!0),we.success("Tablas acordadas")):(await xr(me,{drawOffer:null}),we("Oferta de tablas rechazada",{icon:""})),L(null)}catch{we.error("Error al responder a la oferta de tablas")}},Ut=async()=>{if(!(!d||!Ye.currentUser))try{const le=Qe(He,"challenges",d);await xr(le,{status:"completed",winner:i==="white"?"black":"white",result:i==="white"?"0-1":"1-0",endReason:"resignation"}),we.success("Has abandonado la partida")}catch{we.error("Error al abandonar la partida")}},Xe=async(le,me)=>{if(!d||!g||!(t.turn()==="w"&&le==="white"||t.turn()==="b"&&le==="black"))return;const _e=`time${le.charAt(0).toUpperCase()+le.slice(1)}`,Oe=l[_e]||0;if(Math.abs(Oe-me)>=1e3){c(Je=>({...Je,[_e]:me}));try{await xr(Qe(He,"challenges",d),{[`timeLeft.${le}`]:me})}catch(Je){console.error("Error updating time:",Je)}}},X=async le=>{I(le==="white"?"0-1":"1-0"),B("timeout"),x(!0)},ce=async()=>{if(!(!d||!i))try{await xr(Qe(He,"challenges",d),{[`readyForNextGame.${i}`]:!0})}catch(le){console.error("Error al preparar nueva partida:",le),we.error("Error al preparar nueva partida")}},z=(le,me,de)=>!l.players.black||!l.players.white?(we.error("Esperando al oponente para comenzar"),!1):D(le,me),Ve=le=>{if(!l.players.black||!l.players.white){we.error("Esperando al oponente para comenzar");return}if(n)if(W===null){const me=t.get(le);me&&me.color===(i==="white"?"w":"b")&&P(le)}else if(le===W)P(null);else{const me=D(W,le);return P(null),me}};return v.jsxs("div",{className:"challenge-container",children:[v.jsx(wh,{}),v.jsx("div",{className:"challenge-content container-fluid pt-5",children:v.jsxs("div",{className:"row",children:[v.jsxs("div",{className:"col-12 col-lg-8",children:[i==="black"?v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box white mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.whiteUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Tl,{timeInMinutes:((Re=l.challenge)==null?void 0:Re.config.timeControl.time)||0,increment:((ze=l.challenge)==null?void 0:ze.config.timeControl.increment)||0,isActive:g&&t.turn()==="w",color:"white",onTimeout:async()=>await X("black"),onTimeUpdate:le=>Xe("white",le),remainingTime:l.timeWhite})})]})})}):v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box black mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.blackUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Tl,{timeInMinutes:((ot=l.challenge)==null?void 0:ot.config.timeControl.time)||0,increment:((kt=l.challenge)==null?void 0:kt.config.timeControl.increment)||0,isActive:g&&t.turn()==="b",color:"black",onTimeout:async()=>await X("white"),onTimeUpdate:le=>Xe("black",le),remainingTime:l.timeBlack})})]})})}),v.jsx("div",{className:"board-wrapper mb-3",children:v.jsx("div",{className:"board-container",children:v.jsx(Wx,{position:t.fen(),onPieceDrop:z,onSquareClick:Ve,boardOrientation:i==="black"?"black":"white",customBoardStyle:{borderRadius:"4px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.3)"},customSquareStyles:{...W&&{[W]:{backgroundColor:"rgba(255, 140, 66, 0.4)"}}}})})}),i==="black"?v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box black mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.blackUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Tl,{timeInMinutes:((Ge=l.challenge)==null?void 0:Ge.config.timeControl.time)||0,increment:((fe=l.challenge)==null?void 0:fe.config.timeControl.increment)||0,isActive:g&&t.turn()==="b",color:"black",onTimeout:async()=>await X("white"),onTimeUpdate:le=>Xe("black",le),remainingTime:l.timeBlack})})]})})}):v.jsx(v.Fragment,{children:v.jsx("div",{className:"player-box white mb-3",children:v.jsxs("div",{className:"row align-items-center w-100",children:[v.jsx("div",{className:"col text-center",children:v.jsxs("div",{className:"player-info",children:[v.jsx("span",{className:"player-name text-black",children:l.players.whiteUsername||"Esperando..."}),v.jsxs("span",{className:"player-rating",children:[v.jsx("i",{className:"fas fa-star me-1"}),"1500"]})]})}),v.jsx("div",{className:"col-auto",children:v.jsx(Tl,{timeInMinutes:((re=l.challenge)==null?void 0:re.config.timeControl.time)||0,increment:((mn=l.challenge)==null?void 0:mn.config.timeControl.increment)||0,isActive:g&&t.turn()==="w",color:"white",onTimeout:async()=>await X("black"),onTimeUpdate:le=>Xe("white",le),remainingTime:l.timeWhite})})]})})})]}),v.jsx("div",{className:"col-12 col-lg-4",children:v.jsxs("div",{className:"card bg-dark text-light",children:[v.jsx("div",{className:"card-header",children:v.jsx("div",{className:"d-flex justify-content-between align-items-center",children:v.jsxs("div",{className:"game-info",children:[v.jsx("i",{className:"fas fa-chess me-2"}),v.jsxs("span",{children:["Partida ",l.currentGame," de ",(gn=l.challenge)==null?void 0:gn.config.numberOfGames]})]})})}),v.jsxs("div",{className:"card-body",children:[v.jsx(oU,{whitePlayer:l.players.whiteUsername,blackPlayer:l.players.blackUsername,numberOfGames:((wt=l.challenge)==null?void 0:wt.config.numberOfGames)||1,results:((Lt=l.challenge)==null?void 0:Lt.results)||[],currentGame:l.currentGame}),v.jsx("div",{className:"game-controls mt-4",children:O&&O!==((ln=Ye.currentUser)==null?void 0:ln.uid)?v.jsxs("div",{className:"game-actions",children:[v.jsxs("button",{className:"action-button draw-button",onClick:()=>St(!0),children:[v.jsx("i",{className:"fas fa-handshake"}),"Aceptar tablas"]}),v.jsxs("button",{className:"action-button resign-button",onClick:()=>St(!1),children:[v.jsx("i",{className:"fas fa-times"}),"Rechazar tablas"]})]}):v.jsxs("div",{className:"game-actions",children:[v.jsxs("button",{className:"action-button draw-button",onClick:()=>vt(),disabled:!g||!!O,children:[v.jsx("i",{className:"fas fa-handshake"}),O===((Ur=Ye.currentUser)==null?void 0:Ur.uid)?"Tablas ofrecidas":"Ofrecer Tablas"]}),v.jsxs("button",{className:"action-button resign-button",onClick:()=>Ut(),disabled:!g,children:[v.jsx("i",{className:"fas fa-flag"}),"Abandonar"]})]})})]})]})})]})}),v.jsx(aU,{isOpen:R,gameResult:T,reason:M??"checkmate",whiteScore:((vn=l.challenge)==null?void 0:vn.whiteScore)||0,blackScore:((Ht=l.challenge)==null?void 0:Ht.blackScore)||0,currentGame:l.currentGame,totalGames:((ps=l.challenge)==null?void 0:ps.config.numberOfGames)||1,onNextGame:ce,readyForNextGame:((si=l.challenge)==null?void 0:si.readyForNextGame)||{},playerColor:i})]})},uU=()=>{const t=ka(),e=So(),{uid:n,email:r,photoURL:i}=e.state||{},[s,o]=N.useState(""),a=async c=>{if(!/^[a-zA-Z0-9_]{3,15}$/.test(c))return!1;const d=Qe(He,"usernames",c.toLowerCase());return!(await Ei(d)).exists()},l=async c=>{c.preventDefault();try{if(!await a(s)){we.error("Nombre de usuario no vlido o ya est en uso");return}await Kf(Qe(He,"usernames",s.toLowerCase()),{uid:n}),await Kf(Qe(He,"users",n),{username:s,email:r,createdAt:new Date,rating:1200,photoURL:i||null}),Ye.currentUser&&await ob(Ye.currentUser,{displayName:s}),we.success("Perfil completado!"),t("/lobby")}catch(d){console.error("Error al guardar el perfil:",d),we.error("Error al guardar el perfil")}};return v.jsxs("div",{className:"page-container",children:[v.jsx(wh,{}),v.jsx("div",{className:"auth-container",children:v.jsxs("div",{className:"auth-card",children:[v.jsx("h2",{children:"Completa tu perfil"}),v.jsx("p",{className:"auth-subtitle",children:"Solo necesitamos un nombre de usuario para continuar"}),v.jsxs("form",{onSubmit:l,children:[v.jsx("div",{className:"form-group",children:v.jsxs("div",{className:"input-icon",children:[v.jsx("i",{className:"fas fa-user"}),v.jsx("input",{type:"text",placeholder:"Nombre de usuario",value:s,onChange:c=>o(c.target.value),required:!0,minLength:3,maxLength:15,pattern:"^[a-zA-Z0-9_]+$",title:"El nombre de usuario debe tener entre 3 y 15 caracteres y solo puede contener letras, nmeros y guiones bajos"})]})}),v.jsx("div",{className:"form-info",children:v.jsxs("p",{children:["Email: ",r]})}),v.jsx("button",{type:"submit",className:"btn-continue",children:"Completar perfil"})]})]})})]})},Id=({children:t})=>{var o;const[e,n]=N.useState("loading"),r=So(),i=(o=window.location.href.match(/challenge\/([^/]+)/))==null?void 0:o[1],s=i?`/login?challenge=${i}`:"/login";return N.useEffect(()=>{const a=ab(Ye,l=>{n(l?"authenticated":"unauthenticated")});return()=>a()},[]),e==="loading"?v.jsx("div",{children:"Cargando..."}):e==="unauthenticated"?v.jsx(IS,{to:s,state:{redirect:r.pathname},replace:!0}):v.jsx(v.Fragment,{children:t})};function cU(){return v.jsx(mF,{children:v.jsx(qD,{basename:"/chess_match",children:v.jsx("div",{className:"app-container",children:v.jsxs(VD,{children:[v.jsx(On,{index:!0,element:v.jsx(J1,{})}),v.jsx(On,{path:"/",element:v.jsx(J1,{})}),v.jsx(On,{path:"/login",element:v.jsx(JF,{})}),v.jsx(On,{path:"/register",element:v.jsx(ZF,{})}),v.jsx(On,{path:"/forgot-password",element:v.jsx(eU,{})}),v.jsx(On,{path:"/lobby",element:v.jsx(Id,{children:v.jsx(rU,{})})}),v.jsx(On,{path:"/challenge/:challengeId",element:v.jsx(Id,{children:v.jsx(lU,{})})}),v.jsxs(On,{path:"/play",children:[v.jsx(On,{path:"computer",element:v.jsx(sc,{})}),v.jsx(On,{path:"online",element:v.jsx(Id,{children:v.jsx(sc,{})})}),v.jsx(On,{path:"friend",element:v.jsx(Id,{children:v.jsx(sc,{})})}),v.jsx(On,{path:"puzzle",element:v.jsx(sc,{isPuzzle:!0})})]}),v.jsx(On,{path:"/complete-profile",element:v.jsx(uU,{})}),v.jsx(On,{path:"*",element:v.jsx(IS,{to:"/",replace:!0})})]})})})})}const Jx=document.getElementById("root");if(!Jx)throw new Error("No se encontr el elemento root en el DOM");try{fS(Jx).render(v.jsx(N.StrictMode,{children:v.jsx(cU,{})})),console.log("Aplicacin iniciada correctamente")}catch(t){console.error("Error al iniciar la aplicacin:",t)}
